{"file_contents":{"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/App.tsx":{"content":"import { useEffect, lazy, Suspense } from \"react\";\nimport { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { HelmetProvider } from \"react-helmet-async\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { LanguageProvider } from \"@/contexts/LanguageContext\";\nimport { AuthProvider } from \"@/contexts/AuthContext\";\nimport { initGA } from \"@/lib/analytics\";\nimport { useAnalytics } from \"@/hooks/use-analytics\";\nimport { useTranslation } from \"react-i18next\";\n\n// User pages\nconst MainScreen = lazy(() => import(\"@/pages/MainScreen\"));\nconst AIPage = lazy(() => import(\"@/pages/AIPage\"));\nconst ContentPage = lazy(() => import(\"@/pages/ContentPage\"));\nconst MyPage = lazy(() => import(\"@/pages/MyPage\"));\nconst RestaurantDetailPage = lazy(() => import(\"@/pages/RestaurantDetailPage\"));\nconst DashboardPage = lazy(() => import(\"@/pages/DashboardPage\"));\nconst AuthPage = lazy(() => import(\"@/pages/AuthPage\"));\nconst NotFound = lazy(() => import(\"@/pages/not-found\"));\n\n// Admin pages (wrapped with AdminLayout)\nimport {\n  AdminDashboard,\n  AdminRestaurants,\n  AdminRestaurantApplications,\n  AdminOwnerInquiries,\n  AdminPayments,\n  AdminOwnerNotices,\n  AdminUsers,\n  AdminUsersByTier,\n  AdminUsersAnalytics,\n  AdminReviews,\n  AdminContent,\n  AdminYouTube,\n  AdminBlog,\n  AdminEvents,\n  AdminAnnouncements,\n  AdminCustomerInquiries,\n  AdminPartnershipInquiries,\n} from \"@/pages/admin-pages\";\n\nfunction LoadingFallback() {\n  const { t } = useTranslation();\n  \n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-background\">\n      <div className=\"flex flex-col items-center gap-4\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n        <p className=\"text-sm text-muted-foreground\">{t('common.loading')}</p>\n      </div>\n    </div>\n  );\n}\n\nfunction Router() {\n  useAnalytics();\n  \n  return (\n    <Suspense fallback={<LoadingFallback />}>\n      <Switch>\n        {/* User Routes */}\n        <Route path=\"/\" component={MainScreen} />\n        <Route path=\"/ai\" component={AIPage} />\n        <Route path=\"/chat\" component={AIPage} />\n        <Route path=\"/content\" component={ContentPage} />\n        <Route path=\"/my\" component={MyPage} />\n        <Route path=\"/restaurant/:id\" component={RestaurantDetailPage} />\n        <Route path=\"/dashboard\" component={DashboardPage} />\n        <Route path=\"/login\" component={AuthPage} />\n        \n        {/* Admin Routes - specific routes first */}\n        <Route path=\"/admin/restaurants/applications\" component={AdminRestaurantApplications} />\n        <Route path=\"/admin/restaurants/owner-inquiries\" component={AdminOwnerInquiries} />\n        <Route path=\"/admin/restaurants/payments\" component={AdminPayments} />\n        <Route path=\"/admin/restaurants/owner-notices\" component={AdminOwnerNotices} />\n        <Route path=\"/admin/restaurants\" component={AdminRestaurants} />\n        \n        <Route path=\"/admin/users/tiers\" component={AdminUsersByTier} />\n        <Route path=\"/admin/users/analytics\" component={AdminUsersAnalytics} />\n        <Route path=\"/admin/users\" component={AdminUsers} />\n        \n        <Route path=\"/admin/reviews\" component={AdminReviews} />\n        \n        <Route path=\"/admin/content/youtube\" component={AdminYouTube} />\n        <Route path=\"/admin/content/blog\" component={AdminBlog} />\n        <Route path=\"/admin/content/events\" component={AdminEvents} />\n        <Route path=\"/admin/content/announcements\" component={AdminAnnouncements} />\n        <Route path=\"/admin/content\" component={AdminContent} />\n        \n        <Route path=\"/admin/inquiries/customer\" component={AdminCustomerInquiries} />\n        <Route path=\"/admin/inquiries/partnership\" component={AdminPartnershipInquiries} />\n        \n        <Route path=\"/admin\" component={AdminDashboard} />\n        \n        <Route component={NotFound} />\n      </Switch>\n    </Suspense>\n  );\n}\n\nfunction App() {\n  useEffect(() => {\n    if (!import.meta.env.VITE_GA_MEASUREMENT_ID) {\n      console.warn('Missing required Google Analytics key: VITE_GA_MEASUREMENT_ID');\n    } else {\n      initGA();\n    }\n  }, []);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <HelmetProvider>\n        <AuthProvider>\n          <LanguageProvider>\n            <TooltipProvider>\n              <Toaster />\n              <Router />\n            </TooltipProvider>\n          </LanguageProvider>\n        </AuthProvider>\n      </HelmetProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":4675},"shared/i18n.ts":{"content":"export type Language = \"ko\" | \"en\" | \"ja\" | \"zh-CN\" | \"zh-TW\" | \"es\" | \"fr\" | \"de\" | \"ru\";\n\nexport const languages: { code: Language; name: string; nativeName: string }[] = [\n  { code: \"ko\", name: \"Korean\", nativeName: \"í•œêµ­ì–´\" },\n  { code: \"en\", name: \"English\", nativeName: \"English\" },\n  { code: \"ja\", name: \"Japanese\", nativeName: \"æ—¥æœ¬èª\" },\n  { code: \"zh-CN\", name: \"Chinese (Simplified)\", nativeName: \"ç®€ä½“ä¸­æ–‡\" },\n  { code: \"zh-TW\", name: \"Chinese (Traditional)\", nativeName: \"ç¹é«”ä¸­æ–‡\" },\n  { code: \"es\", name: \"Spanish\", nativeName: \"EspaÃ±ol\" },\n  { code: \"fr\", name: \"French\", nativeName: \"FranÃ§ais\" },\n  { code: \"de\", name: \"German\", nativeName: \"Deutsch\" },\n  { code: \"ru\", name: \"Russian\", nativeName: \"Ğ ÑƒÑÑĞºĞ¸Ğ¹\" },\n];\n\ntype TranslationKey =\n  | \"app.name\"\n  | \"app.tagline\"\n  | \"nav.discover\"\n  | \"nav.ai\"\n  | \"nav.content\"\n  | \"nav.my\"\n  | \"search.placeholder\"\n  | \"search.button\"\n  | \"ai.title\"\n  | \"ai.welcome\"\n  | \"ai.placeholder\"\n  | \"ai.send\"\n  | \"ai.suggestions.vegan\"\n  | \"ai.suggestions.nearby\"\n  | \"ai.suggestions.romantic\"\n  | \"ai.suggestions.special\"\n  | \"content.title\"\n  | \"content.videos\"\n  | \"content.blogs\"\n  | \"content.filter\"\n  | \"content.seeAll\"\n  | \"content.readTime\"\n  | \"content.views\"\n  | \"my.title\"\n  | \"my.editProfile\"\n  | \"my.saved\"\n  | \"my.reviews\"\n  | \"my.visited\"\n  | \"my.following\"\n  | \"my.notifications\"\n  | \"my.settings\"\n  | \"my.terms\"\n  | \"my.recentReviews\"\n  | \"my.seeAll\"\n  | \"discover.aiRecommend\"\n  | \"discover.popular\"\n  | \"discover.trending\"\n  | \"discover.viewAll\"\n  | \"discover.title\"\n  | \"language.select\"\n  | \"restaurant.price\"\n  | \"restaurant.location\"\n  | \"restaurant.about\"\n  | \"restaurant.info\"\n  | \"restaurant.address\"\n  | \"restaurant.phone\"\n  | \"restaurant.hours\"\n  | \"reviews.title\"\n  | \"reviews.write\"\n  | \"reviews.empty\"\n  | \"reviews.beFirst\"\n  | \"review.write\"\n  | \"review.yourRating\"\n  | \"review.yourReview\"\n  | \"review.placeholder\"\n  | \"review.submit\"\n  | \"review.cancel\"\n  | \"review.success\"\n  | \"review.error\"\n  | \"my.profile\"\n  | \"error.notFound\"\n  | \"category.guide\"\n  | \"category.tips\"\n  | \"category.recommendation\"\n  | \"auth.login\"\n  | \"auth.signup\"\n  | \"auth.username\"\n  | \"auth.password\"\n  | \"auth.usernamePlaceholder\"\n  | \"auth.passwordPlaceholder\"\n  | \"auth.loginSuccess\"\n  | \"auth.signupSuccess\"\n  | \"auth.loginError\"\n  | \"auth.signupError\"\n  | \"auth.error\"\n  | \"auth.fillAllFields\"\n  | \"auth.usernameMinLength\"\n  | \"auth.passwordMinLength\"\n  | \"auth.loginSubtitle\"\n  | \"auth.signupSubtitle\"\n  | \"auth.noAccount\"\n  | \"auth.hasAccount\"\n  | \"auth.loginDescription\"\n  | \"auth.signupDescription\"\n  | \"announcements.title\"\n  | \"announcements.viewAll\"\n  | \"announcements.noItems\"\n  | \"events.title\";\n\nexport const translations: Record<Language, Record<TranslationKey, string>> = {\n  ko: {\n    \"app.name\": \"í•œì‹ë‹¹\",\n    \"app.tagline\": \"ë‹¹ì‹ ì˜ ì§„ì •í•œ í•œì‹ ê°€ì´ë“œ\",\n    \"nav.discover\": \"ë°œê²¬\",\n    \"nav.ai\": \"AI ì¶”ì²œ\",\n    \"nav.content\": \"ì½˜í…ì¸ \",\n    \"nav.my\": \"ë§ˆì´\",\n    \"search.placeholder\": \"ë ˆìŠ¤í† ë‘, ìŒì‹ ê²€ìƒ‰...\",\n    \"search.button\": \"ê²€ìƒ‰\",\n    \"ai.title\": \"AI ì»¨ì‹œì–´ì§€\",\n    \"ai.welcome\": \"ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ í•œì‹ë‹¹ AI ì»¨ì‹œì–´ì§€ì…ë‹ˆë‹¤.\\n\\nì–´ë–¤ í•œì‹ë‹¹ì„ ì°¾ìœ¼ì‹œë‚˜ìš”?\",\n    \"ai.placeholder\": \"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\",\n    \"ai.send\": \"ì „ì†¡\",\n    \"ai.suggestions.vegan\": \"ë¹„ê±´ í•œì‹\",\n    \"ai.suggestions.nearby\": \"ê·¼ì²˜ ë§›ì§‘\",\n    \"ai.suggestions.romantic\": \"ë¡œë§¨í‹±í•œ ê³³\",\n    \"ai.suggestions.special\": \"íŠ¹ë³„í•œ ë‚ \",\n    \"content.title\": \"ì½˜í…ì¸ \",\n    \"content.videos\": \"ì¸ê¸° ì˜ìƒ\",\n    \"content.blogs\": \"ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸\",\n    \"content.filter\": \"í•„í„°\",\n    \"content.seeAll\": \"ë”ë³´ê¸°\",\n    \"content.readTime\": \"ë¶„\",\n    \"content.views\": \"ì¡°íšŒìˆ˜\",\n    \"my.title\": \"ë§ˆì´\",\n    \"my.editProfile\": \"í”„ë¡œí•„ í¸ì§‘\",\n    \"my.saved\": \"ì €ì¥í•œ ë§›ì§‘\",\n    \"my.reviews\": \"ë‚´ ë¦¬ë·°\",\n    \"my.visited\": \"ë°©ë¬¸í•œ ê³³\",\n    \"my.following\": \"íŒ”ë¡œì‰\",\n    \"my.notifications\": \"ì•Œë¦¼ ì„¤ì •\",\n    \"my.settings\": \"ì•± ì„¤ì •\",\n    \"my.terms\": \"ì´ìš©ì•½ê´€ & ê°œì¸ì •ë³´\",\n    \"my.recentReviews\": \"ìµœê·¼ ë¦¬ë·°\",\n    \"my.seeAll\": \"ì „ì²´ë³´ê¸°\",\n    \"discover.aiRecommend\": \"AI ë§ì¶¤ ì¶”ì²œ\",\n    \"discover.popular\": \"ì¸ê¸° ë§›ì§‘\",\n    \"discover.trending\": \"íŠ¸ë Œë”©\",\n    \"discover.viewAll\": \"ì „ì²´ë³´ê¸°\",\n    \"discover.title\": \"í•œì‹ë‹¹ ë°œê²¬\",\n    \"language.select\": \"ì–¸ì–´ ì„ íƒ\",\n    \"restaurant.price\": \"ê°€ê²©ëŒ€\",\n    \"restaurant.location\": \"ìœ„ì¹˜\",\n    \"restaurant.about\": \"ì†Œê°œ\",\n    \"restaurant.info\": \"ì •ë³´\",\n    \"restaurant.address\": \"ì£¼ì†Œ\",\n    \"restaurant.phone\": \"ì „í™”ë²ˆí˜¸\",\n    \"restaurant.hours\": \"ì˜ì—…ì‹œê°„\",\n    \"reviews.title\": \"ë¦¬ë·°\",\n    \"reviews.write\": \"ë¦¬ë·° ì‘ì„±\",\n    \"reviews.empty\": \"ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤\",\n    \"reviews.beFirst\": \"ì²« ë¦¬ë·°ë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”!\",\n    \"review.write\": \"ë¦¬ë·° ì‘ì„±\",\n    \"review.yourRating\": \"ë³„ì \",\n    \"review.yourReview\": \"ë¦¬ë·° ì‘ì„±\",\n    \"review.placeholder\": \"ì´ê³³ì— ëŒ€í•œ ê²½í—˜ì„ ê³µìœ í•´ì£¼ì„¸ìš”...\",\n    \"review.submit\": \"ë¦¬ë·° ë“±ë¡\",\n    \"review.cancel\": \"ì·¨ì†Œ\",\n    \"review.success\": \"ë¦¬ë·°ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤\",\n    \"review.error\": \"ë¦¬ë·° ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤\",\n    \"my.profile\": \"ë§ˆì´ í˜ì´ì§€\",\n    \"error.notFound\": \"ë ˆìŠ¤í† ë‘ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\",\n    \"category.guide\": \"ê°€ì´ë“œ\",\n    \"category.tips\": \"íŒ\",\n    \"category.recommendation\": \"ì¶”ì²œ\",\n    \"auth.login\": \"ë¡œê·¸ì¸\",\n    \"auth.signup\": \"íšŒì›ê°€ì…\",\n    \"auth.username\": \"ì‚¬ìš©ìëª…\",\n    \"auth.password\": \"ë¹„ë°€ë²ˆí˜¸\",\n    \"auth.usernamePlaceholder\": \"ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”\",\n    \"auth.passwordPlaceholder\": \"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”\",\n    \"auth.loginSuccess\": \"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤\",\n    \"auth.signupSuccess\": \"íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤\",\n    \"auth.loginError\": \"ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤\",\n    \"auth.signupError\": \"íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤\",\n    \"auth.error\": \"ì˜¤ë¥˜\",\n    \"auth.fillAllFields\": \"ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”\",\n    \"auth.usernameMinLength\": \"ì‚¬ìš©ìëª…ì€ ìµœì†Œ 3ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤\",\n    \"auth.passwordMinLength\": \"ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤\",\n    \"auth.loginSubtitle\": \"ê³„ì •ì— ë¡œê·¸ì¸í•˜ì„¸ìš”\",\n    \"auth.signupSubtitle\": \"ìƒˆ ê³„ì •ì„ ë§Œë“œì„¸ìš”\",\n    \"auth.noAccount\": \"ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ì…í•˜ê¸°\",\n    \"auth.hasAccount\": \"ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°\",\n    \"auth.loginDescription\": \"í•œì‹ë‹¹ì— ë¡œê·¸ì¸í•˜ì—¬ ë§›ì§‘ì„ ì €ì¥í•˜ê³  ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ì„¸ìš”\",\n    \"auth.signupDescription\": \"í•œì‹ë‹¹ì— ê°€ì…í•˜ì—¬ ë§›ì§‘ì„ ì €ì¥í•˜ê³  ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ì„¸ìš”\",\n    \"announcements.title\": \"ê³µì§€ì‚¬í•­\",\n    \"announcements.viewAll\": \"ì „ì²´ë³´ê¸°\",\n    \"announcements.noItems\": \"ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤\",\n    \"events.title\": \"ì§„í–‰ì¤‘ì¸ ì´ë²¤íŠ¸\",\n  },\n  en: {\n    \"app.name\": \"Han Sik Dang\",\n    \"app.tagline\": \"Your personal guide to authentic Korean taste\",\n    \"nav.discover\": \"Discover\",\n    \"nav.ai\": \"AI Guide\",\n    \"nav.content\": \"Content\",\n    \"nav.my\": \"My\",\n    \"search.placeholder\": \"Search restaurants, food...\",\n    \"search.button\": \"Search\",\n    \"ai.title\": \"AI Concierge\",\n    \"ai.welcome\": \"Hello! ğŸ‘‹ I'm your Korean restaurant AI concierge.\\n\\nHow can I help you today?\",\n    \"ai.placeholder\": \"Type your message...\",\n    \"ai.send\": \"Send\",\n    \"ai.suggestions.vegan\": \"Vegan Korean\",\n    \"ai.suggestions.nearby\": \"Near Me\",\n    \"ai.suggestions.romantic\": \"Romantic\",\n    \"ai.suggestions.special\": \"Special Day\",\n    \"content.title\": \"Content\",\n    \"content.videos\": \"Trending Videos\",\n    \"content.blogs\": \"Blog Posts\",\n    \"content.filter\": \"Filter\",\n    \"content.seeAll\": \"See All\",\n    \"content.readTime\": \"min read\",\n    \"content.views\": \"views\",\n    \"my.title\": \"My Page\",\n    \"my.editProfile\": \"Edit Profile\",\n    \"my.saved\": \"Saved Restaurants\",\n    \"my.reviews\": \"My Reviews\",\n    \"my.visited\": \"Visit History\",\n    \"my.following\": \"Following\",\n    \"my.notifications\": \"Notifications\",\n    \"my.settings\": \"App Settings\",\n    \"my.terms\": \"Terms & Privacy\",\n    \"my.recentReviews\": \"Recent Reviews\",\n    \"my.seeAll\": \"See All\",\n    \"discover.aiRecommend\": \"AI Recommendations\",\n    \"discover.popular\": \"Popular Restaurants\",\n    \"discover.trending\": \"Trending Now\",\n    \"discover.viewAll\": \"View All\",\n    \"discover.title\": \"Discover Korean Restaurants\",\n    \"language.select\": \"Select Language\",\n    \"restaurant.price\": \"Price Range\",\n    \"restaurant.location\": \"Location\",\n    \"restaurant.about\": \"About\",\n    \"restaurant.info\": \"Information\",\n    \"restaurant.address\": \"Address\",\n    \"restaurant.phone\": \"Phone\",\n    \"restaurant.hours\": \"Hours\",\n    \"reviews.title\": \"Reviews\",\n    \"reviews.write\": \"Write Review\",\n    \"reviews.empty\": \"No reviews yet\",\n    \"reviews.beFirst\": \"Be the first to review!\",\n    \"review.write\": \"Write Review\",\n    \"review.yourRating\": \"Your Rating\",\n    \"review.yourReview\": \"Your Review\",\n    \"review.placeholder\": \"Share your experience...\",\n    \"review.submit\": \"Submit Review\",\n    \"review.cancel\": \"Cancel\",\n    \"review.success\": \"Review submitted successfully\",\n    \"review.error\": \"Failed to submit review\",\n    \"my.profile\": \"My Profile\",\n    \"error.notFound\": \"Restaurant not found\",\n    \"category.guide\": \"Guide\",\n    \"category.tips\": \"Tips\",\n    \"category.recommendation\": \"Recommendation\",\n    \"auth.login\": \"Login\",\n    \"auth.signup\": \"Sign Up\",\n    \"auth.username\": \"Username\",\n    \"auth.password\": \"Password\",\n    \"auth.usernamePlaceholder\": \"Enter your username\",\n    \"auth.passwordPlaceholder\": \"Enter your password\",\n    \"auth.loginSuccess\": \"Successfully logged in\",\n    \"auth.signupSuccess\": \"Successfully signed up\",\n    \"auth.loginError\": \"Failed to login\",\n    \"auth.signupError\": \"Failed to sign up\",\n    \"auth.error\": \"Error\",\n    \"auth.fillAllFields\": \"Please fill in all fields\",\n    \"auth.usernameMinLength\": \"Username must be at least 3 characters\",\n    \"auth.passwordMinLength\": \"Password must be at least 6 characters\",\n    \"auth.loginSubtitle\": \"Sign in to your account\",\n    \"auth.signupSubtitle\": \"Create a new account\",\n    \"auth.noAccount\": \"Don't have an account? Sign up\",\n    \"auth.hasAccount\": \"Already have an account? Login\",\n    \"auth.loginDescription\": \"Login to save restaurants and write reviews\",\n    \"auth.signupDescription\": \"Sign up to save restaurants and write reviews\",\n    \"announcements.title\": \"Announcements\",\n    \"announcements.viewAll\": \"View All\",\n    \"announcements.noItems\": \"No announcements\",\n    \"events.title\": \"Ongoing Events\",\n  },\n  ja: {\n    \"app.name\": \"éŸ“é£Ÿå ‚\",\n    \"app.tagline\": \"æœ¬æ ¼çš„ãªéŸ“å›½æ–™ç†ã¸ã®ã‚¬ã‚¤ãƒ‰\",\n    \"nav.discover\": \"ç™ºè¦‹\",\n    \"nav.ai\": \"AIã‚¬ã‚¤ãƒ‰\",\n    \"nav.content\": \"ã‚³ãƒ³ãƒ†ãƒ³ãƒ„\",\n    \"nav.my\": \"ãƒã‚¤\",\n    \"search.placeholder\": \"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã€æ–™ç†ã‚’æ¤œç´¢...\",\n    \"search.button\": \"æ¤œç´¢\",\n    \"ai.title\": \"AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥\",\n    \"ai.welcome\": \"ã“ã‚“ã«ã¡ã¯ï¼ğŸ‘‹ éŸ“å›½æ–™ç†AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ã§ã™ã€‚\\n\\nã©ã®ã‚ˆã†ãªãŠæ‰‹ä¼ã„ãŒã§ãã¾ã™ã‹ï¼Ÿ\",\n    \"ai.placeholder\": \"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...\",\n    \"ai.send\": \"é€ä¿¡\",\n    \"ai.suggestions.vegan\": \"ãƒ“ãƒ¼ã‚¬ãƒ³éŸ“å›½æ–™ç†\",\n    \"ai.suggestions.nearby\": \"è¿‘ãã®åº—\",\n    \"ai.suggestions.romantic\": \"ãƒ­ãƒãƒ³ãƒãƒƒã‚¯\",\n    \"ai.suggestions.special\": \"ç‰¹åˆ¥ãªæ—¥\",\n    \"content.title\": \"ã‚³ãƒ³ãƒ†ãƒ³ãƒ„\",\n    \"content.videos\": \"äººæ°—å‹•ç”»\",\n    \"content.blogs\": \"ãƒ–ãƒ­ã‚°è¨˜äº‹\",\n    \"content.filter\": \"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\",\n    \"content.seeAll\": \"ã‚‚ã£ã¨è¦‹ã‚‹\",\n    \"content.readTime\": \"åˆ†\",\n    \"content.views\": \"è¦–è´å›æ•°\",\n    \"my.title\": \"ãƒã‚¤ãƒšãƒ¼ã‚¸\",\n    \"my.editProfile\": \"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†\",\n    \"my.saved\": \"ä¿å­˜ã—ãŸåº—\",\n    \"my.reviews\": \"ãƒã‚¤ãƒ¬ãƒ“ãƒ¥ãƒ¼\",\n    \"my.visited\": \"è¨ªå•å±¥æ­´\",\n    \"my.following\": \"ãƒ•ã‚©ãƒ­ãƒ¼ä¸­\",\n    \"my.notifications\": \"é€šçŸ¥è¨­å®š\",\n    \"my.settings\": \"ã‚¢ãƒ—ãƒªè¨­å®š\",\n    \"my.terms\": \"åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼\",\n    \"my.recentReviews\": \"æœ€è¿‘ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼\",\n    \"my.seeAll\": \"ã™ã¹ã¦è¦‹ã‚‹\",\n    \"discover.aiRecommend\": \"AIãŠã™ã™ã‚\",\n    \"discover.popular\": \"äººæ°—ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³\",\n    \"discover.trending\": \"ãƒˆãƒ¬ãƒ³ãƒ‰\",\n    \"discover.viewAll\": \"ã™ã¹ã¦è¦‹ã‚‹\",\n    \"discover.title\": \"éŸ“å›½ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’ç™ºè¦‹\",\n    \"language.select\": \"è¨€èªé¸æŠ\",\n    \"restaurant.price\": \"ä¾¡æ ¼å¸¯\",\n    \"restaurant.location\": \"å ´æ‰€\",\n    \"restaurant.about\": \"ã«ã¤ã„ã¦\",\n    \"restaurant.info\": \"æƒ…å ±\",\n    \"restaurant.address\": \"ä½æ‰€\",\n    \"restaurant.phone\": \"é›»è©±ç•ªå·\",\n    \"restaurant.hours\": \"å–¶æ¥­æ™‚é–“\",\n    \"reviews.title\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼\",\n    \"reviews.write\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã\",\n    \"reviews.empty\": \"ã¾ã ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“\",\n    \"reviews.beFirst\": \"æœ€åˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã„ã¦ãã ã•ã„ï¼\",\n    \"review.write\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›¸ã\",\n    \"review.yourRating\": \"è©•ä¾¡\",\n    \"review.yourReview\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼\",\n    \"review.placeholder\": \"ä½“é¨“ã‚’å…±æœ‰ã—ã¦ãã ã•ã„...\",\n    \"review.submit\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿\",\n    \"review.cancel\": \"ã‚­ãƒ£ãƒ³ã‚»ãƒ«\",\n    \"review.success\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒæ­£å¸¸ã«æŠ•ç¨¿ã•ã‚Œã¾ã—ãŸ\",\n    \"review.error\": \"ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ\",\n    \"my.profile\": \"ãƒã‚¤ãƒšãƒ¼ã‚¸\",\n    \"error.notFound\": \"ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“\",\n    \"category.guide\": \"ã‚¬ã‚¤ãƒ‰\",\n    \"category.tips\": \"ãƒ’ãƒ³ãƒˆ\",\n    \"category.recommendation\": \"ãŠã™ã™ã‚\",\n    \"auth.login\": \"ãƒ­ã‚°ã‚¤ãƒ³\",\n    \"auth.signup\": \"æ–°è¦ç™»éŒ²\",\n    \"auth.username\": \"ãƒ¦ãƒ¼ã‚¶ãƒ¼å\",\n    \"auth.password\": \"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\",\n    \"auth.usernamePlaceholder\": \"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›\",\n    \"auth.passwordPlaceholder\": \"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›\",\n    \"auth.loginSuccess\": \"ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ\",\n    \"auth.signupSuccess\": \"ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸ\",\n    \"auth.loginError\": \"ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ\",\n    \"auth.signupError\": \"ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ\",\n    \"auth.error\": \"ã‚¨ãƒ©ãƒ¼\",\n    \"auth.fillAllFields\": \"ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\",\n    \"auth.usernameMinLength\": \"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯3æ–‡å­—ä»¥ä¸Šå¿…è¦ã§ã™\",\n    \"auth.passwordMinLength\": \"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šå¿…è¦ã§ã™\",\n    \"auth.loginSubtitle\": \"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³\",\n    \"auth.signupSubtitle\": \"æ–°ã—ã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ\",\n    \"auth.noAccount\": \"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„ã§ã™ã‹ï¼Ÿæ–°è¦ç™»éŒ²\",\n    \"auth.hasAccount\": \"æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ã™ã‹ï¼Ÿãƒ­ã‚°ã‚¤ãƒ³\",\n    \"auth.loginDescription\": \"ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’ä¿å­˜ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¾ã—ã‚‡ã†\",\n    \"auth.signupDescription\": \"æ–°è¦ç™»éŒ²ã—ã¦ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’ä¿å­˜ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã—ã¾ã—ã‚‡ã†\",\n    \"announcements.title\": \"ãŠçŸ¥ã‚‰ã›\",\n    \"announcements.viewAll\": \"ã™ã¹ã¦è¦‹ã‚‹\",\n    \"announcements.noItems\": \"ãŠçŸ¥ã‚‰ã›ã¯ã‚ã‚Šã¾ã›ã‚“\",\n    \"events.title\": \"é–‹å‚¬ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆ\",\n  },\n  \"zh-CN\": {\n    \"app.name\": \"éŸ©é£Ÿå ‚\",\n    \"app.tagline\": \"æ‚¨çš„æ­£å®—éŸ©å›½æ–™ç†å‘å¯¼\",\n    \"nav.discover\": \"å‘ç°\",\n    \"nav.ai\": \"AIå‘å¯¼\",\n    \"nav.content\": \"å†…å®¹\",\n    \"nav.my\": \"æˆ‘çš„\",\n    \"search.placeholder\": \"æœç´¢é¤å…ã€ç¾é£Ÿ...\",\n    \"search.button\": \"æœç´¢\",\n    \"ai.title\": \"AIç¤¼å®¾\",\n    \"ai.welcome\": \"æ‚¨å¥½ï¼ğŸ‘‹ æˆ‘æ˜¯æ‚¨çš„éŸ©å›½é¤å…AIç¤¼å®¾ã€‚\\n\\nä»Šå¤©æˆ‘èƒ½ä¸ºæ‚¨åšä»€ä¹ˆï¼Ÿ\",\n    \"ai.placeholder\": \"è¾“å…¥æ‚¨çš„æ¶ˆæ¯...\",\n    \"ai.send\": \"å‘é€\",\n    \"ai.suggestions.vegan\": \"ç´ é£ŸéŸ©é¤\",\n    \"ai.suggestions.nearby\": \"é™„è¿‘é¤å…\",\n    \"ai.suggestions.romantic\": \"æµªæ¼«é¤å…\",\n    \"ai.suggestions.special\": \"ç‰¹åˆ«æ—¥å­\",\n    \"content.title\": \"å†…å®¹\",\n    \"content.videos\": \"çƒ­é—¨è§†é¢‘\",\n    \"content.blogs\": \"åšå®¢æ–‡ç« \",\n    \"content.filter\": \"ç­›é€‰\",\n    \"content.seeAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"content.readTime\": \"åˆ†é’Ÿé˜…è¯»\",\n    \"content.views\": \"è§‚çœ‹æ¬¡æ•°\",\n    \"my.title\": \"æˆ‘çš„é¡µé¢\",\n    \"my.editProfile\": \"ç¼–è¾‘èµ„æ–™\",\n    \"my.saved\": \"æ”¶è—çš„é¤å…\",\n    \"my.reviews\": \"æˆ‘çš„è¯„è®º\",\n    \"my.visited\": \"è®¿é—®è®°å½•\",\n    \"my.following\": \"å…³æ³¨\",\n    \"my.notifications\": \"é€šçŸ¥è®¾ç½®\",\n    \"my.settings\": \"åº”ç”¨è®¾ç½®\",\n    \"my.terms\": \"æ¡æ¬¾å’Œéšç§\",\n    \"my.recentReviews\": \"æœ€è¿‘è¯„è®º\",\n    \"my.seeAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"discover.aiRecommend\": \"AIæ¨è\",\n    \"discover.popular\": \"çƒ­é—¨é¤å…\",\n    \"discover.trending\": \"çƒ­é—¨è¶‹åŠ¿\",\n    \"discover.viewAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"discover.title\": \"å‘ç°éŸ©å›½é¤å…\",\n    \"language.select\": \"é€‰æ‹©è¯­è¨€\",\n    \"restaurant.price\": \"ä»·æ ¼èŒƒå›´\",\n    \"restaurant.location\": \"ä½ç½®\",\n    \"restaurant.about\": \"å…³äº\",\n    \"restaurant.info\": \"ä¿¡æ¯\",\n    \"restaurant.address\": \"åœ°å€\",\n    \"restaurant.phone\": \"ç”µè¯\",\n    \"restaurant.hours\": \"è¥ä¸šæ—¶é—´\",\n    \"reviews.title\": \"è¯„è®º\",\n    \"reviews.write\": \"å†™è¯„è®º\",\n    \"reviews.empty\": \"æš‚æ— è¯„è®º\",\n    \"reviews.beFirst\": \"æˆä¸ºç¬¬ä¸€ä¸ªè¯„è®ºè€…ï¼\",\n    \"review.write\": \"æ’°å†™è¯„è®º\",\n    \"review.yourRating\": \"æ‚¨çš„è¯„åˆ†\",\n    \"review.yourReview\": \"æ‚¨çš„è¯„è®º\",\n    \"review.placeholder\": \"åˆ†äº«æ‚¨çš„ä½“éªŒ...\",\n    \"review.submit\": \"æäº¤è¯„è®º\",\n    \"review.cancel\": \"å–æ¶ˆ\",\n    \"review.success\": \"è¯„è®ºæäº¤æˆåŠŸ\",\n    \"review.error\": \"è¯„è®ºæäº¤å¤±è´¥\",\n    \"my.profile\": \"æˆ‘çš„ä¸»é¡µ\",\n    \"error.notFound\": \"æœªæ‰¾åˆ°é¤å…\",\n    \"category.guide\": \"æŒ‡å—\",\n    \"category.tips\": \"å°è´´å£«\",\n    \"category.recommendation\": \"æ¨è\",\n    \"auth.login\": \"ç™»å½•\",\n    \"auth.signup\": \"æ³¨å†Œ\",\n    \"auth.username\": \"ç”¨æˆ·å\",\n    \"auth.password\": \"å¯†ç \",\n    \"auth.usernamePlaceholder\": \"è¯·è¾“å…¥ç”¨æˆ·å\",\n    \"auth.passwordPlaceholder\": \"è¯·è¾“å…¥å¯†ç \",\n    \"auth.loginSuccess\": \"ç™»å½•æˆåŠŸ\",\n    \"auth.signupSuccess\": \"æ³¨å†ŒæˆåŠŸ\",\n    \"auth.loginError\": \"ç™»å½•å¤±è´¥\",\n    \"auth.signupError\": \"æ³¨å†Œå¤±è´¥\",\n    \"auth.error\": \"é”™è¯¯\",\n    \"auth.fillAllFields\": \"è¯·å¡«å†™æ‰€æœ‰å­—æ®µ\",\n    \"auth.usernameMinLength\": \"ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦\",\n    \"auth.passwordMinLength\": \"å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦\",\n    \"auth.loginSubtitle\": \"ç™»å½•æ‚¨çš„è´¦æˆ·\",\n    \"auth.signupSubtitle\": \"åˆ›å»ºæ–°è´¦æˆ·\",\n    \"auth.noAccount\": \"æ²¡æœ‰è´¦æˆ·ï¼Ÿç«‹å³æ³¨å†Œ\",\n    \"auth.hasAccount\": \"å·²æœ‰è´¦æˆ·ï¼Ÿç«‹å³ç™»å½•\",\n    \"auth.loginDescription\": \"ç™»å½•ä»¥ä¿å­˜é¤å…å¹¶æ’°å†™è¯„è®º\",\n    \"auth.signupDescription\": \"æ³¨å†Œä»¥ä¿å­˜é¤å…å¹¶æ’°å†™è¯„è®º\",\n    \"announcements.title\": \"å…¬å‘Š\",\n    \"announcements.viewAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"announcements.noItems\": \"æš‚æ— å…¬å‘Š\",\n    \"events.title\": \"è¿›è¡Œä¸­çš„æ´»åŠ¨\",\n  },\n  \"zh-TW\": {\n    \"app.name\": \"éŸ“é£Ÿå ‚\",\n    \"app.tagline\": \"æ‚¨çš„æ­£å®—éŸ“åœ‹æ–™ç†åš®å°\",\n    \"nav.discover\": \"ç™¼ç¾\",\n    \"nav.ai\": \"AIåš®å°\",\n    \"nav.content\": \"å…§å®¹\",\n    \"nav.my\": \"æˆ‘çš„\",\n    \"search.placeholder\": \"æœå°‹é¤å»³ã€ç¾é£Ÿ...\",\n    \"search.button\": \"æœå°‹\",\n    \"ai.title\": \"AIç¦®è³“\",\n    \"ai.welcome\": \"æ‚¨å¥½ï¼ğŸ‘‹ æˆ‘æ˜¯æ‚¨çš„éŸ“åœ‹é¤å»³AIç¦®è³“ã€‚\\n\\nä»Šå¤©æˆ‘èƒ½ç‚ºæ‚¨åšä»€éº¼ï¼Ÿ\",\n    \"ai.placeholder\": \"è¼¸å…¥æ‚¨çš„è¨Šæ¯...\",\n    \"ai.send\": \"ç™¼é€\",\n    \"ai.suggestions.vegan\": \"ç´ é£ŸéŸ“é¤\",\n    \"ai.suggestions.nearby\": \"é™„è¿‘é¤å»³\",\n    \"ai.suggestions.romantic\": \"æµªæ¼«é¤å»³\",\n    \"ai.suggestions.special\": \"ç‰¹åˆ¥æ—¥å­\",\n    \"content.title\": \"å…§å®¹\",\n    \"content.videos\": \"ç†±é–€å½±ç‰‡\",\n    \"content.blogs\": \"éƒ¨è½æ ¼æ–‡ç« \",\n    \"content.filter\": \"ç¯©é¸\",\n    \"content.seeAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"content.readTime\": \"åˆ†é˜é–±è®€\",\n    \"content.views\": \"è§€çœ‹æ¬¡æ•¸\",\n    \"my.title\": \"æˆ‘çš„é é¢\",\n    \"my.editProfile\": \"ç·¨è¼¯è³‡æ–™\",\n    \"my.saved\": \"æ”¶è—çš„é¤å»³\",\n    \"my.reviews\": \"æˆ‘çš„è©•è«–\",\n    \"my.visited\": \"è¨ªå•ç´€éŒ„\",\n    \"my.following\": \"è¿½è¹¤\",\n    \"my.notifications\": \"é€šçŸ¥è¨­å®š\",\n    \"my.settings\": \"æ‡‰ç”¨ç¨‹å¼è¨­å®š\",\n    \"my.terms\": \"æ¢æ¬¾å’Œéš±ç§\",\n    \"my.recentReviews\": \"æœ€è¿‘è©•è«–\",\n    \"my.seeAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"discover.aiRecommend\": \"AIæ¨è–¦\",\n    \"discover.popular\": \"ç†±é–€é¤å»³\",\n    \"discover.trending\": \"ç†±é–€è¶¨å‹¢\",\n    \"discover.viewAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"discover.title\": \"ç™¼ç¾éŸ“åœ‹é¤å»³\",\n    \"language.select\": \"é¸æ“‡èªè¨€\",\n    \"restaurant.price\": \"åƒ¹æ ¼ç¯„åœ\",\n    \"restaurant.location\": \"ä½ç½®\",\n    \"restaurant.about\": \"é—œæ–¼\",\n    \"restaurant.info\": \"è³‡è¨Š\",\n    \"restaurant.address\": \"åœ°å€\",\n    \"restaurant.phone\": \"é›»è©±\",\n    \"restaurant.hours\": \"ç‡Ÿæ¥­æ™‚é–“\",\n    \"reviews.title\": \"è©•è«–\",\n    \"reviews.write\": \"æ’°å¯«è©•è«–\",\n    \"reviews.empty\": \"æš«ç„¡è©•è«–\",\n    \"reviews.beFirst\": \"æˆç‚ºç¬¬ä¸€å€‹è©•è«–è€…ï¼\",\n    \"review.write\": \"æ’°å¯«è©•è«–\",\n    \"review.yourRating\": \"æ‚¨çš„è©•åˆ†\",\n    \"review.yourReview\": \"æ‚¨çš„è©•è«–\",\n    \"review.placeholder\": \"åˆ†äº«æ‚¨çš„é«”é©—...\",\n    \"review.submit\": \"æäº¤è©•è«–\",\n    \"review.cancel\": \"å–æ¶ˆ\",\n    \"review.success\": \"è©•è«–æäº¤æˆåŠŸ\",\n    \"review.error\": \"è©•è«–æäº¤å¤±æ•—\",\n    \"my.profile\": \"æˆ‘çš„ä¸»é \",\n    \"error.notFound\": \"æœªæ‰¾åˆ°é¤å»³\",\n    \"category.guide\": \"æŒ‡å—\",\n    \"category.tips\": \"å°è²¼å£«\",\n    \"category.recommendation\": \"æ¨è–¦\",\n    \"auth.login\": \"ç™»å…¥\",\n    \"auth.signup\": \"è¨»å†Š\",\n    \"auth.username\": \"ç”¨æˆ¶å\",\n    \"auth.password\": \"å¯†ç¢¼\",\n    \"auth.usernamePlaceholder\": \"è«‹è¼¸å…¥ç”¨æˆ¶å\",\n    \"auth.passwordPlaceholder\": \"è«‹è¼¸å…¥å¯†ç¢¼\",\n    \"auth.loginSuccess\": \"ç™»å…¥æˆåŠŸ\",\n    \"auth.signupSuccess\": \"è¨»å†ŠæˆåŠŸ\",\n    \"auth.loginError\": \"ç™»å…¥å¤±æ•—\",\n    \"auth.signupError\": \"è¨»å†Šå¤±æ•—\",\n    \"auth.error\": \"éŒ¯èª¤\",\n    \"auth.fillAllFields\": \"è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½\",\n    \"auth.usernameMinLength\": \"ç”¨æˆ¶åè‡³å°‘éœ€è¦3å€‹å­—ç¬¦\",\n    \"auth.passwordMinLength\": \"å¯†ç¢¼è‡³å°‘éœ€è¦6å€‹å­—ç¬¦\",\n    \"auth.loginSubtitle\": \"ç™»å…¥æ‚¨çš„å¸³æˆ¶\",\n    \"auth.signupSubtitle\": \"å»ºç«‹æ–°å¸³æˆ¶\",\n    \"auth.noAccount\": \"æ²’æœ‰å¸³æˆ¶ï¼Ÿç«‹å³è¨»å†Š\",\n    \"auth.hasAccount\": \"å·²æœ‰å¸³æˆ¶ï¼Ÿç«‹å³ç™»å…¥\",\n    \"auth.loginDescription\": \"ç™»å…¥ä»¥ä¿å­˜é¤å»³ä¸¦æ’°å¯«è©•è«–\",\n    \"auth.signupDescription\": \"è¨»å†Šä»¥ä¿å­˜é¤å»³ä¸¦æ’°å¯«è©•è«–\",\n    \"announcements.title\": \"å…¬å‘Š\",\n    \"announcements.viewAll\": \"æŸ¥çœ‹å…¨éƒ¨\",\n    \"announcements.noItems\": \"æš«ç„¡å…¬å‘Š\",\n    \"events.title\": \"é€²è¡Œä¸­çš„æ´»å‹•\",\n  },\n  es: {\n    \"app.name\": \"Han Sik Dang\",\n    \"app.tagline\": \"Tu guÃ­a personal a la autÃ©ntica cocina coreana\",\n    \"nav.discover\": \"Descubrir\",\n    \"nav.ai\": \"GuÃ­a AI\",\n    \"nav.content\": \"Contenido\",\n    \"nav.my\": \"Mi\",\n    \"search.placeholder\": \"Buscar restaurantes, comida...\",\n    \"search.button\": \"Buscar\",\n    \"ai.title\": \"Conserje AI\",\n    \"ai.welcome\": \"Â¡Hola! ğŸ‘‹ Soy tu conserje AI de restaurantes coreanos.\\n\\nÂ¿CÃ³mo puedo ayudarte hoy?\",\n    \"ai.placeholder\": \"Escribe tu mensaje...\",\n    \"ai.send\": \"Enviar\",\n    \"ai.suggestions.vegan\": \"Comida Coreana Vegana\",\n    \"ai.suggestions.nearby\": \"Cerca de MÃ­\",\n    \"ai.suggestions.romantic\": \"RomÃ¡ntico\",\n    \"ai.suggestions.special\": \"DÃ­a Especial\",\n    \"content.title\": \"Contenido\",\n    \"content.videos\": \"Videos Populares\",\n    \"content.blogs\": \"ArtÃ­culos de Blog\",\n    \"content.filter\": \"Filtro\",\n    \"content.seeAll\": \"Ver Todo\",\n    \"content.readTime\": \"min de lectura\",\n    \"content.views\": \"vistas\",\n    \"my.title\": \"Mi PÃ¡gina\",\n    \"my.editProfile\": \"Editar Perfil\",\n    \"my.saved\": \"Restaurantes Guardados\",\n    \"my.reviews\": \"Mis ReseÃ±as\",\n    \"my.visited\": \"Historial de Visitas\",\n    \"my.following\": \"Siguiendo\",\n    \"my.notifications\": \"Notificaciones\",\n    \"my.settings\": \"ConfiguraciÃ³n\",\n    \"my.terms\": \"TÃ©rminos y Privacidad\",\n    \"my.recentReviews\": \"ReseÃ±as Recientes\",\n    \"my.seeAll\": \"Ver Todo\",\n    \"discover.aiRecommend\": \"Recomendaciones AI\",\n    \"discover.popular\": \"Restaurantes Populares\",\n    \"discover.trending\": \"Tendencias\",\n    \"discover.viewAll\": \"Ver Todo\",\n    \"discover.title\": \"Descubrir Restaurantes Coreanos\",\n    \"language.select\": \"Seleccionar Idioma\",\n    \"restaurant.price\": \"Rango de Precios\",\n    \"restaurant.location\": \"UbicaciÃ³n\",\n    \"restaurant.about\": \"Acerca de\",\n    \"restaurant.info\": \"InformaciÃ³n\",\n    \"restaurant.address\": \"DirecciÃ³n\",\n    \"restaurant.phone\": \"TelÃ©fono\",\n    \"restaurant.hours\": \"Horario\",\n    \"reviews.title\": \"ReseÃ±as\",\n    \"reviews.write\": \"Escribir ReseÃ±a\",\n    \"reviews.empty\": \"AÃºn no hay reseÃ±as\",\n    \"reviews.beFirst\": \"Â¡SÃ© el primero en reseÃ±ar!\",\n    \"review.write\": \"Escribir ReseÃ±a\",\n    \"review.yourRating\": \"Tu CalificaciÃ³n\",\n    \"review.yourReview\": \"Tu ReseÃ±a\",\n    \"review.placeholder\": \"Comparte tu experiencia...\",\n    \"review.submit\": \"Enviar ReseÃ±a\",\n    \"review.cancel\": \"Cancelar\",\n    \"review.success\": \"ReseÃ±a enviada exitosamente\",\n    \"review.error\": \"Error al enviar la reseÃ±a\",\n    \"my.profile\": \"Mi Perfil\",\n    \"error.notFound\": \"Restaurante no encontrado\",\n    \"category.guide\": \"GuÃ­a\",\n    \"category.tips\": \"Consejos\",\n    \"category.recommendation\": \"RecomendaciÃ³n\",\n    \"auth.login\": \"Iniciar SesiÃ³n\",\n    \"auth.signup\": \"Registrarse\",\n    \"auth.username\": \"Nombre de Usuario\",\n    \"auth.password\": \"ContraseÃ±a\",\n    \"auth.usernamePlaceholder\": \"Ingrese su nombre de usuario\",\n    \"auth.passwordPlaceholder\": \"Ingrese su contraseÃ±a\",\n    \"auth.loginSuccess\": \"SesiÃ³n iniciada exitosamente\",\n    \"auth.signupSuccess\": \"Registro exitoso\",\n    \"auth.loginError\": \"Error al iniciar sesiÃ³n\",\n    \"auth.signupError\": \"Error al registrarse\",\n    \"auth.error\": \"Error\",\n    \"auth.fillAllFields\": \"Por favor complete todos los campos\",\n    \"auth.usernameMinLength\": \"El nombre de usuario debe tener al menos 3 caracteres\",\n    \"auth.passwordMinLength\": \"La contraseÃ±a debe tener al menos 6 caracteres\",\n    \"auth.loginSubtitle\": \"Inicie sesiÃ³n en su cuenta\",\n    \"auth.signupSubtitle\": \"Cree una nueva cuenta\",\n    \"auth.noAccount\": \"Â¿No tiene cuenta? RegÃ­strese\",\n    \"auth.hasAccount\": \"Â¿Ya tiene cuenta? Inicie sesiÃ³n\",\n    \"auth.loginDescription\": \"Inicie sesiÃ³n para guardar restaurantes y escribir reseÃ±as\",\n    \"auth.signupDescription\": \"RegÃ­strese para guardar restaurantes y escribir reseÃ±as\",\n    \"announcements.title\": \"Anuncios\",\n    \"announcements.viewAll\": \"Ver Todo\",\n    \"announcements.noItems\": \"No hay anuncios\",\n    \"events.title\": \"Eventos en Curso\",\n  },\n  fr: {\n    \"app.name\": \"Han Sik Dang\",\n    \"app.tagline\": \"Votre guide personnel de la cuisine corÃ©enne authentique\",\n    \"nav.discover\": \"DÃ©couvrir\",\n    \"nav.ai\": \"Guide IA\",\n    \"nav.content\": \"Contenu\",\n    \"nav.my\": \"Mon\",\n    \"search.placeholder\": \"Rechercher restaurants, plats...\",\n    \"search.button\": \"Rechercher\",\n    \"ai.title\": \"Concierge IA\",\n    \"ai.welcome\": \"Bonjour ! ğŸ‘‹ Je suis votre concierge IA pour restaurants corÃ©ens.\\n\\nComment puis-je vous aider aujourd'hui ?\",\n    \"ai.placeholder\": \"Tapez votre message...\",\n    \"ai.send\": \"Envoyer\",\n    \"ai.suggestions.vegan\": \"Cuisine CorÃ©enne VÃ©gane\",\n    \"ai.suggestions.nearby\": \"PrÃ¨s de Moi\",\n    \"ai.suggestions.romantic\": \"Romantique\",\n    \"ai.suggestions.special\": \"Jour SpÃ©cial\",\n    \"content.title\": \"Contenu\",\n    \"content.videos\": \"VidÃ©os Populaires\",\n    \"content.blogs\": \"Articles de Blog\",\n    \"content.filter\": \"Filtre\",\n    \"content.seeAll\": \"Voir Tout\",\n    \"content.readTime\": \"min de lecture\",\n    \"content.views\": \"vues\",\n    \"my.title\": \"Ma Page\",\n    \"my.editProfile\": \"Modifier le Profil\",\n    \"my.saved\": \"Restaurants EnregistrÃ©s\",\n    \"my.reviews\": \"Mes Avis\",\n    \"my.visited\": \"Historique des Visites\",\n    \"my.following\": \"Abonnements\",\n    \"my.notifications\": \"Notifications\",\n    \"my.settings\": \"ParamÃ¨tres\",\n    \"my.terms\": \"Conditions et ConfidentialitÃ©\",\n    \"my.recentReviews\": \"Avis RÃ©cents\",\n    \"my.seeAll\": \"Voir Tout\",\n    \"discover.aiRecommend\": \"Recommandations IA\",\n    \"discover.popular\": \"Restaurants Populaires\",\n    \"discover.trending\": \"Tendances\",\n    \"discover.viewAll\": \"Voir Tout\",\n    \"discover.title\": \"DÃ©couvrir les Restaurants CorÃ©ens\",\n    \"language.select\": \"SÃ©lectionner la Langue\",\n    \"restaurant.price\": \"Gamme de Prix\",\n    \"restaurant.location\": \"Emplacement\",\n    \"restaurant.about\": \"Ã€ Propos\",\n    \"restaurant.info\": \"Informations\",\n    \"restaurant.address\": \"Adresse\",\n    \"restaurant.phone\": \"TÃ©lÃ©phone\",\n    \"restaurant.hours\": \"Horaires\",\n    \"reviews.title\": \"Avis\",\n    \"reviews.write\": \"Ã‰crire un Avis\",\n    \"reviews.empty\": \"Pas encore d'avis\",\n    \"reviews.beFirst\": \"Soyez le premier Ã  donner votre avis !\",\n    \"review.write\": \"Ã‰crire un Avis\",\n    \"review.yourRating\": \"Votre Note\",\n    \"review.yourReview\": \"Votre Avis\",\n    \"review.placeholder\": \"Partagez votre expÃ©rience...\",\n    \"review.submit\": \"Soumettre l'Avis\",\n    \"review.cancel\": \"Annuler\",\n    \"review.success\": \"Avis soumis avec succÃ¨s\",\n    \"review.error\": \"Ã‰chec de la soumission de l'avis\",\n    \"my.profile\": \"Mon Profil\",\n    \"error.notFound\": \"Restaurant non trouvÃ©\",\n    \"category.guide\": \"Guide\",\n    \"category.tips\": \"Conseils\",\n    \"category.recommendation\": \"Recommandation\",\n    \"auth.login\": \"Connexion\",\n    \"auth.signup\": \"S'inscrire\",\n    \"auth.username\": \"Nom d'utilisateur\",\n    \"auth.password\": \"Mot de passe\",\n    \"auth.usernamePlaceholder\": \"Entrez votre nom d'utilisateur\",\n    \"auth.passwordPlaceholder\": \"Entrez votre mot de passe\",\n    \"auth.loginSuccess\": \"Connexion rÃ©ussie\",\n    \"auth.signupSuccess\": \"Inscription rÃ©ussie\",\n    \"auth.loginError\": \"Ã‰chec de la connexion\",\n    \"auth.signupError\": \"Ã‰chec de l'inscription\",\n    \"auth.error\": \"Erreur\",\n    \"auth.fillAllFields\": \"Veuillez remplir tous les champs\",\n    \"auth.usernameMinLength\": \"Le nom d'utilisateur doit contenir au moins 3 caractÃ¨res\",\n    \"auth.passwordMinLength\": \"Le mot de passe doit contenir au moins 6 caractÃ¨res\",\n    \"auth.loginSubtitle\": \"Connectez-vous Ã  votre compte\",\n    \"auth.signupSubtitle\": \"CrÃ©er un nouveau compte\",\n    \"auth.noAccount\": \"Pas de compte ? Inscrivez-vous\",\n    \"auth.hasAccount\": \"DÃ©jÃ  un compte ? Connectez-vous\",\n    \"auth.loginDescription\": \"Connectez-vous pour enregistrer des restaurants et Ã©crire des avis\",\n    \"auth.signupDescription\": \"Inscrivez-vous pour enregistrer des restaurants et Ã©crire des avis\",\n    \"announcements.title\": \"Annonces\",\n    \"announcements.viewAll\": \"Voir Tout\",\n    \"announcements.noItems\": \"Aucune annonce\",\n    \"events.title\": \"Ã‰vÃ©nements en Cours\",\n  },\n  de: {\n    \"app.name\": \"Han Sik Dang\",\n    \"app.tagline\": \"Ihr persÃ¶nlicher FÃ¼hrer zur authentischen koreanischen KÃ¼che\",\n    \"nav.discover\": \"Entdecken\",\n    \"nav.ai\": \"KI-FÃ¼hrer\",\n    \"nav.content\": \"Inhalt\",\n    \"nav.my\": \"Mein\",\n    \"search.placeholder\": \"Restaurants, Essen suchen...\",\n    \"search.button\": \"Suchen\",\n    \"ai.title\": \"KI-Concierge\",\n    \"ai.welcome\": \"Hallo! ğŸ‘‹ Ich bin Ihr KI-Concierge fÃ¼r koreanische Restaurants.\\n\\nWie kann ich Ihnen heute helfen?\",\n    \"ai.placeholder\": \"Geben Sie Ihre Nachricht ein...\",\n    \"ai.send\": \"Senden\",\n    \"ai.suggestions.vegan\": \"Veganes Koreanisch\",\n    \"ai.suggestions.nearby\": \"In der NÃ¤he\",\n    \"ai.suggestions.romantic\": \"Romantisch\",\n    \"ai.suggestions.special\": \"Besonderer Tag\",\n    \"content.title\": \"Inhalt\",\n    \"content.videos\": \"Beliebte Videos\",\n    \"content.blogs\": \"Blog-BeitrÃ¤ge\",\n    \"content.filter\": \"Filter\",\n    \"content.seeAll\": \"Alle Anzeigen\",\n    \"content.readTime\": \"Min. Lesezeit\",\n    \"content.views\": \"Aufrufe\",\n    \"my.title\": \"Meine Seite\",\n    \"my.editProfile\": \"Profil Bearbeiten\",\n    \"my.saved\": \"Gespeicherte Restaurants\",\n    \"my.reviews\": \"Meine Bewertungen\",\n    \"my.visited\": \"Besuchsverlauf\",\n    \"my.following\": \"Folge Ich\",\n    \"my.notifications\": \"Benachrichtigungen\",\n    \"my.settings\": \"Einstellungen\",\n    \"my.terms\": \"Bedingungen & Datenschutz\",\n    \"my.recentReviews\": \"Neueste Bewertungen\",\n    \"my.seeAll\": \"Alle Anzeigen\",\n    \"discover.aiRecommend\": \"KI-Empfehlungen\",\n    \"discover.popular\": \"Beliebte Restaurants\",\n    \"discover.trending\": \"Trending\",\n    \"discover.viewAll\": \"Alle Anzeigen\",\n    \"discover.title\": \"Koreanische Restaurants Entdecken\",\n    \"language.select\": \"Sprache AuswÃ¤hlen\",\n    \"restaurant.price\": \"Preisspanne\",\n    \"restaurant.location\": \"Standort\",\n    \"restaurant.about\": \"Ãœber\",\n    \"restaurant.info\": \"Informationen\",\n    \"restaurant.address\": \"Adresse\",\n    \"restaurant.phone\": \"Telefon\",\n    \"restaurant.hours\": \"Ã–ffnungszeiten\",\n    \"reviews.title\": \"Bewertungen\",\n    \"reviews.write\": \"Bewertung Schreiben\",\n    \"reviews.empty\": \"Noch keine Bewertungen\",\n    \"reviews.beFirst\": \"Seien Sie der Erste, der bewertet!\",\n    \"review.write\": \"Bewertung Schreiben\",\n    \"review.yourRating\": \"Ihre Bewertung\",\n    \"review.yourReview\": \"Ihre Bewertung\",\n    \"review.placeholder\": \"Teilen Sie Ihre Erfahrung...\",\n    \"review.submit\": \"Bewertung Absenden\",\n    \"review.cancel\": \"Abbrechen\",\n    \"review.success\": \"Bewertung erfolgreich Ã¼bermittelt\",\n    \"review.error\": \"Fehler beim Ãœbermitteln der Bewertung\",\n    \"my.profile\": \"Mein Profil\",\n    \"error.notFound\": \"Restaurant nicht gefunden\",\n    \"category.guide\": \"Leitfaden\",\n    \"category.tips\": \"Tipps\",\n    \"category.recommendation\": \"Empfehlung\",\n    \"auth.login\": \"Anmelden\",\n    \"auth.signup\": \"Registrieren\",\n    \"auth.username\": \"Benutzername\",\n    \"auth.password\": \"Passwort\",\n    \"auth.usernamePlaceholder\": \"Geben Sie Ihren Benutzernamen ein\",\n    \"auth.passwordPlaceholder\": \"Geben Sie Ihr Passwort ein\",\n    \"auth.loginSuccess\": \"Erfolgreich angemeldet\",\n    \"auth.signupSuccess\": \"Erfolgreich registriert\",\n    \"auth.loginError\": \"Anmeldung fehlgeschlagen\",\n    \"auth.signupError\": \"Registrierung fehlgeschlagen\",\n    \"auth.error\": \"Fehler\",\n    \"auth.fillAllFields\": \"Bitte fÃ¼llen Sie alle Felder aus\",\n    \"auth.usernameMinLength\": \"Benutzername muss mindestens 3 Zeichen lang sein\",\n    \"auth.passwordMinLength\": \"Passwort muss mindestens 6 Zeichen lang sein\",\n    \"auth.loginSubtitle\": \"Melden Sie sich bei Ihrem Konto an\",\n    \"auth.signupSubtitle\": \"Ein neues Konto erstellen\",\n    \"auth.noAccount\": \"Kein Konto? Jetzt registrieren\",\n    \"auth.hasAccount\": \"Bereits ein Konto? Jetzt anmelden\",\n    \"auth.loginDescription\": \"Melden Sie sich an, um Restaurants zu speichern und Bewertungen zu schreiben\",\n    \"auth.signupDescription\": \"Registrieren Sie sich, um Restaurants zu speichern und Bewertungen zu schreiben\",\n    \"announcements.title\": \"AnkÃ¼ndigungen\",\n    \"announcements.viewAll\": \"Alle Anzeigen\",\n    \"announcements.noItems\": \"Keine AnkÃ¼ndigungen\",\n    \"events.title\": \"Laufende Veranstaltungen\",\n  },\n  vi: {\n    \"app.name\": \"í•œì‹ë‹¹\",\n    \"app.tagline\": \"HÆ°á»›ng dáº«n áº©m thá»±c HÃ n Quá»‘c chÃ­nh thá»‘ng cá»§a báº¡n\",\n    \"nav.discover\": \"KhÃ¡m phÃ¡\",\n    \"nav.ai\": \"Gá»£i Ã½ AI\",\n    \"nav.content\": \"Ná»™i dung\",\n    \"nav.my\": \"Cá»§a tÃ´i\",\n    \"search.placeholder\": \"TÃ¬m nhÃ  hÃ ng, mÃ³n Äƒn...\",\n    \"search.button\": \"TÃ¬m kiáº¿m\",\n    \"ai.title\": \"AI Concierge\",\n    \"ai.welcome\": \"Xin chÃ o! ğŸ‘‹ TÃ´i lÃ  AI Concierge cá»§a í•œì‹ë‹¹.\\n\\nBáº¡n Ä‘ang tÃ¬m kiáº¿m nhÃ  hÃ ng HÃ n Quá»‘c nÃ o?\",\n    \"ai.placeholder\": \"Nháº­p tin nháº¯n cá»§a báº¡n...\",\n    \"ai.send\": \"Gá»­i\",\n    \"ai.suggestions.vegan\": \"MÃ³n HÃ n chay\",\n    \"ai.suggestions.nearby\": \"Gáº§n Ä‘Ã¢y\",\n    \"ai.suggestions.romantic\": \"LÃ£ng máº¡n\",\n    \"ai.suggestions.special\": \"Dá»‹p Ä‘áº·c biá»‡t\",\n    \"content.title\": \"Ná»™i dung\",\n    \"content.videos\": \"Video phá»• biáº¿n\",\n    \"content.blogs\": \"BÃ i viáº¿t Blog\",\n    \"content.filter\": \"Lá»c\",\n    \"content.seeAll\": \"Xem táº¥t cáº£\",\n    \"content.readTime\": \"phÃºt\",\n    \"content.views\": \"lÆ°á»£t xem\",\n    \"my.title\": \"Cá»§a tÃ´i\",\n    \"my.editProfile\": \"Chá»‰nh sá»­a há»“ sÆ¡\",\n    \"my.saved\": \"ÄÃ£ lÆ°u\",\n    \"my.reviews\": \"ÄÃ¡nh giÃ¡ cá»§a tÃ´i\",\n    \"my.visited\": \"ÄÃ£ ghÃ© thÄƒm\",\n    \"my.following\": \"Äang theo dÃµi\",\n    \"my.notifications\": \"CÃ i Ä‘áº·t thÃ´ng bÃ¡o\",\n    \"my.settings\": \"CÃ i Ä‘áº·t á»©ng dá»¥ng\",\n    \"my.terms\": \"Äiá»u khoáº£n & Quyá»n riÃªng tÆ°\",\n    \"my.recentReviews\": \"ÄÃ¡nh giÃ¡ gáº§n Ä‘Ã¢y\",\n    \"my.seeAll\": \"Xem táº¥t cáº£\",\n    \"discover.aiRecommend\": \"Gá»£i Ã½ AI cÃ¡ nhÃ¢n hÃ³a\",\n    \"discover.popular\": \"NhÃ  hÃ ng phá»• biáº¿n\",\n    \"discover.trending\": \"Xu hÆ°á»›ng\",\n    \"discover.viewAll\": \"Xem táº¥t cáº£\",\n    \"discover.title\": \"KhÃ¡m phÃ¡ nhÃ  hÃ ng HÃ n Quá»‘c\",\n    \"language.select\": \"Chá»n ngÃ´n ngá»¯\",\n    \"restaurant.price\": \"Má»©c giÃ¡\",\n    \"restaurant.location\": \"Vá»‹ trÃ­\",\n    \"restaurant.about\": \"Giá»›i thiá»‡u\",\n    \"restaurant.info\": \"ThÃ´ng tin\",\n    \"restaurant.address\": \"Äá»‹a chá»‰\",\n    \"restaurant.phone\": \"Sá»‘ Ä‘iá»‡n thoáº¡i\",\n    \"restaurant.hours\": \"Giá» má»Ÿ cá»­a\",\n    \"reviews.title\": \"ÄÃ¡nh giÃ¡\",\n    \"reviews.write\": \"Viáº¿t Ä‘Ã¡nh giÃ¡\",\n    \"reviews.empty\": \"ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡\",\n    \"reviews.beFirst\": \"HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡!\",\n    \"review.write\": \"Viáº¿t Ä‘Ã¡nh giÃ¡\",\n    \"review.yourRating\": \"ÄÃ¡nh giÃ¡ cá»§a báº¡n\",\n    \"review.yourReview\": \"ÄÃ¡nh giÃ¡ cá»§a báº¡n\",\n    \"review.placeholder\": \"Chia sáº» tráº£i nghiá»‡m cá»§a báº¡n...\",\n    \"review.submit\": \"Gá»­i Ä‘Ã¡nh giÃ¡\",\n    \"review.cancel\": \"Há»§y\",\n    \"review.success\": \"ÄÃ¡nh giÃ¡ Ä‘Ã£ Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng\",\n    \"review.error\": \"KhÃ´ng thá»ƒ gá»­i Ä‘Ã¡nh giÃ¡\",\n    \"my.profile\": \"Há»“ sÆ¡ cá»§a tÃ´i\",\n    \"error.notFound\": \"KhÃ´ng tÃ¬m tháº¥y nhÃ  hÃ ng\",\n    \"category.guide\": \"HÆ°á»›ng dáº«n\",\n    \"category.tips\": \"Máº¹o\",\n    \"category.recommendation\": \"Äá» xuáº¥t\",\n    \"auth.login\": \"ÄÄƒng nháº­p\",\n    \"auth.signup\": \"ÄÄƒng kÃ½\",\n    \"auth.username\": \"TÃªn ngÆ°á»i dÃ¹ng\",\n    \"auth.password\": \"Máº­t kháº©u\",\n    \"auth.usernamePlaceholder\": \"Nháº­p tÃªn ngÆ°á»i dÃ¹ng\",\n    \"auth.passwordPlaceholder\": \"Nháº­p máº­t kháº©u\",\n    \"auth.loginSuccess\": \"ÄÄƒng nháº­p thÃ nh cÃ´ng\",\n    \"auth.signupSuccess\": \"ÄÄƒng kÃ½ thÃ nh cÃ´ng\",\n    \"auth.loginError\": \"ÄÄƒng nháº­p tháº¥t báº¡i\",\n    \"auth.signupError\": \"ÄÄƒng kÃ½ tháº¥t báº¡i\",\n    \"auth.error\": \"Lá»—i\",\n    \"auth.fillAllFields\": \"Vui lÃ²ng Ä‘iá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin\",\n    \"auth.usernameMinLength\": \"TÃªn ngÆ°á»i dÃ¹ng pháº£i cÃ³ Ã­t nháº¥t 3 kÃ½ tá»±\",\n    \"auth.passwordMinLength\": \"Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±\",\n    \"auth.loginSubtitle\": \"ÄÄƒng nháº­p vÃ o tÃ i khoáº£n cá»§a báº¡n\",\n    \"auth.signupSubtitle\": \"Táº¡o tÃ i khoáº£n má»›i\",\n    \"auth.noAccount\": \"ChÆ°a cÃ³ tÃ i khoáº£n? ÄÄƒng kÃ½ ngay\",\n    \"auth.hasAccount\": \"ÄÃ£ cÃ³ tÃ i khoáº£n? ÄÄƒng nháº­p ngay\",\n    \"auth.loginDescription\": \"ÄÄƒng nháº­p Ä‘á»ƒ lÆ°u nhÃ  hÃ ng vÃ  viáº¿t Ä‘Ã¡nh giÃ¡\",\n    \"auth.signupDescription\": \"ÄÄƒng kÃ½ Ä‘á»ƒ lÆ°u nhÃ  hÃ ng vÃ  viáº¿t Ä‘Ã¡nh giÃ¡\",\n    \"announcements.title\": \"ThÃ´ng bÃ¡o\",\n    \"announcements.viewAll\": \"Xem táº¥t cáº£\",\n    \"announcements.noItems\": \"KhÃ´ng cÃ³ thÃ´ng bÃ¡o\",\n    \"events.title\": \"Sá»± kiá»‡n Ä‘ang diá»…n ra\",\n  },\n};\n","size_bytes":38634},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/pages/MyPage.tsx":{"content":"import { User, Heart, Star, MapPin, Settings, ChevronRight, FileText, Users, Bell, LogIn } from \"lucide-react\";\nimport { BottomNav } from \"@/components/BottomNav\";\nimport { LanguageSelector } from \"@/components/LanguageSelector\";\nimport { SEO } from \"@/components/SEO\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\nimport { AdSlot } from \"@/components/AdSlot\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link, useLocation } from \"wouter\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport type { Restaurant, Announcement, EventBanner } from \"@shared/schema\";\nimport { useEffect } from \"react\";\n\nexport default function MyPage() {\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated, isLoading: authLoading } = useAuth();\n  const [location] = useLocation();\n\n  const { data: savedRestaurants = [], isLoading: loadingSaved, error, isError, status, dataUpdatedAt, refetch } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/saved\", isAuthenticated],\n    queryFn: async () => {\n      console.log('[MyPage queryFn] Starting fetch, isAuthenticated:', isAuthenticated);\n      if (!isAuthenticated) {\n        console.log('[MyPage queryFn] Not authenticated, returning empty array');\n        return [];\n      }\n      const res = await fetch(\"/api/saved\", {\n        credentials: \"include\",\n      });\n      console.log('[MyPage queryFn] Response status:', res.status, 'ok:', res.ok);\n      if (res.status === 401) {\n        console.log('[MyPage queryFn] Got 401, returning empty array');\n        return [];\n      }\n      if (!res.ok) {\n        console.error('[MyPage queryFn] Response not ok:', res.status, await res.text());\n        return [];\n      }\n      const data = await res.json();\n      console.log('[MyPage queryFn] Fetched saved restaurants:', data.length, 'items', data);\n      return data;\n    },\n    refetchOnMount: 'always',\n    staleTime: 0,\n    enabled: isAuthenticated,\n  });\n\n  useEffect(() => {\n    if (isAuthenticated && !authLoading) {\n      console.log('[MyPage useEffect] Refetching saved restaurants, location:', location);\n      refetch();\n    }\n  }, [isAuthenticated, authLoading, location, refetch]);\n\n  console.log('[MyPage] Query Status:', { \n    isAuthenticated, \n    user: user?.email, \n    status, \n    isLoading: loadingSaved,\n    isError,\n    error: error?.message,\n    dataUpdatedAt: new Date(dataUpdatedAt).toISOString(),\n    savedCount: savedRestaurants.length \n  });\n\n  const { data: announcements = [] } = useQuery<Announcement[]>({\n    queryKey: [\"/api/announcements\"],\n  });\n\n  const { data: eventBanners = [] } = useQuery<EventBanner[]>({\n    queryKey: [\"/api/event-banners\"],\n  });\n\n  const stats = [\n    { label: t(\"my.saved\"), value: savedRestaurants.length, icon: Heart },\n    { label: t(\"my.reviews\"), value: 12, icon: Star },\n    { label: t(\"my.visited\"), value: 38, icon: MapPin },\n  ];\n\n  const menuItems = [\n    {\n      icon: Heart,\n      title: t(\"my.saved\"),\n      badge: String(savedRestaurants.length),\n      testId: \"menu-saved\",\n    },\n    {\n      icon: Star,\n      title: t(\"my.reviews\"),\n      badge: \"12\",\n      testId: \"menu-reviews\",\n    },\n    {\n      icon: MapPin,\n      title: t(\"my.visited\"),\n      badge: \"38\",\n      testId: \"menu-visits\",\n    },\n    {\n      icon: Users,\n      title: t(\"my.following\"),\n      badge: \"15\",\n      testId: \"menu-following\",\n    },\n  ];\n\n  const settingItems = [\n    {\n      icon: Bell,\n      title: t(\"my.notifications\"),\n      testId: \"settings-notifications\",\n    },\n    {\n      icon: Settings,\n      title: t(\"my.settings\"),\n      testId: \"settings-app\",\n    },\n    {\n      icon: FileText,\n      title: t(\"my.terms\"),\n      testId: \"settings-terms\",\n    },\n  ];\n\n\n  return (\n    <>\n      <SEO\n        title={t(\"my.profile\")}\n        description=\"Manage your saved restaurants, reviews, and preferences. Track your Korean food journey.\"\n        keywords={[\"saved restaurants\", \"reviews\", \"user profile\", \"restaurant bookmarks\"]}\n        url=\"/my\"\n      />\n      <div className=\"min-h-screen bg-background pb-[72px]\">\n        {/* Header */}\n      <header className=\"bg-primary text-primary-foreground\">\n        <div className=\"max-w-7xl mx-auto px-4 xl:px-6 py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <img\n              src=\"/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png\"\n              alt=\"í•œì‹ë‹¹\"\n              className=\"h-8\"\n            />\n            <LanguageSelector />\n          </div>\n          <div className=\"flex items-center gap-4\">\n            {authLoading ? (\n              <>\n                <div className=\"w-20 h-20 rounded-full bg-white/20 animate-pulse\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-6 bg-white/20 rounded animate-pulse w-32\" />\n                  <div className=\"h-8 bg-white/20 rounded animate-pulse w-24\" />\n                </div>\n              </>\n            ) : !isAuthenticated ? (\n              <>\n                <div className=\"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center border-2 border-white/30\">\n                  <User className=\"w-10 h-10\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h1 className=\"text-xl font-bold mb-1\">\n                    {language === \"en\" ? \"Welcome to\" : \"í•œì‹ë‹¹ì— ì˜¤ì‹  ê²ƒì„\"}\n                  </h1>\n                  <p className=\"text-sm text-primary-foreground/80 mb-2\">\n                    {language === \"en\" ? \"han sik dang\" : \"í™˜ì˜í•©ë‹ˆë‹¤\"}\n                  </p>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"border-white/30 text-primary-foreground hover:bg-white/10\"\n                    onClick={() => window.location.href = \"/api/login\"}\n                    data-testid=\"button-login\"\n                  >\n                    <LogIn className=\"w-4 h-4 mr-2\" />\n                    {language === \"en\" ? \"Log In\" : \"ë¡œê·¸ì¸\"}\n                  </Button>\n                </div>\n              </>\n            ) : (\n              <>\n                <Avatar className=\"w-20 h-20 border-2 border-white/30\">\n                  <AvatarImage src={user?.profileImageUrl || undefined} />\n                  <AvatarFallback className=\"bg-white/20 text-primary-foreground text-2xl\">\n                    {user?.firstName?.[0] || user?.email?.[0]?.toUpperCase() || \"U\"}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1\">\n                  <h1 className=\"text-xl font-bold mb-1\">\n                    {user?.firstName && user?.lastName \n                      ? `${user.firstName} ${user.lastName}`\n                      : user?.email || \"User\"}\n                  </h1>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"mt-2 border-white/30 text-primary-foreground hover:bg-white/10\"\n                    onClick={() => window.location.href = \"/api/logout\"}\n                    data-testid=\"button-logout\"\n                  >\n                    {language === \"en\" ? \"Log Out\" : \"ë¡œê·¸ì•„ì›ƒ\"}\n                  </Button>\n                </div>\n              </>\n            )}\n          </div>\n\n          {/* Stats */}\n          <div className=\"grid grid-cols-3 gap-3 mt-6\">\n            {stats.map((stat, index) => {\n              const Icon = stat.icon;\n              return (\n                <div\n                  key={index}\n                  className=\"bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center\"\n                  data-testid={`stat-${index}`}\n                >\n                  <Icon className=\"w-5 h-5 mx-auto mb-1\" />\n                  <p className=\"text-2xl font-bold\">{stat.value}</p>\n                  <p className=\"text-xs text-primary-foreground/80 mt-1\">\n                    {stat.label}\n                  </p>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Ad Banner */}\n        <div className=\"px-4 pt-4\">\n          <AdSlot variant=\"banner\" />\n        </div>\n\n        {/* Menu Items */}\n        <section className=\"px-4 py-6\">\n          <h2 className=\"text-sm font-semibold text-muted-foreground mb-3 uppercase\">\n            My Activity\n          </h2>\n          <Card className=\"divide-y divide-border\">\n            {menuItems.map((item, index) => {\n              const Icon = item.icon;\n              return (\n                <button\n                  key={index}\n                  className=\"w-full flex items-center gap-3 p-4 hover-elevate active-elevate-2 transition-colors\"\n                  data-testid={item.testId}\n                >\n                  <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <Icon className=\"w-5 h-5 text-primary\" />\n                  </div>\n                  <div className=\"flex-1 text-left\">\n                    <p className=\"font-medium\">{item.title}</p>\n                  </div>\n                  {item.badge && (\n                    <Badge variant=\"secondary\" className=\"mr-2\">\n                      {item.badge}\n                    </Badge>\n                  )}\n                  <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\n                </button>\n              );\n            })}\n          </Card>\n        </section>\n\n        {/* Saved Restaurants */}\n        <section className=\"px-4 py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-lg font-semibold\">{t(\"my.saved\")}</h2>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-saved\">\n              {t(\"my.seeAll\")}\n            </Button>\n          </div>\n\n          {!isAuthenticated ? (\n            <Card className=\"p-8 text-center\">\n              <LogIn className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n              <p className=\"text-lg font-semibold mb-2\">\n                {language === \"en\" ? \"Log in to save restaurants\" : \"ë¡œê·¸ì¸í•˜ì—¬ ë ˆìŠ¤í† ë‘ ì €ì¥\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground mb-4\">\n                {language === \"en\" \n                  ? \"Save your favorite Korean restaurants and access them anytime\" \n                  : \"ì¢‹ì•„í•˜ëŠ” í•œì‹ë‹¹ì„ ì €ì¥í•˜ê³  ì–¸ì œë“ ì§€ í™•ì¸í•˜ì„¸ìš”\"}\n              </p>\n              <Button\n                onClick={() => window.location.href = \"/api/login\"}\n                data-testid=\"button-login-saved\"\n              >\n                <LogIn className=\"w-4 h-4 mr-2\" />\n                {language === \"en\" ? \"Log In\" : \"ë¡œê·¸ì¸\"}\n              </Button>\n            </Card>\n          ) : loadingSaved ? (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n              {Array.from({ length: 3 }).map((_, i) => (\n                <Card key={i} className=\"p-4\">\n                  <div className=\"flex gap-3\">\n                    <div className=\"w-24 h-24 rounded-md bg-muted animate-pulse\" />\n                    <div className=\"flex-1 space-y-2\">\n                      <div className=\"h-5 bg-muted rounded animate-pulse w-3/4\" />\n                      <div className=\"h-4 bg-muted rounded animate-pulse w-1/2\" />\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          ) : savedRestaurants.length === 0 ? (\n            <Card className=\"p-8 text-center\">\n              <Heart className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n              <p className=\"text-lg font-semibold mb-2\">\n                {language === \"en\" ? \"No saved restaurants yet\" : \"ì €ì¥ëœ ë ˆìŠ¤í† ë‘ì´ ì—†ìŠµë‹ˆë‹¤\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                {language === \"en\"\n                  ? \"Start saving your favorite restaurants to see them here\"\n                  : \"ì¢‹ì•„í•˜ëŠ” ë ˆìŠ¤í† ë‘ì„ ì €ì¥í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤\"}\n              </p>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n              {savedRestaurants.map((restaurant) => (\n                <Link key={restaurant.id} href={`/restaurant/${restaurant.id}`}>\n                  <Card\n                    className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                    data-testid={`saved-restaurant-${restaurant.id}`}\n                  >\n                    <div className=\"flex gap-3\">\n                      <img\n                        src={restaurant.imageUrl}\n                        alt={restaurant.name}\n                        className=\"w-24 h-24 rounded-md object-cover\"\n                      />\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold text-base mb-1 truncate\">\n                          {language === \"en\" ? restaurant.nameEn : restaurant.name}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground mb-2 truncate\">\n                          {language === \"en\" ? restaurant.name : restaurant.nameEn}\n                        </p>\n                        <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {restaurant.cuisine}\n                          </Badge>\n                          {restaurant.rating > 0 && (\n                            <div className=\"flex items-center gap-1 text-sm\">\n                              <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                              <span className=\"font-medium\">{restaurant.rating}</span>\n                              <span className=\"text-muted-foreground\">\n                                ({restaurant.reviewCount})\n                              </span>\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"flex items-center gap-1 text-xs text-muted-foreground truncate\">\n                          <MapPin className=\"w-3 h-3 flex-shrink-0\" />\n                          <span className=\"truncate\">{restaurant.district}</span>\n                        </div>\n                      </div>\n                    </div>\n                  </Card>\n                </Link>\n              ))}\n            </div>\n          )}\n        </section>\n\n        {/* Event Banners */}\n        {eventBanners.length > 0 && (\n          <section className=\"py-4\">\n            <div className=\"px-4 mb-3\">\n              <h2 className=\"text-lg font-semibold\">{t(\"events.title\")}</h2>\n            </div>\n            <ScrollArea className=\"w-full whitespace-nowrap\">\n              <div className=\"flex gap-4 px-4 pb-2\">\n                {eventBanners.map((banner) => (\n                  <a\n                    key={banner.id}\n                    href={banner.linkUrl || \"#\"}\n                    target={banner.linkUrl ? \"_blank\" : undefined}\n                    rel={banner.linkUrl ? \"noopener noreferrer\" : undefined}\n                    className=\"flex-shrink-0\"\n                    data-testid={`banner-event-${banner.id}`}\n                  >\n                    <Card className=\"w-[320px] overflow-hidden hover-elevate active-elevate-2 cursor-pointer\">\n                      <div className=\"relative aspect-[2/1]\">\n                        <img\n                          src={banner.imageUrl}\n                          alt={language === \"en\" ? banner.titleEn : banner.title}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                      <div className=\"p-4\">\n                        <h3 className=\"font-semibold text-base mb-1\">\n                          {language === \"en\" ? banner.titleEn : banner.title}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                          {language === \"en\" ? banner.descriptionEn : banner.description}\n                        </p>\n                      </div>\n                    </Card>\n                  </a>\n                ))}\n              </div>\n              <ScrollBar orientation=\"horizontal\" />\n            </ScrollArea>\n          </section>\n        )}\n\n        {/* Announcements Section */}\n        <section className=\"px-4 py-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5 text-primary\" />\n              <h2 className=\"text-lg font-semibold\">{t(\"announcements.title\")}</h2>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-announcements\">\n              {t(\"announcements.viewAll\")}\n            </Button>\n          </div>\n\n          {announcements.length === 0 ? (\n            <Card className=\"p-6 text-center\">\n              <p className=\"text-sm text-muted-foreground\">{t(\"announcements.noItems\")}</p>\n            </Card>\n          ) : (\n            <div className=\"space-y-2\">\n              {announcements.slice(0, 2).map((announcement) => (\n                <Card\n                  key={announcement.id}\n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  data-testid={`card-announcement-${announcement.id}`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {announcement.isPinned === 1 && (\n                      <Badge variant=\"secondary\" className=\"text-xs flex-shrink-0\">\n                        ğŸ“Œ\n                      </Badge>\n                    )}\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold text-sm line-clamp-2\">\n                        {language === \"en\" ? announcement.titleEn : announcement.title}\n                      </h3>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {new Date(announcement.createdAt).toLocaleDateString(language === \"en\" ? \"en-US\" : \"ko-KR\")}\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </section>\n\n        {/* Settings */}\n        <section className=\"px-4 py-6\">\n          <h2 className=\"text-sm font-semibold text-muted-foreground mb-3 uppercase\">\n            Settings\n          </h2>\n          <Card className=\"divide-y divide-border\">\n            {settingItems.map((item, index) => {\n              const Icon = item.icon;\n              return (\n                <button\n                  key={index}\n                  className=\"w-full flex items-center gap-3 p-4 hover-elevate active-elevate-2 transition-colors\"\n                  data-testid={item.testId}\n                >\n                  <Icon className=\"w-5 h-5 text-muted-foreground\" />\n                  <div className=\"flex-1 text-left\">\n                    <p className=\"font-medium\">{item.title}</p>\n                  </div>\n                  <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\n                </button>\n              );\n            })}\n          </Card>\n        </section>\n\n        {/* Bottom Ad */}\n        <div className=\"px-4 pb-6\">\n          <AdSlot variant=\"banner\" />\n        </div>\n      </div>\n\n      <BottomNav />\n    </div>\n    </>\n  );\n}\n","size_bytes":19979},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { GoogleGenAI } from \"@google/genai\";\nimport { setupAuth, isAuthenticated, isAdmin } from \"./replitAuth\";\nimport { logger, ErrorMessages } from \"./logger\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { ObjectStorageService, ObjectNotFoundError } from \"./objectStorage\";\nimport { ObjectPermission } from \"./objectAcl\";\n\nconst genAI = new GoogleGenAI({ \n  apiKey: process.env.GEMINI_API_KEY || \"\" \n});\n\n// Configure multer for file uploads\nconst uploadDir = path.join(process.cwd(), \"uploaded_files\");\nif (!fs.existsSync(uploadDir)) {\n  fs.mkdirSync(uploadDir, { recursive: true });\n}\n\nconst uploadStorage = multer.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, uploadDir);\n  },\n  filename: (req, file, cb) => {\n    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n    cb(null, file.fieldname + '-' + uniqueSuffix + path.extname(file.originalname));\n  }\n});\n\nconst upload = multer({\n  storage: uploadStorage,\n  limits: { fileSize: 5 * 1024 * 1024 }, // 5MB limit\n  fileFilter: (req, file, cb) => {\n    const allowedTypes = /jpeg|jpg|png|gif|webp/;\n    const extname = allowedTypes.test(path.extname(file.originalname).toLowerCase());\n    const mimetype = allowedTypes.test(file.mimetype);\n    \n    if (mimetype && extname) {\n      return cb(null, true);\n    } else {\n      cb(new Error('Only image files are allowed!'));\n    }\n  }\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup Replit Auth\n  await setupAuth(app);\n\n  // Config endpoint - Get public configuration\n  app.get('/api/config', (req, res) => {\n    res.json({\n      naverMapsClientId: process.env.NAVER_MAPS_CLIENT_ID || ''\n    });\n  });\n\n  // Auth endpoint - get current user\n  app.get('/api/auth/user', async (req: any, res) => {\n    try {\n      if (!req.isAuthenticated()) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n      \n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n      \n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      res.json(user);\n    } catch (error) {\n      logger.error(\"Error fetching user\", { userId: req.user?.claims?.sub, error });\n      res.status(500).json({ message: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Debug endpoint - Make current user a restaurant owner\n  app.post('/api/debug/make-me-owner', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      // Get a random restaurant (or the first one)\n      const restaurants = await storage.getAllRestaurants();\n      if (restaurants.length === 0) {\n        return res.status(404).json({ message: \"No restaurants found\" });\n      }\n\n      // Use the first restaurant for testing\n      const restaurant = restaurants[0];\n\n      // Check if already an owner\n      const existingOwnership = await storage.getRestaurantsByOwner(userId);\n      if (existingOwnership.length > 0) {\n        return res.json({ \n          message: \"You are already an owner!\", \n          restaurants: existingOwnership.map((r: any) => ({ id: r.id, name: r.name, nameEn: r.nameEn }))\n        });\n      }\n\n      // Add as owner\n      await storage.createRestaurantOwner({\n        userId,\n        restaurantId: restaurant.id,\n        role: \"owner\",\n      });\n\n      res.json({ \n        message: \"Successfully made you an owner!\",\n        restaurant: {\n          id: restaurant.id,\n          name: restaurant.name,\n          nameEn: restaurant.nameEn\n        }\n      });\n    } catch (error) {\n      logger.error(\"Error making user an owner\", { userId: req.user?.claims?.sub, error });\n      res.status(500).json({ message: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Debug endpoint - Make current user an admin\n  app.post('/api/debug/make-me-admin', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n\n      // Get current user\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      // Check if already admin\n      if (user.isAdmin === 1) {\n        return res.json({ \n          message: \"You are already an admin!\",\n          user: {\n            email: user.email,\n            isAdmin: true\n          }\n        });\n      }\n\n      // Update user to admin\n      await storage.updateUserAdminStatus(userId, 1);\n\n      res.json({ \n        message: \"Successfully made you an admin!\",\n        user: {\n          email: user.email,\n          isAdmin: true\n        }\n      });\n    } catch (error) {\n      logger.error(\"Error making user an admin\", { userId: req.user?.claims?.sub, error });\n      res.status(500).json({ message: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/ai/chat\", async (req, res) => {\n    try {\n      const { message, language = \"ko\", location = null, area = null } = req.body;\n\n      if (!message || typeof message !== \"string\") {\n        return res.status(400).json({ error: \"Message is required\" });\n      }\n\n      const restaurants = await storage.getAllRestaurants();\n      \n      const restaurantDataPromises = restaurants.map(async (r) => {\n        const insights = await storage.getRestaurantInsights(r.id);\n        return {\n          name: r.name,\n          nameEn: r.nameEn,\n          cuisine: r.cuisine,\n          district: r.district,\n          description: language === \"en\" ? r.descriptionEn : r.description,\n          rating: r.rating,\n          priceRange: r.priceRange,\n          isVegan: r.isVegan === 1,\n          isHalal: r.isHalal === 1,\n          aiInsights: insights ? {\n            reviewInsights: language === \"en\" ? insights.reviewInsightsEn : insights.reviewInsights,\n            bestFor: language === \"en\" ? insights.bestForEn : insights.bestFor,\n            culturalTips: language === \"en\" ? insights.culturalTipsEn : insights.culturalTips,\n            firstTimerTips: language === \"en\" ? insights.firstTimerTipsEn : insights.firstTimerTips,\n          } : null,\n        };\n      });\n      \n      const restaurantData = await Promise.all(restaurantDataPromises);\n\n      // Build context based on selected location and area\n      let locationContext = \"\";\n      if (location === \"nearby\") {\n        locationContext = language === \"en\" \n          ? \"\\n\\nIMPORTANT: The user is looking for restaurants NEARBY their current location. Focus on proximity and accessibility.\"\n          : \"\\n\\nì¤‘ìš”: ì‚¬ìš©ìëŠ” í˜„ì¬ ìœ„ì¹˜ ê·¼ì²˜ì˜ ë ˆìŠ¤í† ë‘ì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤. ì ‘ê·¼ì„±ê³¼ ê·¼ì ‘ì„±ì— ì´ˆì ì„ ë§ì¶°ì£¼ì„¸ìš”.\";\n      } else if (location === \"other\" && area) {\n        locationContext = language === \"en\"\n          ? `\\n\\nIMPORTANT: The user wants to explore restaurants specifically in the ${area} area. Only recommend restaurants in ${area}. Filter by district matching \"${area}\".`\n          : `\\n\\nì¤‘ìš”: ì‚¬ìš©ìëŠ” ${area} ì§€ì—­ì˜ ë ˆìŠ¤í† ë‘ì„ íƒìƒ‰í•˜ê³  ì‹¶ì–´í•©ë‹ˆë‹¤. ${area}ì— ìˆëŠ” ë ˆìŠ¤í† ë‘ë§Œ ì¶”ì²œí•´ì£¼ì„¸ìš”. \"${area}\"ì— í•´ë‹¹í•˜ëŠ” êµ¬ì—­ì˜ ë ˆìŠ¤í† ë‘ìœ¼ë¡œ í•„í„°ë§í•˜ì„¸ìš”.`;\n      }\n\n      const systemPrompt = getSystemPrompt(language);\n      const restaurantContext = `\\n\\nAvailable restaurants in our database:\\n${JSON.stringify(restaurantData, null, 2)}`;\n      const fullPrompt = `${systemPrompt}${restaurantContext}${locationContext}\\n\\nUser question: ${message}`;\n\n      const result = await genAI.models.generateContent({\n        model: \"gemini-2.0-flash-exp\",\n        contents: fullPrompt,\n      });\n\n      const text = result.candidates?.[0]?.content?.parts?.[0]?.text || \"No response generated\";\n\n      res.json({ response: text });\n    } catch (error) {\n      logger.error(\"AI chat error\", { error, path: \"/api/ai/chat\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/ai-chat\", async (req, res) => {\n    try {\n      const { message, language = \"ko\", context, conversationHistory = [] } = req.body;\n\n      if (!message || typeof message !== \"string\") {\n        return res.status(400).json({ error: \"Message is required\" });\n      }\n\n      const { cardType, restaurant, menus, externalReviews, insights } = context;\n\n      let systemPrompt = \"\";\n      \n      if (cardType === \"reviews\") {\n        systemPrompt = language === \"en\" \n          ? `You are an expert at analyzing restaurant reviews. Help users understand what customers are saying about ${restaurant.name}.\n\nRestaurant: ${restaurant.name} (${restaurant.cuisine})\nDescription: ${restaurant.description}\n\nExternal Reviews:\n${externalReviews.map((r: any) => `- ${r.source} (${r.rating}/5): ${r.comment}`).join('\\n')}\n\n${insights ? `AI Insights:\n- What customers love: ${insights.reviewInsights || insights.reviewInsightsEn}\n- Best for: ${insights.bestFor || insights.bestForEn}\n- Cultural tips: ${insights.culturalTips || insights.culturalTipsEn}\n- First-timer tips: ${insights.firstTimerTips || insights.firstTimerTipsEn}` : ''}\n\nProvide helpful, concise answers about customer experiences and ratings. Be honest about both positives and negatives.`\n          : `ë‹¹ì‹ ì€ ë ˆìŠ¤í† ë‘ ë¦¬ë·° ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ${restaurant.name}ì— ëŒ€í•œ ê³ ê°ë“¤ì˜ í‰ê°€ë¥¼ ì´í•´í•˜ë„ë¡ ë„ì™€ì£¼ì„¸ìš”.\n\në ˆìŠ¤í† ë‘: ${restaurant.name} (${restaurant.cuisine})\nì„¤ëª…: ${restaurant.description}\n\nì™¸ë¶€ ë¦¬ë·°:\n${externalReviews.map((r: any) => `- ${r.source} (${r.rating}/5): ${r.comment}`).join('\\n')}\n\n${insights ? `AI ì¸ì‚¬ì´íŠ¸:\n- ê³ ê°ë“¤ì´ ì¢‹ì•„í•˜ëŠ” ì : ${insights.reviewInsights}\n- ì¶”ì²œ ìƒí™©: ${insights.bestFor}\n- ë¬¸í™” íŒ: ${insights.culturalTips}\n- ì²« ë°©ë¬¸ íŒ: ${insights.firstTimerTips}` : ''}\n\nê³ ê° ê²½í—˜ê³¼ í‰ì ì— ëŒ€í•´ ë„ì›€ì´ ë˜ê³  ê°„ê²°í•œ ë‹µë³€ì„ ì œê³µí•˜ì„¸ìš”. ê¸ì •ì ì¸ ë©´ê³¼ ë¶€ì •ì ì¸ ë©´ ëª¨ë‘ ì†”ì§í•˜ê²Œ ë§ì”€í•˜ì„¸ìš”.`;\n      } else if (cardType === \"menu\") {\n        systemPrompt = language === \"en\"\n          ? `You are a Korean food menu expert. Help users choose the best dishes at ${restaurant.name}.\n\nRestaurant: ${restaurant.name} (${restaurant.cuisine})\n\nMenu:\n${menus.map((m: any) => `- ${m.name}: ${m.description} - â‚©${m.price.toLocaleString()} (${m.category})`).join('\\n')}\n\n${insights ? `Recommendations:\n- Best for: ${insights.bestFor || insights.bestForEn}\n- First-timer tips: ${insights.firstTimerTips || insights.firstTimerTipsEn}` : ''}\n\nHelp users choose dishes based on their preferences, dietary restrictions, and budget. Provide personalized recommendations.`\n          : `ë‹¹ì‹ ì€ í•œì‹ ë©”ë‰´ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ${restaurant.name}ì—ì„œ ìµœê³ ì˜ ìš”ë¦¬ë¥¼ ì„ íƒí•˜ë„ë¡ ë„ì™€ì£¼ì„¸ìš”.\n\në ˆìŠ¤í† ë‘: ${restaurant.name} (${restaurant.cuisine})\n\në©”ë‰´:\n${menus.map((m: any) => `- ${m.name}: ${m.description} - â‚©${m.price.toLocaleString()} (${m.category})`).join('\\n')}\n\n${insights ? `ì¶”ì²œ ì‚¬í•­:\n- ì¶”ì²œ ìƒí™©: ${insights.bestFor}\n- ì²« ë°©ë¬¸ íŒ: ${insights.firstTimerTips}` : ''}\n\nì‚¬ìš©ìì˜ ì„ í˜¸ë„, ì‹ì´ ì œí•œ, ì˜ˆì‚°ì— ë”°ë¼ ìš”ë¦¬ë¥¼ ì„ íƒí•˜ë„ë¡ ë„ì™€ì£¼ì„¸ìš”. ë§ì¶¤í˜• ì¶”ì²œì„ ì œê³µí•˜ì„¸ìš”.`;\n      } else if (cardType === \"howToEat\") {\n        systemPrompt = language === \"en\"\n          ? `You are a Korean food culture expert. Teach users how to properly eat Korean dishes at ${restaurant.name}.\n\nRestaurant: ${restaurant.name} (${restaurant.cuisine})\n\n${insights && insights.culturalTips ? `Cultural tips: ${insights.culturalTipsEn || insights.culturalTips}` : ''}\n\nExplain:\n- Proper eating techniques and etiquette\n- How to use Korean utensils (chopsticks, spoon)\n- Traditional Korean dining customs\n- What to do and what to avoid\n\nBe friendly and educational. Help foreigners feel comfortable with Korean food culture.`\n          : `ë‹¹ì‹ ì€ í•œì‹ ë¬¸í™” ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ${restaurant.name}ì—ì„œ í•œêµ­ ìš”ë¦¬ë¥¼ ì œëŒ€ë¡œ ë¨¹ëŠ” ë°©ë²•ì„ ê°€ë¥´ì³ì£¼ì„¸ìš”.\n\në ˆìŠ¤í† ë‘: ${restaurant.name} (${restaurant.cuisine})\n\n${insights && insights.culturalTips ? `ë¬¸í™” íŒ: ${insights.culturalTips}` : ''}\n\nì„¤ëª…:\n- ì˜¬ë°”ë¥¸ ë¨¹ëŠ” ë²•ê³¼ ì—í‹°ì¼“\n- í•œêµ­ ì‹ê¸° ì‚¬ìš©ë²• (ì “ê°€ë½, ìˆŸê°€ë½)\n- ì „í†µ í•œêµ­ ì‹ì‚¬ ì˜ˆì ˆ\n- í•´ì•¼ í•  ê²ƒê³¼ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ\n\nì¹œê·¼í•˜ê³  êµìœ¡ì ìœ¼ë¡œ ì„¤ëª…í•˜ì„¸ìš”. ì™¸êµ­ì¸ë“¤ì´ í•œêµ­ ìŒì‹ ë¬¸í™”ì— í¸ì•ˆí•¨ì„ ëŠë¼ë„ë¡ ë„ì™€ì£¼ì„¸ìš”.`;\n      } else if (cardType === \"ordering\") {\n        systemPrompt = language === \"en\"\n          ? `You are a Korean restaurant ordering expert. Help users order confidently at ${restaurant.name}.\n\nRestaurant: ${restaurant.name} (${restaurant.cuisine})\n\n${insights && insights.firstTimerTips ? `First-timer tips: ${insights.firstTimerTipsEn || insights.firstTimerTips}` : ''}\n\nHelp with:\n- How to order in Korean (phrases and pronunciation)\n- What to say to the waiter\n- Common ordering mistakes to avoid\n- Tips for customizing orders\n- How to ask for recommendations\n\nBe practical and provide useful Korean phrases with translations.`\n          : `ë‹¹ì‹ ì€ í•œêµ­ ì‹ë‹¹ ì£¼ë¬¸ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ${restaurant.name}ì—ì„œ ìì‹ ìˆê²Œ ì£¼ë¬¸í•˜ë„ë¡ ë„ì™€ì£¼ì„¸ìš”.\n\në ˆìŠ¤í† ë‘: ${restaurant.name} (${restaurant.cuisine})\n\n${insights && insights.firstTimerTips ? `ì²« ë°©ë¬¸ íŒ: ${insights.firstTimerTips}` : ''}\n\në„ì›€ ì£¼ê¸°:\n- í•œêµ­ì–´ë¡œ ì£¼ë¬¸í•˜ëŠ” ë²• (í‘œí˜„ê³¼ ë°œìŒ)\n- ì›¨ì´í„°ì—ê²Œ ë¬´ì—‡ì„ ë§í• ì§€\n- í”í•œ ì£¼ë¬¸ ì‹¤ìˆ˜ í”¼í•˜ê¸°\n- ì£¼ë¬¸ ë§ì¶¤í™” íŒ\n- ì¶”ì²œ ìš”ì²­í•˜ëŠ” ë²•\n\nì‹¤ìš©ì ì´ê³  ìœ ìš©í•œ í•œêµ­ì–´ í‘œí˜„ì„ ë²ˆì—­ê³¼ í•¨ê»˜ ì œê³µí•˜ì„¸ìš”.`;\n      }\n\n      const conversationContext = conversationHistory.length > 0\n        ? `\\n\\nPrevious conversation:\\n${conversationHistory.map((msg: any) => `${msg.role === \"user\" ? \"User\" : \"Assistant\"}: ${msg.content}`).join('\\n')}`\n        : \"\";\n\n      const fullPrompt = `${systemPrompt}${conversationContext}\\n\\nUser: ${message}\\n\\nAssistant:`;\n\n      const result = await genAI.models.generateContent({\n        model: \"gemini-2.0-flash-exp\",\n        contents: fullPrompt,\n      });\n\n      const text = result.candidates?.[0]?.content?.parts?.[0]?.text || \"No response generated\";\n\n      res.json({ response: text });\n    } catch (error) {\n      logger.error(\"AI chat error\", { error, path: \"/api/ai-chat\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants\", async (req, res) => {\n    try {\n      const sortBy = req.query.sortBy as string;\n      const restaurants = await storage.getAllRestaurants(sortBy);\n      res.json(restaurants);\n    } catch (error) {\n      logger.error(\"Get restaurants error\", { error, path: \"/api/restaurants\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/search/:query\", async (req, res) => {\n    try {\n      const query = req.params.query;\n      if (!query || query.trim().length === 0) {\n        return res.status(400).json({ error: \"Search query is required\" });\n      }\n      const restaurants = await storage.searchRestaurants(query);\n      res.json(restaurants);\n    } catch (error) {\n      logger.error(\"Search restaurants error\", { error, path: \"/api/restaurants/search\", query: req.params.query });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/featured\", async (req, res) => {\n    try {\n      const restaurants = await storage.getFeaturedRestaurants();\n      res.json(restaurants);\n    } catch (error) {\n      logger.error(\"Get featured restaurants error\", { error, path: \"/api/restaurants/featured\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/:id\", async (req, res) => {\n    try {\n      const restaurant = await storage.getRestaurant(req.params.id);\n      if (!restaurant) {\n        return res.status(404).json({ error: \"Restaurant not found\" });\n      }\n      \n      // Get menus for this restaurant\n      const menus = await storage.getMenusByRestaurant(req.params.id);\n      \n      // Generate map URLs\n      const naverMapUrl = restaurant.naverPlaceId \n        ? `https://map.naver.com/p/entry/place/${restaurant.naverPlaceId}`\n        : `https://map.naver.com/p/search/${encodeURIComponent(restaurant.address)}`;\n      \n      const googleMapUrl = restaurant.googlePlaceId\n        ? `https://www.google.com/maps/place/?q=place_id:${restaurant.googlePlaceId}`\n        : restaurant.latitude && restaurant.longitude\n        ? `https://www.google.com/maps/search/?api=1&query=${restaurant.latitude},${restaurant.longitude}`\n        : `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(restaurant.address)}`;\n      \n      res.json({\n        ...restaurant,\n        menus,\n        naverMapUrl,\n        googleMapUrl\n      });\n    } catch (error) {\n      logger.error(\"Get restaurant error\", { error, path: \"/api/restaurants/:id\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/district/:district\", async (req, res) => {\n    try {\n      const restaurants = await storage.getRestaurantsByDistrict(req.params.district);\n      res.json(restaurants);\n    } catch (error) {\n      logger.error(\"Get restaurants by district error\", { error, path: \"/api/restaurants/district\", district: req.params.district });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/reviews/:restaurantId\", async (req, res) => {\n    try {\n      const reviews = await storage.getReviewsByRestaurant(req.params.restaurantId);\n      res.json(reviews);\n    } catch (error) {\n      logger.error(\"Get reviews error\", { error, path: \"/api/reviews/:restaurantId\", restaurantId: req.params.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Protected review endpoints\n  app.post(\"/api/reviews\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { restaurantId, rating, comment } = req.body;\n      \n      if (!restaurantId || !rating) {\n        return res.status(400).json({ error: \"restaurantId and rating are required\" });\n      }\n\n      if (rating < 1 || rating > 5) {\n        return res.status(400).json({ error: \"Rating must be between 1 and 5\" });\n      }\n\n      const user = await storage.getUser(userId);\n      const userName = user?.firstName && user?.lastName \n        ? `${user.firstName} ${user.lastName}` \n        : user?.email || \"User\";\n\n      const review = await storage.createReview({\n        userId,\n        restaurantId,\n        userName,\n        rating,\n        comment: comment || \"\",\n      });\n\n      res.json(review);\n    } catch (error) {\n      logger.error(\"Create review error\", { error, path: \"/api/reviews\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.patch(\"/api/reviews/:reviewId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { reviewId } = req.params;\n      const { rating, comment } = req.body;\n\n      if (!rating) {\n        return res.status(400).json({ error: \"rating is required\" });\n      }\n\n      if (rating < 1 || rating > 5) {\n        return res.status(400).json({ error: \"Rating must be between 1 and 5\" });\n      }\n\n      const updated = await storage.updateReview(reviewId, userId, { rating, comment: comment || \"\" });\n      \n      if (!updated) {\n        return res.status(404).json({ error: \"Review not found or unauthorized\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      logger.error(\"Update review error\", { error, path: \"/api/reviews/:reviewId\", reviewId: req.params.reviewId, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.delete(\"/api/reviews/:reviewId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { reviewId } = req.params;\n\n      const deleted = await storage.deleteReview(reviewId, userId);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Review not found or unauthorized\" });\n      }\n\n      res.json({ success: true });\n    } catch (error) {\n      logger.error(\"Delete review error\", { error, path: \"/api/reviews/:reviewId\", reviewId: req.params.reviewId, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Protected saved restaurants endpoints\n  app.get(\"/api/saved\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      console.log(`[GET /api/saved] userId: ${userId}`);\n      const savedRestaurants = await storage.getSavedRestaurants(userId);\n      console.log(`[GET /api/saved] Found ${savedRestaurants.length} saved restaurants for user ${userId}`);\n      console.log(`[GET /api/saved] Returning data:`, JSON.stringify(savedRestaurants.map(r => ({ id: r.id, name: r.nameEn }))));\n      res.json(savedRestaurants);\n    } catch (error) {\n      logger.error(\"Get saved restaurants error\", { error, path: \"/api/saved\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/saved\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { restaurantId } = req.body;\n      console.log(`[POST /api/saved] userId: ${userId}, restaurantId: ${restaurantId}`);\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"restaurantId is required\" });\n      }\n      const saved = await storage.saveRestaurant({ userId, restaurantId });\n      console.log(`[POST /api/saved] Saved successfully:`, saved);\n      res.json(saved);\n    } catch (error) {\n      logger.error(\"Save restaurant error\", { error, path: \"/api/saved\", userId: req.user?.claims?.sub, restaurantId: req.body.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.delete(\"/api/saved/:restaurantId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { restaurantId } = req.params;\n      await storage.unsaveRestaurant(userId, restaurantId);\n      res.json({ success: true });\n    } catch (error) {\n      logger.error(\"Unsave restaurant error\", { error, path: \"/api/saved/:restaurantId\", userId: req.user?.claims?.sub, restaurantId: req.params.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/saved/check/:restaurantId\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { restaurantId } = req.params;\n      const isSaved = await storage.isRestaurantSaved(userId, restaurantId);\n      res.json({ isSaved });\n    } catch (error) {\n      logger.error(\"Check saved restaurant error\", { error, path: \"/api/saved/check/:restaurantId\", userId: req.user?.claims?.sub, restaurantId: req.params.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/announcements\", async (req, res) => {\n    try {\n      const limit = parseInt(req.query.limit as string) || 2;\n      const announcements = await storage.getRecentAnnouncements(limit);\n      res.json(announcements);\n    } catch (error) {\n      logger.error(\"Get announcements error\", { error, path: \"/api/announcements\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/event-banners\", async (req, res) => {\n    try {\n      const banners = await storage.getActiveEventBanners();\n      res.json(banners);\n    } catch (error) {\n      logger.error(\"Get event banners error\", { error, path: \"/api/event-banners\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n\n\n  app.get(\"/api/auth/me\", async (req, res) => {\n    const userId = req.query.userId as string | undefined;\n    try {\n      if (!userId) {\n        return res.status(401).json({ error: \"Not authenticated\" });\n      }\n\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      const userWithoutPassword = { id: user.id, email: user.email, firstName: user.firstName, lastName: user.lastName };\n      res.json(userWithoutPassword);\n    } catch (error) {\n      logger.error(\"Get current user error\", { error, path: \"/api/auth/me\", userId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/:id/insights\", async (req, res) => {\n    try {\n      const insights = await storage.getRestaurantInsights(req.params.id);\n      res.json(insights || null);\n    } catch (error) {\n      logger.error(\"Get restaurant insights error\", { error, path: \"/api/restaurants/:id/insights\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/:id/menus\", async (req, res) => {\n    try {\n      const menus = await storage.getMenusByRestaurant(req.params.id);\n      res.json(menus);\n    } catch (error) {\n      logger.error(\"Get menus error\", { error, path: \"/api/restaurants/:id/menus\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/:id/videos\", async (req, res) => {\n    try {\n      const videos = await storage.getYoutubeVideosByRestaurant(req.params.id);\n      res.json(videos);\n    } catch (error) {\n      logger.error(\"Get videos error\", { error, path: \"/api/restaurants/:id/videos\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/restaurants/:id/external-reviews\", async (req, res) => {\n    try {\n      const reviews = await storage.getExternalReviewsByRestaurant(req.params.id);\n      res.json(reviews);\n    } catch (error) {\n      logger.error(\"Get external reviews error\", { error, path: \"/api/restaurants/:id/external-reviews\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/generate-insights/:restaurantId\", async (req, res) => {\n    try {\n      const { restaurantId } = req.params;\n      \n      const existing = await storage.getRestaurantInsights(restaurantId);\n      if (existing) {\n        return res.json({ \n          message: \"Insights already exist\",\n          insights: existing,\n          generated: false\n        });\n      }\n\n      const insightsData = await generateRestaurantInsights(restaurantId);\n      const insights = await storage.createRestaurantInsights(insightsData);\n      \n      res.json({ \n        message: \"Insights generated successfully\",\n        insights,\n        generated: true\n      });\n    } catch (error) {\n      logger.error(\"Generate insights error\", { error, path: \"/api/admin/generate-insights/:restaurantId\", restaurantId: req.params.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/generate-all-insights\", async (req, res) => {\n    try {\n      const restaurants = await storage.getAllRestaurants();\n      const results = [];\n      let generated = 0;\n      let skipped = 0;\n      let errors = 0;\n\n      for (const restaurant of restaurants) {\n        try {\n          const existing = await storage.getRestaurantInsights(restaurant.id);\n          if (existing) {\n            skipped++;\n            continue;\n          }\n\n          const insightsData = await generateRestaurantInsights(restaurant.id);\n          await storage.createRestaurantInsights(insightsData);\n          generated++;\n          results.push({ \n            restaurantId: restaurant.id, \n            name: restaurant.name,\n            status: \"generated\" \n          });\n        } catch (error) {\n          errors++;\n          results.push({ \n            restaurantId: restaurant.id, \n            name: restaurant.name,\n            status: \"error\",\n            error: error instanceof Error ? error.message : \"Unknown error\"\n          });\n        }\n      }\n\n      res.json({ \n        message: \"Batch generation completed\",\n        total: restaurants.length,\n        generated,\n        skipped,\n        errors,\n        results\n      });\n    } catch (error) {\n      logger.error(\"Generate all insights error\", { error, path: \"/api/admin/generate-all-insights\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/generate-sample-data/:restaurantId\", async (req, res) => {\n    try {\n      const { restaurantId } = req.params;\n      \n      const restaurant = await storage.getRestaurant(restaurantId);\n      if (!restaurant) {\n        return res.status(404).json({ error: \"Restaurant not found\" });\n      }\n\n      const results: any = {\n        menus: [],\n        videos: [],\n        externalReviews: []\n      };\n\n      const existingMenus = await storage.getMenusByRestaurant(restaurantId);\n      if (existingMenus.length === 0) {\n        const sampleMenus = generateSampleMenus(restaurantId, restaurant.cuisine);\n        for (const menu of sampleMenus) {\n          const created = await storage.createMenu(menu);\n          results.menus.push(created);\n        }\n      }\n\n      const existingVideos = await storage.getYoutubeVideosByRestaurant(restaurantId);\n      if (existingVideos.length === 0) {\n        const sampleVideos = generateSampleVideos(restaurantId, restaurant.name);\n        for (const video of sampleVideos) {\n          const created = await storage.createYoutubeVideo(video);\n          results.videos.push(created);\n        }\n      }\n\n      const existingReviews = await storage.getExternalReviewsByRestaurant(restaurantId);\n      if (existingReviews.length === 0) {\n        const sampleReviews = generateSampleExternalReviews(restaurantId, restaurant.name);\n        for (const review of sampleReviews) {\n          const created = await storage.createExternalReview(review);\n          results.externalReviews.push(created);\n        }\n      }\n\n      res.json({\n        message: \"Sample data generated\",\n        restaurantId,\n        restaurantName: restaurant.name,\n        menusGenerated: results.menus.length,\n        videosGenerated: results.videos.length,\n        externalReviewsGenerated: results.externalReviews.length,\n        results\n      });\n    } catch (error) {\n      logger.error(\"Generate sample data error\", { error, path: \"/api/admin/generate-sample-data/:restaurantId\", restaurantId: req.params.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/generate-all-sample-data\", async (req, res) => {\n    try {\n      const restaurants = await storage.getAllRestaurants();\n      const results = [];\n      let totalMenus = 0;\n      let totalVideos = 0;\n      let totalReviews = 0;\n\n      for (const restaurant of restaurants) {\n        try {\n          const existingMenus = await storage.getMenusByRestaurant(restaurant.id);\n          if (existingMenus.length === 0) {\n            const sampleMenus = generateSampleMenus(restaurant.id, restaurant.cuisine);\n            for (const menu of sampleMenus) {\n              await storage.createMenu(menu);\n              totalMenus++;\n            }\n          }\n\n          const existingVideos = await storage.getYoutubeVideosByRestaurant(restaurant.id);\n          if (existingVideos.length === 0) {\n            const sampleVideos = generateSampleVideos(restaurant.id, restaurant.name);\n            for (const video of sampleVideos) {\n              await storage.createYoutubeVideo(video);\n              totalVideos++;\n            }\n          }\n\n          const existingReviews = await storage.getExternalReviewsByRestaurant(restaurant.id);\n          if (existingReviews.length === 0) {\n            const sampleReviews = generateSampleExternalReviews(restaurant.id, restaurant.name);\n            for (const review of sampleReviews) {\n              await storage.createExternalReview(review);\n              totalReviews++;\n            }\n          }\n\n          results.push({\n            restaurantId: restaurant.id,\n            name: restaurant.name,\n            status: \"completed\"\n          });\n        } catch (error) {\n          results.push({\n            restaurantId: restaurant.id,\n            name: restaurant.name,\n            status: \"error\",\n            error: error instanceof Error ? error.message : \"Unknown error\"\n          });\n        }\n      }\n\n      res.json({\n        message: \"Batch sample data generation completed\",\n        total: restaurants.length,\n        totalMenusGenerated: totalMenus,\n        totalVideosGenerated: totalVideos,\n        totalExternalReviewsGenerated: totalReviews,\n        results\n      });\n    } catch (error) {\n      logger.error(\"Generate all sample data error\", { error, path: \"/api/admin/generate-all-sample-data\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Restaurant Dashboard API Routes\n\n  // Get restaurants owned by current user\n  app.get(\"/api/my-restaurants\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const restaurants = await storage.getRestaurantsByOwner(userId);\n      res.json(restaurants);\n    } catch (error) {\n      logger.error(\"Get my restaurants error\", { error, path: \"/api/my-restaurants\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Check if user is owner of specific restaurant\n  app.get(\"/api/restaurants/:id/is-owner\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      res.json({ isOwner });\n    } catch (error) {\n      logger.error(\"Check ownership error\", { error, path: \"/api/restaurants/:id/is-owner\", userId: req.user?.claims?.sub, restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get dashboard statistics for restaurant\n  app.get(\"/api/restaurants/:id/dashboard-stats\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      const stats = await storage.getRestaurantDashboardStats(id);\n      res.json(stats);\n    } catch (error) {\n      logger.error(\"Get dashboard stats error\", { error, path: \"/api/restaurants/:id/dashboard-stats\", userId: req.user?.claims?.sub, restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Review Response Routes\n\n  // Get response for a specific review\n  app.get(\"/api/reviews/:reviewId/response\", async (req, res) => {\n    try {\n      const { reviewId } = req.params;\n      const response = await storage.getResponseByReviewId(reviewId);\n      res.json(response || null);\n    } catch (error) {\n      logger.error(\"Get review response error\", { error, path: \"/api/reviews/:reviewId/response\", reviewId: req.params.reviewId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Create review response\n  app.post(\"/api/review-responses\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { reviewId, restaurantId, response } = req.body;\n      \n      if (!reviewId || !restaurantId || !response) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, restaurantId);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      // Check if response already exists\n      const existingResponse = await storage.getResponseByReviewId(reviewId);\n      if (existingResponse) {\n        return res.status(409).json({ error: \"Response already exists for this review\" });\n      }\n\n      const newResponse = await storage.createReviewResponse({\n        reviewId,\n        restaurantId,\n        userId,\n        response,\n      });\n      \n      res.status(201).json(newResponse);\n    } catch (error) {\n      logger.error(\"Create review response error\", { error, path: \"/api/review-responses\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update review response\n  app.patch(\"/api/review-responses/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId, response } = req.body;\n\n      if (!restaurantId || !response) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, restaurantId);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      const updatedResponse = await storage.updateReviewResponse(id, userId, restaurantId, response);\n      if (!updatedResponse) {\n        return res.status(404).json({ error: \"Review response not found or unauthorized\" });\n      }\n\n      res.json(updatedResponse);\n    } catch (error) {\n      logger.error(\"Update review response error\", { error, path: \"/api/review-responses/:id\", responseId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete review response\n  app.delete(\"/api/review-responses/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId } = req.body;\n\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"Missing restaurantId\" });\n      }\n\n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, restaurantId);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      const deleted = await storage.deleteReviewResponse(id, userId, restaurantId);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Review response not found or unauthorized\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Delete review response error\", { error, path: \"/api/review-responses/:id\", responseId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get reviews with responses for restaurant owner\n  app.get(\"/api/restaurants/:id/reviews-with-responses\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      \n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      // Get reviews and responses\n      const reviews = await storage.getReviewsByRestaurant(id);\n      const responses = await storage.getResponsesByRestaurant(id);\n\n      // Combine reviews with their responses\n      const reviewsWithResponses = reviews.map(review => {\n        const response = responses.find(r => r.reviewId === review.id);\n        return {\n          ...review,\n          response: response || null,\n        };\n      });\n\n      res.json(reviewsWithResponses);\n    } catch (error) {\n      logger.error(\"Get reviews with responses error\", { error, path: \"/api/restaurants/:id/reviews-with-responses\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Promotion Routes\n\n  // Get all promotions for a restaurant (public)\n  app.get(\"/api/restaurants/:id/promotions\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const promotions = await storage.getActivePromotionsByRestaurant(id);\n      res.json(promotions);\n    } catch (error) {\n      logger.error(\"Get promotions error\", { error, path: \"/api/restaurants/:id/promotions\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get all promotions for management (owner only)\n  app.get(\"/api/restaurants/:id/all-promotions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      const promotions = await storage.getPromotionsByRestaurant(id);\n      res.json(promotions);\n    } catch (error) {\n      logger.error(\"Get all promotions error\", { error, path: \"/api/restaurants/:id/all-promotions\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Create promotion\n  app.post(\"/api/promotions\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { restaurantId, title, titleEn, description, descriptionEn, discountType, discountValue, startDate, endDate } = req.body;\n\n      if (!restaurantId || !title || !titleEn || !description || !descriptionEn || !discountType || !startDate || !endDate) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, restaurantId);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      const promotion = await storage.createPromotion({\n        restaurantId,\n        title,\n        titleEn,\n        description,\n        descriptionEn,\n        discountType,\n        discountValue,\n        startDate: new Date(startDate),\n        endDate: new Date(endDate),\n        isActive: 1,\n      });\n\n      res.status(201).json(promotion);\n    } catch (error) {\n      logger.error(\"Create promotion error\", { error, path: \"/api/promotions\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update promotion\n  app.patch(\"/api/promotions/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId, ...updateData } = req.body;\n\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"Missing restaurantId\" });\n      }\n\n      // Convert dates if present\n      if (updateData.startDate) {\n        updateData.startDate = new Date(updateData.startDate);\n      }\n      if (updateData.endDate) {\n        updateData.endDate = new Date(updateData.endDate);\n      }\n\n      const updatedPromotion = await storage.updatePromotion(id, userId, restaurantId, updateData);\n      if (!updatedPromotion) {\n        return res.status(404).json({ error: \"Promotion not found or unauthorized\" });\n      }\n\n      res.json(updatedPromotion);\n    } catch (error) {\n      logger.error(\"Update promotion error\", { error, path: \"/api/promotions/:id\", promotionId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete promotion\n  app.delete(\"/api/promotions/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId } = req.body;\n\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"Missing restaurantId\" });\n      }\n\n      const deleted = await storage.deletePromotion(id, userId, restaurantId);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Promotion not found or unauthorized\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Delete promotion error\", { error, path: \"/api/promotions/:id\", promotionId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ===== Restaurant Images Routes =====\n  \n  // Get all images for a restaurant (public)\n  app.get(\"/api/restaurants/:id/images\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const images = await storage.getRestaurantImages(id);\n      res.json(images);\n    } catch (error) {\n      logger.error(\"Get restaurant images error\", { error, path: \"/api/restaurants/:id/images\", restaurantId: req.params.id });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Add image to restaurant (owner only)\n  app.post(\"/api/restaurants/:id/images\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { imageUrl, displayOrder } = req.body;\n\n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"You don't have permission to manage this restaurant\" });\n      }\n\n      if (!imageUrl) {\n        return res.status(400).json({ error: \"Missing imageUrl\" });\n      }\n\n      const image = await storage.createRestaurantImage({\n        restaurantId: id,\n        imageUrl,\n        displayOrder: displayOrder || 0,\n      });\n\n      res.status(201).json(image);\n    } catch (error) {\n      logger.error(\"Create restaurant image error\", { error, path: \"/api/restaurants/:id/images\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete restaurant image (owner only)\n  app.delete(\"/api/restaurant-images/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId } = req.body;\n\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"Missing restaurantId\" });\n      }\n\n      const deleted = await storage.deleteRestaurantImage(id, userId, restaurantId);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Image not found or unauthorized\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Delete restaurant image error\", { error, path: \"/api/restaurant-images/:id\", imageId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Upload image file (owner only)\n  app.post(\"/api/restaurants/:id/upload-image\", isAuthenticated, upload.single('image'), async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      \n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"You don't have permission to manage this restaurant\" });\n      }\n\n      if (!req.file) {\n        return res.status(400).json({ error: \"No file uploaded\" });\n      }\n\n      // Create image URL - use relative path for uploaded file\n      const imageUrl = `/uploaded_files/${req.file.filename}`;\n      const displayOrder = parseInt(req.body.displayOrder) || 0;\n\n      const image = await storage.createRestaurantImage({\n        restaurantId: id,\n        imageUrl,\n        displayOrder,\n      });\n\n      res.status(201).json(image);\n    } catch (error) {\n      logger.error(\"Upload image error\", { error, path: \"/api/restaurants/:id/upload-image\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ===== Menu Routes =====\n  \n  // Create menu item (owner only)\n  app.post(\"/api/menus\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { restaurantId, name, nameEn, description, descriptionEn, price, category, imageUrl, isPopular, isRecommended, displayOrder } = req.body;\n\n      if (!restaurantId || !name || !nameEn || !price) {\n        return res.status(400).json({ error: \"Missing required fields\" });\n      }\n\n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, restaurantId);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      const menu = await storage.createMenu({\n        restaurantId,\n        name,\n        nameEn,\n        description: description || null,\n        descriptionEn: descriptionEn || null,\n        price: parseInt(price),\n        category: category || null,\n        imageUrl: imageUrl || null,\n        isPopular: isPopular || 0,\n        isRecommended: isRecommended || 0,\n        displayOrder: displayOrder || 0,\n      });\n\n      res.status(201).json(menu);\n    } catch (error) {\n      logger.error(\"Create menu error\", { error, path: \"/api/menus\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update menu item (owner only)\n  app.patch(\"/api/menus/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId, ...updateData } = req.body;\n\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"Missing restaurantId\" });\n      }\n\n      // Convert price to integer if present\n      if (updateData.price) {\n        updateData.price = parseInt(updateData.price);\n      }\n\n      const updatedMenu = await storage.updateMenu(id, userId, restaurantId, updateData);\n      if (!updatedMenu) {\n        return res.status(404).json({ error: \"Menu not found or unauthorized\" });\n      }\n\n      res.json(updatedMenu);\n    } catch (error) {\n      logger.error(\"Update menu error\", { error, path: \"/api/menus/:id\", menuId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete menu item (owner only)\n  app.delete(\"/api/menus/:id\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      const { restaurantId } = req.body;\n\n      if (!restaurantId) {\n        return res.status(400).json({ error: \"Missing restaurantId\" });\n      }\n\n      const deleted = await storage.deleteMenu(id, userId, restaurantId);\n      if (!deleted) {\n        return res.status(404).json({ error: \"Menu not found or unauthorized\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Delete menu error\", { error, path: \"/api/menus/:id\", menuId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ===== AI Business Analysis Routes =====\n  \n  // Get AI business insights for restaurant (owner only)\n  app.get(\"/api/restaurants/:id/ai-analysis\", isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user?.claims?.sub;\n      if (!userId) {\n        return res.status(401).json({ error: \"Unauthorized\" });\n      }\n\n      const { id } = req.params;\n      \n      // Verify ownership\n      const isOwner = await storage.isRestaurantOwner(userId, id);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"Forbidden: You are not the owner of this restaurant\" });\n      }\n\n      // Get restaurant data\n      const restaurant = await storage.getRestaurant(id);\n      if (!restaurant) {\n        return res.status(404).json({ error: \"Restaurant not found\" });\n      }\n\n      // Get reviews\n      const reviews = await storage.getReviewsByRestaurant(id);\n      \n      // Get nearby restaurants in same district for competitor analysis\n      const competitors = await storage.getRestaurantsByDistrict(restaurant.district);\n      const topCompetitors = competitors\n        .filter(c => c.id !== id && c.cuisine === restaurant.cuisine)\n        .sort((a, b) => b.rating - a.rating)\n        .slice(0, 3);\n\n      // Generate AI analysis using Gemini\n      const analysisPrompt = `You are a restaurant business consultant AI. Analyze this Korean restaurant and provide detailed insights in both Korean and English.\n\nRestaurant: ${restaurant.name} (${restaurant.nameEn})\nCategory: ${restaurant.category}\nCuisine: ${restaurant.cuisine}\nDistrict: ${restaurant.district}\nCurrent Rating: ${restaurant.rating}/5 (${restaurant.reviewCount} reviews)\nPrice Range: ${restaurant.priceRange}\n\nCustomer Reviews (${reviews.length} total):\n${reviews.slice(0, 10).map(r => `- Rating: ${r.rating}/5, Comment: ${r.comment}`).join('\\n')}\n\nTop Competitors in ${restaurant.district}:\n${topCompetitors.map(c => `- ${c.name}: ${c.rating}/5 (${c.reviewCount} reviews, ${c.cuisine})`).join('\\n')}\n\nProvide a comprehensive analysis in the following JSON format:\n{\n  \"businessAnalysis\": {\n    \"ko\": \"í˜„ì¬ ë¹„ì¦ˆë‹ˆìŠ¤ ìƒíƒœë¥¼ ìì„¸íˆ ë¶„ì„ (ê°•ì , ì•½ì , ê¸°íšŒ ìš”ì¸ í¬í•¨)\",\n    \"en\": \"Detailed analysis of current business status (including strengths, weaknesses, opportunities)\"\n  },\n  \"competitorAnalysis\": {\n    \"ko\": \"ê²½ìŸì—…ì²´ ë¶„ì„ ë° ì‹œì¥ í¬ì§€ì…”ë‹\",\n    \"en\": \"Competitor analysis and market positioning\"\n  },\n  \"strategicRecommendations\": {\n    \"ko\": \"êµ¬ì²´ì ì¸ ì „ëµ ì œì•ˆ (í”„ë¡œëª¨ì…˜ ì•„ì´ë””ì–´, ë©”ë‰´ ê°œì„ , ë§ˆì¼€íŒ… ì „ëµ ë“±)\",\n    \"en\": \"Specific strategic recommendations (promotion ideas, menu improvements, marketing strategies)\"\n  }\n}`;\n\n      const result = await genAI.models.generateContent({\n        model: \"gemini-2.0-flash-exp\",\n        contents: analysisPrompt,\n      });\n      const response = result.text || \"\";\n      \n      // Extract JSON from response\n      const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n      if (!jsonMatch) {\n        throw new Error(\"Failed to parse AI response\");\n      }\n\n      const analysis = JSON.parse(jsonMatch[0]);\n      \n      res.json({\n        restaurant: {\n          id: restaurant.id,\n          name: restaurant.name,\n          nameEn: restaurant.nameEn,\n          rating: restaurant.rating,\n          reviewCount: restaurant.reviewCount,\n        },\n        analysis,\n        competitors: topCompetitors.map(c => ({\n          name: c.name,\n          nameEn: c.nameEn,\n          rating: c.rating,\n          reviewCount: c.reviewCount,\n        })),\n        generatedAt: new Date().toISOString(),\n      });\n    } catch (error) {\n      logger.error(\"AI analysis error\", { error, path: \"/api/restaurants/:id/ai-analysis\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ==================== ADMIN ROUTES ====================\n  \n  // Admin Dashboard Statistics\n  app.get(\"/api/admin/dashboard/stats\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const stats = await storage.getAdminDashboardStats();\n      res.json(stats);\n    } catch (error) {\n      logger.error(\"Failed to fetch admin dashboard stats\", { \n        userId: req.user?.id, \n        path: req.path \n      }, error as Error);\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get all users\n  app.get(\"/api/admin/users\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      logger.error(\"Failed to fetch all users\", { \n        userId: req.user?.id, \n        path: req.path \n      }, error as Error);\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update user admin status\n  app.patch(\"/api/admin/users/:id/admin-status\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { isAdmin } = req.body;\n\n      if (typeof isAdmin !== \"number\" || (isAdmin !== 0 && isAdmin !== 1)) {\n        return res.status(400).json({ error: ErrorMessages.BAD_REQUEST });\n      }\n\n      const user = await storage.updateUserAdminStatus(id, isAdmin);\n      if (!user) {\n        return res.status(404).json({ error: ErrorMessages.NOT_FOUND });\n      }\n\n      res.json(user);\n    } catch (error) {\n      logger.error(\"Failed to update user admin status\", { \n        userId: req.user?.id, \n        targetUserId: req.params.id,\n        path: req.path \n      }, error as Error);\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get user details (admin)\n  app.get(\"/api/admin/users/:id/details\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const details = await storage.getUserDetails(id);\n      \n      if (!details) {\n        return res.status(404).json({ error: ErrorMessages.NOT_FOUND });\n      }\n\n      res.json(details);\n    } catch (error) {\n      logger.error(\"Failed to fetch user details\", { \n        userId: req.user?.id, \n        targetUserId: req.params.id,\n        path: req.path \n      }, error as Error);\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update user tier (admin)\n  app.patch(\"/api/admin/users/:id/tier\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { tier } = req.body;\n\n      const validTiers = ['bronze', 'silver', 'gold', 'platinum'];\n      if (!tier || !validTiers.includes(tier.toLowerCase())) {\n        return res.status(400).json({ error: \"Invalid tier. Must be one of: bronze, silver, gold, platinum\" });\n      }\n\n      const user = await storage.updateUserTier(id, tier.toLowerCase());\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      res.json(user);\n    } catch (error) {\n      logger.error(\"Error updating user tier\", { error, path: \"/api/admin/users/:id/tier\", targetUserId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update user (admin)\n  app.patch(\"/api/admin/users/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { tier, language, ssoProvider, region } = req.body;\n\n      const updates: any = {};\n      \n      if (tier) {\n        const validTiers = ['bronze', 'silver', 'gold', 'platinum'];\n        if (!validTiers.includes(tier.toLowerCase())) {\n          return res.status(400).json({ error: \"Invalid tier. Must be one of: bronze, silver, gold, platinum\" });\n        }\n        updates.tier = tier.toLowerCase();\n      }\n\n      if (language !== undefined) updates.language = language;\n      if (ssoProvider !== undefined) updates.ssoProvider = ssoProvider;\n      if (region !== undefined) updates.region = region;\n\n      const user = await storage.updateUser(id, updates);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      res.json(user);\n    } catch (error) {\n      logger.error(\"Error updating user\", { error, path: \"/api/admin/users/:id\", targetUserId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete user (admin)\n  app.delete(\"/api/admin/users/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteUser(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Error deleting user\", { error, path: \"/api/admin/users/:id\", targetUserId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update restaurant (admin)\n  app.patch(\"/api/admin/restaurants/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const restaurant = await storage.updateRestaurant(id, req.body);\n      \n      if (!restaurant) {\n        return res.status(404).json({ error: \"Restaurant not found\" });\n      }\n\n      res.json(restaurant);\n    } catch (error) {\n      logger.error(\"Error updating restaurant\", { error, path: \"/api/admin/restaurants/:id\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete restaurant (admin)\n  app.delete(\"/api/admin/restaurants/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteRestaurant(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Restaurant not found\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Error deleting restaurant\", { error, path: \"/api/admin/restaurants/:id\", restaurantId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get all reviews (admin)\n  app.get(\"/api/admin/reviews\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const limit = req.query.limit ? parseInt(req.query.limit as string) : 100;\n      const reviews = await storage.getAllReviews(limit);\n      res.json(reviews);\n    } catch (error) {\n      logger.error(\"Error fetching all reviews\", { error, path: \"/api/admin/reviews\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Toggle review pin (admin)\n  app.patch(\"/api/admin/reviews/:id/pin\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { isPinned } = req.body;\n      \n      if (isPinned === undefined) {\n        return res.status(400).json({ error: \"isPinned is required\" });\n      }\n\n      const updated = await storage.updateReviewPin(id, isPinned);\n      \n      if (!updated) {\n        return res.status(404).json({ error: \"Review not found\" });\n      }\n\n      res.json(updated);\n    } catch (error) {\n      logger.error(\"Error updating review pin\", { error, path: \"/api/admin/reviews/:id/pin\", reviewId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete review (admin)\n  app.delete(\"/api/admin/reviews/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteReviewAsAdmin(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Review not found\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Error deleting review\", { error, path: \"/api/admin/reviews/:id\", reviewId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get all announcements (admin)\n  app.get(\"/api/admin/announcements\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const announcements = await storage.getAllAnnouncements();\n      res.json(announcements);\n    } catch (error) {\n      logger.error(\"Error fetching all announcements\", { error, path: \"/api/admin/announcements\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Create announcement (admin)\n  app.post(\"/api/admin/announcements\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const announcement = await storage.createAnnouncement(req.body);\n      res.status(201).json(announcement);\n    } catch (error) {\n      logger.error(\"Error creating announcement\", { error, path: \"/api/admin/announcements\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update announcement (admin)\n  app.patch(\"/api/admin/announcements/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const announcement = await storage.updateAnnouncement(id, req.body);\n      \n      if (!announcement) {\n        return res.status(404).json({ error: \"Announcement not found\" });\n      }\n\n      res.json(announcement);\n    } catch (error) {\n      logger.error(\"Error updating announcement\", { error, path: \"/api/admin/announcements/:id\", announcementId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete announcement (admin)\n  app.delete(\"/api/admin/announcements/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteAnnouncement(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Announcement not found\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Error deleting announcement\", { error, path: \"/api/admin/announcements/:id\", announcementId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get all event banners (admin)\n  app.get(\"/api/admin/event-banners\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const banners = await storage.getAllEventBanners();\n      res.json(banners);\n    } catch (error) {\n      logger.error(\"Error fetching all event banners\", { error, path: \"/api/admin/event-banners\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Create event banner (admin)\n  app.post(\"/api/admin/event-banners\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const banner = await storage.createEventBanner(req.body);\n      res.status(201).json(banner);\n    } catch (error) {\n      logger.error(\"Error creating event banner\", { error, path: \"/api/admin/event-banners\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update event banner (admin)\n  app.patch(\"/api/admin/event-banners/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const banner = await storage.updateEventBanner(id, req.body);\n      \n      if (!banner) {\n        return res.status(404).json({ error: \"Event banner not found\" });\n      }\n\n      res.json(banner);\n    } catch (error) {\n      logger.error(\"Error updating event banner\", { error, path: \"/api/admin/event-banners/:id\", bannerId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Delete event banner (admin)\n  app.delete(\"/api/admin/event-banners/:id\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteEventBanner(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Event banner not found\" });\n      }\n\n      res.status(204).send();\n    } catch (error) {\n      logger.error(\"Error deleting event banner\", { error, path: \"/api/admin/event-banners/:id\", bannerId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ========== New Admin Management Endpoints ==========\n  \n  // Priority Tasks\n  app.get(\"/api/admin/dashboard/priority-tasks\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const tasks = await storage.getAdminPriorityTasks();\n      res.json(tasks);\n    } catch (error) {\n      logger.error(\"Error fetching priority tasks\", { error, path: \"/api/admin/dashboard/priority-tasks\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Restaurant Applications\n  app.get(\"/api/admin/restaurant-applications\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const applications = await storage.getAllRestaurantApplications();\n      res.json(applications);\n    } catch (error) {\n      logger.error(\"Error fetching restaurant applications\", { error, path: \"/api/admin/restaurant-applications\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/restaurant-applications/:id/process\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { status, adminNote } = req.body;\n      const application = await storage.processRestaurantApplication(id, status, adminNote);\n      \n      if (!application) {\n        return res.status(404).json({ error: \"Application not found\" });\n      }\n\n      res.json(application);\n    } catch (error) {\n      logger.error(\"Error processing restaurant application\", { error, path: \"/api/admin/restaurant-applications/:id/process\", applicationId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Owner Inquiries\n  app.get(\"/api/admin/owner-inquiries\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const inquiries = await storage.getAllOwnerInquiries();\n      res.json(inquiries);\n    } catch (error) {\n      logger.error(\"Error fetching owner inquiries\", { error, path: \"/api/admin/owner-inquiries\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/owner-inquiries/:id/respond\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { adminResponse, status } = req.body;\n      const inquiry = await storage.respondToOwnerInquiry(id, adminResponse, status);\n      \n      if (!inquiry) {\n        return res.status(404).json({ error: \"Inquiry not found\" });\n      }\n\n      res.json(inquiry);\n    } catch (error) {\n      logger.error(\"Error responding to owner inquiry\", { error, path: \"/api/admin/owner-inquiries/:id/respond\", inquiryId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Customer Inquiries\n  app.get(\"/api/admin/customer-inquiries\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const inquiries = await storage.getAllCustomerInquiries();\n      res.json(inquiries);\n    } catch (error) {\n      logger.error(\"Error fetching customer inquiries\", { error, path: \"/api/admin/customer-inquiries\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/customer-inquiries/:id/respond\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { adminResponse, status } = req.body;\n      const inquiry = await storage.respondToCustomerInquiry(id, adminResponse, status);\n      \n      if (!inquiry) {\n        return res.status(404).json({ error: \"Inquiry not found\" });\n      }\n\n      res.json(inquiry);\n    } catch (error) {\n      logger.error(\"Error responding to customer inquiry\", { error, path: \"/api/admin/customer-inquiries/:id/respond\", inquiryId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Partnership Inquiries\n  app.get(\"/api/admin/partnership-inquiries\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const inquiries = await storage.getAllPartnershipInquiries();\n      res.json(inquiries);\n    } catch (error) {\n      logger.error(\"Error fetching partnership inquiries\", { error, path: \"/api/admin/partnership-inquiries\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/partnership-inquiries/:id/process\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const { id } = req.params;\n      const { status, adminNote } = req.body;\n      const inquiry = await storage.processPartnershipInquiry(id, status, adminNote);\n      \n      if (!inquiry) {\n        return res.status(404).json({ error: \"Inquiry not found\" });\n      }\n\n      res.json(inquiry);\n    } catch (error) {\n      logger.error(\"Error processing partnership inquiry\", { error, path: \"/api/admin/partnership-inquiries/:id/process\", inquiryId: req.params.id, userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Owner Notices\n  app.get(\"/api/admin/owner-notices\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const notices = await storage.getAllOwnerNotices();\n      res.json(notices);\n    } catch (error) {\n      logger.error(\"Error fetching owner notices\", { error, path: \"/api/admin/owner-notices\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.post(\"/api/admin/owner-notices\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const notice = await storage.createOwnerNotice(req.body);\n      res.status(201).json(notice);\n    } catch (error) {\n      logger.error(\"Error creating owner notice\", { error, path: \"/api/admin/owner-notices\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Payments\n  app.get(\"/api/admin/payments\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const payments = await storage.getAllPayments();\n      res.json(payments);\n    } catch (error) {\n      logger.error(\"Error fetching payments\", { error, path: \"/api/admin/payments\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // User Analytics\n  app.get(\"/api/admin/users/by-tier\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const tierData = await storage.getUsersByTier();\n      res.json(tierData);\n    } catch (error) {\n      logger.error(\"Error fetching users by tier\", { error, path: \"/api/admin/users/by-tier\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  app.get(\"/api/admin/users/analytics\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const analytics = await storage.getUserAnalytics();\n      res.json(analytics);\n    } catch (error) {\n      logger.error(\"Error fetching user analytics\", { error, path: \"/api/admin/users/analytics\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Blog Posts\n  app.get(\"/api/admin/blog-posts\", isAuthenticated, isAdmin, async (req: any, res) => {\n    try {\n      const posts = await storage.getAllBlogPosts();\n      res.json(posts);\n    } catch (error) {\n      logger.error(\"Error fetching blog posts\", { error, path: \"/api/admin/blog-posts\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ============================================\n  // External Data Collection API (For Future Scalability)\n  // ============================================\n  \n  // Middleware to verify API key for external data collection\n  const verifyDataCollectionApiKey = (req: any, res: any, next: any) => {\n    const apiKey = req.headers['x-api-key'];\n    const validApiKey = process.env.DATA_COLLECTION_API_KEY;\n    \n    if (!validApiKey) {\n      return res.status(500).json({ error: \"API key not configured on server\" });\n    }\n    \n    if (!apiKey || apiKey !== validApiKey) {\n      return res.status(401).json({ error: \"Invalid API key\" });\n    }\n    \n    next();\n  };\n\n  // Bulk import restaurants from external data source\n  app.post(\"/api/external/restaurants\", verifyDataCollectionApiKey, async (req: any, res) => {\n    try {\n      const restaurants = req.body.restaurants;\n      if (!Array.isArray(restaurants)) {\n        return res.status(400).json({ error: \"restaurants must be an array\" });\n      }\n\n      const results = {\n        success: 0,\n        failed: 0,\n        errors: [] as Array<{ name: string; error: string }>,\n      };\n\n      for (const restaurantData of restaurants) {\n        try {\n          await storage.createRestaurant(restaurantData);\n          results.success++;\n        } catch (error: any) {\n          results.failed++;\n          results.errors.push({\n            name: restaurantData.name || \"Unknown\",\n            error: error.message,\n          });\n        }\n      }\n\n      logger.info(\"Bulk restaurant import completed\", { \n        success: results.success, \n        failed: results.failed,\n        path: \"/api/external/restaurants\"\n      });\n\n      res.status(200).json(results);\n    } catch (error) {\n      logger.error(\"Error in bulk restaurant import\", { error, path: \"/api/external/restaurants\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Bulk import external reviews\n  app.post(\"/api/external/reviews\", verifyDataCollectionApiKey, async (req: any, res) => {\n    try {\n      const reviews = req.body.reviews;\n      if (!Array.isArray(reviews)) {\n        return res.status(400).json({ error: \"reviews must be an array\" });\n      }\n\n      const results = {\n        success: 0,\n        failed: 0,\n        errors: [] as Array<{ restaurantId: number; error: string }>,\n      };\n\n      for (const reviewData of reviews) {\n        try {\n          await storage.createExternalReview(reviewData);\n          results.success++;\n        } catch (error: any) {\n          results.failed++;\n          results.errors.push({\n            restaurantId: reviewData.restaurantId,\n            error: error.message,\n          });\n        }\n      }\n\n      logger.info(\"Bulk review import completed\", { \n        success: results.success, \n        failed: results.failed,\n        path: \"/api/external/reviews\"\n      });\n\n      res.status(200).json(results);\n    } catch (error) {\n      logger.error(\"Error in bulk review import\", { error, path: \"/api/external/reviews\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Bulk import menu items\n  app.post(\"/api/external/menus\", verifyDataCollectionApiKey, async (req: any, res) => {\n    try {\n      const menus = req.body.menus;\n      if (!Array.isArray(menus)) {\n        return res.status(400).json({ error: \"menus must be an array\" });\n      }\n\n      const results = {\n        success: 0,\n        failed: 0,\n        errors: [] as Array<{ restaurantId: number; error: string }>,\n      };\n\n      for (const menuData of menus) {\n        try {\n          await storage.createMenu(menuData);\n          results.success++;\n        } catch (error: any) {\n          results.failed++;\n          results.errors.push({\n            restaurantId: menuData.restaurantId,\n            error: error.message,\n          });\n        }\n      }\n\n      logger.info(\"Bulk menu import completed\", { \n        success: results.success, \n        failed: results.failed,\n        path: \"/api/external/menus\"\n      });\n\n      res.status(200).json(results);\n    } catch (error) {\n      logger.error(\"Error in bulk menu import\", { error, path: \"/api/external/menus\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Get data collection status and statistics\n  app.get(\"/api/external/status\", verifyDataCollectionApiKey, async (req: any, res) => {\n    try {\n      const restaurantCount = await storage.getRestaurantCount();\n      const reviewCount = await storage.getReviewCount();\n      const menuCount = await storage.getMenuCount();\n\n      res.json({\n        timestamp: new Date().toISOString(),\n        database: process.env.USE_SUPABASE === \"true\" ? \"Supabase\" : \"Neon\",\n        statistics: {\n          restaurants: restaurantCount,\n          reviews: reviewCount,\n          menus: menuCount,\n        },\n      });\n    } catch (error) {\n      logger.error(\"Error fetching data collection status\", { error, path: \"/api/external/status\" });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ====================================================================\n  // DATA HUB SYNC API - Data Hubì—ì„œ ë©”ì¸ ì‹œìŠ¤í…œìœ¼ë¡œ ë°ì´í„° ë™ê¸°í™”\n  // ====================================================================\n\n  app.post('/api/sync/restaurants', verifyDataCollectionApiKey, async (req: any, res) => {\n    try {\n      const restaurants = req.body.restaurants as any[];\n      \n      if (!Array.isArray(restaurants)) {\n        return res.status(400).json({ error: 'Invalid request: restaurants must be an array' });\n      }\n\n      const results = {\n        success: [] as string[],\n        updated: [] as string[],\n        failed: [] as Array<{ name: string; error: string }>,\n      };\n\n      for (const restaurant of restaurants) {\n        try {\n          const existing = await storage.searchRestaurants(restaurant.name);\n          const match = existing.find(r => r.address === restaurant.address);\n\n          if (match) {\n            await storage.updateRestaurantRatings(match.id, {\n              googlePlaceId: restaurant.google_place_id,\n              googleRating: restaurant.google_rating,\n              googleReviewCount: restaurant.google_review_count,\n              naverPlaceId: restaurant.naver_place_id,\n              naverRating: restaurant.naver_rating,\n              naverReviewCount: restaurant.naver_review_count,\n              popularityScore: restaurant.popularity_score,\n            });\n            \n            results.updated.push(restaurant.name);\n          } else {\n            const newRestaurant = await storage.createRestaurant({\n              name: restaurant.name,\n              nameEn: restaurant.name_en || restaurant.name,\n              category: restaurant.category || 'í•œì‹',\n              cuisine: restaurant.cuisine || 'í•œì‹',\n              district: restaurant.district,\n              address: restaurant.address,\n              latitude: restaurant.latitude,\n              longitude: restaurant.longitude,\n              description: restaurant.description || '',\n              descriptionEn: restaurant.description_en || '',\n              priceRange: restaurant.price_range || 2,\n              imageUrl: restaurant.image_url || '/placeholder-restaurant.jpg',\n              openHours: restaurant.open_hours || 'ë§¤ì¼ 11:00-22:00',\n              phone: restaurant.phone,\n              naverPlaceId: restaurant.naver_place_id,\n              googlePlaceId: restaurant.google_place_id,\n              naverRating: restaurant.naver_rating,\n              naverReviewCount: restaurant.naver_review_count,\n              googleRating: restaurant.google_rating,\n              googleReviewCount: restaurant.google_review_count,\n              popularityScore: restaurant.popularity_score,\n              isFeatured: 0,\n              isVegan: 0,\n              isHalal: 0,\n              city: restaurant.city,\n              districtDetail: restaurant.district_detail,\n            });\n            \n            results.success.push(restaurant.name);\n          }\n        } catch (error: any) {\n          results.failed.push({\n            name: restaurant.name,\n            error: error.message,\n          });\n        }\n      }\n\n      logger.info(\"Sync restaurants completed\", {\n        total: restaurants.length,\n        success: results.success.length,\n        updated: results.updated.length,\n        failed: results.failed.length,\n        path: \"/api/sync/restaurants\"\n      });\n\n      res.json({\n        message: 'Sync completed',\n        results,\n        summary: {\n          total: restaurants.length,\n          success: results.success.length,\n          updated: results.updated.length,\n          failed: results.failed.length,\n        },\n      });\n    } catch (error: any) {\n      logger.error('Sync restaurants error', { error }, \"/api/sync/restaurants\");\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // ============================================\n  // Object Storage Endpoints (For Scalable Image Storage)\n  // ============================================\n\n  // Get upload URL for object storage (Protected)\n  app.post(\"/api/objects/upload\", isAuthenticated, async (req: any, res) => {\n    try {\n      const objectStorageService = new ObjectStorageService();\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      res.json({ uploadURL });\n    } catch (error) {\n      logger.error(\"Error getting upload URL\", { error, path: \"/api/objects/upload\", userId: req.user?.claims?.sub });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Serve private objects with ACL check\n  app.get(\"/objects/:objectPath(*)\", isAuthenticated, async (req: any, res) => {\n    const userId = req.user?.claims?.sub;\n    const objectStorageService = new ObjectStorageService();\n    try {\n      const objectFile = await objectStorageService.getObjectEntityFile(req.path);\n      const canAccess = await objectStorageService.canAccessObjectEntity({\n        objectFile,\n        userId: userId,\n        requestedPermission: ObjectPermission.READ,\n      });\n      if (!canAccess) {\n        return res.sendStatus(401);\n      }\n      objectStorageService.downloadObject(objectFile, res);\n    } catch (error) {\n      logger.error(\"Error accessing object\", { error, path: req.path, userId });\n      if (error instanceof ObjectNotFoundError) {\n        return res.sendStatus(404);\n      }\n      return res.sendStatus(500);\n    }\n  });\n\n  // Serve public objects\n  app.get(\"/public-objects/:filePath(*)\", async (req, res) => {\n    const filePath = req.params.filePath;\n    const objectStorageService = new ObjectStorageService();\n    try {\n      const file = await objectStorageService.searchPublicObject(filePath);\n      if (!file) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      objectStorageService.downloadObject(file, res);\n    } catch (error) {\n      logger.error(\"Error serving public object\", { error, filePath });\n      return res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  // Update restaurant image after upload (Protected, sets ACL policy)\n  app.put(\"/api/restaurant-images\", isAuthenticated, async (req: any, res) => {\n    if (!req.body.imageURL || !req.body.restaurantId) {\n      return res.status(400).json({ error: \"imageURL and restaurantId are required\" });\n    }\n\n    const userId = req.user?.claims?.sub;\n\n    try {\n      // Verify user owns the restaurant\n      const isOwner = await storage.isRestaurantOwner(userId, req.body.restaurantId);\n      if (!isOwner) {\n        return res.status(403).json({ error: \"You don't own this restaurant\" });\n      }\n\n      const objectStorageService = new ObjectStorageService();\n      const objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n        req.body.imageURL,\n        {\n          owner: userId,\n          visibility: \"public\", // Restaurant images are public\n        },\n      );\n\n      // Save to database\n      const image = await storage.createRestaurantImage({\n        restaurantId: req.body.restaurantId,\n        imageUrl: objectPath,\n        displayOrder: req.body.displayOrder || 0,\n      });\n\n      res.status(200).json(image);\n    } catch (error) {\n      logger.error(\"Error setting restaurant image\", { error, userId, restaurantId: req.body.restaurantId });\n      res.status(500).json({ error: ErrorMessages.INTERNAL_ERROR });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n\nfunction getSystemPrompt(language: string): string {\n  const prompts: Record<string, string> = {\n    ko: `ë‹¹ì‹ ì€ í•œêµ­ ì„œìš¸ì˜ í•œì‹ë‹¹ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì™¸êµ­ì¸ ê´€ê´‘ê°ê³¼ í˜„ì§€ì¸ ëª¨ë‘ì—ê²Œ ìµœê³ ì˜ í•œì‹ë‹¹ì„ ì¶”ì²œí•´ì£¼ëŠ” AI ì»¨ì‹œì–´ì§€ì…ë‹ˆë‹¤.\n\nì—­í• :\n- **ë°˜ë“œì‹œ ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” ì‹¤ì œ ë ˆìŠ¤í† ë‘ë§Œ ì¶”ì²œí•©ë‹ˆë‹¤**\n- ì‚¬ìš©ìì˜ ì„ í˜¸ë„, ìœ„ì¹˜, ì˜ˆì‚°, ë¶„ìœ„ê¸°ë¥¼ ê³ ë ¤í•˜ì—¬ ë§ì¶¤í˜• í•œì‹ë‹¹ì„ ì¶”ì²œí•©ë‹ˆë‹¤\n- ê° ë ˆìŠ¤í† ë‘ì˜ íŠ¹ì§•, ëŒ€í‘œ ë©”ë‰´, ê°€ê²©ëŒ€ë¥¼ ìì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤\n- ì™¸êµ­ì¸ì—ê²ŒëŠ” í•œêµ­ ìŒì‹ ë¬¸í™”ì™€ ì£¼ë¬¸ ë°©ë²•ë„ ì¹œì ˆí•˜ê²Œ ì•ˆë‚´í•©ë‹ˆë‹¤\n- isVeganì´ë‚˜ isHalal í”Œë˜ê·¸ë¥¼ í™•ì¸í•˜ì—¬ ë¹„ê±´/í• ë„ ìš”ì²­ì— ì •í™•íˆ ë‹µë³€í•©ë‹ˆë‹¤\n- **ê° ë ˆìŠ¤í† ë‘ì˜ aiInsights ë°ì´í„°ë¥¼ ì ê·¹ í™œìš©í•˜ì„¸ìš”:**\n  - reviewInsights: ê³ ê°ë“¤ì´ ì¢‹ì•„í•˜ëŠ” ì ì„ ì–¸ê¸‰í•˜ì„¸ìš”\n  - bestFor: ì–´ë–¤ ìƒí™©ì— ì í•©í•œì§€ ì„¤ëª…í•˜ì„¸ìš” (ì˜ˆ: ë°ì´íŠ¸, ê°€ì¡± ëª¨ì„, í˜¼ë°¥)\n  - culturalTips: ì™¸êµ­ì¸ì„ ìœ„í•œ ë¬¸í™” íŒì„ ì œê³µí•˜ì„¸ìš”\n  - firstTimerTips: ì²« ë°©ë¬¸ìë¥¼ ìœ„í•œ ì£¼ë¬¸ íŒì„ ì•Œë ¤ì£¼ì„¸ìš”\n\në‹µë³€ ìŠ¤íƒ€ì¼:\n- ì¹œê·¼í•˜ê³  ë”°ëœ»í•œ í†¤ìœ¼ë¡œ ëŒ€í™”í•©ë‹ˆë‹¤\n- ê° ì¶”ì²œë§ˆë‹¤ ì™œ ê·¸ ì‹ë‹¹ì„ ì¶”ì²œí•˜ëŠ”ì§€ ì´ìœ ë¥¼ ëª…í™•íˆ ì„¤ëª…í•©ë‹ˆë‹¤\n- 2-3ê°œì˜ ë ˆìŠ¤í† ë‘ì„ ì¶”ì²œí•˜ê³ , ê°ê°ì˜ ì¥ë‹¨ì ì„ ê· í˜•ìˆê²Œ ì œì‹œí•©ë‹ˆë‹¤\n- ë ˆìŠ¤í† ë‘ ì´ë¦„, ìœ„ì¹˜(district), ìš”ë¦¬ ì¢…ë¥˜ë¥¼ ëª…í™•íˆ í‘œì‹œí•©ë‹ˆë‹¤\n- AI ì¸ì‚¬ì´íŠ¸ ì •ë³´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”ì— ë…¹ì—¬ì„œ ì œê³µí•©ë‹ˆë‹¤`,\n\n    en: `You are a Korean restaurant expert in Seoul, South Korea. You are an AI concierge who recommends the best Korean restaurants to both foreign tourists and locals.\n\nRole:\n- **Only recommend restaurants from the provided database**\n- Recommend personalized Korean restaurants based on user preferences, location, budget, and atmosphere\n- Provide detailed descriptions of each restaurant's features, signature dishes, and price range\n- For foreigners, kindly guide them through Korean food culture and how to order\n- Check isVegan and isHalal flags to accurately respond to vegan/halal requests\n- **Actively use the aiInsights data for each restaurant:**\n  - reviewInsights: Mention what customers love about the place\n  - bestFor: Explain what situations it's perfect for (e.g., date, family gathering, solo dining)\n  - culturalTips: Provide cultural tips for foreign visitors\n  - firstTimerTips: Share ordering tips for first-time visitors\n\nResponse Style:\n- Communicate in a friendly and warm tone\n- Clearly explain why you recommend each restaurant\n- Recommend 2-3 restaurants and present their pros and cons in a balanced way\n- Clearly display restaurant name, location (district), and cuisine type\n- Naturally incorporate AI insights into your conversation`,\n\n    ja: `ã‚ãªãŸã¯éŸ“å›½ã‚½ã‚¦ãƒ«ã®éŸ“å›½æ–™ç†ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®å°‚é–€å®¶ã§ã™ã€‚å¤–å›½äººè¦³å…‰å®¢ã¨åœ°å…ƒã®äººã€…ã®ä¸¡æ–¹ã«æœ€é«˜ã®éŸ“å›½æ–™ç†ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’æ¨è–¦ã™ã‚‹AIã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ã§ã™ã€‚\n\nå½¹å‰²:\n- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã€å ´æ‰€ã€äºˆç®—ã€é›°å›²æ°—ã‚’è€ƒæ…®ã—ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã•ã‚ŒãŸéŸ“å›½æ–™ç†ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’æ¨è–¦ã—ã¾ã™\n- å„ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ç‰¹å¾´ã€ä»£è¡¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ä¾¡æ ¼å¸¯ã€é›°å›²æ°—ã‚’è©³ã—ãèª¬æ˜ã—ã¾ã™\n- å¤–å›½äººã«ã¯éŸ“å›½ã®é£Ÿæ–‡åŒ–ã¨æ³¨æ–‡æ–¹æ³•ã‚‚è¦ªåˆ‡ã«æ¡ˆå†…ã—ã¾ã™\n- å…·ä½“çš„ãªä½æ‰€ã¨å–¶æ¥­æ™‚é–“ã®æƒ…å ±ã‚’æä¾›ã—ã¾ã™ï¼ˆå®Ÿéš›ã®æƒ…å ±ã§ãªã„å ´åˆã¯æ˜è¨˜ï¼‰\n\nå›ç­”ã‚¹ã‚¿ã‚¤ãƒ«:\n- ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã§æ¸©ã‹ã„ãƒˆãƒ¼ãƒ³ã§ä¼šè©±ã—ã¾ã™\n- çµµæ–‡å­—ã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã¦ç”Ÿãç”Ÿãã¨ã—ãŸå›ç­”ã‚’ã—ã¾ã™\n- å„æ¨è–¦ã«ã¤ã„ã¦ã€ãªãœãã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’æ¨è–¦ã™ã‚‹ã®ã‹ç†ç”±ã‚’æ˜ç¢ºã«èª¬æ˜ã—ã¾ã™\n- 2-3ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã‚’æ¨è–¦ã—ã€ãã‚Œãã‚Œã®é•·æ‰€ã¨çŸ­æ‰€ã‚’ãƒãƒ©ãƒ³ã‚¹ã‚ˆãæç¤ºã—ã¾ã™`,\n\n    \"zh-Hans\": `æ‚¨æ˜¯éŸ©å›½é¦–å°”çš„éŸ©é¤å…ä¸“å®¶ã€‚æ‚¨æ˜¯ä¸ºå¤–å›½æ¸¸å®¢å’Œå½“åœ°äººæ¨èæœ€ä½³éŸ©é¤å…çš„AIç¤¼å®¾ã€‚\n\nè§’è‰²:\n- æ ¹æ®ç”¨æˆ·çš„åå¥½ã€ä½ç½®ã€é¢„ç®—å’Œæ°›å›´æ¨èä¸ªæ€§åŒ–çš„éŸ©é¤å…\n- è¯¦ç»†æè¿°æ¯å®¶é¤å…çš„ç‰¹ç‚¹ã€æ‹›ç‰Œèœã€ä»·æ ¼èŒƒå›´å’Œæ°›å›´\n- ä¸ºå¤–å›½äººå‹å¥½åœ°ä»‹ç»éŸ©å›½é¥®é£Ÿæ–‡åŒ–å’Œç‚¹é¤æ–¹æ³•\n- æä¾›å…·ä½“åœ°å€å’Œè¥ä¸šæ—¶é—´ä¿¡æ¯ï¼ˆå¦‚éå®é™…ä¿¡æ¯è¯·æ³¨æ˜ï¼‰\n\nå›ç­”é£æ ¼:\n- ä»¥å‹å¥½æ¸©æš–çš„è¯­æ°”äº¤æµ\n- é€‚å½“ä½¿ç”¨è¡¨æƒ…ç¬¦å·ä½¿å›ç­”ç”ŸåŠ¨\n- æ¸…æ¥šè§£é‡Šæ¨èæ¯å®¶é¤å…çš„åŸå› \n- æ¨è2-3å®¶é¤å…ï¼Œå¹¶å¹³è¡¡å‘ˆç°å„è‡ªçš„ä¼˜ç¼ºç‚¹`,\n\n    \"zh-Hant\": `æ‚¨æ˜¯éŸ“åœ‹é¦–çˆ¾çš„éŸ“é¤å»³å°ˆå®¶ã€‚æ‚¨æ˜¯ç‚ºå¤–åœ‹éŠå®¢å’Œç•¶åœ°äººæ¨è–¦æœ€ä½³éŸ“é¤å»³çš„AIç¦®è³“ã€‚\n\nè§’è‰²:\n- æ ¹æ“šç”¨æˆ¶çš„åå¥½ã€ä½ç½®ã€é ç®—å’Œæ°›åœæ¨è–¦å€‹æ€§åŒ–çš„éŸ“é¤å»³\n- è©³ç´°æè¿°æ¯å®¶é¤å»³çš„ç‰¹é»ã€æ‹›ç‰Œèœã€åƒ¹æ ¼ç¯„åœå’Œæ°›åœ\n- ç‚ºå¤–åœ‹äººå‹å¥½åœ°ä»‹ç´¹éŸ“åœ‹é£²é£Ÿæ–‡åŒ–å’Œé»é¤æ–¹æ³•\n- æä¾›å…·é«”åœ°å€å’Œç‡Ÿæ¥­æ™‚é–“è³‡è¨Šï¼ˆå¦‚éå¯¦éš›è³‡è¨Šè«‹è¨»æ˜ï¼‰\n\nå›ç­”é¢¨æ ¼:\n- ä»¥å‹å¥½æº«æš–çš„èªæ°£äº¤æµ\n- é©ç•¶ä½¿ç”¨è¡¨æƒ…ç¬¦è™Ÿä½¿å›ç­”ç”Ÿå‹•\n- æ¸…æ¥šè§£é‡‹æ¨è–¦æ¯å®¶é¤å»³çš„åŸå› \n- æ¨è–¦2-3å®¶é¤å»³ï¼Œä¸¦å¹³è¡¡å‘ˆç¾å„è‡ªçš„å„ªç¼ºé»`,\n\n    es: `Eres un experto en restaurantes coreanos en SeÃºl, Corea del Sur. Eres un conserje de IA que recomienda los mejores restaurantes coreanos tanto a turistas extranjeros como a locales.\n\nRol:\n- Recomendar restaurantes coreanos personalizados segÃºn las preferencias del usuario, ubicaciÃ³n, presupuesto y ambiente\n- Proporcionar descripciones detalladas de las caracterÃ­sticas de cada restaurante, platos insignia, rango de precios y ambiente\n- Para extranjeros, guiarlos amablemente a travÃ©s de la cultura alimentaria coreana y cÃ³mo ordenar\n- Proporcionar direcciÃ³n especÃ­fica e informaciÃ³n de horario comercial (indicar si la informaciÃ³n no es real)\n\nEstilo de respuesta:\n- Comunicarse en un tono amigable y cÃ¡lido\n- Usar emojis apropiadamente para hacer las respuestas animadas\n- Explicar claramente por quÃ© recomiendas cada restaurante\n- Recomendar 2-3 restaurantes y presentar sus pros y contras de manera equilibrada`,\n\n    fr: `Vous Ãªtes un expert en restaurants corÃ©ens Ã  SÃ©oul, en CorÃ©e du Sud. Vous Ãªtes un concierge IA qui recommande les meilleurs restaurants corÃ©ens aux touristes Ã©trangers et aux habitants.\n\nRÃ´le:\n- Recommander des restaurants corÃ©ens personnalisÃ©s en fonction des prÃ©fÃ©rences de l'utilisateur, de l'emplacement, du budget et de l'ambiance\n- Fournir des descriptions dÃ©taillÃ©es des caractÃ©ristiques de chaque restaurant, des plats phares, de la gamme de prix et de l'ambiance\n- Pour les Ã©trangers, les guider gentiment Ã  travers la culture alimentaire corÃ©enne et comment commander\n- Fournir l'adresse spÃ©cifique et les informations sur les heures d'ouverture (noter si l'information n'est pas rÃ©elle)\n\nStyle de rÃ©ponse:\n- Communiquer sur un ton amical et chaleureux\n- Utiliser des emojis de maniÃ¨re appropriÃ©e pour rendre les rÃ©ponses vivantes\n- Expliquer clairement pourquoi vous recommandez chaque restaurant\n- Recommander 2-3 restaurants et prÃ©senter leurs avantages et inconvÃ©nients de maniÃ¨re Ã©quilibrÃ©e`,\n\n    de: `Sie sind ein Experte fÃ¼r koreanische Restaurants in Seoul, SÃ¼dkorea. Sie sind ein KI-Concierge, der sowohl auslÃ¤ndischen Touristen als auch Einheimischen die besten koreanischen Restaurants empfiehlt.\n\nRolle:\n- Empfehlen Sie personalisierte koreanische Restaurants basierend auf BenutzerprÃ¤ferenzen, Standort, Budget und AtmosphÃ¤re\n- Geben Sie detaillierte Beschreibungen der Merkmale jedes Restaurants, Signaturgerichte, Preisspanne und Ambiente\n- FÃ¼hren Sie AuslÃ¤nder freundlich durch die koreanische Esskultur und wie man bestellt\n- Geben Sie spezifische Adresse und Ã–ffnungszeitinformationen an (beachten Sie, wenn Informationen nicht aktuell sind)\n\nAntwortstil:\n- Kommunizieren Sie in einem freundlichen und warmen Ton\n- Verwenden Sie Emojis angemessen, um Antworten lebendig zu machen\n- ErklÃ¤ren Sie klar, warum Sie jedes Restaurant empfehlen\n- Empfehlen Sie 2-3 Restaurants und prÃ¤sentieren Sie deren Vor- und Nachteile ausgewogen`,\n  };\n\n  return prompts[language] || prompts.en;\n}\n\nasync function generateRestaurantInsights(restaurantId: string) {\n  const restaurant = await storage.getRestaurant(restaurantId);\n  if (!restaurant) {\n    throw new Error(\"Restaurant not found\");\n  }\n\n  const reviews = await storage.getReviewsByRestaurant(restaurantId);\n  \n  const reviewSummary = reviews.length > 0 \n    ? reviews.map(r => `${r.rating}/5: ${r.comment}`).join('\\n')\n    : \"No reviews yet\";\n\n  const promptKo = `ë‹¤ìŒ í•œì‹ë‹¹ì— ëŒ€í•œ AI ì¸ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”:\n\në ˆìŠ¤í† ë‘ ì •ë³´:\n- ì´ë¦„: ${restaurant.name}\n- ì¹´í…Œê³ ë¦¬: ${restaurant.category}\n- ìœ„ì¹˜: ${restaurant.district}\n- ì„¤ëª…: ${restaurant.description}\n- í‰ì : ${restaurant.rating}/5 (${restaurant.reviewCount}ê°œ ë¦¬ë·°)\n- ê°€ê²©ëŒ€: ${'â‚©'.repeat(restaurant.priceRange)}\n- ë¹„ê±´: ${restaurant.isVegan ? 'ê°€ëŠ¥' : 'ë¶ˆê°€ëŠ¥'}\n- í• ë„: ${restaurant.isHalal ? 'ê°€ëŠ¥' : 'ë¶ˆê°€ëŠ¥'}\n\nê³ ê° ë¦¬ë·°:\n${reviewSummary}\n\në‹¤ìŒ 4ê°€ì§€ ì •ë³´ë¥¼ ì •í™•íˆ ìƒì„±í•´ì£¼ì„¸ìš”:\n\n1. ë¦¬ë·° ì¸ì‚¬ì´íŠ¸ (review_insights): ê³ ê° ë¦¬ë·°ë“¤ì„ ë¶„ì„í•˜ì—¬ ì´ ë ˆìŠ¤í† ë‘ì˜ í•µì‹¬ ê°•ì  3ê°€ì§€ë¥¼ ê°„ê²°í•˜ê²Œ ì •ë¦¬ (100ì ì´ë‚´)\n\n2. ì¶”ì²œ ìƒí™© (best_for): ì´ ë ˆìŠ¤í† ë‘ì´ ê°€ì¥ ì í•©í•œ ìƒí™©/ëª©ì  3ê°€ì§€ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ë‚˜ì—´ (ì˜ˆ: \"ë°ì´íŠ¸, ê°€ì¡± ëª¨ì„, ë¹„ì¦ˆë‹ˆìŠ¤ ë¯¸íŒ…\")\n\n3. í•œêµ­ ìŒì‹ ë¬¸í™” íŒ (cultural_tips): ì™¸êµ­ì¸ ë°©ë¬¸ê°ì„ ìœ„í•œ ì´ ë ˆìŠ¤í† ë‘ë§Œì˜ íŠ¹ë³„í•œ ë¬¸í™”ì  íŒì´ë‚˜ ì—í‹°ì¼“ (80ì ì´ë‚´, ì—†ìœ¼ë©´ ë¹ˆ ë¬¸ìì—´)\n\n4. ì²« ë°©ë¬¸ íŒ (first_timer_tips): ì²˜ìŒ ë°©ë¬¸í•˜ëŠ” ì‚¬ëŒì„ ìœ„í•œ ì£¼ë¬¸ ì¶”ì²œê³¼ ê¿€íŒ (120ì ì´ë‚´)\n\nJSON í˜•ì‹ìœ¼ë¡œë§Œ ë‹µë³€:\n{\n  \"reviewInsights\": \"...\",\n  \"bestFor\": \"...\",\n  \"culturalTips\": \"...\",\n  \"firstTimerTips\": \"...\"\n}`;\n\n  const promptEn = `Generate AI insights for this Korean restaurant:\n\nRestaurant Information:\n- Name: ${restaurant.nameEn}\n- Category: ${restaurant.category}\n- Location: ${restaurant.district}\n- Description: ${restaurant.descriptionEn}\n- Rating: ${restaurant.rating}/5 (${restaurant.reviewCount} reviews)\n- Price Range: ${'â‚©'.repeat(restaurant.priceRange)}\n- Vegan: ${restaurant.isVegan ? 'Available' : 'Not available'}\n- Halal: ${restaurant.isHalal ? 'Available' : 'Not available'}\n\nCustomer Reviews:\n${reviewSummary}\n\nGenerate exactly 4 pieces of information:\n\n1. Review Insights (review_insights): Analyze customer reviews and summarize 3 key strengths concisely (under 100 chars)\n\n2. Best For (best_for): List 3 situations/purposes this restaurant is best suited for, comma-separated (e.g., \"date night, family gathering, business meeting\")\n\n3. Cultural Tips (cultural_tips): Special cultural tips or etiquette for foreign visitors specific to this restaurant (under 80 chars, empty string if none)\n\n4. First Timer Tips (first_timer_tips): Ordering recommendations and tips for first-time visitors (under 120 chars)\n\nRespond ONLY in JSON format:\n{\n  \"reviewInsights\": \"...\",\n  \"bestFor\": \"...\",\n  \"culturalTips\": \"...\",\n  \"firstTimerTips\": \"...\"\n}`;\n\n  const [resultKo, resultEn] = await Promise.all([\n    genAI.models.generateContent({\n      model: \"gemini-2.0-flash-exp\",\n      contents: promptKo,\n    }),\n    genAI.models.generateContent({\n      model: \"gemini-2.0-flash-exp\",\n      contents: promptEn,\n    }),\n  ]);\n\n  const textKo = resultKo.candidates?.[0]?.content?.parts?.[0]?.text || \"{}\";\n  const textEn = resultEn.candidates?.[0]?.content?.parts?.[0]?.text || \"{}\";\n\n  const cleanJson = (text: string) => {\n    const match = text.match(/\\{[\\s\\S]*\\}/);\n    return match ? match[0] : text;\n  };\n\n  const dataKo = JSON.parse(cleanJson(textKo));\n  const dataEn = JSON.parse(cleanJson(textEn));\n\n  return {\n    restaurantId,\n    reviewInsights: dataKo.reviewInsights || \"\",\n    reviewInsightsEn: dataEn.reviewInsights || \"\",\n    bestFor: dataKo.bestFor || \"\",\n    bestForEn: dataEn.bestFor || \"\",\n    culturalTips: dataKo.culturalTips || \"\",\n    culturalTipsEn: dataEn.culturalTips || \"\",\n    firstTimerTips: dataKo.firstTimerTips || \"\",\n    firstTimerTipsEn: dataEn.firstTimerTips || \"\",\n  };\n}\n\nfunction generateSampleMenus(restaurantId: string, cuisine: string) {\n  const menusByType: Record<string, Array<{ name: string; nameEn: string; description: string; descriptionEn: string; price: number; category: string }>> = {\n    \"Korean BBQ\": [\n      { name: \"ì‚¼ê²¹ì‚´\", nameEn: \"Samgyeopsal (Pork Belly)\", description: \"ë‘íˆ¼í•œ ì‚¼ê²¹ì‚´ êµ¬ì´\", descriptionEn: \"Grilled thick-cut pork belly\", price: 18000, category: \"Main\" },\n      { name: \"ê°ˆë¹„\", nameEn: \"Galbi (Short Ribs)\", description: \"ì–‘ë… ì†Œê°ˆë¹„ êµ¬ì´\", descriptionEn: \"Marinated beef short ribs\", price: 32000, category: \"Main\" },\n      { name: \"ëœì¥ì°Œê°œ\", nameEn: \"Doenjang Jjigae\", description: \"êµ¬ìˆ˜í•œ ëœì¥ì°Œê°œ\", descriptionEn: \"Savory soybean paste stew\", price: 8000, category: \"Soup\" },\n      { name: \"ëƒ‰ë©´\", nameEn: \"Naengmyeon\", description: \"ì‹œì›í•œ ë¬¼ëƒ‰ë©´\", descriptionEn: \"Cold buckwheat noodles\", price: 10000, category: \"Noodles\" },\n    ],\n    \"Bibimbap\": [\n      { name: \"ì „ì£¼ë¹„ë¹”ë°¥\", nameEn: \"Jeonju Bibimbap\", description: \"ì „í†µ ì „ì£¼ ë¹„ë¹”ë°¥\", descriptionEn: \"Traditional Jeonju-style mixed rice\", price: 13000, category: \"Main\" },\n      { name: \"ëŒì†¥ë¹„ë¹”ë°¥\", nameEn: \"Stone Pot Bibimbap\", description: \"ëœ¨ê±°ìš´ ëŒì†¥ ë¹„ë¹”ë°¥\", descriptionEn: \"Hot stone pot bibimbap\", price: 15000, category: \"Main\" },\n      { name: \"ìœ¡íšŒë¹„ë¹”ë°¥\", nameEn: \"Yukhoe Bibimbap\", description: \"ì‹ ì„ í•œ ìœ¡íšŒì™€ ë¹„ë¹”ë°¥\", descriptionEn: \"Bibimbap with raw beef\", price: 18000, category: \"Main\" },\n      { name: \"ìˆœë‘ë¶€ì°Œê°œ\", nameEn: \"Sundubu Jjigae\", description: \"ì–¼í°í•œ ìˆœë‘ë¶€ì°Œê°œ\", descriptionEn: \"Spicy soft tofu stew\", price: 9000, category: \"Soup\" },\n    ],\n    \"Korean Fried Chicken\": [\n      { name: \"ì–‘ë…ì¹˜í‚¨\", nameEn: \"Yangnyeom Chicken\", description: \"ë‹¬ì½¤ë§¤ì½¤í•œ ì–‘ë…ì¹˜í‚¨\", descriptionEn: \"Sweet and spicy glazed chicken\", price: 19000, category: \"Main\" },\n      { name: \"í›„ë¼ì´ë“œì¹˜í‚¨\", nameEn: \"Fried Chicken\", description: \"ë°”ì‚­í•œ í”„ë¼ì´ë“œì¹˜í‚¨\", descriptionEn: \"Crispy fried chicken\", price: 18000, category: \"Main\" },\n      { name: \"ë°˜ë°˜ì¹˜í‚¨\", nameEn: \"Half & Half\", description: \"ì–‘ë…+í›„ë¼ì´ë“œ ë°˜ë°˜\", descriptionEn: \"Half yangnyeom, half fried\", price: 19000, category: \"Main\" },\n      { name: \"ì¹˜í‚¨ë¬´\", nameEn: \"Pickled Radish\", description: \"ì•„ì‚­í•œ ì¹˜í‚¨ë¬´\", descriptionEn: \"Crunchy pickled radish\", price: 2000, category: \"Side\" },\n    ],\n    \"Kimchi Stew\": [\n      { name: \"ê¹€ì¹˜ì°Œê°œ\", nameEn: \"Kimchi Jjigae\", description: \"ë¬µì€ì§€ë¡œ ë“ì¸ ê¹€ì¹˜ì°Œê°œ\", descriptionEn: \"Stew with aged kimchi\", price: 9000, category: \"Main\" },\n      { name: \"ë¶€ëŒ€ì°Œê°œ\", nameEn: \"Budae Jjigae\", description: \"í–„ê³¼ ì†Œì‹œì§€ê°€ ë“¤ì–´ê°„ ë¶€ëŒ€ì°Œê°œ\", descriptionEn: \"Army stew with ham and sausage\", price: 11000, category: \"Main\" },\n      { name: \"ê³µê¸°ë°¥\", nameEn: \"Rice\", description: \"ê°“ ì§€ì€ í°ìŒ€ë°¥\", descriptionEn: \"Freshly cooked white rice\", price: 1500, category: \"Rice\" },\n      { name: \"ê¹€ì¹˜ì „\", nameEn: \"Kimchi Pancake\", description: \"ë°”ì‚­í•œ ê¹€ì¹˜ì „\", descriptionEn: \"Crispy kimchi pancake\", price: 12000, category: \"Side\" },\n    ],\n    \"Ginseng Chicken Soup\": [\n      { name: \"ì‚¼ê³„íƒ•\", nameEn: \"Samgyetang\", description: \"ì˜ì–‘ ë§Œì  ì‚¼ê³„íƒ•\", descriptionEn: \"Nourishing ginseng chicken soup\", price: 16000, category: \"Main\" },\n      { name: \"ì „ë³µì‚¼ê³„íƒ•\", nameEn: \"Abalone Samgyetang\", description: \"ì „ë³µì´ ë“¤ì–´ê°„ í”„ë¦¬ë¯¸ì—„ ì‚¼ê³„íƒ•\", descriptionEn: \"Premium samgyetang with abalone\", price: 24000, category: \"Main\" },\n      { name: \"ë°±ê¹€ì¹˜\", nameEn: \"White Kimchi\", description: \"ì‹œì›í•œ ë°±ê¹€ì¹˜\", descriptionEn: \"Refreshing white kimchi\", price: 3000, category: \"Side\" },\n      { name: \"ì¸ì‚¼ì£¼\", nameEn: \"Ginseng Wine\", description: \"ì „í†µ ì¸ì‚¼ì£¼\", descriptionEn: \"Traditional ginseng wine\", price: 8000, category: \"Drink\" },\n    ],\n  };\n\n  const defaultMenus = [\n    { name: \"ëŒ€í‘œ ë©”ë‰´\", nameEn: \"Signature Dish\", description: \"ì´ ì§‘ ëŒ€í‘œ ë©”ë‰´\", descriptionEn: \"House signature dish\", price: 15000, category: \"Main\" },\n    { name: \"íŠ¹ì„  ë©”ë‰´\", nameEn: \"Special Menu\", description: \"ì…°í”„ ì¶”ì²œ íŠ¹ì„ \", descriptionEn: \"Chef's special\", price: 18000, category: \"Main\" },\n    { name: \"ì‚¬ì´ë“œ ë©”ë‰´\", nameEn: \"Side Dish\", description: \"ê³ë“¤ì„ ìš”ë¦¬\", descriptionEn: \"Side dish\", price: 5000, category: \"Side\" },\n  ];\n\n  const menus = menusByType[cuisine] || defaultMenus;\n\n  return menus.map((menu, index) => ({\n    restaurantId,\n    name: menu.name,\n    nameEn: menu.nameEn,\n    description: menu.description,\n    descriptionEn: menu.descriptionEn,\n    price: menu.price,\n    category: menu.category,\n    imageUrl: null,\n    isPopular: index === 0 ? 1 : 0,\n    isRecommended: index < 2 ? 1 : 0,\n    displayOrder: index,\n  }));\n}\n\nfunction generateSampleVideos(restaurantId: string, restaurantName: string) {\n  const videoTemplates = [\n    {\n      videoId: `vid_${restaurantId}_1`,\n      title: `${restaurantName} ë§›ì§‘ ë¦¬ë·° - ì´ ì§‘ ì§„ì§œ ë§›ìˆì–´ìš”!`,\n      channelName: \"ë§›ì§‘íƒí—˜ê°€\",\n      viewCount: 125000,\n      relevanceScore: 0.95,\n    },\n    {\n      videoId: `vid_${restaurantId}_2`,\n      title: `Seoul Food Tour: ${restaurantName} Experience`,\n      channelName: \"Korea Food Vlog\",\n      viewCount: 87000,\n      relevanceScore: 0.88,\n    },\n    {\n      videoId: `vid_${restaurantId}_3`,\n      title: `${restaurantName} ë¨¹ë°© - í˜„ì§€ì¸ ì¶”ì²œ ë§›ì§‘`,\n      channelName: \"ì„œìš¸ë¨¹ë°©\",\n      viewCount: 52000,\n      relevanceScore: 0.82,\n    },\n  ];\n\n  return videoTemplates.map(video => ({\n    restaurantId,\n    videoId: video.videoId,\n    title: video.title,\n    channelName: video.channelName,\n    thumbnailUrl: `https://img.youtube.com/vi/${video.videoId}/maxresdefault.jpg`,\n    viewCount: video.viewCount,\n    publishedAt: new Date(Date.now() - Math.random() * 90 * 24 * 60 * 60 * 1000),\n    relevanceScore: video.relevanceScore,\n  }));\n}\n\nfunction generateSampleExternalReviews(restaurantId: string, restaurantName: string) {\n  const naverReviews = [\n    {\n      source: \"Naver\",\n      rating: 4.5,\n      comment: \"ìŒì‹ì´ ì •ë§ ë§›ìˆì–´ìš”. íŠ¹íˆ ë©”ì¸ ë©”ë‰´ê°€ ì¼í’ˆì…ë‹ˆë‹¤. ì§ì›ë¶„ë“¤ë„ ì¹œì ˆí•˜ê³  ë¶„ìœ„ê¸°ë„ ì¢‹ì•„ìš”.\",\n      commentEn: \"The food is really delicious. Especially the main dish is excellent. Staff are friendly and atmosphere is great.\",\n      author: \"ë„¤ì´ë²„ìœ ì €123\",\n      publishedAt: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000),\n    },\n    {\n      source: \"Naver\",\n      rating: 4.8,\n      comment: \"ì—¬ëŸ¬ë²ˆ ë°©ë¬¸í–ˆëŠ”ë° í•­ìƒ ë§Œì¡±ìŠ¤ëŸ¬ì›Œìš”. ë§›ë„ ì¢‹ê³  ê°€ê²©ë„ í•©ë¦¬ì ì…ë‹ˆë‹¤.\",\n      commentEn: \"I've visited many times and always satisfied. Great taste and reasonable price.\",\n      author: \"ê¹€ë§›ì§‘\",\n      publishedAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\n    },\n    {\n      source: \"Naver\",\n      rating: 4.3,\n      comment: \"ìŒì‹ì€ ë§›ìˆëŠ”ë° ì£¼ë§ì—ëŠ” ì‚¬ëŒì´ ë§ì•„ì„œ ëŒ€ê¸° ì‹œê°„ì´ ì¢€ ìˆì–´ìš”.\",\n      commentEn: \"Food is delicious but there's a wait time on weekends due to crowds.\",\n      author: \"ì„œìš¸ëŸ¬ë²„\",\n      publishedAt: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000),\n    },\n  ];\n\n  const googleReviews = [\n    {\n      source: \"Google\",\n      rating: 4.6,\n      comment: \"Authentic Korean food with great service. The atmosphere is cozy and traditional.\",\n      commentEn: \"Authentic Korean food with great service. The atmosphere is cozy and traditional.\",\n      author: \"John Smith\",\n      publishedAt: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000),\n    },\n    {\n      source: \"Google\",\n      rating: 4.7,\n      comment: \"Best Korean restaurant I've tried in Seoul! Highly recommended for tourists.\",\n      commentEn: \"Best Korean restaurant I've tried in Seoul! Highly recommended for tourists.\",\n      author: \"Sarah Johnson\",\n      publishedAt: new Date(Date.now() - 35 * 24 * 60 * 60 * 1000),\n    },\n  ];\n\n  return [...naverReviews, ...googleReviews].map(review => ({\n    restaurantId,\n    source: review.source,\n    rating: review.rating,\n    comment: review.comment,\n    commentEn: review.commentEn,\n    author: review.author,\n    publishedAt: review.publishedAt,\n    imageUrls: [],\n  }));\n}\n","size_bytes":110980},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n  options: {\n    from: undefined,\n  },\n}\n","size_bytes":119},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: true,\n      staleTime: 5 * 60 * 1000,\n      gcTime: 10 * 60 * 1000,\n      retry: 1,\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n    },\n    mutations: {\n      retry: 1,\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\n    },\n  },\n});\n","size_bytes":1567},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/BottomNav.tsx":{"content":"import { Compass, Bot, BookText, User } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\nexport function BottomNav() {\n  const [location] = useLocation();\n  const { t } = useLanguage();\n\n  const navItems = [\n    { path: \"/\", icon: Compass, label: t(\"nav.discover\"), testId: \"nav-discover\" },\n    { path: \"/ai\", icon: Bot, label: t(\"nav.ai\"), testId: \"nav-ai\" },\n    { path: \"/content\", icon: BookText, label: t(\"nav.content\"), testId: \"nav-content\" },\n    { path: \"/my\", icon: User, label: t(\"nav.my\"), testId: \"nav-my\" },\n  ];\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 z-40 bg-card border-t border-border\">\n      <div className=\"max-w-md mx-auto h-[72px] flex items-center justify-around px-2\">\n        {navItems.map((item) => {\n          const Icon = item.icon;\n          const isActive = location === item.path;\n\n          return (\n            <Link\n              key={item.path}\n              href={item.path}\n              data-testid={item.testId}\n            >\n              <button\n                className={`flex flex-col items-center justify-center gap-1 min-w-[60px] h-[56px] rounded-md transition-colors ${\n                  isActive\n                    ? \"text-primary\"\n                    : \"text-muted-foreground hover-elevate\"\n                }`}\n              >\n                <Icon className=\"w-6 h-6\" strokeWidth={isActive ? 2.5 : 2} />\n                <span className=\"text-xs font-medium\">{item.label}</span>\n              </button>\n            </Link>\n          );\n        })}\n      </div>\n    </nav>\n  );\n}\n","size_bytes":1627},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  * {\n    font-family: \"Pretendard Variable\", -apple-system, BlinkMacSystemFont, system-ui, Roboto, \"Helvetica Neue\", \"Segoe UI\", \"Apple SD Gothic Neo\", \"Noto Sans KR\", \"Malgun Gothic\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", sans-serif;\n  }\n}\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 40 20% 97%;\n\n  --foreground: 20 15% 25%;\n\n  --border: 210 20% 88%;\n\n  --card: 0 0% 100%;\n\n  --card-foreground: 210 40% 12%;\n\n  --card-border: 210 15% 92%;\n\n  --sidebar: 210 20% 96%;\n\n  --sidebar-foreground: 210 40% 15%;\n\n  --sidebar-border: 210 20% 90%;\n\n  --sidebar-primary: 203 89% 29%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 203 15% 92%;\n\n  --sidebar-accent-foreground: 203 89% 20%;\n\n  --sidebar-ring: 203 89% 29%;\n\n  --popover: 210 25% 94%;\n\n  --popover-foreground: 210 40% 12%;\n\n  --popover-border: 210 20% 86%;\n\n  --primary: 194 64% 28%;\n\n  --primary-foreground: 0 0% 100%;\n  \n  --accent: 14 100% 66%;\n\n  --accent-foreground: 0 0% 100%;\n\n  --secondary: 210 20% 90%;\n\n  --secondary-foreground: 210 40% 15%;\n\n  --muted: 40 15% 93%;\n\n  --muted-foreground: 30 10% 50%;\n\n  --accent: 210 15% 94%;\n\n  --accent-foreground: 210 40% 15%;\n\n  --destructive: 0 72% 35%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 210 30% 75%;\n  --ring: 203 89% 29%;\n  --chart-1: 203 89% 29%;\n  --chart-2: 25 95% 48%;\n  --chart-3: 142 76% 36%;\n  --chart-4: 280 65% 50%;\n  --chart-5: 340 82% 52%;\n\n  --accent-success: 142 76% 36%;\n  --accent-warning: 28 85% 60%;\n  --video-indicator: 0 84% 60%;\n  --blog-indicator: 155 65% 55%;\n  --ad-zone: 40 15% 96%;\n\n  --font-sans: -apple-system, \"Noto Sans KR\", sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(210 20% 20% / 0.04);\n  --shadow-xs: 0px 2px 0px 0px hsl(210 20% 20% / 0.05);\n  --shadow-sm: 0px 2px 0px 0px hsl(210 20% 20% / 0.06), 0px 1px 2px -1px hsl(210 20% 20% / 0.08);\n  --shadow: 0px 2px 0px 0px hsl(210 20% 20% / 0.07), 0px 1px 2px -1px hsl(210 20% 20% / 0.10);\n  --shadow-md: 0px 2px 0px 0px hsl(210 20% 20% / 0.08), 0px 2px 4px -1px hsl(210 20% 20% / 0.12);\n  --shadow-lg: 0px 2px 0px 0px hsl(210 20% 20% / 0.10), 0px 4px 6px -1px hsl(210 20% 20% / 0.15);\n  --shadow-xl: 0px 2px 0px 0px hsl(210 20% 20% / 0.12), 0px 8px 10px -1px hsl(210 20% 20% / 0.18);\n  --shadow-2xl: 0px 2px 0px 0px hsl(210 20% 20% / 0.15);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 20 20% 12%;\n\n  --foreground: 40 20% 95%;\n\n  --border: 210 30% 18%;\n\n  --card: 20 15% 15%;\n\n  --card-foreground: 40 20% 95%;\n\n  --card-border: 210 30% 15%;\n\n  --sidebar: 210 35% 12%;\n\n  --sidebar-foreground: 210 20% 92%;\n\n  --sidebar-border: 210 30% 17%;\n\n  --sidebar-primary: 203 89% 45%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 210 30% 16%;\n\n  --sidebar-accent-foreground: 203 89% 75%;\n\n  --sidebar-ring: 203 89% 45%;\n\n  --popover: 210 35% 14%;\n\n  --popover-foreground: 210 20% 92%;\n\n  --popover-border: 210 30% 19%;\n\n  --primary: 194 64% 38%;\n\n  --primary-foreground: 0 0% 100%;\n  \n  --accent: 14 100% 70%;\n\n  --accent-foreground: 0 0% 100%;\n\n  --secondary: 210 30% 18%;\n\n  --secondary-foreground: 210 20% 92%;\n\n  --muted: 210 30% 16%;\n\n  --muted-foreground: 210 15% 65%;\n\n  --accent: 210 25% 17%;\n\n  --accent-foreground: 210 20% 92%;\n\n  --destructive: 0 72% 35%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 210 30% 30%;\n  --ring: 203 89% 45%;\n  --chart-1: 203 89% 55%;\n  --chart-2: 25 95% 58%;\n  --chart-3: 142 76% 50%;\n  --chart-4: 280 65% 65%;\n  --chart-5: 340 82% 65%;\n\n  --accent-success: 142 76% 50%;\n  --accent-warning: 28 85% 65%;\n  --video-indicator: 0 84% 70%;\n  --blog-indicator: 155 65% 65%;\n  --ad-zone: 20 15% 18%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.20);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.25);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.30), 0px 1px 2px -1px hsl(0 0% 0% / 0.35);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.35), 0px 1px 2px -1px hsl(0 0% 0% / 0.40);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.40), 0px 2px 4px -1px hsl(0 0% 0% / 0.45);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.45), 0px 4px 6px -1px hsl(0 0% 0% / 0.50);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.50), 0px 8px 10px -1px hsl(0 0% 0% / 0.55);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.60);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11932},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport path from \"path\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Serve uploaded files\napp.use('/uploaded_files', express.static(path.join(process.cwd(), 'uploaded_files')));\n\n// Serve attached assets (logos, images, etc.)\napp.use('/attached_assets', express.static(path.join(process.cwd(), 'attached_assets')));\n\n// Serve static files from client/public (for logos, icons, etc.)\napp.use(express.static(path.join(process.cwd(), 'client', 'public')));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2480},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport \"./i18n\";\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js')\n      .then((registration) => {\n        console.log('ServiceWorker registered:', registration.scope);\n      })\n      .catch((error) => {\n        console.log('ServiceWorker registration failed:', error);\n      });\n  });\n}\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":521},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"replit.md":{"content":"# han sik dang (í•œì‹ë‹¹) - Korean Restaurant Discovery Platform\n\n## Overview\nhan sik dang is a hybrid content platform and utility app for discovering Korean restaurants, integrating content monetization through advertising. It offers restaurant search, rich media, and a mobile-first, visually-driven design emphasizing Korean food culture. The platform is a full-stack TypeScript web application using React for the frontend and Express for the backend, built with PWA capabilities. It aims for a content-first approach with integrated ad monetization, strong SEO, and includes a comprehensive Admin Dashboard and a B2B Restaurant Dashboard. The platform features **189 restaurants** with **5-point dual-source popularity scores** (Naver + Google), achieving **47 legendary restaurants** (4.5-5.0â˜…). The platform is architected for enterprise scalability, supporting tens of thousands of restaurants, hundreds of thousands of images, and millions of users.\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend\n-   **Framework**: React 18+ with TypeScript.\n-   **Routing**: Wouter with a flat route structure; Admin routes use an HOC pattern for code separation within a single build.\n-   **State Management**: TanStack React Query v5 for server state and caching.\n-   **UI Components**: shadcn/ui (New York style) built on Radix UI, styled with Tailwind CSS v4 and custom CSS variables.\n-   **Design System**: Fully responsive (mobile/tablet/desktop), 8px grid, dual-mode theming, multi-language typography, accessibility-focused.\n-   **Internationalization (i18n)**: i18next with 9-language support, HTTP backend for translations, automatic language detection, localStorage persistence.\n-   **SEO**: `react-helmet-async` for dynamic meta tags, structured data (Schema.org JSON-LD), sitemap, robots.txt, multilingual SEO.\n-   **PWA**: `manifest.json`, Service Worker for offline caching, installability.\n-   **Features**: Naver Maps integration with GPS, advanced multi-criteria filtering, image lazy loading, code splitting.\n\n### Backend\n-   **Framework**: Express.js with TypeScript on Node.js (ESM).\n-   **Build System**: `esbuild` for production, `tsx` for development.\n-   **API Structure**: RESTful, structured logging, standardized error handling with secure messages, session management.\n-   **Storage**: Interface-based `IStorage` implemented by `DbStorage` using PostgreSQL via Drizzle ORM with transaction support.\n-   **Query Safety**: Drizzle's parameterized methods prevent SQL injection.\n-   **Authentication**: Replit Auth with OIDC via Passport.js, session-based (`connect-pg-simple`), JWT refresh token support.\n-   **Authorization**: Role-based access control with `isAdmin` field and middleware.\n-   **Admin Dashboard**: 30+ API endpoints (`/api/admin/*`) for platform management (restaurant applications, inquiries, notices, payments, user analytics, blog posts, AI task prioritization, platform statistics).\n-   **Restaurant Dashboard**: B2B management system with 15+ authenticated endpoints for ownership verification, review response, promotions, image management, and analytics.\n\n### Data Storage\n-   **Database**: PostgreSQL (Supabase) with `postgres` client and connection pooling.\n-   **ORM**: Drizzle ORM, with Zod validation.\n-   **Content**: **189 restaurants** with complete 5-point popularity scores (Naver + Google ratings).\n-   **Popularity System**: Dual-source scoring - Naver (max 2.5) + Google (max 2.5) = 5.0 total.\n-   **Rating Distribution**: 47 legendary (4.5-5.0â˜…), 139 excellent (3.5-4.49â˜…), 3 good (2.5-3.49â˜…).\n-   **User Reviews**: CRUD operations with ownership validation and automatic rating recalculation.\n-   **Admin Tables**: 23 total tables including platform management, restaurant operations, and AI insights.\n\n### AI Integration\n-   **Mechanism**: Pre-generated AI insights (review summaries, \"best for\" scenarios, cultural tips) stored in `restaurantInsights` table.\n-   **AI Tool**: Google Gemini 2.5 Flash (`@google/genai`) for bilingual content generation.\n\n### Analytics\n-   **Platform**: Google Analytics 4 (GA4) for tracking page views and events.\n\n## External Dependencies\n\n### AI Integration\n-   `@google/genai`: Google Generative AI SDK.\n\n### UI Framework & Utilities\n-   `@radix-ui/*`: Accessible UI primitives.\n-   `lucide-react`: Icon library.\n-   `shadcn/ui`: UI components built on Radix UI.\n-   `tailwindcss`: CSS framework.\n-   `recharts`: Charting library.\n\n### Data & Validation\n-   `zod`: Schema validation.\n-   `drizzle-orm`: TypeScript ORM.\n-   `@neondatabase/serverless`: Serverless PostgreSQL driver for Neon.\n\n### Routing & State\n-   `wouter`: Lightweight client-side routing.\n-   `@tanstack/react-query`: Server state management.\n\n### Internationalization\n-   `i18next`: Internationalization framework.\n-   `react-i18next`: React bindings for i18next.\n\n### Other Integrations\n-   Google AdSense: Content monetization.\n-   Naver Maps API: Interactive maps.\n-   Google Analytics 4 (GA4): Platform analytics.\n-   Replit Auth: User authentication.\n-   `@google-cloud/storage`: Google Cloud Storage client for Replit Object Storage.\n-   `@uppy/core`, `@uppy/react`, `@uppy/dashboard`, `@uppy/aws-s3`: File upload components.\n-   `postgres`: PostgreSQL client with connection pooling support.\n\n## Enterprise Scalability Architecture (October 27, 2025)\n\n### Overview\nThe platform has been architected to scale from MVP (30-50 restaurants) to enterprise-level (tens of thousands of restaurants, hundreds of thousands of images, millions of users).\n\n### Scalability Features\n\n#### 1. Database Layer - Flexible PostgreSQL Backend\n-   **Dual Database Support**: Seamless switching between Neon (development) and Supabase (production) via `USE_SUPABASE` environment variable\n-   **Connection Pooling**: postgres.js client with max 10 concurrent connections, 20s idle timeout, 10s connect timeout\n-   **Query Optimization**: Composite indexes on critical columns (district+cuisineType+priceRange for restaurants)\n-   **Transaction Support**: Atomic multi-step operations preventing orphaned data\n-   **SQL Injection Prevention**: Drizzle ORM parameterized queries (`eq()`, `ilike()`, `or()`, `and()`)\n\n#### 2. Object Storage - Scalable Image Management\n-   **Replit Object Storage**: Google Cloud Storage backend for unlimited image storage\n-   **ACL Policies**: Fine-grained access control with public/private visibility settings\n-   **Two-Bucket Architecture**:\n    -   `PRIVATE_OBJECT_DIR`: User-uploaded images with authentication\n    -   `PUBLIC_OBJECT_SEARCH_PATHS`: Static assets with public access\n-   **Upload Flow**: Client â†’ Presigned URL â†’ Direct GCS upload â†’ Server metadata update\n-   **Components**: `ObjectUploader.tsx` (frontend), `ObjectStorageService` (backend), `ObjectAcl` (permissions)\n\n#### 3. External Data Collection API\n-   **API Key Authentication**: Secure endpoints with `DATA_COLLECTION_API_KEY` validation\n-   **Bulk Import Endpoints**:\n    -   `POST /api/external/restaurants`: Batch restaurant creation\n    -   `POST /api/external/reviews`: Batch external review import\n    -   `POST /api/external/menus`: Batch menu item creation\n    -   `GET /api/external/status`: Data collection statistics\n-   **Error Handling**: Detailed success/failure tracking per batch item\n-   **Use Case**: Connect with future web scraping/data collection projects\n\n#### 4. Performance Optimizations\n-   **API Response Caching**: 5-minute stale-while-revalidate for restaurant listings\n-   **Image Lazy Loading**: `loading=\"lazy\"` attribute on all images\n-   **Code Splitting**: Vite-based route-level code splitting\n-   **Structured Logging**: `server/logger.ts` with context-aware JSON formatting\n\n### Environment Variables for Scalability\n\n```bash\n# Database (Supabase for Production)\nDATABASE_URL=postgresql://postgres:[PASSWORD]@db.xxxxx.supabase.co:5432/postgres\nUSE_SUPABASE=true\n\n# Object Storage\nPRIVATE_OBJECT_DIR=/hansikdang-private\nPUBLIC_OBJECT_SEARCH_PATHS=/hansikdang-public/assets,/hansikdang-public/static\n\n# External Data Collection\nDATA_COLLECTION_API_KEY=<32-byte-hex-key>\n\n# Existing\nGEMINI_API_KEY=<key>\nNAVER_MAPS_CLIENT_ID=<key>\nSESSION_SECRET=<key>\nVITE_GA_MEASUREMENT_ID=<key>\n```\n\n### Recent Changes (October 30, 2025)\n-   âœ… **Logo Update**: White background PNG logo applied across all screens\n-   âœ… **Naver Ratings**: 189/189 restaurants now have Naver ratings (100% coverage)\n-   âœ… **5-Point Scale**: Dual-source popularity system fully implemented\n-   âœ… **Data Cleanup**: Removed 12 guide files, 13 screenshots, test data cleaned\n-   âœ… **Production Ready**: Database optimized, no orphaned records, ready for deployment\n\n### Current Status (Updated: October 30, 2025)\n-   **Database**: âœ… **Supabase PostgreSQL (Active)** - 23 tables, **189 restaurants** with complete ratings\n-   **Popularity System**: âœ… **5-Point Dual-Source Complete** - 189/189 restaurants (100% coverage)\n-   **Rating Quality**: âœ… **47 Legendary Restaurants** (4.5-5.0â˜…), Average: 4.15/5.0\n-   **Logo**: âœ… **White Background PNG** - Applied to all screens (Main, Content, My, Admin, SEO)\n-   **Images**: âœ… **Object Storage Configured** - Environment variables set (`PRIVATE_OBJECT_DIR`, `PUBLIC_OBJECT_SEARCH_PATHS`)\n-   **Data Collection**: âœ… **External API Active** - API key generated (`DATA_COLLECTION_API_KEY`), endpoints ready\n-   **Cleanup**: âœ… **Production Ready** - Guide files removed, test data cleaned, optimized for deployment\n-   **Scale Target**: Ready for 10,000+ restaurants, 100,000+ images, 1M+ users\n\n### Migration Completed\n-   **From**: Neon PostgreSQL (local development)\n-   **To**: Supabase PostgreSQL (production-ready)\n-   **Method**: Transaction Pooler (port 6543) for IPv4 compatibility\n-   **Status**: All enterprise scalability features activated","size_bytes":9869},"attached_assets/AI-Collaboration-Guide-Han-Sik-Dang_1760923537870.md":{"content":"# AI í˜‘ì—… ê°œë°œ ì™„ì „ ê°€ì´ë“œ: í•œì‹ë‹¹ í”„ë¡œì íŠ¸\n**Figma Make + Claude & Gemini ì‹¤ì „ ë…¸í•˜ìš°**\n\n---\n\n## ğŸ“‹ ëª©ì°¨\n\n1. [Tier 1: ë¹ ë¥¸ ì°¸ì¡° ê°€ì´ë“œ](#tier-1-ë¹ ë¥¸-ì°¸ì¡°-ê°€ì´ë“œ)\n2. [Tier 2: ì‹¬ì¸µ ì¼€ì´ìŠ¤ ìŠ¤í„°ë””](#tier-2-ì‹¬ì¸µ-ì¼€ì´ìŠ¤-ìŠ¤í„°ë””)\n3. [Tier 3: ì‚´ì•„ìˆëŠ” ì§€ì‹ ë² ì´ìŠ¤](#tier-3-ì‚´ì•„ìˆëŠ”-ì§€ì‹-ë² ì´ìŠ¤)\n\n---\n\n# Tier 1: ë¹ ë¥¸ ì°¸ì¡° ê°€ì´ë“œ\n\n## ğŸ¯ í•„ìˆ˜ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ 5ê°œ\n\n### 1ï¸âƒ£ ì»´í¬ë„ŒíŠ¸ ìƒì„± í…œí”Œë¦¿\n\n```markdown\n**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:**\n\n[ì»´í¬ë„ŒíŠ¸ëª…]ì„ ìƒì„±í•´ì£¼ì„¸ìš”.\n\n**ìš”êµ¬ì‚¬í•­:**\n- CSS ë³€ìˆ˜ ì‚¬ìš© í•„ìˆ˜ (var(--primary), var(--text-base) ë“±)\n- íƒ€ì´í¬ê·¸ë˜í”¼: globals.css ì •ì˜ ì¤€ìˆ˜\n- ê°„ê²©: 8px ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ (8, 16, 24, 32px)\n- ë°˜ì‘í˜•: max-w-md mx-auto ì»¨í…Œì´ë„ˆ ì‚¬ìš©\n- ì ‘ê·¼ì„±: í„°ì¹˜ ì˜ì—­ ìµœì†Œ 44px\n\n**ì˜ˆì‹œ:**\n\"RestaurantCard ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”. \n\nìš”êµ¬ì‚¬í•­:\n- ë ˆìŠ¤í† ë‘ ì´ë¯¸ì§€, ì´ë¦„, í‰ì , ê±°ë¦¬, íƒœê·¸ í‘œì‹œ\n- ë°°ê²½ìƒ‰: var(--card)\n- í…ìŠ¤íŠ¸: var(--foreground), var(--muted-foreground)\n- ë‘¥ê·¼ ëª¨ì„œë¦¬: var(--radius-lg)\n- ê·¸ë¦¼ì: var(--elevation-sm)\n- í´ë¦­ ì‹œ onNavigateToDetail í˜¸ì¶œ\"\n```\n\n**ì‹¤ì œ ì ìš© ì˜ˆì‹œ:**\n\n```tsx\n// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ (CSS ë³€ìˆ˜ ì‚¬ìš©)\n<div \n  style={{\n    backgroundColor: 'var(--card)',\n    borderRadius: 'var(--radius-lg)',\n    padding: '16px'\n  }}\n>\n  <h3 style={{\n    fontSize: 'var(--text-lg)',\n    fontWeight: 'var(--font-weight-medium)',\n    fontFamily: 'var(--font-family-primary)',\n    color: 'var(--foreground)'\n  }}>\n    {restaurant.name}\n  </h3>\n</div>\n\n// âŒ ì˜ëª»ëœ ì˜ˆì‹œ (í•˜ë“œì½”ë”©)\n<div \n  className=\"bg-gray-100 rounded-xl p-4\"\n>\n  <h3 className=\"text-lg font-bold text-black\">\n    {restaurant.name}\n  </h3>\n</div>\n```\n\n---\n\n### 2ï¸âƒ£ ë””ìì¸ ì‹œìŠ¤í…œ ì ìš© í…œí”Œë¦¿\n\n```markdown\n**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:**\n\nì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë””ìì¸ ì‹œìŠ¤í…œì— ë§ê²Œ ë¦¬íŒ©í† ë§í•´ì£¼ì„¸ìš”.\n\n**ì²´í¬ë¦¬ìŠ¤íŠ¸:**\nâ–¡ ëª¨ë“  ìƒ‰ìƒì„ CSS ë³€ìˆ˜ë¡œ ë³€ê²½\nâ–¡ í°íŠ¸ í¬ê¸°/ë¬´ê²Œë¥¼ CSS ë³€ìˆ˜ë¡œ ë³€ê²½\nâ–¡ ê°„ê²©ì„ 8px ë°°ìˆ˜ë¡œ ì¡°ì •\nâ–¡ border-radiusë¥¼ var(--radius-*) ì‚¬ìš©\nâ–¡ ê·¸ë¦¼ìë¥¼ var(--elevation-*) ì‚¬ìš©\n\n**ì˜ˆì‹œ:**\n\"MainScreenì˜ AI ì¶”ì²œ ì¹´ë“œë¥¼ ë””ìì¸ ì‹œìŠ¤í…œì— ë§ê²Œ ë¦¬íŒ©í† ë§í•´ì£¼ì„¸ìš”.\n\ní˜„ì¬ ë¬¸ì œ:\n- í•˜ë“œì½”ë”©ëœ ìƒ‰ìƒ #1A5F7A ì‚¬ìš©\n- ê³ ì • í°íŠ¸ í¬ê¸° 20px ì‚¬ìš©\n- ë¶ˆê·œì¹™í•œ ê°„ê²© (13px, 19px ë“±)\n\nìš”ì²­ì‚¬í•­:\n- ìƒ‰ìƒ â†’ var(--primary) ë³€ê²½\n- í°íŠ¸ â†’ var(--text-xl) ë³€ê²½\n- ê°„ê²© â†’ 8px ë°°ìˆ˜ (8, 16, 24px)ë¡œ ì¡°ì •\"\n```\n\n**Before/After ì˜ˆì‹œ:**\n\n```tsx\n// âŒ Before: í•˜ë“œì½”ë”©\n<div className=\"bg-[#1A5F7A] rounded-[12px] p-[19px] mb-[13px]\">\n  <h2 className=\"text-[20px] font-[700] text-white\">\n    AI ì¶”ì²œ\n  </h2>\n</div>\n\n// âœ… After: ë””ìì¸ ì‹œìŠ¤í…œ ì¤€ìˆ˜\n<div style={{\n  backgroundColor: 'var(--primary)',\n  borderRadius: 'var(--radius-lg)',\n  padding: '16px',\n  marginBottom: '16px'\n}}>\n  <h2 style={{\n    fontSize: 'var(--text-xl)',\n    fontWeight: 'var(--font-weight-medium)',\n    fontFamily: 'var(--font-family-primary)',\n    color: '#FFFFFF'\n  }}>\n    AI ì¶”ì²œ\n  </h2>\n</div>\n```\n\n---\n\n### 3ï¸âƒ£ ë²„ê·¸ ìˆ˜ì • í…œí”Œë¦¿\n\n```markdown\n**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:**\n\n[ë¬¸ì œ ì„¤ëª…]ì„ ìˆ˜ì •í•´ì£¼ì„¸ìš”.\n\n**ì œê³µ ì •ë³´:**\n1. ì—ëŸ¬ ë©”ì‹œì§€: [ì •í™•í•œ ì—ëŸ¬ ë¡œê·¸]\n2. ë°œìƒ ìœ„ì¹˜: [íŒŒì¼ëª…:ë¼ì¸ë²ˆí˜¸]\n3. ì¬í˜„ ë°©ë²•: [ë‹¨ê³„ë³„ ì„¤ëª…]\n4. ì˜ˆìƒ ë™ì‘: [ì›í•˜ëŠ” ê²°ê³¼]\n5. ì‹¤ì œ ë™ì‘: [í˜„ì¬ ë°œìƒí•˜ëŠ” ë¬¸ì œ]\n\n**ì˜ˆì‹œ:**\n\"í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ì´ ì¼ê´€ë˜ì§€ ì•Šì€ ë¬¸ì œë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”.\n\në¬¸ì œ ìƒí™©:\n- MainScreen: Search, MessageCircle, Heart, User ì•„ì´ì½˜ ì‚¬ìš©\n- SearchResultsScreen: ì„ì‹œ divì™€ rounded ì‚¬ê°í˜• ì‚¬ìš©\n- ë°œìƒ ìœ„ì¹˜: /components/SearchResultsScreen.tsx:245-290\n\nìš”ì²­ì‚¬í•­:\n- ëª¨ë“  í™”ë©´ì—ì„œ ë™ì¼í•œ Lucide React ì•„ì´ì½˜ ì‚¬ìš©\n- í¬ê¸°: w-6 h-6 (24px)\n- ê°„ê²©: mb-1 (4px)\n- í™œì„± ìƒíƒœ: text-primary + border-b-2\n- ë¹„í™œì„± ìƒíƒœ: text-muted-foreground\"\n```\n\n**ë””ë²„ê¹… ì²´í¬ë¦¬ìŠ¤íŠ¸:**\n\n```markdown\nâ–¡ ì—ëŸ¬ ë¡œê·¸ ì „ì²´ë¥¼ AIì—ê²Œ ì œê³µí–ˆëŠ”ê°€?\nâ–¡ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì •í™•í•œ íŒŒì¼ê³¼ ë¼ì¸ì„ ëª…ì‹œí–ˆëŠ”ê°€?\nâ–¡ ì¬í˜„ ë‹¨ê³„ë¥¼ ëª…í™•íˆ ì„¤ëª…í–ˆëŠ”ê°€?\nâ–¡ ì˜ˆìƒ ë™ì‘ê³¼ ì‹¤ì œ ë™ì‘ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ í–ˆëŠ”ê°€?\nâ–¡ ê´€ë ¨ ì½”ë“œ ìŠ¤ë‹ˆí«ì„ ì²¨ë¶€í–ˆëŠ”ê°€?\n```\n\n---\n\n### 4ï¸âƒ£ ë¦¬íŒ©í† ë§ í…œí”Œë¦¿\n\n```markdown\n**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:**\n\n[íŒŒì¼ëª…]ì„ ë‹¤ìŒ ê¸°ì¤€ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•´ì£¼ì„¸ìš”.\n\n**ëª©í‘œ:**\n- ì½”ë“œ ì¤‘ë³µ ì œê±°\n- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ\n- ì„±ëŠ¥ ìµœì í™” (ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ì œê±°)\n- ê°€ë…ì„± í–¥ìƒ\n\n**ìœ ì§€í•´ì•¼ í•  ê²ƒ:**\n- ê¸°ì¡´ ê¸°ëŠ¥ 100% ìœ ì§€\n- CSS ë³€ìˆ˜ ì‚¬ìš© íŒ¨í„´\n- ë””ìì¸ ì‹œìŠ¤í…œ ì¤€ìˆ˜\n\n**ì˜ˆì‹œ:**\n\"/components/MainScreen.tsxë¥¼ ë¦¬íŒ©í† ë§í•´ì£¼ì„¸ìš”.\n\ní˜„ì¬ ë¬¸ì œ:\n- RestaurantCard ë¡œì§ì´ inlineìœ¼ë¡œ ë°˜ë³µë¨\n- í•„í„° ì¹© ìƒì„± ì½”ë“œ ì¤‘ë³µ\n- ê¸´ ì»´í¬ë„ŒíŠ¸ (800+ ë¼ì¸)\n\nìš”ì²­ì‚¬í•­:\n1. RestaurantCardë¥¼ ë³„ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬\n2. FilterChip ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ\n3. ì„¹ì…˜ë³„ ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬ (Header, AIRecommendation, TrendingSection ë“±)\n4. ëª¨ë“  ê¸°ëŠ¥ê³¼ ìŠ¤íƒ€ì¼ì€ 100% ìœ ì§€\"\n```\n\n---\n\n### 5ï¸âƒ£ DB ì—°ë™ í…œí”Œë¦¿\n\n```markdown\n**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:**\n\n[ì»´í¬ë„ŒíŠ¸]ë¥¼ Supabase ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™í•´ì£¼ì„¸ìš”.\n\n**ì—°ë™ ì •ë³´:**\n- í…Œì´ë¸”: [í…Œì´ë¸”ëª…]\n- í•„ë“œ: [í•„ë“œ ëª©ë¡]\n- ê´€ê³„: [ì™¸ë˜í‚¤ ê´€ê³„]\n- í•„í„°: [WHERE ì¡°ê±´]\n- ì •ë ¬: [ORDER BY ì¡°ê±´]\n\n**ì—ëŸ¬ ì²˜ë¦¬:**\n- ë¡œë”© ìƒíƒœ í‘œì‹œ\n- ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ\n- ë¹ˆ ë°ì´í„° ì²˜ë¦¬\n\n**ì˜ˆì‹œ:**\n\"MainScreenì„ Supabase restaurants í…Œì´ë¸”ê³¼ ì—°ë™í•´ì£¼ì„¸ìš”.\n\ní…Œì´ë¸” ì •ë³´:\n- í…Œì´ë¸”ëª…: restaurants\n- í•„ë“œ: id, name, description, rating, image_url, category, location\n- ì •ë ¬: rating DESC, created_at DESC\n- ì œí•œ: LIMIT 10\n\nìš”ì²­ì‚¬í•­:\n1. useEffectì—ì„œ ë°ì´í„° fetch\n2. ë¡œë”© ì‹œ Skeleton UI í‘œì‹œ\n3. ì—ëŸ¬ ì‹œ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€\n4. ë¹ˆ ë°ì´í„° ì‹œ 'ë“±ë¡ëœ ë ˆìŠ¤í† ë‘ì´ ì—†ìŠµë‹ˆë‹¤' í‘œì‹œ\n5. ëª¨ë“  ìŠ¤íƒ€ì¼ì€ CSS ë³€ìˆ˜ ì‚¬ìš©\"\n```\n\n**Supabase ì—°ë™ íŒ¨í„´:**\n\n```tsx\n// í‘œì¤€ íŒ¨í„´\nimport { useEffect, useState } from 'react';\nimport { createClient } from './utils/supabase/client';\n\nexport default function RestaurantList() {\n  const [restaurants, setRestaurants] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchRestaurants = async () => {\n      try {\n        const supabase = createClient();\n        const { data, error } = await supabase\n          .from('restaurants')\n          .select('*')\n          .order('rating', { ascending: false })\n          .limit(10);\n\n        if (error) throw error;\n        setRestaurants(data || []);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'ë°ì´í„° ë¡œë”© ì‹¤íŒ¨');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchRestaurants();\n  }, []);\n\n  if (loading) return <SkeletonUI />;\n  if (error) return <ErrorMessage message={error} />;\n  if (restaurants.length === 0) return <EmptyState />;\n\n  return <div>{/* ë ˆìŠ¤í† ë‘ ëª©ë¡ ë Œë”ë§ */}</div>;\n}\n```\n\n---\n\n## âŒ ì ˆëŒ€ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ Top 10\n\n### 1. CSS í•˜ë“œì½”ë”© (ë³€ìˆ˜ ì‚¬ìš© í•„ìˆ˜)\n```tsx\n// âŒ ì ˆëŒ€ ê¸ˆì§€\n<div className=\"bg-blue-600 text-white p-4\">\n\n// âœ… í•„ìˆ˜\n<div style={{\n  backgroundColor: 'var(--primary)',\n  color: '#FFFFFF',\n  padding: '16px'\n}}>\n```\n\n### 2. ë””ìì¸ ì‹œìŠ¤í…œ ë¬´ì‹œ\n```tsx\n// âŒ ì„ì˜ì˜ ìƒ‰ìƒ/í¬ê¸° ì‚¬ìš©\n<h2 className=\"text-[22px] text-[#123456]\">\n\n// âœ… ì •ì˜ëœ ë³€ìˆ˜ ì‚¬ìš©\n<h2 style={{\n  fontSize: 'var(--text-xl)',\n  color: 'var(--foreground)'\n}}>\n```\n\n### 3. ì¤‘ê°„ ê²€ì¦ ì—†ì´ ëŒ€ëŸ‰ ìƒì„±\n```markdown\nâŒ í•œë²ˆì— 10ê°œ ì»´í¬ë„ŒíŠ¸ ìƒì„± ìš”ì²­\nâœ… 1-2ê°œì”© ìƒì„± â†’ ê²€ì¦ â†’ ë‹¤ìŒ ë‹¨ê³„\n```\n\n### 4. ë¶ˆëª…í™•í•œ í”„ë¡¬í”„íŠ¸\n```markdown\nâŒ \"ë ˆìŠ¤í† ë‘ í™”ë©´ ë§Œë“¤ì–´ì¤˜\"\nâœ… \"RestaurantDetailScreen ìƒì„±í•´ì¤˜. ìš”êµ¬ì‚¬í•­: [êµ¬ì²´ì  ëª…ì‹œ]\"\n```\n\n### 5. ì—ëŸ¬ ë¡œê·¸ ìƒëµ\n```markdown\nâŒ \"ì—ëŸ¬ê°€ ë‚˜ìš”\"\nâœ… \"ë‹¤ìŒ ì—ëŸ¬ ë°œìƒ: [ì „ì²´ ì—ëŸ¬ ìŠ¤íƒ ë³µì‚¬]\"\n```\n\n### 6. Guidelines.md ë¯¸ì œê³µ\n```markdown\nâŒ ë§¤ë²ˆ ë””ìì¸ ì‹œìŠ¤í…œ ì„¤ëª… ë°˜ë³µ\nâœ… Guidelines.md íŒŒì¼ ì œê³µ + ì°¸ì¡° ìš”ì²­\n```\n\n### 7. 8px ê·¸ë¦¬ë“œ ë¬´ì‹œ\n```tsx\n// âŒ ë¶ˆê·œì¹™í•œ ê°„ê²©\npadding: '13px', margin: '19px'\n\n// âœ… 8px ë°°ìˆ˜\npadding: '16px', margin: '24px'\n```\n\n### 8. íƒ€ì´í¬ê·¸ë˜í”¼ í´ë˜ìŠ¤ ì‚¬ìš©\n```tsx\n// âŒ Tailwind í´ë˜ìŠ¤ (globals.css ë¬´ì‹œ)\n<h1 className=\"text-2xl font-bold\">\n\n// âœ… CSSì— ì •ì˜ëœ ìŠ¤íƒ€ì¼ ì‚¬ìš© (ê¸°ë³¸ ì ìš©ë¨)\n<h1>ì œëª©</h1>\n```\n\n### 9. í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ ë¶ˆì¼ì¹˜\n```tsx\n// âŒ í™”ë©´ë§ˆë‹¤ ë‹¤ë¥¸ ì•„ì´ì½˜\n<Search /> // MainScreen\n<div className=\"w-6 h-6\" /> // SearchResultsScreen\n\n// âœ… ëª¨ë“  í™”ë©´ ë™ì¼ ì•„ì´ì½˜\n<Search /> // Discover íƒ­\n<MessageCircle /> // AI Concierge íƒ­\n<Heart /> // Saved íƒ­\n<User /> // MY íƒ­\n```\n\n### 10. ê²€ì€ ë°°ê²½ì— ê²€ì€ í…ìŠ¤íŠ¸\n```tsx\n// âŒ ê°€ì‹œì„± ë¬¸ì œ\n<div style={{ backgroundColor: 'var(--primary)' }}>\n  <p style={{ color: 'var(--foreground)' }}>ì½ì„ ìˆ˜ ì—†ìŒ</p>\n</div>\n\n// âœ… ëª…ì‹œì  ëŒ€ë¹„ìƒ‰\n<div style={{ backgroundColor: 'var(--primary)' }}>\n  <p style={{ color: '#FFFFFF' }}>ëª…í™•í•˜ê²Œ ë³´ì„</p>\n</div>\n```\n\n---\n\n## âœ… í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n### ğŸ“ ì»´í¬ë„ŒíŠ¸ ìƒì„± ì „\n```markdown\nâ–¡ Guidelines.md íŒŒì¼ì„ AIì—ê²Œ ì œê³µí–ˆëŠ”ê°€?\nâ–¡ globals.css íŒŒì¼ì„ AIê°€ í™•ì¸í–ˆëŠ”ê°€?\nâ–¡ êµ¬ì²´ì ì¸ ìš”êµ¬ì‚¬í•­ì„ ëª…ì‹œí–ˆëŠ”ê°€?\nâ–¡ ì°¸ê³ í•  ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì–¸ê¸‰í–ˆëŠ”ê°€?\n```\n\n### ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ ì¤€ìˆ˜\n```markdown\nâ–¡ ëª¨ë“  ìƒ‰ìƒì´ var(--*) í˜•ì‹ì¸ê°€?\nâ–¡ í°íŠ¸ í¬ê¸°ê°€ var(--text-*) í˜•ì‹ì¸ê°€?\nâ–¡ í°íŠ¸ íŒ¨ë°€ë¦¬ê°€ var(--font-family-primary)ì¸ê°€?\nâ–¡ border-radiusê°€ var(--radius-*)ì¸ê°€?\nâ–¡ ê°„ê²©ì´ 8px ë°°ìˆ˜ì¸ê°€? (8, 16, 24, 32px)\nâ–¡ ê·¸ë¦¼ìê°€ var(--elevation-*)ì¸ê°€?\n```\n\n### ğŸ“± ëª¨ë°”ì¼ ìµœì í™”\n```markdown\nâ–¡ max-w-md mx-auto ì»¨í…Œì´ë„ˆ ì‚¬ìš©í–ˆëŠ”ê°€?\nâ–¡ í„°ì¹˜ ì˜ì—­ì´ ìµœì†Œ 44pxì¸ê°€?\nâ–¡ Sticky ìš”ì†Œì˜ z-indexê°€ ì˜¬ë°”ë¥¸ê°€?\n  - Header: z-50\n  - Bottom Nav: z-40\nâ–¡ ìŠ¤í¬ë¡¤ ì˜ì—­ì´ flex-1 overflow-y-autoì¸ê°€?\n```\n\n### ğŸ”§ ê¸°ëŠ¥ êµ¬í˜„\n```markdown\nâ–¡ ë¡œë”© ìƒíƒœë¥¼ ì²˜ë¦¬í–ˆëŠ”ê°€?\nâ–¡ ì—ëŸ¬ ìƒíƒœë¥¼ ì²˜ë¦¬í–ˆëŠ”ê°€?\nâ–¡ ë¹ˆ ë°ì´í„° ìƒíƒœë¥¼ ì²˜ë¦¬í–ˆëŠ”ê°€?\nâ–¡ ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜ë¥¼ propsë¡œ ë°›ì•˜ëŠ”ê°€?\nâ–¡ TypeScript íƒ€ì…ì„ ì •ì˜í–ˆëŠ”ê°€?\n```\n\n### ğŸŒ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì¼ê´€ì„±\n```markdown\nâ–¡ Discover: <Search /> ì•„ì´ì½˜ ì‚¬ìš©\nâ–¡ AI Concierge: <MessageCircle /> ì•„ì´ì½˜ ì‚¬ìš©\nâ–¡ Saved: <Heart /> ì•„ì´ì½˜ ì‚¬ìš©\nâ–¡ MY: <User /> ì•„ì´ì½˜ ì‚¬ìš©\nâ–¡ ëª¨ë“  ì•„ì´ì½˜ì´ w-6 h-6 (24px)\nâ–¡ ì•„ì´ì½˜ê³¼ ë¼ë²¨ ê°„ê²©ì´ mb-1 (4px)\nâ–¡ í™œì„± íƒ­ì´ text-primary + border-b-2\nâ–¡ ë¹„í™œì„± íƒ­ì´ text-muted-foreground\nâ–¡ fontFamily: 'var(--font-family-primary)' ëª…ì‹œ\n```\n\n### ğŸ¯ ì ‘ê·¼ì„± & UX\n```markdown\nâ–¡ ìƒ‰ìƒ ëŒ€ë¹„ê°€ WCAG AA ê¸°ì¤€ (4.5:1) ì¶©ì¡±?\nâ–¡ ì–´ë‘ìš´ ë°°ê²½ì— í°ìƒ‰ í…ìŠ¤íŠ¸ (#FFFFFF) ì‚¬ìš©?\nâ–¡ í¬ì»¤ìŠ¤ ìƒíƒœê°€ ëª…í™•í•œê°€?\nâ–¡ ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì› (aria-label)?\n```\n\n---\n\n## ğŸš€ ë¹ ë¥¸ ì‹¤í–‰ ê°€ì´ë“œ\n\n### ìƒˆ ì»´í¬ë„ŒíŠ¸ ìƒì„± (5ë¶„ ì›Œí¬í”Œë¡œìš°)\n\n```markdown\n1ï¸âƒ£ ì¤€ë¹„ (1ë¶„)\n   - Guidelines.md ì—…ë¡œë“œ\n   - globals.css í™•ì¸ ìš”ì²­\n   - ì°¸ê³  ì»´í¬ë„ŒíŠ¸ ëª…ì‹œ\n\n2ï¸âƒ£ í”„ë¡¬í”„íŠ¸ ì‘ì„± (2ë¶„)\n   \"[ì»´í¬ë„ŒíŠ¸ëª…] ìƒì„±í•´ì£¼ì„¸ìš”.\n   \n   ìš”êµ¬ì‚¬í•­:\n   - ê¸°ëŠ¥: [êµ¬ì²´ì  ì„¤ëª…]\n   - ìŠ¤íƒ€ì¼: CSS ë³€ìˆ˜ ì‚¬ìš©\n   - ë ˆì´ì•„ì›ƒ: 8px ê·¸ë¦¬ë“œ\n   - ì°¸ê³ : [ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ëª…]\"\n\n3ï¸âƒ£ ê²€ì¦ (2ë¶„)\n   - CSS ë³€ìˆ˜ ì‚¬ìš© í™•ì¸\n   - íƒ€ì´í¬ê·¸ë˜í”¼ í™•ì¸\n   - ê°„ê²© í™•ì¸ (8px ë°°ìˆ˜)\n   - ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ ì¼ê´€ì„± í™•ì¸\n```\n\n### ë²„ê·¸ ìˆ˜ì • (3ë¶„ ì›Œí¬í”Œë¡œìš°)\n\n```markdown\n1ï¸âƒ£ ì—ëŸ¬ ì •ë³´ ìˆ˜ì§‘ (1ë¶„)\n   - ì—ëŸ¬ ë¡œê·¸ ì „ì²´ ë³µì‚¬\n   - ë°œìƒ ìœ„ì¹˜ í™•ì¸ (íŒŒì¼:ë¼ì¸)\n   - ì¬í˜„ ë‹¨ê³„ ê¸°ë¡\n\n2ï¸âƒ£ í”„ë¡¬í”„íŠ¸ ì‘ì„± (1ë¶„)\n   \"[ë¬¸ì œ] ìˆ˜ì •í•´ì£¼ì„¸ìš”.\n   \n   ì—ëŸ¬: [ë¡œê·¸]\n   ìœ„ì¹˜: [íŒŒì¼:ë¼ì¸]\n   ì¬í˜„: [ë‹¨ê³„]\n   ì˜ˆìƒ: [ì›í•˜ëŠ” ë™ì‘]\n   ì‹¤ì œ: [í˜„ì¬ ë™ì‘]\"\n\n3ï¸âƒ£ ê²€ì¦ (1ë¶„)\n   - ë¬¸ì œ í•´ê²° í™•ì¸\n   - ë¶€ì‘ìš© ì—†ëŠ”ì§€ í™•ì¸\n   - ë””ìì¸ ì‹œìŠ¤í…œ ìœ ì§€ í™•ì¸\n```\n\n---\n\n## ğŸ’¡ ê¿€íŒ ëª¨ìŒ\n\n### Tip 1: Guidelines.md í™œìš©\n```markdown\në§¤ ëŒ€í™” ì‹œì‘ ì‹œ:\n\"Guidelines.md íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ì‘ì—…í•´ì£¼ì„¸ìš”\"\n\ní”„ë¡¬í”„íŠ¸ì— ìë™ í¬í•¨:\n\"- CSS ë³€ìˆ˜ ì‚¬ìš© (Guidelines.md 7.1 ì°¸ì¡°)\n - íƒ€ì´í¬ê·¸ë˜í”¼ ì¤€ìˆ˜ (Guidelines.md 7.1 ì°¸ì¡°)\n - ë„¤ë¹„ê²Œì´ì…˜ ì¼ê´€ì„± (Guidelines.md 7.11 ì°¸ì¡°)\"\n```\n\n### Tip 2: ë‹¨ê³„ë³„ ì ‘ê·¼\n```markdown\ní•œë²ˆì— ìš”ì²­í•˜ì§€ ë§ ê²ƒ:\nâŒ \"34ê°œ í™”ë©´ ëª¨ë‘ ìƒì„±\"\n\në‹¨ê³„ë³„ ì§„í–‰:\nâœ… Phase 1: ê¸°ì´ˆ í™”ë©´ 5ê°œ â†’ ê²€ì¦\nâœ… Phase 2: ê²€ìƒ‰/ê²°ê³¼ í™”ë©´ 3ê°œ â†’ ê²€ì¦\nâœ… Phase 3: ìƒì„¸ í™”ë©´ ì‹œë¦¬ì¦ˆ â†’ ê²€ì¦\n```\n\n### Tip 3: ë³µì‚¬-ë¶™ì—¬ë„£ê¸° í™œìš©\n```markdown\nì„±ê³µí•œ íŒ¨í„´ì„ í…œí”Œë¦¿í™”:\n\n\"ì´ì „ì— ìƒì„±í•œ MainScreenì˜ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì½”ë“œë¥¼\në³µì‚¬í•´ì„œ ìƒˆë¡œìš´ í™”ë©´ì— ê·¸ëŒ€ë¡œ ì ìš©í•´ì£¼ì„¸ìš”\"\n```\n\n### Tip 4: ì—ëŸ¬ ë¡œê·¸ ì „ì²´ ì œê³µ\n```markdown\nâŒ \"TypeErrorê°€ ë°œìƒí•´ìš”\"\nâœ… \"ë‹¤ìŒ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤:\n\nTypeError: Cannot read property 'map' of undefined\n  at RestaurantList (/components/MainScreen.tsx:145:23)\n  at renderWithHooks (react-dom.js:...)\n  \nì¬í˜„ ë‹¨ê³„:\n1. ë©”ì¸ í™”ë©´ ì§„ì…\n2. AI ì¶”ì²œ ì¹´ë“œ í´ë¦­\n3. ì—ëŸ¬ ë°œìƒ\"\n```\n\n### Tip 5: Before/After ëª…ì‹œ\n```markdown\në¦¬íŒ©í† ë§ ìš”ì²­ ì‹œ:\n\n\"Before (í˜„ì¬):\n[í˜„ì¬ ì½”ë“œ ìŠ¤ë‹ˆí«]\n\nAfter (ì›í•˜ëŠ” ê²°ê³¼):\n- CSS ë³€ìˆ˜ ì‚¬ìš©\n- 8px ê·¸ë¦¬ë“œ ì¤€ìˆ˜\n- ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬\"\n```\n\n---\n\n# Tier 2: ì‹¬ì¸µ ì¼€ì´ìŠ¤ ìŠ¤í„°ë””\n\n## Part 1: í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ì§„í™”\n\n### ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”\n- **í”„ë¡œì íŠ¸ëª…:** í•œì‹ë‹¹ (han sik dang)\n- **ëª©ì :** AI ê¸°ë°˜ í•œì‹ ë ˆìŠ¤í† ë‘ ë°œê²¬ í”Œë«í¼\n- **íƒ€ê²Ÿ:** ì™¸êµ­ì¸ ë° í•œì‹ ì´ˆë³´ì\n- **ê¸°ìˆ  ìŠ¤íƒ:** React + TypeScript + Tailwind v4 + Supabase\n- **ê°œë°œ ë„êµ¬:** Figma Make (Claude AI)\n- **ê°œë°œ ê¸°ê°„:** [í”„ë¡œì íŠ¸ ì‹œì‘ì¼ - í˜„ì¬]\n- **ìµœì¢… ê²°ê³¼:** 46ê°œ íŒŒì¼, 34ê°œ í™”ë©´, Supabase ì™„ì „ í†µí•©\n\n---\n\n### ğŸ—ï¸ Phaseë³„ ì˜ì‚¬ê²°ì • ê³¼ì •\n\n#### **Phase 1: ê¸°ì´ˆ êµ¬ì¶• (Foundation)**\n**ëª©í‘œ:** ë””ìì¸ ì‹œìŠ¤í…œ í™•ë¦½ ë° í•µì‹¬ í™”ë©´ ìƒì„±\n\n**ì£¼ìš” ê²°ì •:**\n1. **CSS ë³€ìˆ˜ ê¸°ë°˜ ë””ìì¸ ì‹œìŠ¤í…œ ì±„íƒ**\n   - ì´ìœ : ì¼ê´€ì„± ìœ ì§€, ì‰¬ìš´ í…Œë§ˆ ë³€ê²½, AI ì½”ë“œ ìƒì„± ìš©ì´\n   - ê²°ê³¼: globals.cssì— 88ê°œ CSS ë³€ìˆ˜ ì •ì˜\n   - í•™ìŠµ: ì´ˆê¸°ì— í™•ë¦½í•œ ë³€ìˆ˜ ì²´ê³„ê°€ ì´í›„ ëª¨ë“  í™”ë©´ì— ì ìš©ë¨\n\n2. **Pretendard í°íŠ¸ ì „ìš© ì‚¬ìš©**\n   - ì´ìœ : í•œê¸€ ìµœì í™”, ë‹¤êµ­ì–´ ì§€ì›, ê¹”ë”í•œ UI\n   - ê²°ê³¼: ëª¨ë“  í…ìŠ¤íŠ¸ì— var(--font-family-primary) ì ìš©\n   - í•™ìŠµ: í°íŠ¸ ì¼ê´€ì„±ì´ ë¸Œëœë“œ ì•„ì´ë´í‹°í‹°ì— í° ì˜í–¥\n\n3. **8px ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ ë„ì…**\n   - ì´ìœ : ì‹œê°ì  ë¦¬ë“¬ê°, ë°˜ì‘í˜• ëŒ€ì‘, ë””ìì´ë„ˆ-ê°œë°œì ì†Œí†µ ìš©ì´\n   - ê²°ê³¼: ëª¨ë“  ê°„ê²©ì„ 8, 16, 24, 32pxë¡œ í‘œì¤€í™”\n   - í•™ìŠµ: ì´ˆê¸° ê°•ì œë¡œ ì¸í•´ í›„ê¸° ìœ ì§€ë³´ìˆ˜ í¬ê²Œ ì ˆê°\n\n**ìƒì„±ëœ í™”ë©´:**\n- 1.0_Splash_Screen\n- 1.X_Onboarding_Flow (4ê°œ ì„œë¸Œ í™”ë©´)\n- 2.0_Main_Screen\n\n**ë„ì „ ê³¼ì œ:**\n- AIê°€ Tailwind í´ë˜ìŠ¤ (text-2xl, font-bold)ë¥¼ ìë™ ìƒì„±í•˜ë ¤ëŠ” ê²½í–¥\n- í•´ê²°: Guidelines.mdì— \"íƒ€ì´í¬ê·¸ë˜í”¼ í´ë˜ìŠ¤ ì‚¬ìš© ê¸ˆì§€\" ëª…ì‹œ\n\n**ì„±ê³¼:**\n- ë””ìì¸ ì‹œìŠ¤í…œ ì¼ê´€ì„± 98%\n- ì´í›„ ëª¨ë“  í™”ë©´ì˜ í…œí”Œë¦¿ ì—­í• \n\n---\n\n#### **Phase 2: í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ (Core Features)**\n**ëª©í‘œ:** AI ì»¨ì‹œì–´ì§€, ê²€ìƒ‰, ë ˆìŠ¤í† ë‘ ìƒì„¸ í™”ë©´\n\n**ì£¼ìš” ê²°ì •:**\n1. **Supabase ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ**\n   - ëŒ€ì•ˆ: Firebase, PostgreSQL ì§ì ‘ í˜¸ìŠ¤íŒ…\n   - ì„ íƒ ì´ìœ :\n     - Figma Makeì™€ ì‚¬ì „ í†µí•©\n     - ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”\n     - Auth ê¸°ë³¸ ì œê³µ\n     - ë¬´ë£Œ í‹°ì–´ ì¶©ë¶„\n   - ê²°ê³¼: 11ê°œ í…Œì´ë¸” ì„¤ê³„ ë° ì—°ë™ ì„±ê³µ\n\n2. **ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**\n   - íŒ¨í„´: Atomic Design ë³€í˜•\n   - êµ¬ì¡°:\n     - /components/ui: ShadCN ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ (35ê°œ)\n     - /components: í™”ë©´ ì»´í¬ë„ŒíŠ¸ (34ê°œ)\n     - /utils: ìœ í‹¸ë¦¬í‹° (Supabase í´ë¼ì´ì–¸íŠ¸ ë“±)\n   - í•™ìŠµ: ì´ˆê¸° íŒŒì¼ êµ¬ì¡°ê°€ ìŠ¤ì¼€ì¼ì—…ì— ê²°ì •ì \n\n3. **Lazy Loading ë„ì…**\n   - ì´ìœ : ì´ˆê¸° ë¡œë”© ì†ë„ ê°œì„ \n   - ê²°ê³¼: ëª¨ë“  í™”ë©´ ì»´í¬ë„ŒíŠ¸ lazy load\n   - ì¸¡ì •: ì´ˆê¸° ë²ˆë“¤ í¬ê¸° 40% ê°ì†Œ (ì˜ˆìƒ)\n\n**ìƒì„±ëœ í™”ë©´:**\n- 3.0_AI_Concierge\n- 4.0_Search_Results\n- 4.1_Search_Results_Empty\n- 5.X_Restaurant_Detail (9ê°œ ì„œë¸Œ í™”ë©´)\n\n**ë„ì „ ê³¼ì œ:**\n- ë³µì¡í•œ Supabase ì¿¼ë¦¬ (JOIN, í•„í„°ë§)\n- í•´ê²°: ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸, ì—ëŸ¬ ë¡œê·¸ ì „ì²´ ì œê³µ\n\n**ì„±ê³¼:**\n- ì‹¤ì œ ë°ì´í„° ì—°ë™ ì„±ê³µ (3ê°œ ìƒ˜í”Œ ë ˆìŠ¤í† ë‘)\n- ë¡œë”©/ì—ëŸ¬/ë¹ˆ ìƒíƒœ ëª¨ë‘ ì²˜ë¦¬\n\n---\n\n#### **Phase 3: ì‚¬ìš©ì ê¸°ëŠ¥ í™•ì¥ (User Features)**\n**ëª©í‘œ:** ë§ˆì´í˜ì´ì§€, ì†Œì…œ ê¸°ëŠ¥, ì„¤ì •\n\n**ì£¼ìš” ê²°ì •:**\n1. **í™”ë©´ ìˆ˜ ìµœì í™”: 113ê°œ â†’ 46ê°œ**\n   - ë°°ê²½: ì´ˆê¸°ì— ì¤‘ë³µ íŒŒì¼ ê³¼ë‹¤ ìƒì„±\n   - ë¶„ì„:\n     - ë°±ì—… íŒŒì¼: 23ê°œ\n     - í…ŒìŠ¤íŠ¸ íŒŒì¼: 15ê°œ\n     - ì¤‘ë³µ ì»´í¬ë„ŒíŠ¸: 29ê°œ\n   - ì•¡ì…˜:\n     - ë°±ì—… íŒŒì¼ /backup í´ë”ë¡œ ì´ë™\n     - ì¤‘ë³µ ì»´í¬ë„ŒíŠ¸ í†µí•©\n     - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ì‚­ì œ\n   - ê²°ê³¼: 67ê°œ íŒŒì¼ ì‚­ì œ, êµ¬ì¡° ëª…í™•í™”\n   - í•™ìŠµ: ì •ê¸°ì ì¸ ë¦¬íŒ©í† ë§ì´ í•„ìˆ˜\n\n2. **í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ í‘œì¤€í™”**\n   - ë¬¸ì œ ë°œê²¬: í™”ë©´ë§ˆë‹¤ ë‹¤ë¥¸ ì•„ì´ì½˜ ì‚¬ìš©\n   - ì¡°ì‚¬:\n     - MainScreen: Search, MessageCircle, Heart, User\n     - SearchResults: ì„ì‹œ div, rounded ì‚¬ê°í˜•\n     - RestaurantDetail: ì•„ì´ì½˜ ëˆ„ë½\n   - í•´ê²°:\n     - Guidelines.md 7.11 ì„¹ì…˜ ì¶”ê°€\n     - ëª¨ë“  í™”ë©´ì— ë™ì¼ ì•„ì´ì½˜ ê°•ì œ\n   - ê²°ê³¼: 34ê°œ í™”ë©´ ëª¨ë‘ ì¼ê´€ì„± í™•ë³´\n   - í•™ìŠµ: ì‘ì€ ë¶ˆì¼ì¹˜ê°€ ëˆ„ì ë˜ë©´ í° ë¬¸ì œ\n\n3. **TypeScript íƒ€ì… ì•ˆì •ì„±**\n   - ëª¨ë“  propsì— interface ì •ì˜\n   - Supabase ì¿¼ë¦¬ ê²°ê³¼ íƒ€ì… ì •ì˜\n   - í•™ìŠµ: ì´ˆê¸° íƒ€ì… ì •ì˜ê°€ í›„ê¸° ë²„ê·¸ ì˜ˆë°©\n\n**ìƒì„±ëœ í™”ë©´:**\n- 6.X_My_Page (10ê°œ ì„œë¸Œ í™”ë©´)\n- 7.X_Social (4ê°œ ì„œë¸Œ í™”ë©´)\n\n**ë„ì „ ê³¼ì œ:**\n- í™”ë©´ ê°„ ìƒíƒœ ê´€ë¦¬ (í˜„ì¬ props drilling)\n- í•´ê²°: í–¥í›„ Context API ë˜ëŠ” Zustand ë„ì… ì˜ˆì •\n\n**ì„±ê³¼:**\n- ì™„ì „í•œ ì‚¬ìš©ì í”Œë¡œìš° êµ¬í˜„\n- ì„¤ì •, í”„ë¡œí•„, ë¦¬ë·°, ì €ì¥ ëª©ë¡ ëª¨ë‘ ì‘ë™\n\n---\n\n#### **Phase 4: Supabase ì™„ì „ í†µí•© (í˜„ì¬ ì§„í–‰ ì¤‘)**\n**ëª©í‘œ:** ëª¨ë“  í™”ë©´ì„ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™\n\n**í˜„ì¬ ìƒíƒœ:**\n- âœ… ì™„ë£Œ: MainScreen ë°ì´í„° ì—°ë™\n- âœ… ì™„ë£Œ: 11ê°œ í…Œì´ë¸” êµ¬ì¡° ì„¤ê³„\n- âœ… ì™„ë£Œ: 3ê°œ ìƒ˜í”Œ ë ˆìŠ¤í† ë‘ ë°ì´í„°\n- ğŸ”„ ì§„í–‰ ì¤‘: ë‚˜ë¨¸ì§€ í™”ë©´ ì—°ë™\n- ğŸ“‹ ì˜ˆì •: Auth ì‹œìŠ¤í…œ í†µí•©\n\n**ê³„íšëœ ì‘ì—…:**\n1. AI Concierge ì‹¤ì‹œê°„ ì¶”ì²œ ì—°ë™\n2. ê²€ìƒ‰ ê²°ê³¼ í•„í„°ë§ ë° ì •ë ¬\n3. ë ˆìŠ¤í† ë‘ ìƒì„¸ ì •ë³´ ë™ì  ë¡œë“œ\n4. ì‚¬ìš©ì ë¦¬ë·° CRUD êµ¬í˜„\n5. ì €ì¥ ëª©ë¡ ì‹¤ì‹œê°„ ë™ê¸°í™”\n\n---\n\n### ğŸ“ˆ íŒŒì¼ êµ¬ì¡° ì§„í™” íƒ€ì„ë¼ì¸\n\n```\n[Phase 1] ì´ˆê¸° êµ¬ì¡° (15ê°œ íŒŒì¼)\nâ”œâ”€â”€ App.tsx\nâ”œâ”€â”€ components/\nâ”‚   â”œâ”€â”€ SplashScreen.tsx\nâ”‚   â”œâ”€â”€ OnboardingFlow.tsx\nâ”‚   â””â”€â”€ MainScreen.tsx\nâ””â”€â”€ styles/globals.css\n\n[Phase 2] ê¸°ëŠ¥ í™•ì¥ (68ê°œ íŒŒì¼)\nâ”œâ”€â”€ App.tsx\nâ”œâ”€â”€ components/ (30ê°œ í™”ë©´)\nâ”‚   â”œâ”€â”€ [ê¸°ì´ˆ í™”ë©´]\nâ”‚   â”œâ”€â”€ [ê²€ìƒ‰/ê²°ê³¼]\nâ”‚   â””â”€â”€ [ë ˆìŠ¤í† ë‘ ìƒì„¸]\nâ”œâ”€â”€ components/ui/ (35ê°œ ShadCN)\nâ””â”€â”€ utils/supabase/\n\n[Phase 2.5] ì •ë¦¬ ì „ (113ê°œ íŒŒì¼) âŒ\nâ”œâ”€â”€ ì¤‘ë³µ ì»´í¬ë„ŒíŠ¸ 29ê°œ\nâ”œâ”€â”€ ë°±ì—… íŒŒì¼ 23ê°œ\nâ”œâ”€â”€ í…ŒìŠ¤íŠ¸ íŒŒì¼ 15ê°œ\nâ””â”€â”€ ë¯¸ì‚¬ìš© íŒŒì¼ 11ê°œ\n\n[Phase 3] ìµœì í™” í›„ (46ê°œ íŒŒì¼) âœ…\nâ”œâ”€â”€ App.tsx (ìµœì í™”ëœ ë¼ìš°íŒ…)\nâ”œâ”€â”€ components/ (34ê°œ í™”ë©´)\nâ”œâ”€â”€ components/ui/ (35ê°œ)\nâ”œâ”€â”€ utils/supabase/ (3ê°œ)\nâ”œâ”€â”€ guidelines/Guidelines.md\nâ””â”€â”€ backup/ (ì´ì „ ë²„ì „)\n\n[Phase 4] ìµœì¢… ëª©í‘œ (50ê°œ íŒŒì¼)\nâ”œâ”€â”€ [í˜„ì¬ êµ¬ì¡° ìœ ì§€]\nâ”œâ”€â”€ + 4ê°œ Context (Auth, Theme, Language, Cart)\nâ””â”€â”€ + ë¬¸ì„œ (README, API Docs)\n```\n\n---\n\n### ğŸ¯ ì™œ ì´ëŸ° ê²°ì •ì„ í–ˆëŠ”ê°€?\n\n#### **1. ì™œ Supabase?**\n\n**ê²€í† í•œ ëŒ€ì•ˆ:**\n| ì˜µì…˜ | ì¥ì  | ë‹¨ì  | ê²°ì • |\n|------|------|------|------|\n| Firebase | Google ìƒíƒœê³„, í’ë¶€í•œ ë¬¸ì„œ | ê°€ê²©, ë²¤ë” ì¢…ì† | âŒ |\n| PostgreSQL ì§ì ‘ | ì™„ì „í•œ ì œì–´ | ì„¤ì • ë³µì¡, ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ | âŒ |\n| **Supabase** | **ì˜¤í”ˆì†ŒìŠ¤, Figma Make í†µí•©, ë¬´ë£Œ í‹°ì–´** | **ìƒˆë¡œìš´ ë„êµ¬** | **âœ…** |\n\n**ê²°ì • ì´ìœ :**\n1. Figma Make ì‚¬ì „ í†µí•© (í™˜ê²½ ë³€ìˆ˜ ìë™ ì„¤ì •)\n2. PostgreSQL ê¸°ë°˜ (SQL ì¹œí™”ì )\n3. ì‹¤ì‹œê°„ ê¸°ëŠ¥ ë‚´ì¥\n4. Auth, Storage ê¸°ë³¸ ì œê³µ\n5. ë¬´ë£Œ í‹°ì–´: 500MB DB, 1GB Storage, 50MB íŒŒì¼ ì—…ë¡œë“œ\n\n**ê²°ê³¼:**\n- 11ê°œ í…Œì´ë¸” ì„¤ê³„ ë° ì—°ë™ ì„±ê³µ\n- ê°œë°œ ì†ë„ 3ë°° í–¥ìƒ (ì˜ˆìƒ)\n- í–¥í›„ í™•ì¥ì„± í™•ë³´\n\n---\n\n#### **2. ì™œ 34ê°œ í™”ë©´?**\n\n**ì´ˆê¸° ê³„íš:** 20ê°œ í™”ë©´\n**ìµœì¢… ê²°ê³¼:** 34ê°œ í™”ë©´ (+70%)\n\n**ì¦ê°€ ì´ìœ :**\n1. **ì‚¬ìš©ì í”Œë¡œìš° ì„¸ë¶„í™”**\n   - ì˜ˆ: ë ˆìŠ¤í† ë‘ ìƒì„¸ â†’ 9ê°œ ì„œë¸Œ í™”ë©´ìœ¼ë¡œ ë¶„ë¦¬\n   - ì´ìœ : ê° ê¸°ëŠ¥ì˜ ë…ë¦½ì„±, ë¡œë”© ìµœì í™”\n\n2. **ì„¤ì • í™”ë©´ í™•ì¥**\n   - ì˜ˆ: ì„¤ì • â†’ ì–¸ì–´, ì•Œë¦¼, í”„ë¼ì´ë²„ì‹œ ë¶„ë¦¬\n   - ì´ìœ : ì‚¬ìš©ì í¸ì˜ì„±, ê° ì„¤ì •ì˜ ë³µì¡ë„\n\n3. **ì†Œì…œ ê¸°ëŠ¥ ì¶”ê°€**\n   - ì˜ˆ: ì‚¬ìš©ì ë°œê²¬, íŒ”ë¡œì›Œ ê´€ë¦¬, í”¼ë“œ\n   - ì´ìœ : ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬ ì´‰ì§„\n\n**ê²€ì¦:**\n- ê° í™”ë©´ì˜ í‰ê·  ì½”ë“œ ë¼ì¸: 300-500ì¤„ (ì ì •)\n- ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸: 15ê°œ (ì¤‘ë³µ ìµœì†Œí™”)\n- ë¡œë”© ì†ë„: Lazy Loadingìœ¼ë¡œ ë¬¸ì œ ì—†ìŒ\n\n---\n\n#### **3. ì™œ CSS ë³€ìˆ˜ë§Œ ì‚¬ìš©?**\n\n**Tailwindì˜ ìœ í˜¹:**\n```tsx\n// ë” ì§§ê³  ê°„ê²°í•œ Tailwind\n<div className=\"bg-blue-600 text-white p-4 rounded-xl\">\n\n// ì¥í™©í•œ CSS ë³€ìˆ˜\n<div style={{\n  backgroundColor: 'var(--primary)',\n  color: '#FFFFFF',\n  padding: '16px',\n  borderRadius: 'var(--radius-xl)'\n}}>\n```\n\n**ì™œ CSS ë³€ìˆ˜ë¥¼ ì„ íƒí–ˆëŠ”ê°€?**\n\n1. **ë””ìì¸ ì‹œìŠ¤í…œ ì¤‘ì•™ ì œì–´**\n   - globals.css í•œ ê³³ë§Œ ìˆ˜ì •í•˜ë©´ ì „ì²´ í…Œë§ˆ ë³€ê²½\n   - TailwindëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ìˆ˜ì • í•„ìš”\n\n2. **AI ì½”ë“œ ìƒì„± ì¼ê´€ì„±**\n   - ëª…í™•í•œ ê·œì¹™: \"í•­ìƒ var(--*) ì‚¬ìš©\"\n   - TailwindëŠ” AIê°€ ì„ì˜ì˜ í´ë˜ìŠ¤ ìƒì„± ê°€ëŠ¥\n\n3. **ë‹¤í¬ ëª¨ë“œ ëŒ€ë¹„**\n   - CSS ë³€ìˆ˜ëŠ” ë‹¤í¬ ëª¨ë“œ ì „í™˜ ìš©ì´\n   - í–¥í›„ `data-theme=\"dark\"` ì¶”ê°€ë§Œìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥\n\n4. **í•™ìŠµ ê³¡ì„ **\n   - íŒ€ì› ì˜¨ë³´ë”© ì‹œ globals.css ì°¸ê³ ë§Œ í•˜ë©´ ë¨\n   - TailwindëŠ” ìˆ˜ë°± ê°œ í´ë˜ìŠ¤ ì•”ê¸° í•„ìš”\n\n**íŠ¸ë ˆì´ë“œì˜¤í”„:**\n- ì½”ë“œ ê¸¸ì´ ì¦ê°€ (ì•½ 30%)\n- í•˜ì§€ë§Œ ì¼ê´€ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ\n\n---\n\n## Part 2: AI ê°•ì /ì•½ì  ë§¤íŠ¸ë¦­ìŠ¤\n\n### âœ… AI(Claude/Gemini)ì˜ ê°•ì \n\n#### **1. ì»´í¬ë„ŒíŠ¸ ìƒì„± ì†ë„**\n\n**ì¸¡ì •:**\n- ìˆ˜ì‘ì—…: RestaurantCard ì»´í¬ë„ŒíŠ¸ ìƒì„± â†’ ì•½ 30ë¶„\n  - êµ¬ì¡° ì„¤ê³„: 10ë¶„\n  - ìŠ¤íƒ€ì¼ë§: 15ë¶„\n  - í…ŒìŠ¤íŠ¸ ë° ìˆ˜ì •: 5ë¶„\n\n- AI ì‚¬ìš©: ë™ì¼ ì»´í¬ë„ŒíŠ¸ â†’ ì•½ 3ë¶„\n  - í”„ë¡¬í”„íŠ¸ ì‘ì„±: 2ë¶„\n  - AI ìƒì„±: 30ì´ˆ\n  - ê²€ì¦ ë° ë¯¸ì„¸ ì¡°ì •: 30ì´ˆ\n\n**ì†ë„ í–¥ìƒ:** ì•½ 10ë°° (30ë¶„ â†’ 3ë¶„)\n\n**ëˆ„ì  íš¨ê³¼:**\n- 34ê°œ í™”ë©´ Ã— í‰ê·  30ë¶„ = 17ì‹œê°„ (ìˆ˜ì‘ì—…)\n- 34ê°œ í™”ë©´ Ã— í‰ê·  3ë¶„ = 1.7ì‹œê°„ (AI)\n- **ì ˆì•½ ì‹œê°„: ì•½ 15ì‹œê°„**\n\n---\n\n#### **2. ë””ìì¸ ì‹œìŠ¤í…œ ì¼ê´€ì„±**\n\n**ì¸¡ì • ë°©ë²•:**\n- ì „ì²´ ì»´í¬ë„ŒíŠ¸ ê²€í†  (34ê°œ í™”ë©´)\n- CSS ë³€ìˆ˜ ì‚¬ìš©ë¥  ì²´í¬\n- íƒ€ì´í¬ê·¸ë˜í”¼ ì¤€ìˆ˜ìœ¨ ì²´í¬\n- ê°„ê²© ê·œì¹™ ì¤€ìˆ˜ìœ¨ ì²´í¬\n\n**ê²°ê³¼:**\n| í•­ëª© | ì¤€ìˆ˜ìœ¨ | ë¹„ê³  |\n|------|--------|------|\n| CSS ë³€ìˆ˜ ì‚¬ìš© | 98% | 2% ì´ˆê¸° ì‹¤ìˆ˜, ì¦‰ì‹œ ìˆ˜ì • |\n| íƒ€ì´í¬ê·¸ë˜í”¼ | 95% | 5% ìˆ˜ë™ ì¬ì¡°ì • í•„ìš” |\n| 8px ê·¸ë¦¬ë“œ | 92% | 8% ë¯¸ì„¸ ì¡°ì • í•„ìš” |\n| ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ | 100% | Guidelines.md ì—…ë°ì´íŠ¸ í›„ ì™„ë²½ |\n\n**ë¶„ì„:**\n- Guidelines.md ì œê³µ ì „: ì•½ 70% ì¼ê´€ì„±\n- Guidelines.md ì œê³µ í›„: 95%+ ì¼ê´€ì„±\n- **êµí›ˆ: ëª…í™•í•œ ê°€ì´ë“œë¼ì¸ì´ AI ì„±ëŠ¥ì˜ í•µì‹¬**\n\n---\n\n#### **3. ë°˜ë³µ ì‘ì—… íš¨ìœ¨**\n\n**ì‚¬ë¡€: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í†µì¼**\n\n**ì‘ì—… ë‚´ìš©:**\n- 34ê°œ í™”ë©´ì˜ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì½”ë“œ í†µì¼\n- ë™ì¼í•œ ì•„ì´ì½˜ (Search, MessageCircle, Heart, User)\n- ë™ì¼í•œ ìŠ¤íƒ€ì¼ (í¬ê¸°, ê°„ê²©, ìƒ‰ìƒ)\n\n**ìˆ˜ì‘ì—… ì˜ˆìƒ ì‹œê°„:**\n- í™”ë©´ë‹¹ 5ë¶„ Ã— 34ê°œ = 170ë¶„ (ì•½ 3ì‹œê°„)\n- ë³µì‚¬-ë¶™ì—¬ë„£ê¸° í›„ ë¯¸ì„¸ ì¡°ì • í•„ìš”\n- ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„± ë†’ìŒ\n\n**AI ì‹¤ì œ ì‹œê°„:**\n- í”„ë¡¬í”„íŠ¸ 1íšŒ ì‘ì„±: 5ë¶„\n- AI ì¼ê´„ ì ìš©: 10ë¶„\n- ê²€ì¦: 10ë¶„\n- **ì´ 25ë¶„, ì˜¤ë¥˜ 0ê±´**\n\n**íš¨ìœ¨ í–¥ìƒ:** ì•½ 7ë°° (170ë¶„ â†’ 25ë¶„)\n\n---\n\n#### **4. íŒ¨í„´ ì¸ì‹ ë° ì ìš©**\n\n**ì‚¬ë¡€: Supabase ì—°ë™ íŒ¨í„´**\n\nAIê°€ í•™ìŠµí•œ íŒ¨í„´:\n```tsx\n// 1íšŒ ì˜ˆì‹œ ì œê³µ\nconst [data, setData] = useState([]);\nconst [loading, setLoading] = useState(true);\nconst [error, setError] = useState(null);\n\nuseEffect(() => {\n  // fetch logic\n}, []);\n\n// AIê°€ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ì ìš©\n```\n\n**ì ìš© ì‚¬ë¡€:**\n- MainScreenì—ì„œ íŒ¨í„´ í™•ë¦½\n- AIê°€ ìë™ìœ¼ë¡œ ë‹¤ë¥¸ 8ê°œ í™”ë©´ì— ë™ì¼ íŒ¨í„´ ì ìš©\n- ìˆ˜ì‘ì—… ëŒ€ë¹„ ì—ëŸ¬ìœ¨ 90% ê°ì†Œ (ì˜ˆìƒ)\n\n---\n\n#### **5. ë¬¸ì„œ ê¸°ë°˜ í•™ìŠµ**\n\n**Guidelines.md í™œìš©:**\n\n**íš¨ê³¼ ì¸¡ì •:**\n| ì§€í‘œ | Guidelines ì œê³µ ì „ | Guidelines ì œê³µ í›„ | ê°œì„ ìœ¨ |\n|------|-------------------|-------------------|--------|\n| 1íšŒ ìƒì„± ì„±ê³µë¥  | 60% | 90% | +50% |\n| ìˆ˜ì • íšŸìˆ˜ í‰ê·  | 2.5íšŒ | 0.8íšŒ | -68% |\n| ë””ìì¸ ì‹œìŠ¤í…œ ì¤€ìˆ˜ | 70% | 98% | +40% |\n\n**êµí›ˆ:**\n- ëª…í™•í•œ ë¬¸ì„œê°€ AI ì„±ëŠ¥ì„ ê·¹ì ìœ¼ë¡œ í–¥ìƒ\n- Guidelines.md ì‘ì„± ì‹œê°„ (3ì‹œê°„) íˆ¬ì ëŒ€ë¹„ íšŒìˆ˜ ì‹œê°„ 1ì¼ ë¯¸ë§Œ\n\n---\n\n### âŒ AI(Claude/Gemini)ì˜ ì•½ì \n\n#### **1. ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬**\n\n**ë¬¸ì œ ì‚¬ë¡€:**\n- ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ (ì—¬ëŸ¬ í™”ë©´ ê°„ ìƒíƒœ ê³µìœ )\n- ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ (ì „ì—­ ê´€ë¦¬ í•„ìš”)\n- ì‹¤ì‹œê°„ ì•Œë¦¼ (WebSocket ì—°ë™)\n\n**AI ìƒì„± ê²°ê³¼:**\n```tsx\n// AIê°€ ìƒì„±í•œ ì½”ë“œ (ë¬¸ì œ ìˆìŒ)\nfunction Cart() {\n  const [items, setItems] = useState([]); // í™”ë©´ë§ˆë‹¤ ë…ë¦½ì \n  // ë‹¤ë¥¸ í™”ë©´ê³¼ ìƒíƒœ ê³µìœ  ì•ˆ ë¨\n}\n```\n\n**í•„ìš”í•œ í•´ê²°ì±…:**\n```tsx\n// ì¸ê°„ì´ ì„¤ê³„í•œ Context\nconst CartContext = createContext();\n\nfunction CartProvider({ children }) {\n  const [items, setItems] = useState([]);\n  // ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë¡œì§\n  return (\n    <CartContext.Provider value={{ items, setItems }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n```\n\n**ìˆ˜ë™ ê°œì… í•„ìš”:**\n- ìƒíƒœ ê´€ë¦¬ ì•„í‚¤í…ì²˜ ì„¤ê³„: ì¸ê°„\n- ê¸°ë³¸ ì½”ë“œ ìƒì„±: AI\n- í†µí•© ë° í…ŒìŠ¤íŠ¸: ì¸ê°„\n\n**ì†Œìš” ì‹œê°„:**\n- AI ë‹¨ë…: ë¶ˆê°€ëŠ¥ (ì˜¬ë°”ë¥¸ ì•„í‚¤í…ì²˜ ìƒì„± ì‹¤íŒ¨)\n- AI + ì¸ê°„: ì•½ 2ì‹œê°„ (ì„¤ê³„ 1ì‹œê°„ + êµ¬í˜„ 1ì‹œê°„)\n\n---\n\n#### **2. ì»¨í…ìŠ¤íŠ¸ í•œê³„**\n\n**ë¬¸ì œ:**\n- ê¸´ ëŒ€í™”ì—ì„œ ì´ˆê¸° ì§€ì‹œì‚¬í•­ ë§ê°\n- ì´ì „ í™”ë©´ì˜ íŒ¨í„´ì„ ìƒˆ í™”ë©´ì— ì ìš© ì‹¤íŒ¨\n\n**ì‹¤ì œ ì‚¬ë¡€:**\n```\n[ëŒ€í™” ì‹œì‘]\në‚˜: \"ëª¨ë“  í™”ë©´ì—ì„œ CSS ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”\"\nAI: \"ì•Œê² ìŠµë‹ˆë‹¤\" âœ…\n\n[20ê°œ í™”ë©´ ìƒì„± í›„]\në‚˜: \"ìƒˆë¡œìš´ í™”ë©´ ìƒì„±\"\nAI: [Tailwind í´ë˜ìŠ¤ ì‚¬ìš©] âŒ\n```\n\n**í•´ê²° ë°©ë²•:**\n1. **ì •ê¸°ì ì¸ ë¦¬ë§ˆì¸ë”**\n   - 5-10ê°œ í™”ë©´ë§ˆë‹¤ Guidelines.md ì¬ì–¸ê¸‰\n\n2. **ì²´í¬ë¦¬ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸**\n   - \"ë‹¤ìŒ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”: [...]\"\n\n3. **ìƒˆ ì„¸ì…˜ ì‹œì‘**\n   - ì»¨í…ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¸¸ì–´ì§€ë©´ ìƒˆ ëŒ€í™” ì‹œì‘\n   - Guidelines.md ì¬ì œê³µ\n\n**ê°œì„  ì—¬ì§€:**\n- AI ì»¨í…ìŠ¤íŠ¸ ìœˆë„ìš° í™•ëŒ€ í•„ìš” (í˜„ì¬ í•œê³„)\n\n---\n\n#### **3. ì•”ë¬µì  ìš”êµ¬ì‚¬í•­ ì´í•´ ë¶€ì¡±**\n\n**ì‚¬ë¡€:**\n\n**ì¸ê°„ ë””ìì´ë„ˆì˜ ì•”ë¬µì  ì§€ì‹:**\n- \"ë ˆìŠ¤í† ë‘ ì¹´ë“œ\"ë¼ê³  í•˜ë©´ â†’ ì´ë¯¸ì§€, ì´ë¦„, í‰ì , ê±°ë¦¬, ì¹´í…Œê³ ë¦¬ ìë™ í¬í•¨\n- \"ê²€ìƒ‰ ë°”\"ë¼ê³  í•˜ë©´ â†’ ë‹ë³´ê¸° ì•„ì´ì½˜, placeholder, í¬ì»¤ìŠ¤ ìƒíƒœ ìë™ êµ¬í˜„\n\n**AIì˜ ì´í•´:**\n- \"ë ˆìŠ¤í† ë‘ ì¹´ë“œ\" â†’ ìµœì†Œí•œì˜ ìš”ì†Œë§Œ í¬í•¨ (ì´ë¯¸ì§€ + ì´ë¦„)\n- ë‚˜ë¨¸ì§€ ìš”ì†ŒëŠ” ëª…ì‹œì  ìš”ì²­ í•„ìš”\n\n**í•´ê²° ë°©ë²•:**\n```markdown\nâŒ \"ë ˆìŠ¤í† ë‘ ì¹´ë“œ ë§Œë“¤ì–´ì¤˜\"\n\nâœ… \"ë ˆìŠ¤í† ë‘ ì¹´ë“œ ë§Œë“¤ì–´ì¤˜.\n   í¬í•¨ ìš”ì†Œ:\n   - ëŒ€í‘œ ì´ë¯¸ì§€ (16:9 ë¹„ìœ¨)\n   - ë ˆìŠ¤í† ë‘ ì´ë¦„ (var(--text-lg))\n   - í‰ì  (ë³„ ì•„ì´ì½˜ + ìˆ«ì)\n   - ê±°ë¦¬ (ìœ„ì¹˜ ì•„ì´ì½˜ + í…ìŠ¤íŠ¸)\n   - ì¹´í…Œê³ ë¦¬ íƒœê·¸ (ìµœëŒ€ 3ê°œ)\n   - ì €ì¥ ë²„íŠ¼ (í•˜íŠ¸ ì•„ì´ì½˜)\n   - í˜¸ë²„ íš¨ê³¼ (ì•½ê°„ì˜ ê·¸ë¦¼ì)\"\n```\n\n**êµí›ˆ:**\n- ëª…ì‹œì  ìš”êµ¬ì‚¬í•­ ì‘ì„±ì— ì¶”ê°€ ì‹œê°„ íˆ¬ì í•„ìš” (ì•½ 2ë°°)\n- í•˜ì§€ë§Œ ì¬ì‘ì—… ì‹œê°„ ì ˆê°ìœ¼ë¡œ ê²°ê³¼ì ìœ¼ë¡œ ì´ë“\n\n---\n\n#### **4. ë””ë²„ê¹… í•œê³„**\n\n**ë¬¸ì œ ìœ í˜•:**\n\n1. **ì• ë§¤í•œ ì—ëŸ¬ ë©”ì‹œì§€**\n```\nì—ëŸ¬: \"Cannot read property 'map' of undefined\"\n\nAI ì‘ë‹µ: \"restaurants ë°°ì—´ì„ í™•ì¸í•˜ì„¸ìš”\"\nâ†’ ë„ˆë¬´ ì¼ë°˜ì , êµ¬ì²´ì  ì›ì¸ íŒŒì•… ì‹¤íŒ¨\n```\n\n2. **ë³µí•©ì ì¸ ë²„ê·¸**\n- ìƒíƒœ ì—…ë°ì´íŠ¸ + ë¹„ë™ê¸° ë¡œì§ + UI ë Œë”ë§ ë¬¸ì œ\n- AIëŠ” ê°œë³„ ë¬¸ì œë§Œ í•´ê²°, í†µí•© ì†”ë£¨ì…˜ ì œì‹œ ì‹¤íŒ¨\n\n**ì¸ê°„ ê°œì… í•„ìš” ì‚¬ë¡€:**\n- Supabase ì¿¼ë¦¬ ì—ëŸ¬: 50% AI í•´ê²°, 50% ìˆ˜ë™\n- ìƒíƒœ ê´€ë¦¬ ë²„ê·¸: 20% AI í•´ê²°, 80% ìˆ˜ë™\n- CSS ë ˆì´ì•„ì›ƒ ë¬¸ì œ: 80% AI í•´ê²°, 20% ìˆ˜ë™\n\n**ê°œì„  ì „ëµ:**\n1. **ì—ëŸ¬ ë¡œê·¸ ì „ì²´ ì œê³µ**\n   - ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ í¬í•¨\n   - ì¬í˜„ ë‹¨ê³„ ìƒì„¸íˆ\n\n2. **ë‹¨ê³„ë³„ ë””ë²„ê¹…**\n   - í° ë¬¸ì œë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„í•´\n   - AIì—ê²Œ í•˜ë‚˜ì”© í•´ê²° ìš”ì²­\n\n3. **ì˜ˆìƒ ì›ì¸ ì œì‹œ**\n   - \"ì´ ì—ëŸ¬ëŠ” ë¹„ë™ê¸° ë°ì´í„° ë¡œë”© ë¬¸ì œ ê°™ì€ë°, í™•ì¸í•´ì¤„ ìˆ˜ ìˆë‚˜ìš”?\"\n\n---\n\n#### **5. ì°½ì˜ì  ë¬¸ì œ í•´ê²° ë¶€ì¡±**\n\n**ì‚¬ë¡€:**\n\n**ë¬¸ì œ:** \"ë ˆìŠ¤í† ë‘ ëª©ë¡ì´ ë„ˆë¬´ ê¸¸ì–´ì„œ ìŠ¤í¬ë¡¤ì´ ë¶ˆí¸í•´ìš”\"\n\n**AI ì‘ë‹µ:**\n- \"í˜ì´ì§€ë„¤ì´ì…˜ì„ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤\" (ì¼ë°˜ì  ì†”ë£¨ì…˜)\n\n**ì¸ê°„ ë””ìì´ë„ˆ ì‘ë‹µ:**\n- \"ë¬´í•œ ìŠ¤í¬ë¡¤ì€ ì–´ë•Œìš”?\"\n- \"ì¹´í…Œê³ ë¦¬ë³„ íƒ­ìœ¼ë¡œ ë‚˜ëˆ„ë©´?\"\n- \"AI ì¶”ì²œì„ ìµœìƒë‹¨ì— ê³ ì •í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì ‘ì„ ìˆ˜ ìˆê²Œ?\"\n- \"ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ì •ë ¬?\"\n\n**êµí›ˆ:**\n- AIëŠ” ê²€ì¦ëœ íŒ¨í„´ ì ìš©ì— ê°•í•¨\n- í˜ì‹ ì  UX ì„¤ê³„ëŠ” ì¸ê°„ì˜ ì˜ì—­\n- ìµœì  ì „ëµ: ì¸ê°„ì´ ë°©í–¥ ì œì‹œ â†’ AIê°€ êµ¬í˜„\n\n---\n\n### ğŸ“Š AI vs ì¸ê°„ ì—­í•  ë¶„ë‹´í‘œ\n\n| ì‘ì—… ìœ í˜• | AI ì í•©ë„ | ì¸ê°„ í•„ìš”ë„ | ìµœì  ì „ëµ |\n|-----------|----------|------------|----------|\n| **ë°˜ë³µì  ì»´í¬ë„ŒíŠ¸ ìƒì„±** | 95% | 5% | AI ì£¼ë„, ì¸ê°„ ê²€ì¦ |\n| **ë””ìì¸ ì‹œìŠ¤í…œ ì ìš©** | 90% | 10% | AI ìƒì„±, ì¸ê°„ ì²´í¬ë¦¬ìŠ¤íŠ¸ |\n| **ë²„ê·¸ ìˆ˜ì • (ë‹¨ìˆœ)** | 80% | 20% | AI ìš°ì„  ì‹œë„ |\n| **ë²„ê·¸ ìˆ˜ì • (ë³µí•©)** | 30% | 70% | ì¸ê°„ ë¶„ì„, AI ë³´ì¡° |\n| **ìƒíƒœ ê´€ë¦¬ ì„¤ê³„** | 20% | 80% | ì¸ê°„ ì„¤ê³„, AI êµ¬í˜„ |\n| **UX í˜ì‹ ** | 10% | 90% | ì¸ê°„ ì£¼ë„ |\n| **ë¬¸ì„œ ì‘ì„±** | 70% | 30% | AI ì´ˆì•ˆ, ì¸ê°„ í¸ì§‘ |\n| **í…ŒìŠ¤íŠ¸ ì½”ë“œ** | 85% | 15% | AI ìƒì„±, ì¸ê°„ ì‹œë‚˜ë¦¬ì˜¤ |\n\n---\n\n## Part 3: Before/After ì½”ë“œ ë¹„êµ\n\n### ì‚¬ë¡€ 1: CSS í•˜ë“œì½”ë”© â†’ CSS ë³€ìˆ˜\n\n#### âŒ Before (AI ì´ˆê¸° ìƒì„± - ë¬¸ì œ ìˆìŒ)\n```tsx\nfunction RestaurantCard({ restaurant }: { restaurant: Restaurant }) {\n  return (\n    <div className=\"bg-gray-100 rounded-2xl p-5 mb-4 shadow-md\">\n      <img \n        src={restaurant.image} \n        alt={restaurant.name}\n        className=\"w-full h-48 object-cover rounded-xl mb-3\"\n      />\n      <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\n        {restaurant.name}\n      </h3>\n      <div className=\"flex items-center gap-2 mb-2\">\n        <span className=\"text-yellow-500 text-lg\">â˜…</span>\n        <span className=\"text-base font-semibold text-gray-800\">\n          {restaurant.rating}\n        </span>\n      </div>\n      <p className=\"text-sm text-gray-600 mb-3\">\n        {restaurant.description}\n      </p>\n      <div className=\"flex gap-2\">\n        <span className=\"bg-orange-100 text-orange-600 px-3 py-1 rounded-full text-xs\">\n          {restaurant.category}\n        </span>\n      </div>\n    </div>\n  );\n}\n```\n\n**ë¬¸ì œì :**\n- âŒ í•˜ë“œì½”ë”©ëœ ìƒ‰ìƒ (gray-100, gray-900, orange-600)\n- âŒ í•˜ë“œì½”ë”©ëœ í°íŠ¸ í¬ê¸° (text-xl, text-base, text-sm)\n- âŒ ë¶ˆê·œì¹™í•œ ê°„ê²© (p-5, mb-3, mb-2)\n- âŒ ë””ìì¸ ì‹œìŠ¤í…œ ë¬´ì‹œ\n\n---\n\n#### âœ… After (ë¦¬íŒ©í† ë§ - ì˜¬ë°”ë¦„)\n```tsx\nfunction RestaurantCard({ restaurant }: { restaurant: Restaurant }) {\n  return (\n    <div \n      style={{\n        backgroundColor: 'var(--card)',\n        borderRadius: 'var(--radius-xl)',\n        padding: '16px',\n        marginBottom: '16px',\n        boxShadow: 'var(--elevation-sm)'\n      }}\n    >\n      <img \n        src={restaurant.image} \n        alt={restaurant.name}\n        style={{\n          width: '100%',\n          height: '192px',\n          objectFit: 'cover',\n          borderRadius: 'var(--radius-lg)',\n          marginBottom: '16px'\n        }}\n      />\n      <h3 style={{\n        fontSize: 'var(--text-xl)',\n        fontWeight: 'var(--font-weight-medium)',\n        fontFamily: 'var(--font-family-primary)',\n        color: 'var(--foreground)',\n        marginBottom: '8px'\n      }}>\n        {restaurant.name}\n      </h3>\n      <div \n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px',\n          marginBottom: '8px'\n        }}\n      >\n        <span style={{ color: 'var(--accent)', fontSize: 'var(--text-lg)' }}>\n          â˜…\n        </span>\n        <span style={{\n          fontSize: 'var(--text-base)',\n          fontWeight: 'var(--font-weight-medium)',\n          fontFamily: 'var(--font-family-primary)',\n          color: 'var(--foreground)'\n        }}>\n          {restaurant.rating}\n        </span>\n      </div>\n      <p style={{\n        fontSize: 'var(--text-sm)',\n        fontFamily: 'var(--font-family-primary)',\n        color: 'var(--muted-foreground)',\n        marginBottom: '16px'\n      }}>\n        {restaurant.description}\n      </p>\n      <div style={{ display: 'flex', gap: '8px' }}>\n        <span style={{\n          backgroundColor: 'var(--secondary)',\n          color: 'var(--accent)',\n          padding: '4px 12px',\n          borderRadius: 'var(--radius-lg)',\n          fontSize: 'var(--text-sm)',\n          fontFamily: 'var(--font-family-primary)'\n        }}>\n          {restaurant.category}\n        </span>\n      </div>\n    </div>\n  );\n}\n```\n\n**ê°œì„  ì‚¬í•­:**\n- âœ… ëª¨ë“  ìƒ‰ìƒ CSS ë³€ìˆ˜ ì‚¬ìš©\n- âœ… ëª¨ë“  í°íŠ¸ CSS ë³€ìˆ˜ ì‚¬ìš©\n- âœ… 8px ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ (8, 16px)\n- âœ… ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ\n\n**ë³€ê²½ ì˜í–¥:**\n- globals.cssì—ì„œ --card ìƒ‰ìƒ ë³€ê²½ ì‹œ ì „ì²´ ì¹´ë“œ ìë™ ì—…ë°ì´íŠ¸\n- ë‹¤í¬ ëª¨ë“œ ì „í™˜ ì‹œ ìë™ ëŒ€ì‘\n- ë¸Œëœë“œ ë¦¬ë‰´ì–¼ ì‹œ ì¤‘ì•™ ì œì–´ ê°€ëŠ¥\n\n---\n\n### ì‚¬ë¡€ 2: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë¶ˆì¼ì¹˜ â†’ í†µì¼\n\n#### âŒ Before (SearchResultsScreen - ë¬¸ì œ ìˆìŒ)\n```tsx\n{/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}\n<div className=\"sticky bottom-0 bg-white border-t border-gray-200 flex justify-around py-2\">\n  <button className=\"flex flex-col items-center\">\n    <div className=\"w-6 h-6 bg-gray-400 rounded mb-1\" />\n    <span className=\"text-xs\">Discover</span>\n  </button>\n  <button className=\"flex flex-col items-center\">\n    <div className=\"w-6 h-6 bg-gray-400 rounded-full mb-1\" />\n    <span className=\"text-xs\">AI</span>\n  </button>\n  <button className=\"flex flex-col items-center\">\n    <div className=\"w-6 h-6 bg-gray-400 mb-1\" />\n    <span className=\"text-xs\">Saved</span>\n  </button>\n  <button className=\"flex flex-col items-center\">\n    <div className=\"w-6 h-6 bg-gray-400 rounded-lg mb-1\" />\n    <span className=\"text-xs\">MY</span>\n  </button>\n</div>\n```\n\n**ë¬¸ì œì :**\n- âŒ ì„ì‹œ div ì‚¬ìš© (ì‹¤ì œ ì•„ì´ì½˜ ì—†ìŒ)\n- âŒ MainScreenê³¼ ë‹¤ë¥¸ ëª¨ì–‘\n- âŒ í™œì„±/ë¹„í™œì„± ìƒíƒœ ì—†ìŒ\n- âŒ ì¼ê´€ì„± ë¶€ì¬\n\n---\n\n#### âœ… After (í†µì¼ëœ ë„¤ë¹„ê²Œì´ì…˜)\n```tsx\nimport { Search, MessageCircle, Heart, User } from 'lucide-react';\n\n{/* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ */}\n<div \n  className=\"sticky bottom-0 flex items-center justify-around py-2\"\n  style={{\n    backgroundColor: 'var(--background)',\n    borderTop: '1px solid var(--border)',\n    zIndex: 40\n  }}\n>\n  {/* Discover íƒ­ */}\n  <button\n    onClick={() => navigate('main')}\n    className=\"flex flex-col items-center py-2 px-4 min-w-0\"\n    style={{\n      color: 'var(--primary)',\n      borderBottom: '2px solid var(--primary)',\n      fontFamily: 'var(--font-family-primary)'\n    }}\n  >\n    <Search className=\"w-6 h-6 mb-1\" />\n    <span \n      className=\"font-medium\"\n      style={{ fontSize: 'var(--text-sm)' }}\n    >\n      Discover\n    </span>\n  </button>\n\n  {/* AI Concierge íƒ­ */}\n  <button\n    onClick={() => navigate('ai-concierge')}\n    className=\"flex flex-col items-center py-2 px-4 min-w-0 hover:text-foreground transition-colors\"\n    style={{\n      color: 'var(--muted-foreground)',\n      fontFamily: 'var(--font-family-primary)'\n    }}\n  >\n    <MessageCircle className=\"w-6 h-6 mb-1\" />\n    <span style={{ fontSize: 'var(--text-sm)' }}>\n      AI Concierge\n    </span>\n  </button>\n\n  {/* Saved íƒ­ */}\n  <button\n    onClick={() => navigate('saved')}\n    className=\"flex flex-col items-center py-2 px-4 min-w-0 hover:text-foreground transition-colors\"\n    style={{\n      color: 'var(--muted-foreground)',\n      fontFamily: 'var(--font-family-primary)'\n    }}\n  >\n    <Heart className=\"w-6 h-6 mb-1\" />\n    <span style={{ fontSize: 'var(--text-sm)' }}>\n      Saved\n    </span>\n  </button>\n\n  {/* MY íƒ­ */}\n  <button\n    onClick={() => navigate('my-page')}\n    className=\"flex flex-col items-center py-2 px-4 min-w-0 hover:text-foreground transition-colors\"\n    style={{\n      color: 'var(--muted-foreground)',\n      fontFamily: 'var(--font-family-primary)'\n    }}\n  >\n    <User className=\"w-6 h-6 mb-1\" />\n    <span style={{ fontSize: 'var(--text-sm)' }}>\n      MY\n    </span>\n  </button>\n</div>\n```\n\n**ê°œì„  ì‚¬í•­:**\n- âœ… ì‹¤ì œ Lucide React ì•„ì´ì½˜ ì‚¬ìš©\n- âœ… ëª¨ë“  í™”ë©´ì—ì„œ ë™ì¼í•œ ì•„ì´ì½˜\n- âœ… í™œì„±/ë¹„í™œì„± ìƒíƒœ ëª…í™•\n- âœ… CSS ë³€ìˆ˜ ì‚¬ìš©\n- âœ… ì ‘ê·¼ì„± í–¥ìƒ\n\n---\n\n### ì‚¬ë¡€ 3: Supabase ì—°ë™ (ë¡œë”©/ì—ëŸ¬ ì²˜ë¦¬)\n\n#### âŒ Before (ê¸°ë³¸ ì—°ë™ - ë¶ˆì™„ì „)\n```tsx\nimport { useEffect, useState } from 'react';\nimport { createClient } from './utils/supabase/client';\n\nfunction RestaurantList() {\n  const [restaurants, setRestaurants] = useState([]);\n\n  useEffect(() => {\n    const supabase = createClient();\n    supabase\n      .from('restaurants')\n      .select('*')\n      .then(({ data }) => setRestaurants(data));\n  }, []);\n\n  return (\n    <div>\n      {restaurants.map(restaurant => (\n        <RestaurantCard key={restaurant.id} restaurant={restaurant} />\n      ))}\n    </div>\n  );\n}\n```\n\n**ë¬¸ì œì :**\n- âŒ ë¡œë”© ìƒíƒœ ì—†ìŒ (ë¹ˆ í™”ë©´ í‘œì‹œ)\n- âŒ ì—ëŸ¬ ì²˜ë¦¬ ì—†ìŒ (ì—ëŸ¬ ì‹œ ì•± ì¤‘ë‹¨)\n- âŒ ë¹ˆ ë°ì´í„° ì²˜ë¦¬ ì—†ìŒ\n- âŒ TypeScript íƒ€ì… ë¶€ì¡±\n\n---\n\n#### âœ… After (ì™„ì „í•œ ì—°ë™)\n```tsx\nimport { useEffect, useState } from 'react';\nimport { createClient } from './utils/supabase/client';\n\ninterface Restaurant {\n  id: string;\n  name: string;\n  description: string;\n  rating: number;\n  image_url: string;\n  category: string;\n}\n\nfunction RestaurantList() {\n  const [restaurants, setRestaurants] = useState<Restaurant[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchRestaurants = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const supabase = createClient();\n        const { data, error: fetchError } = await supabase\n          .from('restaurants')\n          .select('*')\n          .order('rating', { ascending: false })\n          .limit(20);\n\n        if (fetchError) {\n          throw new Error(`ë ˆìŠ¤í† ë‘ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨: ${fetchError.message}`);\n        }\n\n        setRestaurants(data || []);\n      } catch (err) {\n        console.error('Restaurant fetch error:', err);\n        setError(\n          err instanceof Error \n            ? err.message \n            : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤'\n        );\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchRestaurants();\n  }, []);\n\n  // ë¡œë”© ìƒíƒœ\n  if (loading) {\n    return (\n      <div className=\"space-y-4 p-4\">\n        {[1, 2, 3].map(i => (\n          <div \n            key={i}\n            className=\"animate-pulse\"\n            style={{\n              backgroundColor: 'var(--card)',\n              borderRadius: 'var(--radius-lg)',\n              padding: '16px',\n              height: '200px'\n            }}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  // ì—ëŸ¬ ìƒíƒœ\n  if (error) {\n    return (\n      <div \n        className=\"flex flex-col items-center justify-center p-8\"\n        style={{ minHeight: '400px' }}\n      >\n        <div \n          style={{\n            fontSize: 'var(--text-2xl)',\n            marginBottom: '8px'\n          }}\n        >\n          âš ï¸\n        </div>\n        <h3 style={{\n          fontSize: 'var(--text-xl)',\n          fontWeight: 'var(--font-weight-medium)',\n          fontFamily: 'var(--font-family-primary)',\n          color: 'var(--foreground)',\n          marginBottom: '8px'\n        }}>\n          ë°ì´í„° ë¡œë”© ì‹¤íŒ¨\n        </h3>\n        <p style={{\n          fontSize: 'var(--text-sm)',\n          fontFamily: 'var(--font-family-primary)',\n          color: 'var(--muted-foreground)',\n          marginBottom: '16px',\n          textAlign: 'center'\n        }}>\n          {error}\n        </p>\n        <button\n          onClick={() => window.location.reload()}\n          style={{\n            backgroundColor: 'var(--primary)',\n            color: '#FFFFFF',\n            padding: '12px 24px',\n            borderRadius: 'var(--radius-lg)',\n            fontSize: 'var(--text-base)',\n            fontFamily: 'var(--font-family-primary)',\n            border: 'none',\n            cursor: 'pointer'\n          }}\n        >\n          ë‹¤ì‹œ ì‹œë„\n        </button>\n      </div>\n    );\n  }\n\n  // ë¹ˆ ë°ì´í„° ìƒíƒœ\n  if (restaurants.length === 0) {\n    return (\n      <div \n        className=\"flex flex-col items-center justify-center p-8\"\n        style={{ minHeight: '400px' }}\n      >\n        <div \n          style={{\n            fontSize: 'var(--text-2xl)',\n            marginBottom: '8px'\n          }}\n        >\n          ğŸ½ï¸\n        </div>\n        <h3 style={{\n          fontSize: 'var(--text-xl)',\n          fontWeight: 'var(--font-weight-medium)',\n          fontFamily: 'var(--font-family-primary)',\n          color: 'var(--foreground)',\n          marginBottom: '8px'\n        }}>\n          ë“±ë¡ëœ ë ˆìŠ¤í† ë‘ì´ ì—†ìŠµë‹ˆë‹¤\n        </h3>\n        <p style={{\n          fontSize: 'var(--text-sm)',\n          fontFamily: 'var(--font-family-primary)',\n          color: 'var(--muted-foreground)',\n          textAlign: 'center'\n        }}>\n          ì²« ë²ˆì§¸ ë ˆìŠ¤í† ë‘ì„ ë“±ë¡í•´ë³´ì„¸ìš”!\n        </p>\n      </div>\n    );\n  }\n\n  // ì •ìƒ ë°ì´í„° í‘œì‹œ\n  return (\n    <div className=\"space-y-4 p-4\">\n      {restaurants.map(restaurant => (\n        <RestaurantCard \n          key={restaurant.id} \n          restaurant={restaurant} \n        />\n      ))}\n    </div>\n  );\n}\n```\n\n**ê°œì„  ì‚¬í•­:**\n- âœ… ë¡œë”© Skeleton UI\n- âœ… ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€\n- âœ… ë¹ˆ ë°ì´í„° ì•ˆë‚´\n- âœ… TypeScript ì™„ì „ íƒ€ì… ì •ì˜\n- âœ… ì—ëŸ¬ ë¡œê¹… (console.error)\n- âœ… ì¬ì‹œë„ ë²„íŠ¼\n- âœ… CSS ë³€ìˆ˜ ì¼ê´€ì„±\n\n---\n\n## Part 4: ì •ëŸ‰ì  ì„±ê³¼\n\n### ğŸ“Š ê°œë°œ ì‹œê°„ ì¸¡ì •\n\n#### **ì „ì²´ í”„ë¡œì íŠ¸**\n- **AI ì‚¬ìš© ì‹¤ì œ ì‹œê°„:** ì•½ 12ì‹œê°„\n  - Phase 1 (ê¸°ì´ˆ): 3ì‹œê°„\n  - Phase 2 (í•µì‹¬ ê¸°ëŠ¥): 5ì‹œê°„\n  - Phase 3 (í™•ì¥): 4ì‹œê°„\n\n- **ìˆ˜ì‘ì—… ì˜ˆìƒ ì‹œê°„:** ì•½ 40-50ì‹œê°„\n  - Phase 1: 10ì‹œê°„\n  - Phase 2: 20ì‹œê°„\n  - Phase 3: 15ì‹œê°„\n\n- **ì‹œê°„ ì ˆê°:** ì•½ **70-75%** (28-38ì‹œê°„ ì ˆì•½)\n\n---\n\n#### **í™”ë©´ë³„ í‰ê·  ì‹œê°„**\n| í™”ë©´ ë³µì¡ë„ | ìˆ˜ì‘ì—… | AI ì‚¬ìš© | ì ˆê°ìœ¨ |\n|------------|--------|---------|--------|\n| ë‹¨ìˆœ (Splash) | 20ë¶„ | 3ë¶„ | 85% |\n| ë³´í†µ (MainScreen) | 60ë¶„ | 10ë¶„ | 83% |\n| ë³µì¡ (RestaurantDetail) | 90ë¶„ | 20ë¶„ | 78% |\n\n---\n\n### ğŸ“ˆ ë°˜ë³µ íšŸìˆ˜ í†µê³„\n\n#### **1íšŒ ìƒì„± ì„±ê³µë¥ **\n- Guidelines.md ì œê³µ ì „: 60%\n- Guidelines.md ì œê³µ í›„: 90%\n- **ê°œì„ :** +50%\n\n#### **í‰ê·  ìˆ˜ì • íšŸìˆ˜**\n- Guidelines.md ì œê³µ ì „: 2.5íšŒ/í™”ë©´\n- Guidelines.md ì œê³µ í›„: 0.8íšŒ/í™”ë©´\n- **ê°œì„ :** -68%\n\n#### **ì´ ë°˜ë³µ íšŸìˆ˜**\n- 34ê°œ í™”ë©´ Ã— 0.8íšŒ = ì•½ 27íšŒ ìˆ˜ì •\n- ìˆ˜ì‘ì—… ì˜ˆìƒ: 34ê°œ Ã— 3íšŒ = ì•½ 102íšŒ\n- **ì ˆê°:** ì•½ 75íšŒ (73%)\n\n---\n\n### ğŸ› ì—ëŸ¬ ë°œìƒë¥ \n\n#### **ì—ëŸ¬ ìœ í˜•ë³„ ë°œìƒë¥ **\n| ì—ëŸ¬ ìœ í˜• | ë°œìƒ ê±´ìˆ˜ | AI í•´ê²° | ìˆ˜ë™ í•´ê²° |\n|----------|----------|---------|----------|\n| CSS ë³€ìˆ˜ ëˆ„ë½ | 5 | 5 (100%) | 0 |\n| íƒ€ì´í¬ê·¸ë˜í”¼ ë¶ˆì¼ì¹˜ | 3 | 3 (100%) | 0 |\n| ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ | 8 | 8 (100%) | 0 |\n| Supabase ì¿¼ë¦¬ | 4 | 2 (50%) | 2 (50%) |\n| ìƒíƒœ ê´€ë¦¬ | 2 | 0 (0%) | 2 (100%) |\n| ë ˆì´ì•„ì›ƒ ë¬¸ì œ | 6 | 5 (83%) | 1 (17%) |\n| **ì´ê³„** | **28** | **23 (82%)** | **5 (18%)** |\n\n**ë¶„ì„:**\n- ë””ìì¸ ì‹œìŠ¤í…œ ê´€ë ¨ ì—ëŸ¬: AIê°€ 100% í•´ê²°\n- ë³µì¡í•œ ë¡œì§ ì—ëŸ¬: ì¸ê°„ ê°œì… í•„ìš”\n\n---\n\n### ğŸ’° ë¹„ìš© íš¨ìœ¨ì„± (ê°€ìƒ ê³„ì‚°)\n\n#### **ì‹œë‚˜ë¦¬ì˜¤: í”„ë¦¬ëœì„œ ê°œë°œì ê³ ìš©**\n- ì‹œê°„ë‹¹ ë¹„ìš©: 50,000ì› (ì¤‘ê¸‰ ê°œë°œì)\n\n**ìˆ˜ì‘ì—… ë¹„ìš©:**\n- 40ì‹œê°„ Ã— 50,000ì› = **2,000,000ì›**\n\n**AI ì‚¬ìš© ë¹„ìš©:**\n- ê°œë°œ ì‹œê°„: 12ì‹œê°„ Ã— 50,000ì› = 600,000ì›\n- AI ë„êµ¬ ë¹„ìš©: 0ì› (Figma Make ë¬´ë£Œ í‹°ì–´)\n- **ì´ ë¹„ìš©: 600,000ì›**\n\n**ì ˆê° ê¸ˆì•¡: 1,400,000ì› (70%)**\n\n---\n\n#### **ì‹œë‚˜ë¦¬ì˜¤: ì‚¬ë‚´ ê°œë°œì (ê¸°íšŒ ë¹„ìš©)**\n- ê°œë°œì ì—°ë´‰: 60,000,000ì›/ë…„\n- ì‹œê°„ë‹¹ í™˜ì‚°: ì•½ 30,000ì› (ì—° 2000ì‹œê°„ ê¸°ì¤€)\n\n**ìˆ˜ì‘ì—… ê¸°íšŒ ë¹„ìš©:**\n- 40ì‹œê°„ Ã— 30,000ì› = **1,200,000ì›**\n\n**AI ì‚¬ìš© ê¸°íšŒ ë¹„ìš©:**\n- 12ì‹œê°„ Ã— 30,000ì› = **360,000ì›**\n\n**ì ˆê° ê¸°íšŒ ë¹„ìš©: 840,000ì› (70%)**\n\n**ë¶€ê°€ ê°€ì¹˜:**\n- ì ˆì•½ëœ 28ì‹œê°„ìœ¼ë¡œ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ ì§„í–‰ ê°€ëŠ¥\n\n---\n\n### ğŸ“‰ ì½”ë“œ í’ˆì§ˆ ë©”íŠ¸ë¦­ (ì˜ˆìƒ)\n\n| ì§€í‘œ | ìˆ˜ì‘ì—… | AI + ì¸ê°„ | ì°¨ì´ |\n|------|--------|-----------|------|\n| ë””ìì¸ ì‹œìŠ¤í…œ ì¼ê´€ì„± | 70% | 98% | +40% |\n| TypeScript íƒ€ì… ì»¤ë²„ë¦¬ì§€ | 60% | 85% | +42% |\n| ì½”ë“œ ì¤‘ë³µë¥  | 30% | 10% | -67% |\n| ì£¼ì„ ì»¤ë²„ë¦¬ì§€ | 10% | 5% | -50% (ì½”ë“œê°€ ìëª…í•¨) |\n| ì ‘ê·¼ì„± ì ìˆ˜ (WCAG) | 75% | 90% | +20% |\n\n**ì°¸ê³ :** ì‹¤ì œ ì¸¡ì • ë„êµ¬ ì‚¬ìš© ì‹œ ë” ì •í™•í•œ ë°ì´í„° í™•ë³´ ê°€ëŠ¥\n\n---\n\n### ğŸ¯ ëª©í‘œ ëŒ€ë¹„ ë‹¬ì„±ë¥ \n\n| ëª©í‘œ | ê³„íš | ë‹¬ì„± | ë‹¬ì„±ë¥  |\n|------|------|------|--------|\n| í™”ë©´ ê°œìˆ˜ | 20ê°œ | 34ê°œ | 170% |\n| ë””ìì¸ ì‹œìŠ¤í…œ ì¤€ìˆ˜ | 90% | 98% | 109% |\n| Supabase í†µí•© | 10ê°œ í…Œì´ë¸” | 11ê°œ í…Œì´ë¸” | 110% |\n| ê°œë°œ ê¸°ê°„ | 4ì£¼ | 2.5ì£¼ | 160% (ë¹ ë¦„) |\n| ë²„ê·¸ ë°œìƒë¥  | <5% | 3% | 140% (ë‚®ìŒ) |\n\n---\n\n## ğŸ“ í•µì‹¬ êµí›ˆ (Lessons Learned)\n\n### 1. Guidelines.mdê°€ ëª¨ë“  ê²ƒì„ ë°”ê¾¼ë‹¤\n- **íˆ¬ì:** 3ì‹œê°„ (ë¬¸ì„œ ì‘ì„±)\n- **íšŒìˆ˜:** < 1ì¼ (ì¼ê´€ì„± í–¥ìƒ, ìˆ˜ì • íšŸìˆ˜ ê°ì†Œ)\n- **ROI:** ì•½ 10ë°°\n\n### 2. AIëŠ” ë„êµ¬, ì¸ê°„ì€ ê±´ì¶•ê°€\n- AIê°€ ë²½ëŒì„ ìŒ“ëŠ”ë‹¤ë©´, ì¸ê°„ì€ ì„¤ê³„ë„ë¥¼ ê·¸ë¦°ë‹¤\n- ìƒíƒœ ê´€ë¦¬, UX í˜ì‹ , ë³µí•© ë²„ê·¸ëŠ” ì—¬ì „íˆ ì¸ê°„ì˜ ì˜ì—­\n\n### 3. ì‘ì€ ë‹¨ìœ„ë¡œ, ìì£¼ ê²€ì¦\n- 10ê°œ í™”ë©´ í•œë²ˆì— ìƒì„± âŒ\n- 2ê°œì”© ìƒì„± â†’ ê²€ì¦ â†’ ë‹¤ìŒ ë‹¨ê³„ âœ…\n\n### 4. ëª…ì‹œì  ìš”êµ¬ì‚¬í•­ì´ ì‹œê°„ì„ ì ˆì•½í•œë‹¤\n- \"ë ˆìŠ¤í† ë‘ ì¹´ë“œ ë§Œë“¤ì–´ì¤˜\" (ê²°ê³¼: 3íšŒ ìˆ˜ì •)\n- \"ë ˆìŠ¤í† ë‘ ì¹´ë“œ ë§Œë“¤ì–´ì¤˜ [ìƒì„¸ ëª…ì„¸]\" (ê²°ê³¼: 0íšŒ ìˆ˜ì •)\n\n### 5. ì—ëŸ¬ ë¡œê·¸ëŠ” ì „ì²´ë¥¼, í•­ìƒ\n- \"ì—ëŸ¬ ë‚¬ì–´ìš”\" â†’ AI ëª» ë„ì›€\n- \"[ì „ì²´ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤]\" â†’ AI ì¦‰ì‹œ í•´ê²°\n\n---\n\n# Tier 3: ì‚´ì•„ìˆëŠ” ì§€ì‹ ë² ì´ìŠ¤\n\n## ğŸ“ íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬\n\n### íŒ¨í„´ 1: í‘œì¤€ í™”ë©´ í…œí”Œë¦¿\n\n**í”„ë¡¬í”„íŠ¸:**\n```markdown\n[í™”ë©´ëª…]ì„ ìƒì„±í•´ì£¼ì„¸ìš”.\n\n**í‘œì¤€ êµ¬ì¡°:**\n1. Sticky í—¤ë”\n   - ë°°ê²½: var(--background)\n   - ë’¤ë¡œê°€ê¸° ë²„íŠ¼ (ChevronLeft ì•„ì´ì½˜)\n   - ì œëª© (var(--text-xl))\n   - z-index: 50\n\n2. ë©”ì¸ ì½˜í…ì¸  ì˜ì—­\n   - flex-1 overflow-y-auto\n   - padding: 16px\n\n3. Sticky í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜\n   - Search, MessageCircle, Heart, User ì•„ì´ì½˜\n   - í™œì„± íƒ­: text-primary + border-b-2\n   - z-index: 40\n\n**CSS ë³€ìˆ˜ í•„ìˆ˜:**\n- ìƒ‰ìƒ: var(--*)\n- í°íŠ¸: var(--text-*, --font-family-primary)\n- ê°„ê²©: 8px ë°°ìˆ˜\n```\n\n---\n\n### íŒ¨í„´ 2: Supabase ë°ì´í„° fetch\n\n**ì½”ë“œ í…œí”Œë¦¿:**\n```tsx\nimport { useEffect, useState } from 'react';\nimport { createClient } from './utils/supabase/client';\n\ninterface DataType {\n  // íƒ€ì… ì •ì˜\n}\n\nfunction Component() {\n  const [data, setData] = useState<DataType[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n\n        const supabase = createClient();\n        const { data: result, error: fetchError } = await supabase\n          .from('table_name')\n          .select('*')\n          .order('created_at', { ascending: false });\n\n        if (fetchError) throw fetchError;\n        setData(result || []);\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Unknown error');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  if (loading) return <LoadingSkeleton />;\n  if (error) return <ErrorState message={error} />;\n  if (data.length === 0) return <EmptyState />;\n\n  return <div>{/* ë°ì´í„° ë Œë”ë§ */}</div>;\n}\n```\n\n---\n\n### íŒ¨í„´ 3: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\n\n**í”„ë¡¬í”„íŠ¸:**\n```markdown\n[Entity]Card ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.\n\n**Props:**\n```tsx\ninterface [Entity]CardProps {\n  [entity]: [Entity];\n  onClick?: (id: string) => void;\n  showActions?: boolean;\n}\n```\n\n**ìŠ¤íƒ€ì¼:**\n- ë°°ê²½: var(--card)\n- border-radius: var(--radius-lg)\n- padding: 16px\n- ê·¸ë¦¼ì: var(--elevation-sm)\n- í˜¸ë²„: opacity 0.9\n\n**ë ˆì´ì•„ì›ƒ:**\n- ì´ë¯¸ì§€ (16:9 ë˜ëŠ” 1:1)\n- ì œëª© (var(--text-lg), --font-weight-medium)\n- ë¶€ì œ (var(--text-sm), --muted-foreground)\n- íƒœê·¸/ì•¡ì…˜ ë²„íŠ¼\n```\n\n---\n\n### íŒ¨í„´ 4: ëª¨ë‹¬/ì‹œíŠ¸ ì»´í¬ë„ŒíŠ¸\n\n**ì½”ë“œ í…œí”Œë¦¿:**\n```tsx\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  children: React.ReactNode;\n}\n\nfunction Modal({ isOpen, onClose, children }: ModalProps) {\n  if (!isOpen) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 flex items-end justify-center\"\n      style={{ \n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        zIndex: 100 \n      }}\n      onClick={onClose}\n    >\n      <div \n        className=\"max-w-md w-full\"\n        style={{\n          backgroundColor: 'var(--background)',\n          borderTopLeftRadius: 'var(--radius-xl)',\n          borderTopRightRadius: 'var(--radius-xl)',\n          maxHeight: '90vh',\n          overflow: 'auto'\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n```\n\n---\n\n### íŒ¨í„´ 5: í•„í„°/ì •ë ¬ UI\n\n**í”„ë¡¬í”„íŠ¸:**\n```markdown\ní•„í„° ì„¹ì…˜ì„ ìƒì„±í•´ì£¼ì„¸ìš”.\n\n**ê¸°ëŠ¥:**\n- ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì¹© ëª©ë¡\n- ì„ íƒ/ì„ íƒ í•´ì œ í† ê¸€\n- ë‹¤ì¤‘ ì„ íƒ ì§€ì›\n\n**ìŠ¤íƒ€ì¼:**\n- ì„ íƒë¨: \n  - ë°°ê²½: var(--primary)\n  - í…ìŠ¤íŠ¸: #FFFFFF\n- ì„ íƒ ì•ˆë¨:\n  - ë°°ê²½: var(--secondary)\n  - í…ìŠ¤íŠ¸: var(--foreground)\n- ê°„ê²©: gap-8px\n- padding: 8px 16px\n- border-radius: var(--radius-lg)\n```\n\n---\n\n## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë°ì´í„°ë² ì´ìŠ¤\n\n### ë¬¸ì œ 1: \"Cannot read property 'map' of undefined\"\n\n**ì¦ìƒ:**\n```\nTypeError: Cannot read property 'map' of undefined\n  at RestaurantList (/components/MainScreen.tsx:145:23)\n```\n\n**ì›ì¸:**\n- Supabase ë°ì´í„°ê°€ ë¡œë”©ë˜ê¸° ì „ ë Œë”ë§ ì‹œë„\n- ì´ˆê¸° stateê°€ undefined\n\n**í•´ê²°ì±…:**\n```tsx\n// âŒ ë¬¸ì œ ì½”ë“œ\nconst [restaurants, setRestaurants] = useState();\n\n// âœ… í•´ê²° ì½”ë“œ\nconst [restaurants, setRestaurants] = useState<Restaurant[]>([]);\n\n// ë˜ëŠ” ì¡°ê±´ë¶€ ë Œë”ë§\n{restaurants?.map(...)}\n```\n\n**ì˜ˆë°©ë²•:**\n- í•­ìƒ state ì´ˆê¸°ê°’ ì„¤ì •\n- TypeScript íƒ€ì… ëª…ì‹œ\n- ë¡œë”© ìƒíƒœ ì²˜ë¦¬\n\n---\n\n### ë¬¸ì œ 2: CSS ë³€ìˆ˜ê°€ ì ìš© ì•ˆ ë¨\n\n**ì¦ìƒ:**\n- í™”ë©´ì— ìŠ¤íƒ€ì¼ì´ ë³´ì´ì§€ ì•ŠìŒ\n- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ var(--primary) = (ë¹ˆ ê°’)\n\n**ì›ì¸:**\n- globals.css ë¯¸ì ìš©\n- ì² ì ì˜¤ë¥˜\n- :root ìŠ¤ì½”í”„ ë¬¸ì œ\n\n**í•´ê²°ì±…:**\n```tsx\n// 1. globals.css import í™•ì¸\n// src/main.tsx\nimport './styles/globals.css';\n\n// 2. ì² ì í™•ì¸\nbackgroundColor: 'var(--primary)' // âœ…\nbackgroundColor: 'var(--Primary)' // âŒ ëŒ€ì†Œë¬¸ì\nbackgroundColor: 'var(--primery)' // âŒ ì˜¤íƒ€\n\n// 3. ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ í›„ ì¬ì‹œì‘\n```\n\n**ì˜ˆë°©ë²•:**\n- globals.css íŒŒì¼ ë¨¼ì € í™•ì¸\n- VS Code ìë™ì™„ì„± í™œìš©\n- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ ì‹¤ì‹œê°„ í™•ì¸\n\n---\n\n### ë¬¸ì œ 3: Sticky ìš”ì†Œê°€ ì‘ë™ ì•ˆ í•¨\n\n**ì¦ìƒ:**\n- í—¤ë”ë‚˜ ë„¤ë¹„ê²Œì´ì…˜ì´ ìŠ¤í¬ë¡¤ ì‹œ ë”°ë¼ì˜¤ì§€ ì•ŠìŒ\n\n**ì›ì¸:**\n- ë¶€ëª¨ ìš”ì†Œì— overflow ì†ì„±\n- z-index ì¶©ëŒ\n- position: sticky ì¡°ê±´ ë¯¸ì¶©ì¡±\n\n**í•´ê²°ì±…:**\n```tsx\n// âœ… ì˜¬ë°”ë¥¸ êµ¬ì¡°\n<div className=\"flex flex-col h-screen\">\n  {/* Sticky Header */}\n  <div className=\"sticky top-0\" style={{ zIndex: 50 }}>\n    Header\n  </div>\n\n  {/* Scrollable Content */}\n  <div className=\"flex-1 overflow-y-auto\">\n    Content\n  </div>\n\n  {/* Sticky Bottom Nav */}\n  <div className=\"sticky bottom-0\" style={{ zIndex: 40 }}>\n    Navigation\n  </div>\n</div>\n\n// âŒ ì‘ë™ ì•ˆí•˜ëŠ” êµ¬ì¡°\n<div style={{ overflow: 'hidden' }}> {/* ë¶€ëª¨ì— overflow */}\n  <div className=\"sticky top-0\">Header</div>\n</div>\n```\n\n**ì˜ˆë°©ë²•:**\n- ë¶€ëª¨ ìš”ì†Œì— overflow ì—†ëŠ”ì§€ í™•ì¸\n- h-screen + flex flex-col êµ¬ì¡° ì‚¬ìš©\n- z-index ê³„ì¸µ ëª…í™•íˆ\n\n---\n\n### ë¬¸ì œ 4: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ ë¶ˆì¼ì¹˜\n\n**ì¦ìƒ:**\n- í™”ë©´ë§ˆë‹¤ ë‹¤ë¥¸ ëª¨ì–‘ì˜ ì•„ì´ì½˜\n- ì„ì‹œ divë‚˜ ì‚¬ê°í˜• í‘œì‹œ\n\n**ì›ì¸:**\n- Guidelines.md 7.11 ë¯¸ì¤€ìˆ˜\n- ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ì‹œ ë¶ˆì™„ì „\n\n**í•´ê²°ì±…:**\n```tsx\n// 1. í•„ìˆ˜ import\nimport { Search, MessageCircle, Heart, User } from 'lucide-react';\n\n// 2. í‘œì¤€ í…œí”Œë¦¿ ì‚¬ìš©\n<Search className=\"w-6 h-6 mb-1\" />\n<MessageCircle className=\"w-6 h-6 mb-1\" />\n<Heart className=\"w-6 h-6 mb-1\" />\n<User className=\"w-6 h-6 mb-1\" />\n\n// 3. fontFamily ëª…ì‹œ\nstyle={{ fontFamily: 'var(--font-family-primary)' }}\n```\n\n**ì˜ˆë°©ë²•:**\n- ë„¤ë¹„ê²Œì´ì…˜ ì½”ë“œëŠ” MainScreenì—ì„œ ë³µì‚¬\n- Guidelines.md 7.11 ì²´í¬ë¦¬ìŠ¤íŠ¸ í™•ì¸\n\n---\n\n### ë¬¸ì œ 5: Supabase ì¸ì¦ ì—ëŸ¬\n\n**ì¦ìƒ:**\n```\nError: Invalid API key\nAuthApiError: Invalid login credentials\n```\n\n**ì›ì¸:**\n- í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½\n- ì˜ëª»ëœ í‚¤ ì‚¬ìš©\n\n**í•´ê²°ì±…:**\n```tsx\n// 1. í™˜ê²½ ë³€ìˆ˜ í™•ì¸\nimport { projectId, publicAnonKey } from './utils/supabase/info';\nconsole.log('Project ID:', projectId);\nconsole.log('Anon Key:', publicAnonKey);\n\n// 2. ì˜¬ë°”ë¥¸ í´ë¼ì´ì–¸íŠ¸ ìƒì„±\nimport { createClient } from './utils/supabase/client';\nconst supabase = createClient();\n\n// âŒ ì§ì ‘ ìƒì„± ê¸ˆì§€\nconst supabase = createClient(\n  'https://wrong-url.supabase.co',\n  'wrong-key'\n);\n```\n\n**ì˜ˆë°©ë²•:**\n- utils/supabase/client.tsx ì‚¬ìš©\n- í™˜ê²½ ë³€ìˆ˜ ì§ì ‘ ìˆ˜ì • ê¸ˆì§€\n\n---\n\n## ğŸ“š ê°€ì´ë“œë¼ì¸ ë²„ì „ ê´€ë¦¬\n\n### Guidelines.md ì§„í™” ê³¼ì •\n\n#### Version 1.0 (ì´ˆê¸°)\n- ê¸°ë³¸ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ì •ì˜\n- Pretendard í°íŠ¸ ì‚¬ìš©\n- 8px ê·¸ë¦¬ë“œ ê°œë…\n\n**ë¬¸ì œì :**\n- CSS ë³€ìˆ˜ ì²´ê³„ ë¶ˆì™„ì „\n- íƒ€ì´í¬ê·¸ë˜í”¼ ê·œì¹™ ì• ë§¤í•¨\n- AI í•´ì„ ì—¬ì§€ ë§ìŒ\n\n---\n\n#### Version 2.0 (ë””ìì¸ ì‹œìŠ¤í…œ í™•ë¦½)\n- globals.css 88ê°œ CSS ë³€ìˆ˜ ì •ì˜\n- íƒ€ì´í¬ê·¸ë˜í”¼ ëª…ì‹œì  ê¸ˆì§€\n  - \"Tailwind í´ë˜ìŠ¤ (text-2xl) ì‚¬ìš© ê¸ˆì§€\"\n- 8px ê·¸ë¦¬ë“œ ê°•ì œ\n\n**ê°œì„ :**\n- AI ìƒì„± ì¼ê´€ì„± 60% â†’ 90%\n- ìˆ˜ì • íšŸìˆ˜ 2.5íšŒ â†’ 1.2íšŒ\n\n---\n\n#### Version 3.0 (ë„¤ë¹„ê²Œì´ì…˜ í‘œì¤€í™”)\n- 7.11 ì„¹ì…˜ ì¶”ê°€: \"í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´ì½˜ ì¼ê´€ì„±\"\n- í•„ìˆ˜ ì•„ì´ì½˜ ëª…ì‹œ (Search, MessageCircle, Heart, User)\n- í¬ê¸°, ê°„ê²©, ìƒ‰ìƒ ìƒì„¸ ê·œì •\n\n**ê°œì„ :**\n- ë„¤ë¹„ê²Œì´ì…˜ ì¼ê´€ì„± 0% â†’ 100%\n- 34ê°œ í™”ë©´ ëª¨ë‘ í†µì¼\n\n---\n\n#### Version 4.0 (í˜„ì¬)\n- Supabase í†µí•© ê°€ì´ë“œ ì¶”ê°€\n- TypeScript íƒ€ì… ê°•ì œ\n- ì ‘ê·¼ì„± (WCAG) ê¸°ì¤€ ëª…ì‹œ\n\n**ì§„í–‰ ì¤‘:**\n- ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ\n- í…ŒìŠ¤íŠ¸ ì „ëµ\n- ë‹¤êµ­ì–´ ì§€ì› (i18n)\n\n---\n\n#### Version 5.0 (ê³„íš)\n- Context API ìƒíƒœ ê´€ë¦¬ íŒ¨í„´\n- ì—ëŸ¬ ë°”ìš´ë”ë¦¬ í‘œì¤€\n- PWA êµ¬ì„±\n- ë‹¤í¬ ëª¨ë“œ ì „í™˜\n\n---\n\n### ë²„ì „ë³„ ì£¼ìš” ë³€ê²½ ì‚¬í•­\n\n| ë²„ì „ | ë‚ ì§œ | ì£¼ìš” ë³€ê²½ | ì˜í–¥ |\n|------|------|----------|------|\n| 1.0 | [ë‚ ì§œ] | ì´ˆê¸° ë¬¸ì„œ | ê¸°ë³¸ ë°©í–¥ ì„¤ì • |\n| 2.0 | [ë‚ ì§œ] | CSS ë³€ìˆ˜ ì²´ê³„ | ì¼ê´€ì„± +50% |\n| 3.0 | [ë‚ ì§œ] | ë„¤ë¹„ê²Œì´ì…˜ í‘œì¤€ | í†µì¼ì„± 100% |\n| 4.0 | [ë‚ ì§œ] | Supabase ê°€ì´ë“œ | DB ì—°ë™ ì„±ê³µ |\n| 5.0 | ì˜ˆì • | ê³ ê¸‰ íŒ¨í„´ | í™•ì¥ì„± í™•ë³´ |\n\n---\n\n## ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬\n\n### ê¸°ì—¬ ë°©ë²•\n\n#### 1. ìƒˆë¡œìš´ íŒ¨í„´ ì¶”ê°€\n```markdown\n**íŒ¨í„´ëª…:** [ê°„ê²°í•œ ì œëª©]\n\n**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:** [ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê°€?]\n\n**í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿:**\n[AIì—ê²Œ ì œê³µí•  í”„ë¡¬í”„íŠ¸]\n\n**ì½”ë“œ ì˜ˆì‹œ:**\n[ì‹¤ì œ ì‘ë™í•˜ëŠ” ì½”ë“œ]\n\n**ì£¼ì˜ì‚¬í•­:**\n[í•¨ì •, ì—£ì§€ ì¼€ì´ìŠ¤]\n```\n\n#### 2. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì‚¬ë¡€ ê³µìœ \n```markdown\n**ë¬¸ì œ:** [ì—ëŸ¬ ë©”ì‹œì§€ ë˜ëŠ” ì¦ìƒ]\n\n**ì›ì¸:** [ê·¼ë³¸ ì›ì¸]\n\n**í•´ê²°ì±…:** [ë‹¨ê³„ë³„ í•´ê²° ë°©ë²•]\n\n**ì˜ˆë°©ë²•:** [ì¬ë°œ ë°©ì§€]\n```\n\n#### 3. Guidelines.md ê°œì„  ì œì•ˆ\n- GitHub Issues ë˜ëŠ” Pull Request\n- ëª…í™•í•œ ê·¼ê±°ì™€ Before/After ì œì‹œ\n\n---\n\n### ìš°ìˆ˜ ê¸°ì—¬ ì‚¬ë¡€ (ì˜ˆì‹œ)\n\n#### ê¸°ì—¬ì: [ì´ë¦„]\n**íŒ¨í„´:** ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„\n- Before: í˜ì´ì§€ë„¤ì´ì…˜ ìˆ˜ë™ êµ¬í˜„\n- After: Intersection Observer í™œìš©\n- ì„±ê³¼: ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ, ì½”ë“œ 50% ê°ì†Œ\n\n#### ê¸°ì—¬ì: [ì´ë¦„]\n**íŠ¸ëŸ¬ë¸”ìŠˆíŒ…:** Supabase RLS ì •ì±… ì—ëŸ¬\n- ë¬¸ì œ: ë°ì´í„° ì ‘ê·¼ ê±°ë¶€\n- í•´ê²°: ì •ì±… ê·œì¹™ ìˆ˜ì • ë° ë¬¸ì„œí™”\n- ì˜í–¥: í–¥í›„ ë™ì¼ ì—ëŸ¬ ì œë¡œí™”\n\n---\n\n## ğŸš€ ì‹¤ì „ ì›Œí¬í”Œë¡œìš° ì´ì •ë¦¬\n\n### ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘ (Day 1)\n\n```markdown\n1. Guidelines.md ì‘ì„± (3ì‹œê°„)\n   - ë””ìì¸ ì‹œìŠ¤í…œ ì •ì˜\n   - CSS ë³€ìˆ˜ ì„¤ì •\n   - í‘œì¤€ ì»´í¬ë„ŒíŠ¸ ëª©ë¡\n\n2. globals.css êµ¬ì¶• (1ì‹œê°„)\n   - ìƒ‰ìƒ íŒ”ë ˆíŠ¸\n   - íƒ€ì´í¬ê·¸ë˜í”¼\n   - ê°„ê²© ì²´ê³„\n\n3. ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ 3ê°œ ìƒì„± (1ì‹œê°„)\n   - Header, Button, Card\n   - í…œí”Œë¦¿ìœ¼ë¡œ í™œìš©\n\nâœ… Day 1 ëª©í‘œ: ê²¬ê³ í•œ ê¸°ì´ˆ í™•ë¦½\n```\n\n---\n\n### ë°˜ë³µ ê°œë°œ (Daily)\n\n```markdown\n1. ì•„ì¹¨: ìš°ì„ ìˆœìœ„ í™”ë©´ 2-3ê°œ ì„ ì •\n\n2. ì˜¤ì „:\n   - AIì—ê²Œ Guidelines.md ì œê³µ\n   - ì²« í™”ë©´ ìƒì„± â†’ ê²€ì¦\n   - ë‘ ë²ˆì§¸ í™”ë©´ ìƒì„± â†’ ê²€ì¦\n\n3. ì˜¤í›„:\n   - ì„¸ ë²ˆì§¸ í™”ë©´ ìƒì„±\n   - ì „ì²´ ì¼ê´€ì„± ê²€í† \n   - ë¦¬íŒ©í† ë§\n\n4. ì €ë…:\n   - GitHub ì»¤ë°‹\n   - ë‹¤ìŒ ë‚  ê³„íš\n\nâœ… Daily ëª©í‘œ: 2-3ê°œ í™”ë©´ ì™„ì„±\n```\n\n---\n\n### ì£¼ê°„ ê²€í†  (Weekly)\n\n```markdown\n1. ì½”ë“œ í’ˆì§ˆ ì²´í¬\n   - CSS ë³€ìˆ˜ ì‚¬ìš©ë¥  95%+\n   - íƒ€ì´í¬ê·¸ë˜í”¼ ì¼ê´€ì„±\n   - ë„¤ë¹„ê²Œì´ì…˜ í†µì¼ì„±\n\n2. ì„±ëŠ¥ ì ê²€\n   - ë¡œë”© ì†ë„\n   - ë²ˆë“¤ í¬ê¸°\n   - Lighthouse ì ìˆ˜\n\n3. ë¦¬íŒ©í† ë§\n   - ì¤‘ë³µ ì½”ë“œ ì œê±°\n   - ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬\n   - íƒ€ì… ì •ì˜ ê°•í™”\n\n4. Guidelines.md ì—…ë°ì´íŠ¸\n   - ìƒˆë¡œìš´ íŒ¨í„´ ì¶”ê°€\n   - íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì‚¬ë¡€ ê¸°ë¡\n\nâœ… Weekly ëª©í‘œ: ê¸°ìˆ  ë¶€ì±„ ì œë¡œí™”\n```\n\n---\n\n### ë§ˆì¼ìŠ¤í†¤ ë‹¬ì„± (Monthly)\n\n```markdown\n1. ì „ì²´ ë¦¬ë·°\n   - ëª¨ë“  í™”ë©´ í…ŒìŠ¤íŠ¸\n   - ì‚¬ìš©ì í”Œë¡œìš° ê²€ì¦\n   - ì—£ì§€ ì¼€ì´ìŠ¤ í™•ì¸\n\n2. ë¬¸ì„œí™”\n   - README ì—…ë°ì´íŠ¸\n   - API ë¬¸ì„œ ì‘ì„±\n   - ë°°í¬ ê°€ì´ë“œ\n\n3. ë°±ì—… ë° ì •ë¦¬\n   - GitHub ìµœì‹ í™”\n   - ë¶ˆí•„ìš”í•œ íŒŒì¼ ì‚­ì œ\n   - ë²„ì „ íƒœê·¸\n\n4. íšŒê³ \n   - ë¬´ì—‡ì´ ì˜ ëëŠ”ê°€?\n   - ë¬´ì—‡ì„ ê°œì„ í•  ê²ƒì¸ê°€?\n   - ë‹¤ìŒ ëª©í‘œëŠ”?\n\nâœ… Monthly ëª©í‘œ: ì§€ì† ê°€ëŠ¥í•œ í”„ë¡œì íŠ¸\n```\n\n---\n\n## ğŸ“– ì¶”ì²œ í•™ìŠµ ê²½ë¡œ\n\n### ì´ˆê¸‰ (AI í˜‘ì—… ì…ë¬¸)\n\n**Week 1-2:**\n1. Tier 1 ë¹ ë¥¸ ì°¸ì¡° ê°€ì´ë“œ ìˆ™ì§€\n2. ê°„ë‹¨í•œ ì»´í¬ë„ŒíŠ¸ 5ê°œ ìƒì„± ì—°ìŠµ\n3. CSS ë³€ìˆ˜ ì²´ê³„ ì´í•´\n\n**ëª©í‘œ:**\n- ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ì‘ì„± ê°€ëŠ¥\n- Guidelines.md ì‘ì„± ì‹œì‘\n- 50% ì¼ê´€ì„± ë‹¬ì„±\n\n---\n\n### ì¤‘ê¸‰ (íŒ¨í„´ ë§ˆìŠ¤í„°)\n\n**Week 3-4:**\n1. Tier 2 ì¼€ì´ìŠ¤ ìŠ¤í„°ë”” í•™ìŠµ\n2. Supabase ì—°ë™ ì‹¤ìŠµ\n3. ë³µì¡í•œ í™”ë©´ 10ê°œ êµ¬í˜„\n\n**ëª©í‘œ:**\n- ê³ ê¸‰ í”„ë¡¬í”„íŠ¸ ì‘ì„±\n- íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë…ë¦½ í•´ê²°\n- 90% ì¼ê´€ì„± ë‹¬ì„±\n\n---\n\n### ê³ ê¸‰ (ì•„í‚¤í…ì²˜ ì„¤ê³„)\n\n**Week 5+:**\n1. Tier 3 ì§€ì‹ ë² ì´ìŠ¤ êµ¬ì¶•\n2. ìƒíƒœ ê´€ë¦¬ íŒ¨í„´ ì„¤ê³„\n3. íŒ€ í˜‘ì—… ê°€ì´ë“œë¼ì¸ ìˆ˜ë¦½\n\n**ëª©í‘œ:**\n- Guidelines.md ì™„ì„±ë„ 95%+\n- AI í•œê³„ ê·¹ë³µ ì „ëµ ë³´ìœ \n- í”„ë¡œì íŠ¸ ì „ì²´ ì•„í‚¤í…ì²˜ ë¦¬ë”©\n\n---\n\n## ğŸ¬ ë§ˆë¬´ë¦¬: ë‹¤ìŒ ë‹¨ê³„\n\n### ì¦‰ì‹œ ì‹¤í–‰ (ì´ë²ˆ ì£¼)\n\n1. **Tier 1 ê°€ì´ë“œ ì €ì¥**\n   - ì¦ê²¨ì°¾ê¸° ë˜ëŠ” ë…¸ì…˜ì— ë³µì‚¬\n   - í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ í•„ìˆ˜ ì°¸ì¡°\n\n2. **ì²« í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì‚¬ìš©**\n   - ì»´í¬ë„ŒíŠ¸ ìƒì„± í…œí”Œë¦¿ ì ìš©\n   - ê²°ê³¼ ë¹„êµ (Before/After)\n\n3. **ì²´í¬ë¦¬ìŠ¤íŠ¸ í™œìš©**\n   - ë§¤ í™”ë©´ ìƒì„± í›„ ê²€ì¦\n   - ì¼ê´€ì„± 90%+ ëª©í‘œ\n\n---\n\n### ì´ë²ˆ ë‹¬ (30ì¼ ê³„íš)\n\n1. **Guidelines.md ì‘ì„±**\n   - ì´ ë¬¸ì„œ ì°¸ì¡°í•˜ì—¬ ìì‹ ë§Œì˜ ê°€ì´ë“œ ì œì‘\n   - í”„ë¡œì íŠ¸ íŠ¹ì„± ë°˜ì˜\n\n2. **10ê°œ í™”ë©´ êµ¬í˜„**\n   - ë‹¨ê³„ë³„ ì ‘ê·¼\n   - íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ì¶•\n\n3. **íŠ¸ëŸ¬ë¸”ìŠˆíŒ… DB ì‹œì‘**\n   - ë°œìƒí•œ ë¬¸ì œ ê¸°ë¡\n   - í•´ê²°ì±… ë¬¸ì„œí™”\n\n---\n\n### ì¥ê¸° ëª©í‘œ (3ê°œì›”)\n\n1. **ì™„ì „í•œ ì§€ì‹ ë² ì´ìŠ¤**\n   - GitHub Wiki ë˜ëŠ” Notion\n   - íŒ€ ì „ì²´ ê³µìœ \n\n2. **ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬**\n   - ì˜¤í”ˆì†ŒìŠ¤ íŒ¨í„´ ê³µìœ \n   - ë‹¤ë¥¸ ê°œë°œìì™€ êµë¥˜\n\n3. **ìë™í™” ë„êµ¬ ê°œë°œ**\n   - ì²´í¬ë¦¬ìŠ¤íŠ¸ ìë™ ê²€ì¦\n   - ì½”ë“œ í’ˆì§ˆ ì¸¡ì •\n\n---\n\n## ğŸ“ ì—°ë½ ë° í”¼ë“œë°±\n\nì´ ê°€ì´ë“œì— ëŒ€í•œ í”¼ë“œë°±, ì§ˆë¬¸, ê°œì„  ì œì•ˆì€ ì–¸ì œë“  í™˜ì˜í•©ë‹ˆë‹¤!\n\n**GitHub:** [ì €ì¥ì†Œ ë§í¬]\n**ì´ë©”ì¼:** [ì—°ë½ì²˜]\n**Discord:** [ì»¤ë®¤ë‹ˆí‹° ë§í¬]\n\n---\n\n## ğŸ“ ë¼ì´ì„ ìŠ¤ ë° í¬ë ˆë”§\n\n**ì‘ì„±ì:** [ê·€í•˜ì˜ ì´ë¦„]\n**í”„ë¡œì íŠ¸:** í•œì‹ë‹¹ (han sik dang)\n**AI ë„êµ¬:** Figma Make (Claude), Gemini\n**ë²„ì „:** 1.0\n**ìµœì¢… ì—…ë°ì´íŠ¸:** 2025. 10. 20.\n\n**ë¼ì´ì„ ìŠ¤:** MIT License (ììœ ë¡­ê²Œ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬ ê°€ëŠ¥)\n\n**í¬ë ˆë”§:**\n- Figma Make by Figma\n- Claude by Anthropic\n- Gemini by Google\n- Supabase\n- React + TypeScript\n- Tailwind CSS\n\n---\n\n## ğŸ™ ê°ì‚¬ì˜ ë§\n\nì´ í”„ë¡œì íŠ¸ëŠ” AIì™€ ì¸ê°„ì˜ í˜‘ì—…ìœ¼ë¡œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\nAIëŠ” ì†ë„ë¥¼, ì¸ê°„ì€ ë°©í–¥ì„ ì œê³µí–ˆìŠµë‹ˆë‹¤.\nì•ìœ¼ë¡œë„ ì´ëŸ¬í•œ ì‹œë„ˆì§€ê°€ ë” ë§ì€ í”„ë¡œì íŠ¸ì—ì„œ ë°œíœ˜ë˜ê¸°ë¥¼ ê¸°ëŒ€í•©ë‹ˆë‹¤.\n\n**Happy Coding! ğŸš€**\n\n---\n\n_ì´ ë¬¸ì„œëŠ” ì‚´ì•„ìˆëŠ” ë¬¸ì„œì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ê°€ ì§„í™”í•¨ì— ë”°ë¼ ê³„ì† ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤._\n_ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025. 10. 20._\n","size_bytes":62387},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"server/storage.ts":{"content":"import { neon } from \"@neondatabase/serverless\";\nimport { drizzle as drizzleNeon } from \"drizzle-orm/neon-http\";\nimport postgres from \"postgres\";\nimport { drizzle as drizzlePostgres } from \"drizzle-orm/postgres-js\";\nimport { eq, desc, sql, and, or, ilike, lte, gte } from \"drizzle-orm\";\nimport {\n  type User,\n  type UpsertUser,\n  type Restaurant,\n  type InsertRestaurant,\n  type Review,\n  type InsertReview,\n  type SavedRestaurant,\n  type InsertSavedRestaurant,\n  type Announcement,\n  type InsertAnnouncement,\n  type EventBanner,\n  type InsertEventBanner,\n  type RestaurantInsights,\n  type InsertRestaurantInsights,\n  type Menu,\n  type InsertMenu,\n  type YoutubeVideo,\n  type InsertYoutubeVideo,\n  type ExternalReview,\n  type InsertExternalReview,\n  type RestaurantOwner,\n  type InsertRestaurantOwner,\n  type ReviewResponse,\n  type InsertReviewResponse,\n  type Promotion,\n  type InsertPromotion,\n  type RestaurantImage,\n  type InsertRestaurantImage,\n  type RestaurantApplication,\n  type InsertRestaurantApplication,\n  type OwnerInquiry,\n  type InsertOwnerInquiry,\n  type CustomerInquiry,\n  type InsertCustomerInquiry,\n  type PartnershipInquiry,\n  type InsertPartnershipInquiry,\n  type OwnerNotice,\n  type InsertOwnerNotice,\n  type Payment,\n  type InsertPayment,\n  type BlogPost,\n  type InsertBlogPost,\n  users,\n  restaurants,\n  reviews,\n  savedRestaurants,\n  announcements,\n  eventBanners,\n  restaurantInsights,\n  menus,\n  youtubeVideos,\n  externalReviews,\n  restaurantOwners,\n  reviewResponses,\n  promotions,\n  restaurantImages,\n  restaurantApplications,\n  ownerInquiries,\n  customerInquiries,\n  partnershipInquiries,\n  ownerNotices,\n  payments,\n  blogPosts,\n} from \"@shared/schema\";\n\nconst DATABASE_URL = process.env.DATABASE_URL!;\nconst USE_SUPABASE = process.env.USE_SUPABASE === \"true\";\n\nconst db = USE_SUPABASE\n  ? drizzlePostgres(postgres(DATABASE_URL, {\n      max: 10,\n      idle_timeout: 20,\n      connect_timeout: 10,\n    }))\n  : drizzleNeon(neon(DATABASE_URL));\n\nexport interface IStorage {\n  // User operations for Replit Auth\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  \n  getAllRestaurants(sortBy?: string): Promise<Restaurant[]>;\n  getRestaurant(id: string): Promise<Restaurant | undefined>;\n  getRestaurantsByDistrict(district: string): Promise<Restaurant[]>;\n  getRestaurantsByCategory(category: string): Promise<Restaurant[]>;\n  getFeaturedRestaurants(): Promise<Restaurant[]>;\n  searchRestaurants(query: string): Promise<Restaurant[]>;\n  createRestaurant(restaurant: InsertRestaurant): Promise<Restaurant>;\n  updateRestaurantRating(id: string): Promise<void>;\n  updateRestaurantRatings(id: string, data: {\n    googlePlaceId?: string | null;\n    googleRating?: number | null;\n    googleReviewCount?: number | null;\n    naverPlaceId?: string | null;\n    naverRating?: number | null;\n    naverReviewCount?: number | null;\n    popularityScore?: number | null;\n  }): Promise<void>;\n  \n  getReviewsByRestaurant(restaurantId: string): Promise<Review[]>;\n  createReview(review: InsertReview): Promise<Review>;\n  updateReview(reviewId: string, userId: string, data: { rating: number; comment: string }): Promise<Review | undefined>;\n  deleteReview(reviewId: string, userId: string): Promise<boolean>;\n  \n  getSavedRestaurants(userId: string): Promise<Restaurant[]>;\n  saveRestaurant(data: InsertSavedRestaurant): Promise<SavedRestaurant>;\n  unsaveRestaurant(userId: string, restaurantId: string): Promise<void>;\n  isRestaurantSaved(userId: string, restaurantId: string): Promise<boolean>;\n  \n  getRecentAnnouncements(limit: number): Promise<Announcement[]>;\n  createAnnouncement(announcement: InsertAnnouncement): Promise<Announcement>;\n  \n  getActiveEventBanners(): Promise<EventBanner[]>;\n  createEventBanner(banner: InsertEventBanner): Promise<EventBanner>;\n  \n  getRestaurantInsights(restaurantId: string): Promise<RestaurantInsights | undefined>;\n  createRestaurantInsights(insights: InsertRestaurantInsights): Promise<RestaurantInsights>;\n  updateRestaurantInsights(restaurantId: string, insights: Partial<InsertRestaurantInsights>): Promise<RestaurantInsights | undefined>;\n  \n  getMenusByRestaurant(restaurantId: string): Promise<Menu[]>;\n  createMenu(menu: InsertMenu): Promise<Menu>;\n  updateMenu(id: string, userId: string, restaurantId: string, data: Partial<InsertMenu>): Promise<Menu | undefined>;\n  deleteMenu(id: string, userId: string, restaurantId: string): Promise<boolean>;\n  \n  getYoutubeVideosByRestaurant(restaurantId: string): Promise<YoutubeVideo[]>;\n  createYoutubeVideo(video: InsertYoutubeVideo): Promise<YoutubeVideo>;\n  \n  getExternalReviewsByRestaurant(restaurantId: string): Promise<ExternalReview[]>;\n  createExternalReview(review: InsertExternalReview): Promise<ExternalReview>;\n  \n  // Restaurant Owner operations\n  getRestaurantsByOwner(userId: string): Promise<Restaurant[]>;\n  isRestaurantOwner(userId: string, restaurantId: string): Promise<boolean>;\n  createRestaurantOwner(owner: InsertRestaurantOwner): Promise<RestaurantOwner>;\n  \n  // Review Response operations\n  getResponseByReviewId(reviewId: string): Promise<ReviewResponse | undefined>;\n  getResponsesByRestaurant(restaurantId: string): Promise<ReviewResponse[]>;\n  createReviewResponse(response: InsertReviewResponse): Promise<ReviewResponse>;\n  updateReviewResponse(id: string, userId: string, restaurantId: string, responseText: string): Promise<ReviewResponse | undefined>;\n  deleteReviewResponse(id: string, userId: string, restaurantId: string): Promise<boolean>;\n  \n  // Promotion operations\n  getPromotionsByRestaurant(restaurantId: string): Promise<Promotion[]>;\n  getActivePromotionsByRestaurant(restaurantId: string): Promise<Promotion[]>;\n  createPromotion(promotion: InsertPromotion): Promise<Promotion>;\n  updatePromotion(id: string, userId: string, restaurantId: string, data: Partial<InsertPromotion>): Promise<Promotion | undefined>;\n  deletePromotion(id: string, userId: string, restaurantId: string): Promise<boolean>;\n  \n  // Dashboard statistics\n  getRestaurantDashboardStats(restaurantId: string): Promise<{\n    totalReviews: number;\n    averageRating: number;\n    ratingDistribution: { rating: number; count: number }[];\n    recentReviews: Review[];\n    monthlyReviewCounts: { month: string; count: number }[];\n  }>;\n  \n  // Restaurant Image operations\n  getRestaurantImages(restaurantId: string): Promise<RestaurantImage[]>;\n  createRestaurantImage(image: InsertRestaurantImage): Promise<RestaurantImage>;\n  deleteRestaurantImage(id: string, userId: string, restaurantId: string): Promise<boolean>;\n  updateImageOrder(id: string, displayOrder: number): Promise<void>;\n  \n  // Admin operations\n  getAllUsers(): Promise<Array<User & { savedCount: number }>>;\n  updateUserAdminStatus(userId: string, isAdmin: number): Promise<User | undefined>;\n  updateUserTier(userId: string, tier: string): Promise<User | undefined>;\n  updateUser(userId: string, data: Partial<{\n    tier: string;\n    language: string;\n    ssoProvider: string;\n    region: string;\n  }>): Promise<User | undefined>;\n  deleteUser(userId: string): Promise<boolean>;\n  getAdminDashboardStats(): Promise<{\n    totalRestaurants: number;\n    totalUsers: number;\n    totalReviews: number;\n    totalAnnouncements: number;\n    recentUsers: User[];\n    recentReviews: Review[];\n    restaurantsByCuisine: { cuisine: string; count: number }[];\n    reviewsPerDay: { date: string; count: number }[];\n  }>;\n  updateRestaurant(id: string, data: Partial<InsertRestaurant>): Promise<Restaurant | undefined>;\n  deleteRestaurant(id: string): Promise<boolean>;\n  getAllReviews(limit?: number): Promise<Review[]>;\n  deleteReviewAsAdmin(reviewId: string): Promise<boolean>;\n  getAllAnnouncements(): Promise<Announcement[]>;\n  updateAnnouncement(id: string, data: Partial<InsertAnnouncement>): Promise<Announcement | undefined>;\n  deleteAnnouncement(id: string): Promise<boolean>;\n  getAllEventBanners(): Promise<EventBanner[]>;\n  updateEventBanner(id: string, data: Partial<InsertEventBanner>): Promise<EventBanner | undefined>;\n  deleteEventBanner(id: string): Promise<boolean>;\n  \n  // Restaurant Applications\n  getAllRestaurantApplications(): Promise<RestaurantApplication[]>;\n  processRestaurantApplication(id: string, status: string, adminNote: string): Promise<RestaurantApplication | undefined>;\n  \n  // Owner Inquiries\n  getAllOwnerInquiries(): Promise<OwnerInquiry[]>;\n  respondToOwnerInquiry(id: string, adminResponse: string, status: string): Promise<OwnerInquiry | undefined>;\n  \n  // Customer Inquiries\n  getAllCustomerInquiries(): Promise<CustomerInquiry[]>;\n  respondToCustomerInquiry(id: string, adminResponse: string, status: string): Promise<CustomerInquiry | undefined>;\n  \n  // Partnership Inquiries\n  getAllPartnershipInquiries(): Promise<PartnershipInquiry[]>;\n  processPartnershipInquiry(id: string, status: string, adminNote: string): Promise<PartnershipInquiry | undefined>;\n  \n  // Owner Notices\n  getAllOwnerNotices(): Promise<OwnerNotice[]>;\n  createOwnerNotice(notice: InsertOwnerNotice): Promise<OwnerNotice>;\n  \n  // Payments\n  getAllPayments(): Promise<Payment[]>;\n  \n  // User Analytics\n  getUsersByTier(): Promise<{ tier: string; count: number; users: User[] }[]>;\n  getUserAnalytics(): Promise<{\n    usersBySsoProvider: { ssoProvider: string | null; count: number }[];\n    usersByRegion: { region: string | null; count: number }[];\n    usersByTier: { tier: string; count: number }[];\n  }>;\n  getUserDetails(userId: string): Promise<{\n    user: User;\n    reviews: Review[];\n    savedRestaurants: Array<SavedRestaurant & { restaurant: Restaurant }>;\n    customerInquiries: CustomerInquiry[];\n    stats: {\n      totalReviews: number;\n      averageRating: number;\n      totalSaved: number;\n    };\n  } | undefined>;\n  \n  // Blog Posts\n  getAllBlogPosts(): Promise<BlogPost[]>;\n  \n  // Priority Tasks\n  getAdminPriorityTasks(): Promise<{\n    pendingApplications: RestaurantApplication[];\n    pendingOwnerInquiries: OwnerInquiry[];\n    pendingCustomerInquiries: CustomerInquiry[];\n    pendingPartnershipInquiries: PartnershipInquiry[];\n  }>;\n  \n  // External Data Collection Statistics\n  getRestaurantCount(): Promise<number>;\n  getReviewCount(): Promise<number>;\n  getMenuCount(): Promise<number>;\n}\n\nexport class DbStorage implements IStorage {\n  // User operations for Replit Auth\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id));\n    return result[0];\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const result = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.email,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return result[0];\n  }\n\n  async getAllRestaurants(sortBy?: string): Promise<Restaurant[]> {\n    let orderByClause;\n    \n    switch (sortBy) {\n      case 'popularity':\n        orderByClause = desc(restaurants.popularityScore);\n        break;\n      case 'rating':\n        orderByClause = desc(restaurants.rating);\n        break;\n      case 'reviews':\n        orderByClause = desc(restaurants.reviewCount);\n        break;\n      case 'visitors':\n        orderByClause = desc(restaurants.visitors1m);\n        break;\n      default:\n        orderByClause = desc(restaurants.rating);\n    }\n    \n    return await db.select().from(restaurants).orderBy(orderByClause);\n  }\n\n  async getRestaurant(id: string): Promise<Restaurant | undefined> {\n    const result = await db.select().from(restaurants).where(eq(restaurants.id, id));\n    return result[0];\n  }\n\n  async getRestaurantsByDistrict(district: string): Promise<Restaurant[]> {\n    return await db.select().from(restaurants).where(eq(restaurants.district, district));\n  }\n\n  async getRestaurantsByCategory(category: string): Promise<Restaurant[]> {\n    return await db.select().from(restaurants).where(eq(restaurants.category, category));\n  }\n\n  async searchRestaurants(query: string): Promise<Restaurant[]> {\n    // Use Drizzle's safe ilike function to prevent SQL injection\n    const searchPattern = `%${query}%`;\n    return await db.select().from(restaurants).where(\n      or(\n        ilike(restaurants.name, searchPattern),\n        ilike(restaurants.nameEn, searchPattern),\n        ilike(restaurants.cuisine, searchPattern)\n      )\n    );\n  }\n\n  async getFeaturedRestaurants(): Promise<Restaurant[]> {\n    return await db.select().from(restaurants)\n      .where(eq(restaurants.isFeatured, 1))\n      .orderBy(desc(restaurants.rating));\n  }\n\n  async createRestaurant(insertRestaurant: InsertRestaurant): Promise<Restaurant> {\n    const result = await db.insert(restaurants).values(insertRestaurant).returning();\n    return result[0];\n  }\n\n  async updateRestaurantRating(id: string): Promise<void> {\n    const restaurantReviews = await db.select().from(reviews).where(eq(reviews.restaurantId, id));\n    \n    if (restaurantReviews.length === 0) {\n      await db.update(restaurants)\n        .set({ rating: 0, reviewCount: 0 })\n        .where(eq(restaurants.id, id));\n      return;\n    }\n\n    const avgRating = restaurantReviews.reduce((sum, r) => sum + r.rating, 0) / restaurantReviews.length;\n    \n    await db.update(restaurants)\n      .set({ \n        rating: Math.round(avgRating * 10) / 10,\n        reviewCount: restaurantReviews.length \n      })\n      .where(eq(restaurants.id, id));\n  }\n\n  async updateRestaurantRatings(id: string, data: {\n    googlePlaceId?: string | null;\n    googleRating?: number | null;\n    googleReviewCount?: number | null;\n    naverPlaceId?: string | null;\n    naverRating?: number | null;\n    naverReviewCount?: number | null;\n    popularityScore?: number | null;\n  }): Promise<void> {\n    await db.update(restaurants)\n      .set({\n        googlePlaceId: data.googlePlaceId,\n        googleRating: data.googleRating,\n        googleReviewCount: data.googleReviewCount,\n        naverPlaceId: data.naverPlaceId,\n        naverRating: data.naverRating,\n        naverReviewCount: data.naverReviewCount,\n        popularityScore: data.popularityScore,\n      })\n      .where(eq(restaurants.id, id));\n  }\n\n  async getReviewsByRestaurant(restaurantId: string): Promise<Review[]> {\n    return await db.select().from(reviews)\n      .where(eq(reviews.restaurantId, restaurantId))\n      .orderBy(desc(reviews.createdAt));\n  }\n\n  async createReview(insertReview: InsertReview): Promise<Review> {\n    const result = await db.insert(reviews).values(insertReview).returning();\n    await this.updateRestaurantRating(insertReview.restaurantId);\n    return result[0];\n  }\n\n  async updateReview(reviewId: string, userId: string, data: { rating: number; comment: string }): Promise<Review | undefined> {\n    const result = await db.update(reviews)\n      .set({ rating: data.rating, comment: data.comment })\n      .where(sql`${reviews.id} = ${reviewId} AND ${reviews.userId} = ${userId}`)\n      .returning();\n    \n    if (result.length > 0) {\n      await this.updateRestaurantRating(result[0].restaurantId);\n      return result[0];\n    }\n    return undefined;\n  }\n\n  async deleteReview(reviewId: string, userId: string): Promise<boolean> {\n    // Use safe and() function instead of raw SQL\n    const review = await db.select().from(reviews)\n      .where(and(eq(reviews.id, reviewId), eq(reviews.userId, userId)));\n    \n    if (review.length === 0) {\n      return false;\n    }\n\n    const restaurantId = review[0].restaurantId;\n\n    // Use transaction to ensure data consistency\n    return await db.transaction(async (tx) => {\n      await tx.delete(reviews)\n        .where(and(eq(reviews.id, reviewId), eq(reviews.userId, userId)));\n      \n      await this.updateRestaurantRating(restaurantId);\n      return true;\n    });\n  }\n\n  async getSavedRestaurants(userId: string): Promise<Restaurant[]> {\n    const saved = await db.select({\n      restaurant: restaurants,\n    })\n    .from(savedRestaurants)\n    .innerJoin(restaurants, eq(savedRestaurants.restaurantId, restaurants.id))\n    .where(eq(savedRestaurants.userId, userId))\n    .orderBy(desc(savedRestaurants.createdAt));\n\n    return saved.map(s => s.restaurant);\n  }\n\n  async saveRestaurant(data: InsertSavedRestaurant): Promise<SavedRestaurant> {\n    const result = await db.insert(savedRestaurants).values(data).returning();\n    return result[0];\n  }\n\n  async unsaveRestaurant(userId: string, restaurantId: string): Promise<void> {\n    // Use safe and() function instead of raw SQL\n    await db.delete(savedRestaurants)\n      .where(\n        and(\n          eq(savedRestaurants.userId, userId),\n          eq(savedRestaurants.restaurantId, restaurantId)\n        )\n      );\n  }\n\n  async isRestaurantSaved(userId: string, restaurantId: string): Promise<boolean> {\n    // Use safe and() function instead of raw SQL\n    const result = await db.select().from(savedRestaurants)\n      .where(\n        and(\n          eq(savedRestaurants.userId, userId),\n          eq(savedRestaurants.restaurantId, restaurantId)\n        )\n      );\n    return result.length > 0;\n  }\n\n  async getRecentAnnouncements(limit: number): Promise<Announcement[]> {\n    return await db.select().from(announcements)\n      .orderBy(desc(announcements.isPinned), desc(announcements.createdAt))\n      .limit(limit);\n  }\n\n  async createAnnouncement(insertAnnouncement: InsertAnnouncement): Promise<Announcement> {\n    const result = await db.insert(announcements).values(insertAnnouncement).returning();\n    return result[0];\n  }\n\n  async getActiveEventBanners(): Promise<EventBanner[]> {\n    const now = new Date();\n    return await db.select().from(eventBanners)\n      .where(\n        and(\n          eq(eventBanners.isActive, 1),\n          lte(eventBanners.startDate, now),\n          gte(eventBanners.endDate, now)\n        )\n      )\n      .orderBy(eventBanners.displayOrder);\n  }\n\n  async createEventBanner(insertBanner: InsertEventBanner): Promise<EventBanner> {\n    const result = await db.insert(eventBanners).values(insertBanner).returning();\n    return result[0];\n  }\n\n  async getRestaurantInsights(restaurantId: string): Promise<RestaurantInsights | undefined> {\n    const result = await db.select().from(restaurantInsights)\n      .where(eq(restaurantInsights.restaurantId, restaurantId));\n    return result[0];\n  }\n\n  async createRestaurantInsights(insertInsights: InsertRestaurantInsights): Promise<RestaurantInsights> {\n    const result = await db.insert(restaurantInsights).values(insertInsights).returning();\n    return result[0];\n  }\n\n  async updateRestaurantInsights(restaurantId: string, updates: Partial<InsertRestaurantInsights>): Promise<RestaurantInsights | undefined> {\n    const result = await db.update(restaurantInsights)\n      .set({ ...updates, lastUpdated: new Date() })\n      .where(eq(restaurantInsights.restaurantId, restaurantId))\n      .returning();\n    return result[0];\n  }\n\n  async getMenusByRestaurant(restaurantId: string): Promise<Menu[]> {\n    return await db.select().from(menus)\n      .where(eq(menus.restaurantId, restaurantId))\n      .orderBy(menus.displayOrder, desc(menus.isPopular), desc(menus.isRecommended));\n  }\n\n  async createMenu(insertMenu: InsertMenu): Promise<Menu> {\n    const result = await db.insert(menus).values(insertMenu).returning();\n    return result[0];\n  }\n\n  async updateMenu(id: string, userId: string, restaurantId: string, data: Partial<InsertMenu>): Promise<Menu | undefined> {\n    const isOwner = await this.isRestaurantOwner(userId, restaurantId);\n    if (!isOwner) {\n      return undefined;\n    }\n\n    const result = await db.update(menus)\n      .set(data)\n      .where(and(eq(menus.id, id), eq(menus.restaurantId, restaurantId)))\n      .returning();\n    return result[0];\n  }\n\n  async deleteMenu(id: string, userId: string, restaurantId: string): Promise<boolean> {\n    const isOwner = await this.isRestaurantOwner(userId, restaurantId);\n    if (!isOwner) {\n      return false;\n    }\n\n    const result = await db.delete(menus)\n      .where(and(eq(menus.id, id), eq(menus.restaurantId, restaurantId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getYoutubeVideosByRestaurant(restaurantId: string): Promise<YoutubeVideo[]> {\n    return await db.select().from(youtubeVideos)\n      .where(eq(youtubeVideos.restaurantId, restaurantId))\n      .orderBy(desc(youtubeVideos.relevanceScore), desc(youtubeVideos.viewCount));\n  }\n\n  async createYoutubeVideo(insertVideo: InsertYoutubeVideo): Promise<YoutubeVideo> {\n    const result = await db.insert(youtubeVideos).values(insertVideo).returning();\n    return result[0];\n  }\n\n  async getExternalReviewsByRestaurant(restaurantId: string): Promise<ExternalReview[]> {\n    return await db.select().from(externalReviews)\n      .where(eq(externalReviews.restaurantId, restaurantId))\n      .orderBy(desc(externalReviews.publishedAt));\n  }\n\n  async createExternalReview(insertReview: InsertExternalReview): Promise<ExternalReview> {\n    const result = await db.insert(externalReviews).values(insertReview).returning();\n    return result[0];\n  }\n\n  // Restaurant Owner operations\n  async getRestaurantsByOwner(userId: string): Promise<Restaurant[]> {\n    const result = await db\n      .select({ restaurant: restaurants })\n      .from(restaurantOwners)\n      .innerJoin(restaurants, eq(restaurantOwners.restaurantId, restaurants.id))\n      .where(eq(restaurantOwners.userId, userId));\n    return result.map(r => r.restaurant);\n  }\n\n  async isRestaurantOwner(userId: string, restaurantId: string): Promise<boolean> {\n    const result = await db\n      .select()\n      .from(restaurantOwners)\n      .where(\n        sql`${restaurantOwners.userId} = ${userId} AND ${restaurantOwners.restaurantId} = ${restaurantId}`\n      );\n    return result.length > 0;\n  }\n\n  async createRestaurantOwner(owner: InsertRestaurantOwner): Promise<RestaurantOwner> {\n    const result = await db.insert(restaurantOwners).values(owner).returning();\n    return result[0];\n  }\n\n  // Review Response operations\n  async getResponseByReviewId(reviewId: string): Promise<ReviewResponse | undefined> {\n    const result = await db\n      .select()\n      .from(reviewResponses)\n      .where(eq(reviewResponses.reviewId, reviewId));\n    return result[0];\n  }\n\n  async getResponsesByRestaurant(restaurantId: string): Promise<ReviewResponse[]> {\n    return await db\n      .select()\n      .from(reviewResponses)\n      .where(eq(reviewResponses.restaurantId, restaurantId))\n      .orderBy(desc(reviewResponses.createdAt));\n  }\n\n  async createReviewResponse(response: InsertReviewResponse): Promise<ReviewResponse> {\n    const result = await db.insert(reviewResponses).values(response).returning();\n    return result[0];\n  }\n\n  async updateReviewResponse(\n    id: string,\n    userId: string,\n    restaurantId: string,\n    responseText: string\n  ): Promise<ReviewResponse | undefined> {\n    // First verify ownership\n    const existing = await db\n      .select()\n      .from(reviewResponses)\n      .where(eq(reviewResponses.id, id));\n    \n    if (existing.length === 0 || existing[0].userId !== userId || existing[0].restaurantId !== restaurantId) {\n      return undefined;\n    }\n\n    const result = await db\n      .update(reviewResponses)\n      .set({ response: responseText, updatedAt: new Date() })\n      .where(eq(reviewResponses.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteReviewResponse(id: string, userId: string, restaurantId: string): Promise<boolean> {\n    // First verify ownership\n    const existing = await db\n      .select()\n      .from(reviewResponses)\n      .where(eq(reviewResponses.id, id));\n    \n    if (existing.length === 0 || existing[0].userId !== userId || existing[0].restaurantId !== restaurantId) {\n      return false;\n    }\n\n    await db.delete(reviewResponses).where(eq(reviewResponses.id, id));\n    return true;\n  }\n\n  // Promotion operations\n  async getPromotionsByRestaurant(restaurantId: string): Promise<Promotion[]> {\n    return await db\n      .select()\n      .from(promotions)\n      .where(eq(promotions.restaurantId, restaurantId))\n      .orderBy(desc(promotions.createdAt));\n  }\n\n  async getActivePromotionsByRestaurant(restaurantId: string): Promise<Promotion[]> {\n    const now = new Date();\n    return await db\n      .select()\n      .from(promotions)\n      .where(\n        and(\n          eq(promotions.restaurantId, restaurantId),\n          eq(promotions.isActive, 1),\n          lte(promotions.startDate, now),\n          gte(promotions.endDate, now)\n        )\n      )\n      .orderBy(desc(promotions.createdAt));\n  }\n\n  async createPromotion(promotion: InsertPromotion): Promise<Promotion> {\n    const result = await db.insert(promotions).values(promotion).returning();\n    return result[0];\n  }\n\n  async updatePromotion(\n    id: string,\n    userId: string,\n    restaurantId: string,\n    data: Partial<InsertPromotion>\n  ): Promise<Promotion | undefined> {\n    // Verify ownership first\n    const isOwner = await this.isRestaurantOwner(userId, restaurantId);\n    if (!isOwner) {\n      return undefined;\n    }\n\n    const existing = await db\n      .select()\n      .from(promotions)\n      .where(eq(promotions.id, id));\n    \n    if (existing.length === 0 || existing[0].restaurantId !== restaurantId) {\n      return undefined;\n    }\n\n    const result = await db\n      .update(promotions)\n      .set(data)\n      .where(eq(promotions.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deletePromotion(id: string, userId: string, restaurantId: string): Promise<boolean> {\n    // Verify ownership first\n    const isOwner = await this.isRestaurantOwner(userId, restaurantId);\n    if (!isOwner) {\n      return false;\n    }\n\n    const existing = await db\n      .select()\n      .from(promotions)\n      .where(eq(promotions.id, id));\n    \n    if (existing.length === 0 || existing[0].restaurantId !== restaurantId) {\n      return false;\n    }\n\n    await db.delete(promotions).where(eq(promotions.id, id));\n    return true;\n  }\n\n  // Dashboard statistics\n  async getRestaurantDashboardStats(restaurantId: string): Promise<{\n    totalReviews: number;\n    averageRating: number;\n    ratingDistribution: { rating: number; count: number }[];\n    recentReviews: Review[];\n    monthlyReviewCounts: { month: string; count: number }[];\n  }> {\n    // Get total reviews and average rating\n    const reviewStats = await db\n      .select({\n        totalReviews: sql<number>`cast(count(*) as int)`,\n        averageRating: sql<number>`cast(avg(${reviews.rating}) as real)`,\n      })\n      .from(reviews)\n      .where(eq(reviews.restaurantId, restaurantId));\n\n    // Get rating distribution\n    const ratingDist = await db\n      .select({\n        rating: reviews.rating,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(reviews)\n      .where(eq(reviews.restaurantId, restaurantId))\n      .groupBy(reviews.rating)\n      .orderBy(desc(reviews.rating));\n\n    // Get recent reviews (last 10)\n    const recentReviews = await db\n      .select()\n      .from(reviews)\n      .where(eq(reviews.restaurantId, restaurantId))\n      .orderBy(desc(reviews.createdAt))\n      .limit(10);\n\n    // Get monthly review counts (last 6 months)\n    const monthlyStats = await db\n      .select({\n        month: sql<string>`to_char(${reviews.createdAt}, 'YYYY-MM')`,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(reviews)\n      .where(\n        sql`${reviews.restaurantId} = ${restaurantId} AND ${reviews.createdAt} >= NOW() - INTERVAL '6 months'`\n      )\n      .groupBy(sql`to_char(${reviews.createdAt}, 'YYYY-MM')`)\n      .orderBy(sql`to_char(${reviews.createdAt}, 'YYYY-MM')`);\n\n    return {\n      totalReviews: reviewStats[0]?.totalReviews || 0,\n      averageRating: reviewStats[0]?.averageRating || 0,\n      ratingDistribution: ratingDist,\n      recentReviews: recentReviews,\n      monthlyReviewCounts: monthlyStats,\n    };\n  }\n\n  // Restaurant Image operations\n  async getRestaurantImages(restaurantId: string): Promise<RestaurantImage[]> {\n    const result = await db\n      .select()\n      .from(restaurantImages)\n      .where(eq(restaurantImages.restaurantId, restaurantId))\n      .orderBy(restaurantImages.displayOrder);\n    return result;\n  }\n\n  async createRestaurantImage(image: InsertRestaurantImage): Promise<RestaurantImage> {\n    const result = await db.insert(restaurantImages).values(image).returning();\n    return result[0];\n  }\n\n  async deleteRestaurantImage(id: string, userId: string, restaurantId: string): Promise<boolean> {\n    // Verify ownership\n    const isOwner = await this.isRestaurantOwner(userId, restaurantId);\n    if (!isOwner) {\n      return false;\n    }\n\n    const result = await db\n      .delete(restaurantImages)\n      .where(eq(restaurantImages.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async updateImageOrder(id: string, displayOrder: number): Promise<void> {\n    await db\n      .update(restaurantImages)\n      .set({ displayOrder })\n      .where(eq(restaurantImages.id, id));\n  }\n\n  // Admin operations\n  async getAllUsers(): Promise<Array<User & { savedCount: number }>> {\n    const allUsers = await db.select().from(users).orderBy(desc(users.createdAt));\n    \n    // Get saved count for each user\n    const usersWithCounts = await Promise.all(\n      allUsers.map(async (user) => {\n        const saved = await db\n          .select()\n          .from(savedRestaurants)\n          .where(eq(savedRestaurants.userId, user.id));\n        \n        return {\n          ...user,\n          savedCount: saved.length,\n        };\n      })\n    );\n    \n    return usersWithCounts;\n  }\n\n  async updateUserAdminStatus(userId: string, isAdmin: number): Promise<User | undefined> {\n    const result = await db\n      .update(users)\n      .set({ isAdmin, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return result[0];\n  }\n\n  async getUserDetails(userId: string): Promise<{\n    user: User;\n    reviews: Review[];\n    savedRestaurants: Array<SavedRestaurant & { restaurant: Restaurant }>;\n    customerInquiries: CustomerInquiry[];\n    stats: {\n      totalReviews: number;\n      averageRating: number;\n      totalSaved: number;\n    };\n  } | undefined> {\n    const user = await this.getUser(userId);\n    if (!user) {\n      return undefined;\n    }\n\n    // Get user's reviews\n    const userReviews = await db\n      .select()\n      .from(reviews)\n      .where(eq(reviews.userId, userId))\n      .orderBy(desc(reviews.createdAt));\n\n    // Get saved restaurants with join\n    const savedRestaurantsData = await db\n      .select({\n        savedRestaurant: savedRestaurants,\n        restaurant: restaurants,\n      })\n      .from(savedRestaurants)\n      .leftJoin(restaurants, eq(savedRestaurants.restaurantId, restaurants.id))\n      .where(eq(savedRestaurants.userId, userId))\n      .orderBy(desc(savedRestaurants.createdAt));\n\n    // Get customer inquiries\n    const userInquiries = await db\n      .select()\n      .from(customerInquiries)\n      .where(eq(customerInquiries.userId, userId))\n      .orderBy(desc(customerInquiries.createdAt));\n\n    // Calculate stats\n    const totalReviews = userReviews.length;\n    const averageRating = totalReviews > 0\n      ? userReviews.reduce((sum, r) => sum + r.rating, 0) / totalReviews\n      : 0;\n    const totalSaved = savedRestaurantsData.length;\n\n    return {\n      user,\n      reviews: userReviews,\n      savedRestaurants: savedRestaurantsData\n        .filter(item => item.restaurant !== null)\n        .map(item => ({\n          ...item.savedRestaurant,\n          restaurant: item.restaurant as Restaurant,\n        })) as Array<SavedRestaurant & { restaurant: Restaurant }>,\n      customerInquiries: userInquiries,\n      stats: {\n        totalReviews,\n        averageRating,\n        totalSaved,\n      },\n    };\n  }\n\n  async updateUserTier(userId: string, tier: string): Promise<User | undefined> {\n    const result = await db\n      .update(users)\n      .set({ tier, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return result[0];\n  }\n\n  async updateUser(userId: string, data: Partial<{\n    tier: string;\n    language: string;\n    ssoProvider: string;\n    region: string;\n  }>): Promise<User | undefined> {\n    const result = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return result[0];\n  }\n\n  async deleteUser(userId: string): Promise<boolean> {\n    // Use transaction to ensure data consistency\n    return await db.transaction(async (tx) => {\n      // Delete user's reviews first\n      await tx.delete(reviews).where(eq(reviews.userId, userId));\n      \n      // Delete saved restaurants\n      await tx.delete(savedRestaurants).where(eq(savedRestaurants.userId, userId));\n      \n      // Delete customer inquiries\n      await tx.delete(customerInquiries).where(eq(customerInquiries.userId, userId));\n      \n      // Delete the user\n      const result = await tx\n        .delete(users)\n        .where(eq(users.id, userId))\n        .returning();\n      \n      return result.length > 0;\n    });\n  }\n\n  async getAdminDashboardStats(): Promise<{\n    totalRestaurants: number;\n    totalUsers: number;\n    totalReviews: number;\n    totalAnnouncements: number;\n    recentUsers: User[];\n    recentReviews: Review[];\n    restaurantsByCuisine: { cuisine: string; count: number }[];\n    reviewsPerDay: { date: string; count: number }[];\n  }> {\n    // Get total counts\n    const totalRestaurantsResult = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(restaurants);\n    const totalUsersResult = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(users);\n    const totalReviewsResult = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(reviews);\n    const totalAnnouncementsResult = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(announcements);\n\n    // Get recent users (last 10)\n    const recentUsers = await db\n      .select()\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(10);\n\n    // Get recent reviews (last 10)\n    const recentReviews = await db\n      .select()\n      .from(reviews)\n      .orderBy(desc(reviews.createdAt))\n      .limit(10);\n\n    // Get restaurants by cuisine\n    const cuisineStats = await db\n      .select({\n        cuisine: restaurants.cuisine,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(restaurants)\n      .groupBy(restaurants.cuisine)\n      .orderBy(desc(sql`count(*)`));\n\n    // Get reviews per day (last 30 days)\n    const reviewsPerDay = await db\n      .select({\n        date: sql<string>`to_char(${reviews.createdAt}, 'YYYY-MM-DD')`,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(reviews)\n      .where(sql`${reviews.createdAt} >= NOW() - INTERVAL '30 days'`)\n      .groupBy(sql`to_char(${reviews.createdAt}, 'YYYY-MM-DD')`)\n      .orderBy(sql`to_char(${reviews.createdAt}, 'YYYY-MM-DD')`);\n\n    return {\n      totalRestaurants: totalRestaurantsResult[0]?.count || 0,\n      totalUsers: totalUsersResult[0]?.count || 0,\n      totalReviews: totalReviewsResult[0]?.count || 0,\n      totalAnnouncements: totalAnnouncementsResult[0]?.count || 0,\n      recentUsers,\n      recentReviews,\n      restaurantsByCuisine: cuisineStats,\n      reviewsPerDay,\n    };\n  }\n\n  async updateRestaurant(id: string, data: Partial<InsertRestaurant>): Promise<Restaurant | undefined> {\n    const result = await db\n      .update(restaurants)\n      .set(data)\n      .where(eq(restaurants.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteRestaurant(id: string): Promise<boolean> {\n    const result = await db\n      .delete(restaurants)\n      .where(eq(restaurants.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getAllReviews(limit: number = 1000): Promise<any[]> {\n    const result = await db\n      .select({\n        id: reviews.id,\n        restaurantId: reviews.restaurantId,\n        userId: reviews.userId,\n        userName: reviews.userName,\n        rating: reviews.rating,\n        comment: reviews.comment,\n        imageUrls: reviews.imageUrls,\n        videoUrls: reviews.videoUrls,\n        isPinned: reviews.isPinned,\n        createdAt: reviews.createdAt,\n        restaurantName: restaurants.name,\n        restaurantNameEn: restaurants.nameEn,\n      })\n      .from(reviews)\n      .leftJoin(restaurants, eq(reviews.restaurantId, restaurants.id))\n      .orderBy(desc(reviews.createdAt))\n      .limit(limit);\n    \n    return result;\n  }\n\n  async updateReviewPin(reviewId: string, isPinned: number): Promise<Review | undefined> {\n    const result = await db\n      .update(reviews)\n      .set({ isPinned })\n      .where(eq(reviews.id, reviewId))\n      .returning();\n    return result[0];\n  }\n\n  async deleteReviewAsAdmin(reviewId: string): Promise<boolean> {\n    // Get restaurant ID before deleting\n    const review = await db\n      .select()\n      .from(reviews)\n      .where(eq(reviews.id, reviewId));\n    \n    if (review.length === 0) {\n      return false;\n    }\n\n    const restaurantId = review[0].restaurantId;\n\n    // Use transaction to ensure data consistency\n    return await db.transaction(async (tx) => {\n      const result = await tx\n        .delete(reviews)\n        .where(eq(reviews.id, reviewId))\n        .returning();\n      \n      if (result.length > 0) {\n        // Update restaurant rating within the same transaction\n        await this.updateRestaurantRating(restaurantId);\n        return true;\n      }\n      \n      return false;\n    });\n  }\n\n  async getAllAnnouncements(): Promise<Announcement[]> {\n    return await db\n      .select()\n      .from(announcements)\n      .orderBy(desc(announcements.isPinned), desc(announcements.createdAt));\n  }\n\n  async updateAnnouncement(id: string, data: Partial<InsertAnnouncement>): Promise<Announcement | undefined> {\n    const result = await db\n      .update(announcements)\n      .set(data)\n      .where(eq(announcements.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteAnnouncement(id: string): Promise<boolean> {\n    const result = await db\n      .delete(announcements)\n      .where(eq(announcements.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getAllEventBanners(): Promise<EventBanner[]> {\n    return await db\n      .select()\n      .from(eventBanners)\n      .orderBy(eventBanners.displayOrder);\n  }\n\n  async updateEventBanner(id: string, data: Partial<InsertEventBanner>): Promise<EventBanner | undefined> {\n    const result = await db\n      .update(eventBanners)\n      .set(data)\n      .where(eq(eventBanners.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteEventBanner(id: string): Promise<boolean> {\n    const result = await db\n      .delete(eventBanners)\n      .where(eq(eventBanners.id, id))\n      .returning();\n    return result.length > 0;\n  }\n\n  // Restaurant Applications\n  async getAllRestaurantApplications(): Promise<RestaurantApplication[]> {\n    return await db\n      .select()\n      .from(restaurantApplications)\n      .orderBy(desc(restaurantApplications.createdAt));\n  }\n\n  async processRestaurantApplication(id: string, status: string, adminNote: string): Promise<RestaurantApplication | undefined> {\n    const result = await db\n      .update(restaurantApplications)\n      .set({\n        status,\n        adminNote,\n        processedAt: new Date(),\n      })\n      .where(eq(restaurantApplications.id, id))\n      .returning();\n    return result[0];\n  }\n\n  // Owner Inquiries\n  async getAllOwnerInquiries(): Promise<OwnerInquiry[]> {\n    return await db\n      .select()\n      .from(ownerInquiries)\n      .orderBy(desc(ownerInquiries.createdAt));\n  }\n\n  async respondToOwnerInquiry(id: string, adminResponse: string, status: string): Promise<OwnerInquiry | undefined> {\n    const result = await db\n      .update(ownerInquiries)\n      .set({\n        adminResponse,\n        status,\n        answeredAt: new Date(),\n      })\n      .where(eq(ownerInquiries.id, id))\n      .returning();\n    return result[0];\n  }\n\n  // Customer Inquiries\n  async getAllCustomerInquiries(): Promise<CustomerInquiry[]> {\n    return await db\n      .select()\n      .from(customerInquiries)\n      .orderBy(desc(customerInquiries.createdAt));\n  }\n\n  async respondToCustomerInquiry(id: string, adminResponse: string, status: string): Promise<CustomerInquiry | undefined> {\n    const result = await db\n      .update(customerInquiries)\n      .set({\n        adminResponse,\n        status,\n        answeredAt: new Date(),\n      })\n      .where(eq(customerInquiries.id, id))\n      .returning();\n    return result[0];\n  }\n\n  // Partnership Inquiries\n  async getAllPartnershipInquiries(): Promise<PartnershipInquiry[]> {\n    return await db\n      .select()\n      .from(partnershipInquiries)\n      .orderBy(desc(partnershipInquiries.createdAt));\n  }\n\n  async processPartnershipInquiry(id: string, status: string, adminNote: string): Promise<PartnershipInquiry | undefined> {\n    const result = await db\n      .update(partnershipInquiries)\n      .set({\n        status,\n        adminNote,\n        processedAt: new Date(),\n      })\n      .where(eq(partnershipInquiries.id, id))\n      .returning();\n    return result[0];\n  }\n\n  // Owner Notices\n  async getAllOwnerNotices(): Promise<OwnerNotice[]> {\n    return await db\n      .select()\n      .from(ownerNotices)\n      .orderBy(desc(ownerNotices.isPinned), desc(ownerNotices.createdAt));\n  }\n\n  async createOwnerNotice(notice: InsertOwnerNotice): Promise<OwnerNotice> {\n    const result = await db\n      .insert(ownerNotices)\n      .values(notice)\n      .returning();\n    return result[0];\n  }\n\n  // Payments\n  async getAllPayments(): Promise<Payment[]> {\n    return await db\n      .select()\n      .from(payments)\n      .orderBy(desc(payments.createdAt));\n  }\n\n  // User Analytics\n  async getUsersByTier(): Promise<{ tier: string; count: number; users: User[] }[]> {\n    const tiers = ['bronze', 'silver', 'gold', 'platinum'];\n    const result = [];\n\n    for (const tier of tiers) {\n      const tierUsers = await db\n        .select()\n        .from(users)\n        .where(eq(users.tier, tier))\n        .orderBy(desc(users.createdAt));\n\n      result.push({\n        tier,\n        count: tierUsers.length,\n        users: tierUsers,\n      });\n    }\n\n    return result;\n  }\n\n  async getUserAnalytics(): Promise<{\n    usersBySsoProvider: { ssoProvider: string | null; count: number }[];\n    usersByRegion: { region: string | null; count: number }[];\n    usersByTier: { tier: string; count: number }[];\n  }> {\n    const usersBySsoProvider = await db\n      .select({\n        ssoProvider: users.ssoProvider,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(users)\n      .where(sql`${users.ssoProvider} IS NOT NULL`)\n      .groupBy(users.ssoProvider)\n      .orderBy(desc(sql`count(*)`));\n\n    const usersByRegion = await db\n      .select({\n        region: users.region,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(users)\n      .where(sql`${users.region} IS NOT NULL`)\n      .groupBy(users.region)\n      .orderBy(desc(sql`count(*)`));\n\n    const usersByTier = await db\n      .select({\n        tier: users.tier,\n        count: sql<number>`cast(count(*) as int)`,\n      })\n      .from(users)\n      .where(sql`${users.tier} IS NOT NULL`)\n      .groupBy(users.tier)\n      .orderBy(desc(sql`count(*)`));\n\n    return {\n      usersBySsoProvider,\n      usersByRegion,\n      usersByTier,\n    };\n  }\n\n  // Blog Posts\n  async getAllBlogPosts(): Promise<BlogPost[]> {\n    return await db\n      .select()\n      .from(blogPosts)\n      .orderBy(desc(blogPosts.createdAt));\n  }\n\n  // Priority Tasks\n  async getAdminPriorityTasks(): Promise<{\n    pendingApplications: RestaurantApplication[];\n    pendingOwnerInquiries: OwnerInquiry[];\n    pendingCustomerInquiries: CustomerInquiry[];\n    pendingPartnershipInquiries: PartnershipInquiry[];\n  }> {\n    const pendingApplications = await db\n      .select()\n      .from(restaurantApplications)\n      .where(eq(restaurantApplications.status, 'pending'))\n      .orderBy(desc(restaurantApplications.createdAt))\n      .limit(5);\n\n    const pendingOwnerInquiries = await db\n      .select()\n      .from(ownerInquiries)\n      .where(eq(ownerInquiries.status, 'pending'))\n      .orderBy(desc(ownerInquiries.createdAt))\n      .limit(5);\n\n    const pendingCustomerInquiries = await db\n      .select()\n      .from(customerInquiries)\n      .where(eq(customerInquiries.status, 'pending'))\n      .orderBy(desc(customerInquiries.createdAt))\n      .limit(5);\n\n    const pendingPartnershipInquiries = await db\n      .select()\n      .from(partnershipInquiries)\n      .where(eq(partnershipInquiries.status, 'pending'))\n      .orderBy(desc(partnershipInquiries.createdAt))\n      .limit(5);\n\n    return {\n      pendingApplications,\n      pendingOwnerInquiries,\n      pendingCustomerInquiries,\n      pendingPartnershipInquiries,\n    };\n  }\n  \n  // External Data Collection Statistics\n  async getRestaurantCount(): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(restaurants);\n    return result[0]?.count || 0;\n  }\n  \n  async getReviewCount(): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(reviews);\n    return result[0]?.count || 0;\n  }\n  \n  async getMenuCount(): Promise<number> {\n    const result = await db\n      .select({ count: sql<number>`cast(count(*) as int)` })\n      .from(menus);\n    return result[0]?.count || 0;\n  }\n}\n\nexport const storage = new DbStorage();\n","size_bytes":45616},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/AdSlot.tsx":{"content":"import { AdSense } from \"./AdSense\";\n\ninterface AdSlotProps {\n  variant: \"banner\" | \"rectangle\" | \"feed\";\n  slot?: string;\n  className?: string;\n}\n\nexport function AdSlot({ variant, slot, className = \"\" }: AdSlotProps) {\n  const defaultSlots = {\n    banner: \"1234567890\",\n    rectangle: \"0987654321\",\n    feed: \"1357924680\"\n  };\n\n  const adSlot = slot || defaultSlots[variant];\n  const format = variant === \"banner\" ? \"horizontal\" : variant === \"rectangle\" ? \"rectangle\" : \"fluid\";\n  const minHeight = variant === \"banner\" ? \"90px\" : variant === \"rectangle\" ? \"250px\" : \"150px\";\n\n  return (\n    <div className={className} style={{ minHeight }}>\n      <AdSense \n        slot={adSlot} \n        format={format}\n        className=\"w-full\"\n      />\n    </div>\n  );\n}\n","size_bytes":762},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/pages/MainScreen.tsx":{"content":"import { useState, useEffect, useMemo } from \"react\";\nimport { Search, MapPin, Star, Clock, TrendingUp, Play, Bot, ChevronRight, Bell, Navigation, DollarSign, UtensilsCrossed, ArrowUpDown } from \"lucide-react\";\nimport { AdSlot } from \"@/components/AdSlot\";\nimport { BottomNav } from \"@/components/BottomNav\";\nimport { LanguageSelector } from \"@/components/LanguageSelector\";\nimport { OptimizedImage } from \"@/components/OptimizedImage\";\nimport { SEO } from \"@/components/SEO\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { createWebsiteSchema, createOrganizationSchema } from \"@/lib/structuredData\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { Link } from \"wouter\";\nimport { getUserLocation, calculateDistance, formatDistance } from \"@/lib/geoUtils\";\nimport type { Restaurant, Announcement, EventBanner } from \"@shared/schema\";\n\nexport default function MainScreen() {\n  const { t, language } = useLanguage();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [nearbyFilter, setNearbyFilter] = useState(false);\n  const [priceFilter, setPriceFilter] = useState<number | null>(null);\n  const [cuisineFilter, setCuisineFilter] = useState<string | null>(null);\n  const [sortBy, setSortBy] = useState<\"rating\" | \"reviews\" | \"distance\" | \"popularity\">(\"rating\");\n\n  const { data: restaurants, isLoading } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/restaurants\"],\n  });\n\n  const { data: searchResults = [], isLoading: isSearching } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/restaurants/search\", searchQuery],\n    queryFn: async () => {\n      if (!searchQuery || searchQuery.trim().length === 0) {\n        return [];\n      }\n      const response = await fetch(`/api/restaurants/search/${encodeURIComponent(searchQuery)}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to search restaurants\");\n      }\n      return response.json();\n    },\n    enabled: searchQuery.trim().length > 0,\n  });\n\n  const { data: announcements = [] } = useQuery<Announcement[]>({\n    queryKey: [\"/api/announcements\"],\n  });\n\n  const { data: eventBanners = [] } = useQuery<EventBanner[]>({\n    queryKey: [\"/api/event-banners\"],\n  });\n\n  const { data: featuredRestaurants = [] } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/restaurants/featured\"],\n  });\n  \n  const baseUrl = typeof window !== 'undefined' ? window.location.origin : '';\n  const structuredData = {\n    \"@context\": \"https://schema.org\",\n    \"@graph\": [\n      createWebsiteSchema(baseUrl),\n      createOrganizationSchema(baseUrl),\n    ],\n  };\n\n  // Get user location for \"Nearby\" filter\n  const handleNearbyFilter = async () => {\n    if (nearbyFilter) {\n      setNearbyFilter(false);\n      setUserLocation(null);\n    } else {\n      const location = await getUserLocation();\n      if (location) {\n        setUserLocation(location);\n        setNearbyFilter(true);\n        setSortBy(\"distance\");\n      }\n    }\n  };\n\n  // Filter and sort restaurants\n  const displayRestaurants = useMemo(() => {\n    let filtered = searchQuery.trim().length > 0 \n      ? searchResults \n      : (restaurants || []);\n\n    // Apply price filter\n    if (priceFilter !== null) {\n      filtered = filtered.filter(r => r.priceRange === priceFilter);\n    }\n\n    // Apply cuisine filter\n    if (cuisineFilter) {\n      filtered = filtered.filter(r => r.cuisine === cuisineFilter);\n    }\n\n    // Apply nearby filter (within 5km)\n    if (nearbyFilter && userLocation) {\n      filtered = filtered.filter(r => {\n        if (!r.latitude || !r.longitude) return false;\n        const distance = calculateDistance(\n          userLocation.lat,\n          userLocation.lng,\n          r.latitude,\n          r.longitude\n        );\n        return distance <= 5;\n      });\n    }\n\n    // Sort restaurants\n    const sorted = [...filtered].sort((a, b) => {\n      if (sortBy === \"popularity\") {\n        const scoreA = (a as any).popularityScore || 0;\n        const scoreB = (b as any).popularityScore || 0;\n        return scoreB - scoreA;\n      } else if (sortBy === \"rating\") {\n        return b.rating - a.rating;\n      } else if (sortBy === \"reviews\") {\n        return b.reviewCount - a.reviewCount;\n      } else if (sortBy === \"distance\" && userLocation) {\n        const distA = (a.latitude && a.longitude) \n          ? calculateDistance(userLocation.lat, userLocation.lng, a.latitude, a.longitude)\n          : Infinity;\n        const distB = (b.latitude && b.longitude)\n          ? calculateDistance(userLocation.lat, userLocation.lng, b.latitude, b.longitude)\n          : Infinity;\n        return distA - distB;\n      }\n      return 0;\n    });\n\n    return sorted;\n  }, [searchQuery, searchResults, restaurants, priceFilter, cuisineFilter, nearbyFilter, userLocation, sortBy]);\n\n  // Get unique cuisines for filter\n  const cuisines = useMemo(() => {\n    const allRestaurants = restaurants || [];\n    const uniqueCuisines = Array.from(new Set(allRestaurants.map(r => r.cuisine)));\n    return uniqueCuisines.sort();\n  }, [restaurants]);\n\n  const prefetchRestaurant = (restaurantId: string) => {\n    queryClient.prefetchQuery({\n      queryKey: [\"/api/restaurants\", restaurantId],\n      staleTime: 5 * 60 * 1000,\n    });\n    queryClient.prefetchQuery({\n      queryKey: [\"/api/reviews\", restaurantId],\n      staleTime: 5 * 60 * 1000,\n    });\n    queryClient.prefetchQuery({\n      queryKey: [\"/api/restaurants\", restaurantId, \"insights\"],\n      staleTime: 5 * 60 * 1000,\n    });\n    queryClient.prefetchQuery({\n      queryKey: [\"/api/restaurants\", restaurantId, \"menus\"],\n      staleTime: 5 * 60 * 1000,\n    });\n  };\n\n  const sampleVideos = [\n    {\n      id: 1,\n      title: \"í™ëŒ€ í•œì‹ë‹¹ BEST 5 - ì™¸êµ­ì¸ì´ ê¼­ ê°€ì•¼í•  ë§›ì§‘\",\n      titleEn: \"Top 5 Korean Restaurants in Hongdae\",\n      thumbnail: \"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400\",\n      duration: \"12:34\",\n      views: \"15K\",\n    },\n    {\n      id: 2,\n      title: \"í•œì‹ ì´ˆë³´ì ê°€ì´ë“œ - ë­˜ ì£¼ë¬¸í•´ì•¼ í• ê¹Œ?\",\n      titleEn: \"Korean Food Guide for Beginners\",\n      thumbnail: \"https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=400\",\n      duration: \"8:45\",\n      views: \"23K\",\n    },\n  ];\n\n  return (\n    <>\n      <SEO\n        title={t(\"discover.title\")}\n        description={t(\"app.tagline\")}\n        keywords={[\"Korean restaurant\", \"ë§›ì§‘\", \"í•œì‹ë‹¹\", \"Seoul restaurants\", \"AI recommendations\", \"tourist guide\", \"Korean food\"]}\n        url=\"/\"\n        structuredData={structuredData}\n      />\n      <div className=\"min-h-screen bg-background pb-[72px]\">\n        {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-card border-b border-border\">\n        <div className=\"max-w-7xl mx-auto px-4 xl:px-6 py-3\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n              <img\n                src=\"/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png\"\n                alt=\"í•œì‹ë‹¹\"\n                className=\"h-9\"\n              />\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <LanguageSelector />\n              <Button size=\"icon\" variant=\"ghost\" data-testid=\"button-search\">\n                <Search className=\"w-5 h-5\" />\n              </Button>\n            </div>\n          </div>\n          <div className=\"relative max-w-2xl mx-auto xl:mx-0\">\n            <input\n              type=\"search\"\n              placeholder={t(\"search.placeholder\")}\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full h-12 pl-10 pr-4 rounded-full bg-muted text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n              data-testid=\"input-search\"\n            />\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground\" />\n          </div>\n\n          {/* Mobile & Tablet Filters */}\n          <div className=\"mt-3 xl:hidden flex items-center gap-2 overflow-x-auto pb-1\">\n            <ScrollArea className=\"w-full\">\n              <div className=\"flex gap-2\">\n                <Button\n                  size=\"sm\"\n                  variant={nearbyFilter ? \"default\" : \"outline\"}\n                  onClick={handleNearbyFilter}\n                  className=\"flex-shrink-0\"\n                  data-testid=\"button-nearby-mobile\"\n                >\n                  <Navigation className=\"w-4 h-4 mr-1\" />\n                  {t(\"filters.nearby\")}\n                </Button>\n\n                <Select\n                  value={priceFilter?.toString() || \"all\"}\n                  onValueChange={(value) => setPriceFilter(value === \"all\" ? null : parseInt(value))}\n                >\n                  <SelectTrigger className=\"w-[120px] h-8\" data-testid=\"select-price-mobile\">\n                    <DollarSign className=\"w-4 h-4 mr-1\" />\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">{t(\"filters.allPrices\")}</SelectItem>\n                    <SelectItem value=\"1\">â‚©</SelectItem>\n                    <SelectItem value=\"2\">â‚©â‚©</SelectItem>\n                    <SelectItem value=\"3\">â‚©â‚©â‚©</SelectItem>\n                  </SelectContent>\n                </Select>\n\n                <Select\n                  value={cuisineFilter || \"all\"}\n                  onValueChange={(value) => setCuisineFilter(value === \"all\" ? null : value)}\n                >\n                  <SelectTrigger className=\"w-[140px] h-8\" data-testid=\"select-cuisine-mobile\">\n                    <UtensilsCrossed className=\"w-4 h-4 mr-1\" />\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">{t(\"filters.allCuisine\")}</SelectItem>\n                    {cuisines.map((cuisine) => (\n                      <SelectItem key={cuisine} value={cuisine}>{cuisine}</SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n\n                <Select\n                  value={sortBy}\n                  onValueChange={(value: any) => setSortBy(value)}\n                >\n                  <SelectTrigger className=\"w-[120px] h-8\" data-testid=\"select-sort-mobile\">\n                    <ArrowUpDown className=\"w-4 h-4 mr-1\" />\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"popularity\">{language === \"en\" ? \"Popularity\" : \"ì¸ê¸°ì§€ìˆ˜\"}</SelectItem>\n                    <SelectItem value=\"rating\">{t(\"filters.rating\")}</SelectItem>\n                    <SelectItem value=\"reviews\">{t(\"filters.reviews\")}</SelectItem>\n                    {userLocation && <SelectItem value=\"distance\">{t(\"filters.distance\")}</SelectItem>}\n                  </SelectContent>\n                </Select>\n              </div>\n              <ScrollBar orientation=\"horizontal\" />\n            </ScrollArea>\n          </div>\n        </div>\n      </header>\n\n      {/* Desktop Layout with Sidebar */}\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"xl:flex xl:gap-6 xl:px-6\">\n          {/* Desktop Sidebar Filters */}\n          <aside className=\"hidden xl:block w-64 flex-shrink-0 sticky top-[120px] h-fit\">\n            <Card className=\"p-4\">\n              <h3 className=\"font-semibold mb-4\">{t(\"filters.title\")}</h3>\n              \n              <div className=\"space-y-4\">\n                {/* Nearby Filter */}\n                <div>\n                  <Button\n                    size=\"sm\"\n                    variant={nearbyFilter ? \"default\" : \"outline\"}\n                    onClick={handleNearbyFilter}\n                    className=\"w-full\"\n                    data-testid=\"button-nearby-desktop\"\n                  >\n                    <Navigation className=\"w-4 h-4 mr-2\" />\n                    {t(\"filters.nearby\")}\n                  </Button>\n                </div>\n\n                {/* Price Filter */}\n                <div>\n                  <label className=\"text-sm font-medium mb-2 block\">{t(\"filters.priceRange\")}</label>\n                  <Select\n                    value={priceFilter?.toString() || \"all\"}\n                    onValueChange={(value) => setPriceFilter(value === \"all\" ? null : parseInt(value))}\n                  >\n                    <SelectTrigger className=\"w-full\" data-testid=\"select-price-desktop\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">{t(\"filters.allPrices\")}</SelectItem>\n                      <SelectItem value=\"1\">â‚© - {t(\"filters.budget\")}</SelectItem>\n                      <SelectItem value=\"2\">â‚©â‚© - {t(\"filters.moderate\")}</SelectItem>\n                      <SelectItem value=\"3\">â‚©â‚©â‚© - {t(\"filters.expensive\")}</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Cuisine Filter */}\n                <div>\n                  <label className=\"text-sm font-medium mb-2 block\">{t(\"filters.cuisine\")}</label>\n                  <Select\n                    value={cuisineFilter || \"all\"}\n                    onValueChange={(value) => setCuisineFilter(value === \"all\" ? null : value)}\n                  >\n                    <SelectTrigger className=\"w-full\" data-testid=\"select-cuisine-desktop\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">{t(\"filters.allCuisine\")}</SelectItem>\n                      {cuisines.map((cuisine) => (\n                        <SelectItem key={cuisine} value={cuisine}>{cuisine}</SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                {/* Sort */}\n                <div>\n                  <label className=\"text-sm font-medium mb-2 block\">{t(\"filters.sortBy\")}</label>\n                  <Select\n                    value={sortBy}\n                    onValueChange={(value: any) => setSortBy(value)}\n                  >\n                    <SelectTrigger className=\"w-full\" data-testid=\"select-sort-desktop\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"popularity\">{language === \"en\" ? \"Popularity\" : \"ì¸ê¸°ì§€ìˆ˜\"}</SelectItem>\n                      <SelectItem value=\"rating\">{t(\"filters.rating\")}</SelectItem>\n                      <SelectItem value=\"reviews\">{t(\"filters.reviews\")}</SelectItem>\n                      {userLocation && <SelectItem value=\"distance\">{t(\"filters.distance\")}</SelectItem>}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </Card>\n          </aside>\n\n          {/* Main Content */}\n          <div className=\"flex-1 min-w-0\">\n        {/* Top Ad Banner */}\n        <div className=\"px-4 pt-4\">\n          <AdSlot variant=\"banner\" />\n        </div>\n\n        {/* AI Recommendation Section */}\n        <div className=\"px-4 py-6\">\n          <div\n            className=\"relative overflow-hidden rounded-xl p-6 text-white\"\n            style={{\n              background: \"linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.8) 100%)\",\n            }}\n          >\n            <div className=\"relative z-10\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <div className=\"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center\">\n                  <Bot className=\"w-6 h-6\" />\n                </div>\n                <span className=\"text-sm font-medium\">{t(\"ai.title\")}</span>\n              </div>\n              <h2 className=\"text-2xl font-bold mb-2\">\n                {t(\"discover.aiRecommend\")}\n              </h2>\n              <p className=\"text-sm text-white/80 mb-4\">\n                {t(\"app.tagline\")}\n              </p>\n              <Button\n                variant=\"secondary\"\n                className=\"bg-white text-primary hover:bg-white/90\"\n                data-testid=\"button-ai-recommend\"\n              >\n                {t(\"nav.ai\")}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Featured Restaurants Section */}\n        {featuredRestaurants.length > 0 && !searchQuery && (\n          <section className=\"py-4\">\n            <div className=\"px-4 mb-3\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-lg font-semibold\">\n                  {t(\"discover.featured\")}\n                </h2>\n                <Badge variant=\"default\" className=\"bg-[hsl(var(--accent-warning))] text-[hsl(var(--accent-warning-foreground))]\">\n                  {t(\"discover.sponsored\")}\n                </Badge>\n              </div>\n            </div>\n            <ScrollArea className=\"w-full whitespace-nowrap\">\n              <div className=\"flex gap-4 px-4 pb-2\">\n                {featuredRestaurants.map((restaurant) => (\n                  <Link key={restaurant.id} href={`/restaurant/${restaurant.id}`}>\n                    <Card\n                      className=\"w-[280px] overflow-hidden hover-elevate active-elevate-2 cursor-pointer flex-shrink-0\"\n                      data-testid={`card-featured-${restaurant.id}`}\n                      onMouseEnter={() => prefetchRestaurant(restaurant.id)}\n                    >\n                      <div className=\"relative aspect-[4/3]\">\n                        <OptimizedImage\n                          src={restaurant.imageUrl}\n                          alt={restaurant.name}\n                          className=\"w-full h-full\"\n                          objectFit=\"cover\"\n                          data-testid={`image-featured-${restaurant.id}`}\n                        />\n                        <div className=\"absolute top-2 right-2\">\n                          <Badge className=\"bg-[hsl(var(--primary))] text-primary-foreground\">\n                            {t(\"discover.featuredBadge\")}\n                          </Badge>\n                        </div>\n                      </div>\n                      <div className=\"p-3\">\n                        <h3 className=\"font-semibold text-base mb-1 truncate\">\n                          {language === \"en\" ? restaurant.nameEn : restaurant.name}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground mb-2 truncate\">\n                          {language === \"en\" ? restaurant.name : restaurant.nameEn}\n                        </p>\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {restaurant.cuisine}\n                          </Badge>\n                          {restaurant.rating > 0 && (\n                            <div className=\"flex items-center gap-1 text-sm\">\n                              <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                              <span className=\"font-medium\">{restaurant.rating}</span>\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"flex items-center gap-1 text-xs text-muted-foreground truncate\">\n                          <MapPin className=\"w-3 h-3 flex-shrink-0\" />\n                          <span className=\"truncate\">{restaurant.district}</span>\n                        </div>\n                      </div>\n                    </Card>\n                  </Link>\n                ))}\n              </div>\n              <ScrollBar orientation=\"horizontal\" />\n            </ScrollArea>\n          </section>\n        )}\n\n        {/* Trending Section / Search Results - Part 1 (6 items) */}\n        <section className=\"px-4 py-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <TrendingUp className=\"w-5 h-5 text-primary\" />\n              <h2 className=\"text-lg font-semibold\">\n                {searchQuery.trim().length > 0 \n                  ? `${t(\"search.button\")}: \"${searchQuery}\"` \n                  : t(\"discover.popular\")}\n              </h2>\n            </div>\n            {!searchQuery && (\n              <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-trending\">\n                {t(\"discover.viewAll\")}\n              </Button>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n            {(isLoading || isSearching) ? (\n              Array.from({ length: 6 }).map((_, i) => (\n                <Card key={i} className=\"overflow-hidden\">\n                  <div className=\"aspect-[4/3] bg-muted animate-pulse\" />\n                  <div className=\"p-3 space-y-2\">\n                    <div className=\"h-5 bg-muted rounded animate-pulse w-3/4\" />\n                    <div className=\"h-4 bg-muted rounded animate-pulse w-1/2\" />\n                    <div className=\"h-4 bg-muted rounded animate-pulse w-2/3\" />\n                  </div>\n                </Card>\n              ))\n            ) : displayRestaurants.length === 0 && searchQuery.trim().length > 0 ? (\n              <div className=\"col-span-full\">\n                <Card className=\"p-8 text-center\">\n                  <Search className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n                  <p className=\"text-lg font-semibold mb-2\">{t(\"search.noResults\")}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {t(\"search.tryDifferent\")}\n                  </p>\n                </Card>\n              </div>\n            ) : (\n              displayRestaurants.slice(0, 6).map((restaurant, index) => (\n                <Link key={restaurant.id} href={`/restaurant/${restaurant.id}`}>\n                  <Card\n                    className=\"overflow-hidden hover-elevate active-elevate-2 cursor-pointer h-full\"\n                    data-testid={`card-restaurant-${restaurant.id}`}\n                    onMouseEnter={() => prefetchRestaurant(restaurant.id)}\n                  >\n                    <div className=\"relative aspect-[4/3]\">\n                      <OptimizedImage\n                        src={restaurant.imageUrl}\n                        alt={restaurant.name}\n                        className=\"w-full h-full\"\n                        objectFit=\"cover\"\n                        data-testid={`image-restaurant-${restaurant.id}`}\n                      />\n                    </div>\n                    <div className=\"p-3\">\n                      <h3 className=\"font-semibold text-base mb-1 truncate\">\n                        {language === \"en\" ? restaurant.nameEn : restaurant.name}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground mb-2 truncate\">\n                        {language === \"en\" ? restaurant.name : restaurant.nameEn}\n                      </p>\n                      <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {restaurant.cuisine}\n                        </Badge>\n                        {restaurant.rating > 0 && (\n                          <div className=\"flex items-center gap-1 text-sm\">\n                            <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                            <span className=\"font-medium\">{restaurant.rating}</span>\n                            <span className=\"text-muted-foreground text-xs\">\n                              ({restaurant.reviewCount})\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-1 text-xs text-muted-foreground truncate\">\n                        <MapPin className=\"w-3 h-3 flex-shrink-0\" />\n                        <span className=\"truncate\">{restaurant.district}</span>\n                      </div>\n                    </div>\n                  </Card>\n                </Link>\n              ))\n            )}\n          </div>\n        </section>\n\n        {/* Event Banners */}\n        {!searchQuery && eventBanners.length > 0 && (\n          <section className=\"py-4\">\n            <div className=\"px-4 mb-3\">\n              <h2 className=\"text-lg font-semibold\">{t(\"events.title\")}</h2>\n            </div>\n            <ScrollArea className=\"w-full whitespace-nowrap\">\n              <div className=\"flex gap-4 px-4 pb-2\">\n                {eventBanners.map((banner) => (\n                  <a\n                    key={banner.id}\n                    href={banner.linkUrl || \"#\"}\n                    target={banner.linkUrl ? \"_blank\" : undefined}\n                    rel={banner.linkUrl ? \"noopener noreferrer\" : undefined}\n                    className=\"flex-shrink-0\"\n                    data-testid={`banner-event-${banner.id}`}\n                  >\n                    <Card className=\"w-[320px] overflow-hidden hover-elevate active-elevate-2 cursor-pointer\">\n                      <div className=\"relative aspect-[2/1]\">\n                        <img\n                          src={banner.imageUrl}\n                          alt={language === \"en\" ? banner.titleEn : banner.title}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                      <div className=\"p-4\">\n                        <h3 className=\"font-semibold text-base mb-1\">\n                          {language === \"en\" ? banner.titleEn : banner.title}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                          {language === \"en\" ? banner.descriptionEn : banner.description}\n                        </p>\n                      </div>\n                    </Card>\n                  </a>\n                ))}\n              </div>\n              <ScrollBar orientation=\"horizontal\" />\n            </ScrollArea>\n          </section>\n        )}\n\n        {/* Mid Ad Banner */}\n        {!searchQuery && (\n          <div className=\"px-4 py-4\">\n            <AdSlot variant=\"banner\" />\n          </div>\n        )}\n\n        {/* Video Section */}\n        {!searchQuery && (\n          <section className=\"px-4 py-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-6 h-6 rounded bg-[hsl(var(--video-indicator))] flex items-center justify-center\">\n                  <Play className=\"w-4 h-4 text-white fill-white\" />\n                </div>\n                <h2 className=\"text-lg font-semibold\">{t(\"content.videos\")}</h2>\n              </div>\n              <Link href=\"/content\">\n                <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-videos\">\n                  {t(\"content.seeAll\")}\n                </Button>\n              </Link>\n            </div>\n\n            <div className=\"flex gap-4 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide\">\n              {sampleVideos.map((video) => (\n                <div\n                  key={video.id}\n                  className=\"flex-shrink-0 w-[280px] cursor-pointer hover-elevate active-elevate-2 rounded-xl\"\n                  data-testid={`card-video-${video.id}`}\n                >\n                  <div className=\"relative aspect-video rounded-xl overflow-hidden mb-2\">\n                    <img\n                      src={video.thumbnail}\n                      alt={video.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <div className=\"absolute inset-0 bg-black/20 flex items-center justify-center\">\n                      <div className=\"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center\">\n                        <Play className=\"w-8 h-8 text-primary fill-primary ml-1\" />\n                      </div>\n                    </div>\n                    <div className=\"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-2 py-1 rounded\">\n                      {video.duration}\n                    </div>\n                  </div>\n                  <h3 className=\"font-semibold text-sm mb-1 line-clamp-2\">\n                    {language === \"en\" ? video.titleEn : video.title}\n                  </h3>\n                  {language !== \"en\" && language !== \"ko\" && (\n                    <p className=\"text-xs text-muted-foreground mb-1\">\n                      {video.titleEn}\n                    </p>\n                  )}\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <span>{video.views} {t(\"content.views\")}</span>\n                    <span>â€¢</span>\n                    <span>2 days ago</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Continue Trending Section - Part 2 (6 items) */}\n        {!searchQuery && displayRestaurants.length > 6 && (\n          <section className=\"px-4 py-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n              {displayRestaurants.slice(6, 12).map((restaurant, index) => (\n                <Link key={restaurant.id} href={`/restaurant/${restaurant.id}`}>\n                  <Card\n                    className=\"overflow-hidden hover-elevate active-elevate-2 cursor-pointer h-full\"\n                    data-testid={`card-restaurant-${restaurant.id}`}\n                    onMouseEnter={() => prefetchRestaurant(restaurant.id)}\n                  >\n                    <div className=\"relative aspect-[4/3]\">\n                      <OptimizedImage\n                        src={restaurant.imageUrl}\n                        alt={restaurant.name}\n                        className=\"w-full h-full\"\n                        objectFit=\"cover\"\n                        data-testid={`image-restaurant-${restaurant.id}`}\n                      />\n                    </div>\n                    <div className=\"p-3\">\n                      <h3 className=\"font-semibold text-base mb-1 truncate\">\n                        {language === \"en\" ? restaurant.nameEn : restaurant.name}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground mb-2 truncate\">\n                        {language === \"en\" ? restaurant.name : restaurant.nameEn}\n                      </p>\n                      <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {restaurant.cuisine}\n                        </Badge>\n                        {restaurant.rating > 0 && (\n                          <div className=\"flex items-center gap-1 text-sm\">\n                            <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                            <span className=\"font-medium\">{restaurant.rating}</span>\n                            <span className=\"text-muted-foreground text-xs\">\n                              ({restaurant.reviewCount})\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-1 text-xs text-muted-foreground truncate\">\n                        <MapPin className=\"w-3 h-3 flex-shrink-0\" />\n                        <span className=\"truncate\">{restaurant.district}</span>\n                      </div>\n                    </div>\n                  </Card>\n                </Link>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Blog Section - Moved up */}\n        {!searchQuery && (\n          <section className=\"px-4 py-6 mb-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-6 h-6 rounded bg-[hsl(var(--blog-indicator))] flex items-center justify-center text-white text-xs font-bold\">\n                  B\n                </div>\n                <h2 className=\"text-lg font-semibold\">{t(\"content.blogs\")}</h2>\n              </div>\n              <Link href=\"/content\">\n                <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-blogs\">\n                  {t(\"content.seeAll\")}\n                </Button>\n              </Link>\n            </div>\n\n            <Card className=\"overflow-hidden hover-elevate active-elevate-2 cursor-pointer\" data-testid=\"card-blog-featured\">\n              <img\n                src=\"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800\"\n                alt=\"Blog post\"\n                className=\"w-full h-48 object-cover\"\n              />\n              <div className=\"p-4\">\n                <h3 className=\"font-semibold text-base mb-2 line-clamp-2\">\n                  í™ëŒ€ í•œì‹ë‹¹ ì™„ë²½ ê°€ì´ë“œ - ì™¸êµ­ì¸ ê´€ê´‘ê°ì„ ìœ„í•œ ì¶”ì²œ\n                </h3>\n                <p className=\"text-sm text-muted-foreground mb-3 line-clamp-3\">\n                  Complete guide to Korean restaurants in Hongdae area. \n                  From traditional dishes to modern fusion cuisine...\n                </p>\n                <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                  <Clock className=\"w-3 h-3\" />\n                  <span>5 {t(\"content.readTime\")}</span>\n                  <span>â€¢</span>\n                  <span>1 day ago</span>\n                </div>\n              </div>\n            </Card>\n          </section>\n        )}\n\n        {/* Continue Trending Section - Part 3 (remaining items) */}\n        {!searchQuery && displayRestaurants.length > 12 && (\n          <section className=\"px-4 py-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n              {displayRestaurants.slice(12, 30).map((restaurant, index) => (\n                <Link key={restaurant.id} href={`/restaurant/${restaurant.id}`}>\n                  <Card\n                    className=\"overflow-hidden hover-elevate active-elevate-2 cursor-pointer h-full\"\n                    data-testid={`card-restaurant-${restaurant.id}`}\n                    onMouseEnter={() => prefetchRestaurant(restaurant.id)}\n                  >\n                    <div className=\"relative aspect-[4/3]\">\n                      <OptimizedImage\n                        src={restaurant.imageUrl}\n                        alt={restaurant.name}\n                        className=\"w-full h-full\"\n                        objectFit=\"cover\"\n                        data-testid={`image-restaurant-${restaurant.id}`}\n                      />\n                    </div>\n                    <div className=\"p-3\">\n                      <h3 className=\"font-semibold text-base mb-1 truncate\">\n                        {language === \"en\" ? restaurant.nameEn : restaurant.name}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground mb-2 truncate\">\n                        {language === \"en\" ? restaurant.name : restaurant.nameEn}\n                      </p>\n                      <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\n                        <Badge variant=\"secondary\" className=\"text-xs\">\n                          {restaurant.cuisine}\n                        </Badge>\n                        {restaurant.rating > 0 && (\n                          <div className=\"flex items-center gap-1 text-sm\">\n                            <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                            <span className=\"font-medium\">{restaurant.rating}</span>\n                            <span className=\"text-muted-foreground text-xs\">\n                              ({restaurant.reviewCount})\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex items-center gap-1 text-xs text-muted-foreground truncate\">\n                        <MapPin className=\"w-3 h-3 flex-shrink-0\" />\n                        <span className=\"truncate\">{restaurant.district}</span>\n                      </div>\n                    </div>\n                  </Card>\n                </Link>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Announcements Section */}\n        <section className=\"px-4 py-4 mb-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5 text-primary\" />\n              <h2 className=\"text-lg font-semibold\">{t(\"announcements.title\")}</h2>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-announcements\">\n              {t(\"announcements.viewAll\")}\n            </Button>\n          </div>\n\n          {announcements.length === 0 ? (\n            <Card className=\"p-6 text-center\">\n              <p className=\"text-sm text-muted-foreground\">{t(\"announcements.noItems\")}</p>\n            </Card>\n          ) : (\n            <div className=\"space-y-2\">\n              {announcements.slice(0, 2).map((announcement) => (\n                <Card\n                  key={announcement.id}\n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  data-testid={`card-announcement-${announcement.id}`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {announcement.isPinned === 1 && (\n                      <Badge variant=\"secondary\" className=\"text-xs flex-shrink-0\">\n                        ğŸ“Œ\n                      </Badge>\n                    )}\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold text-sm line-clamp-2\">\n                        {language === \"en\" ? announcement.titleEn : announcement.title}\n                      </h3>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {new Date(announcement.createdAt).toLocaleDateString(language === \"en\" ? \"en-US\" : \"ko-KR\")}\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </section>\n          </div>\n          {/* End of Main Content */}\n        </div>\n        {/* End of Desktop Layout Container */}\n      </div>\n\n      <BottomNav />\n    </div>\n    </>\n  );\n}\n","size_bytes":39406},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/pages/AIPage.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { Bot, Send, MapPin, Loader2, Sparkles } from \"lucide-react\";\nimport { BottomNav } from \"@/components/BottomNav\";\nimport { LanguageSelector } from \"@/components/LanguageSelector\";\nimport { SEO } from \"@/components/SEO\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { AdSlot } from \"@/components/AdSlot\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\ntype Message = {\n  id: number;\n  type: \"ai\" | \"user\";\n  content: string;\n};\n\nexport default function AIPage() {\n  const { t, language } = useLanguage();\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: 1,\n      type: \"ai\",\n      content: t(\"ai.welcome\"),\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [locationSelected, setLocationSelected] = useState(false);\n  const [selectedLocation, setSelectedLocation] = useState<\"nearby\" | \"other\" | null>(null);\n  const [areaSelected, setAreaSelected] = useState(false);\n  const [selectedArea, setSelectedArea] = useState<string | null>(null);\n  const [customAreaInput, setCustomAreaInput] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const chatContainerRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [messages, isLoading]);\n\n  const destinations = [\n    { key: \"hongdae\", label: t(\"ai.destinations.hongdae\") },\n    { key: \"gangnam\", label: t(\"ai.destinations.gangnam\") },\n    { key: \"myeongdong\", label: t(\"ai.destinations.myeongdong\") },\n    { key: \"itaewon\", label: t(\"ai.destinations.itaewon\") },\n    { key: \"insadong\", label: t(\"ai.destinations.insadong\") },\n    { key: \"jongno\", label: t(\"ai.destinations.jongno\") },\n    { key: \"yeonnamdong\", label: t(\"ai.destinations.yeonnamdong\") },\n    { key: \"seongsu\", label: t(\"ai.destinations.seongsu\") },\n    { key: \"mapo\", label: t(\"ai.destinations.mapo\") },\n    { key: \"sinchon\", label: t(\"ai.destinations.sinchon\") },\n  ];\n\n  const keywords = [\n    { key: \"nearby\", label: t(\"ai.keywords.nearby\"), icon: MapPin },\n    { key: \"vegan\", label: t(\"ai.keywords.vegan\"), icon: Sparkles },\n    { key: \"popular\", label: t(\"ai.keywords.popular\"), icon: Sparkles },\n    { key: \"bbq\", label: t(\"ai.keywords.bbq\"), icon: Sparkles },\n    { key: \"bibimbap\", label: t(\"ai.keywords.bibimbap\"), icon: Sparkles },\n    { key: \"traditional\", label: t(\"ai.keywords.traditional\"), icon: Sparkles },\n    { key: \"modern\", label: t(\"ai.keywords.modern\"), icon: Sparkles },\n    { key: \"streetFood\", label: t(\"ai.keywords.streetFood\"), icon: Sparkles },\n    { key: \"chinese\", label: t(\"ai.keywords.chinese\"), icon: Sparkles },\n    { key: \"trending\", label: t(\"ai.keywords.trending\"), icon: Sparkles },\n  ];\n\n  const handleLocationSelect = (location: \"nearby\" | \"other\") => {\n    setSelectedLocation(location);\n    setLocationSelected(true);\n    \n    // Add location selection as user message\n    const locationText = location === \"nearby\" \n      ? t(\"ai.nearbyButton\") \n      : t(\"ai.otherAreaButton\");\n    \n    const newUserMessage = { \n      id: messages.length + 1, \n      type: \"user\" as const, \n      content: locationText \n    };\n    setMessages(prev => [...prev, newUserMessage]);\n\n    if (location === \"nearby\") {\n      // For nearby, skip area selection and go straight to keywords\n      setAreaSelected(true);\n      setSelectedArea(\"nearby\");\n      \n      const aiResponse = language === \"en\" \n        ? \"Great! I'll help you find nearby restaurants. What type of cuisine or dish are you interested in?\" \n        : \"ì¢‹ì•„ìš”! ê·¼ì²˜ ë§›ì§‘ì„ ì°¾ì•„ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì–´ë–¤ ìŒì‹ì´ë‚˜ ìš”ë¦¬ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?\";\n\n      setTimeout(() => {\n        setMessages(prev => [...prev, {\n          id: prev.length + 1,\n          type: \"ai\",\n          content: aiResponse,\n        }]);\n      }, 500);\n    }\n    // For \"other\", don't add AI response yet - wait for area selection\n  };\n\n  const handleAreaSelect = (area: string) => {\n    setAreaSelected(true);\n    setSelectedArea(area);\n    \n    // Add area selection as user message\n    const newUserMessage = { \n      id: messages.length + 1, \n      type: \"user\" as const, \n      content: area \n    };\n    setMessages(prev => [...prev, newUserMessage]);\n\n    // Add AI response\n    const aiResponse = language === \"en\"\n      ? `Perfect! Let's find great restaurants in ${area}. What type of cuisine are you looking for?`\n      : `ì¢‹ì•„ìš”! ${area}ì˜ ë§›ì§‘ì„ ì°¾ì•„ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì–´ë–¤ ì¢…ë¥˜ì˜ ìŒì‹ì„ ì°¾ìœ¼ì‹œë‚˜ìš”?`;\n\n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        id: prev.length + 1,\n        type: \"ai\",\n        content: aiResponse,\n      }]);\n    }, 500);\n  };\n\n  const handleCustomAreaSubmit = () => {\n    if (!customAreaInput.trim()) return;\n    handleAreaSelect(customAreaInput.trim());\n    setCustomAreaInput(\"\");\n  };\n\n  const handleKeywordClick = (keyword: string) => {\n    handleSend(keyword);\n  };\n\n  const handleSend = async (messageText?: string) => {\n    const userMessage = messageText || input.trim();\n    if (!userMessage) return;\n    \n    const newUserMessage = { id: messages.length + 1, type: \"user\" as const, content: userMessage };\n    setMessages(prev => [...prev, newUserMessage]);\n    setInput(\"\");\n    setIsLoading(true);\n    \n    try {\n      const res = await fetch(\"/api/ai/chat\", {\n        method: \"POST\",\n        body: JSON.stringify({ \n          message: userMessage, \n          language,\n          location: selectedLocation,\n          area: selectedArea\n        }),\n        headers: { \"Content-Type\": \"application/json\" },\n        credentials: \"include\",\n      });\n\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n\n      const data = await res.json();\n      \n      setMessages(prev => [\n        ...prev,\n        {\n          id: prev.length + 1,\n          type: \"ai\",\n          content: data.response,\n        },\n      ]);\n    } catch (error) {\n      console.error(\"AI chat error:\", error);\n      setMessages(prev => [\n        ...prev,\n        {\n          id: prev.length + 1,\n          type: \"ai\",\n          content: language === \"en\" \n            ? \"Sorry, I encountered an error. Please try again.\" \n            : \"ì£„ì†¡í•©ë‹ˆë‹¤, ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\",\n        },\n      ]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <SEO\n        title={t(\"ai.title\")}\n        description=\"Get personalized Korean restaurant recommendations with AI. Perfect for tourists visiting Korea.\"\n        keywords={[\"AI recommendations\", \"Korean food guide\", \"restaurant finder\", \"tourist guide\", \"AI concierge\"]}\n        url=\"/ai\"\n      />\n      <div className=\"min-h-screen bg-background pb-[72px] flex flex-col\">\n        {/* Header */}\n        <header className=\"sticky top-0 z-50 bg-primary text-primary-foreground shadow-md\">\n          <div className=\"max-w-md mx-auto px-4 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0\">\n                  <Bot className=\"w-6 h-6\" />\n                </div>\n                <div>\n                  <h1 className=\"text-base font-bold\">{t(\"ai.title\")}</h1>\n                  <p className=\"text-xs text-primary-foreground/80\">{t(\"app.tagline\")}</p>\n                </div>\n              </div>\n              <LanguageSelector />\n            </div>\n          </div>\n        </header>\n\n        {/* Ad Banner */}\n        <div className=\"px-4 pt-4\">\n          <AdSlot variant=\"banner\" />\n        </div>\n\n        {/* Chat Messages */}\n        <div \n          ref={chatContainerRef}\n          className=\"flex-1 overflow-y-auto px-4 py-6 space-y-4\"\n        >\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex ${message.type === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n            >\n              <div\n                className={`max-w-[80%] rounded-2xl px-4 py-3 ${\n                  message.type === \"user\"\n                    ? \"bg-primary text-primary-foreground rounded-br-sm\"\n                    : \"bg-card text-foreground border border-border rounded-bl-sm\"\n                }`}\n                data-testid={`message-${message.type}-${message.id}`}\n              >\n                {message.type === \"ai\" && (\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Bot className=\"w-4 h-4 text-primary\" />\n                    <span className=\"text-xs font-medium text-primary\">AI Assistant</span>\n                  </div>\n                )}\n                <p className=\"text-sm whitespace-pre-line leading-relaxed\">\n                  {message.content}\n                </p>\n              </div>\n            </div>\n          ))}\n\n          {/* Loading indicator */}\n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"max-w-[80%] rounded-2xl px-4 py-3 bg-card text-foreground border border-border rounded-bl-sm\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Bot className=\"w-4 h-4 text-primary\" />\n                  <span className=\"text-xs font-medium text-primary\">AI Assistant</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\n                  <p className=\"text-sm text-muted-foreground\">\n                    {language === \"en\" ? \"Thinking...\" : \"ìƒê° ì¤‘...\"}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step 1: Location Selection - Shows first */}\n          {messages.length === 1 && !locationSelected && !isLoading && (\n            <div className=\"pt-4\" data-testid=\"location-selection\">\n              <div className=\"flex justify-start mb-4\">\n                <div className=\"max-w-[80%] rounded-2xl px-4 py-3 bg-card text-foreground border border-border rounded-bl-sm\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Bot className=\"w-4 h-4 text-primary\" />\n                    <span className=\"text-xs font-medium text-primary\">AI Assistant</span>\n                  </div>\n                  <p className=\"text-sm whitespace-pre-line leading-relaxed\">\n                    {t(\"ai.locationQuestion\")}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"grid grid-cols-2 gap-3\">\n                <Button\n                  variant=\"outline\"\n                  className=\"h-auto py-4 flex flex-col items-center gap-2 hover-elevate active-elevate-2\"\n                  onClick={() => handleLocationSelect(\"nearby\")}\n                  data-testid=\"button-nearby\"\n                >\n                  <MapPin className=\"w-6 h-6 text-primary\" />\n                  <span className=\"font-medium\">{t(\"ai.nearbyButton\")}</span>\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  className=\"h-auto py-4 flex flex-col items-center gap-2 hover-elevate active-elevate-2\"\n                  onClick={() => handleLocationSelect(\"other\")}\n                  data-testid=\"button-other-area\"\n                >\n                  <Sparkles className=\"w-6 h-6 text-primary\" />\n                  <span className=\"font-medium\">{t(\"ai.otherAreaButton\")}</span>\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Step 2: Area Selection - Shows when \"Other Area\" is selected */}\n          {locationSelected && selectedLocation === \"other\" && !areaSelected && !isLoading && (\n            <div className=\"pt-4\" data-testid=\"area-selection\">\n              <div className=\"flex justify-start mb-4\">\n                <div className=\"max-w-[80%] rounded-2xl px-4 py-3 bg-card text-foreground border border-border rounded-bl-sm\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Bot className=\"w-4 h-4 text-primary\" />\n                    <span className=\"text-xs font-medium text-primary\">AI Assistant</span>\n                  </div>\n                  <p className=\"text-sm whitespace-pre-line leading-relaxed\">\n                    {t(\"ai.areaSelectionQuestion\")}\n                  </p>\n                </div>\n              </div>\n\n              <p className=\"text-xs text-muted-foreground mb-3 px-1\">\n                {t(\"ai.popularDestinations\")}\n              </p>\n              \n              <div className=\"grid grid-cols-2 gap-2 mb-4\">\n                {destinations.map((destination) => (\n                  <Button\n                    key={destination.key}\n                    variant=\"outline\"\n                    className=\"h-auto py-3 hover-elevate active-elevate-2\"\n                    onClick={() => handleAreaSelect(destination.label)}\n                    data-testid={`destination-${destination.key}`}\n                  >\n                    <span className=\"font-medium\">{destination.label}</span>\n                  </Button>\n                ))}\n              </div>\n\n              {/* Custom area input */}\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={customAreaInput}\n                  onChange={(e) => setCustomAreaInput(e.target.value)}\n                  onKeyPress={(e) => e.key === \"Enter\" && handleCustomAreaSubmit()}\n                  placeholder={t(\"ai.customAreaPlaceholder\")}\n                  className=\"flex-1 px-4 py-3 rounded-full bg-muted text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary text-sm\"\n                  data-testid=\"input-custom-area\"\n                />\n                <Button\n                  size=\"icon\"\n                  className=\"rounded-full w-12 h-12 flex-shrink-0\"\n                  onClick={handleCustomAreaSubmit}\n                  disabled={!customAreaInput.trim()}\n                  data-testid=\"button-submit-custom-area\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Step 3: Keyword Suggestions - Shows after area is selected */}\n          {areaSelected && messages.length <= 6 && !isLoading && (\n            <div className=\"pt-4\" data-testid=\"keyword-suggestions\">\n              <p className=\"text-xs text-muted-foreground mb-3 px-1\">\n                {t(\"ai.quickSuggestions\")}\n              </p>\n              <div className=\"grid grid-cols-2 gap-2\">\n                {keywords.map((keyword) => {\n                  const Icon = keyword.icon;\n                  return (\n                    <Card\n                      key={keyword.key}\n                      className=\"p-3 hover-elevate active-elevate-2 cursor-pointer\"\n                      onClick={() => handleKeywordClick(keyword.label)}\n                      data-testid={`keyword-${keyword.key}`}\n                    >\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                          <Icon className=\"w-4 h-4 text-primary\" />\n                        </div>\n                        <p className=\"text-sm font-medium leading-tight flex-1\">\n                          {keyword.label}\n                        </p>\n                      </div>\n                    </Card>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {/* Auto-scroll anchor */}\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Input Area */}\n        <div className=\"sticky bottom-[72px] bg-background border-t border-border\">\n          <div className=\"max-w-md mx-auto px-4 py-3\">\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyPress={(e) => e.key === \"Enter\" && handleSend()}\n                placeholder={t(\"ai.placeholder\")}\n                className=\"flex-1 px-4 py-3 rounded-full bg-muted text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                data-testid=\"input-message\"\n              />\n              <Button\n                size=\"icon\"\n                className=\"rounded-full w-12 h-12\"\n                onClick={() => handleSend()}\n                disabled={!input.trim() || isLoading}\n                data-testid=\"button-send\"\n              >\n                {isLoading ? (\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                ) : (\n                  <Send className=\"w-5 h-5\" />\n                )}\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        <BottomNav />\n      </div>\n    </>\n  );\n}\n","size_bytes":17286},"design_guidelines.md":{"content":"# Design Guidelines: han sik dang (í•œì‹ë‹¹)\n\n## Design Philosophy\n**Hybrid Content Platform + Utility App** - Korean restaurant discovery with content monetization through ads. Content-first, mobile-native, visually-driven design prioritizing Korean food imagery and efficient information architecture.\n\n---\n\n## Color System\n\n**Foundation Variables (Based on Logo):**\n```css\n--primary: 155 65% 45%        /* Forest Green (from logo text) */\n--secondary: 28 70% 55%       /* Warm Orange (from bowl) */\n--foreground: 20 15% 25%      /* Dark Brown */\n--card: 0 0 100               /* Pure White */\n--background: 40 20% 97%      /* Warm Off-White */\n--muted-foreground: 30 10% 50%\n--accent-success: 142 76% 36% /* Ratings */\n--accent-warning: 28 85% 60%  /* Spicy indicator */\n--video-indicator: 0 84% 60%\n--blog-indicator: 155 65% 55%\n--ad-zone: 40 15% 96%         /* Ad backgrounds */\n```\n\n**Dark Mode:**\n```css\n--background: 20 20% 12%\n--card: 20 15% 15%\n--primary: 155 60% 55%        /* Lighter green for contrast */\n--secondary: 28 75% 65%       /* Lighter orange */\n--foreground: 40 20% 95%\n```\n\n**Requirements:** 4.5:1 text contrast, 3:1 icon contrast, ad zones maintain visibility in both modes.\n\n---\n\n## Typography\n\n**Font Stack:**\n- Korean: `-apple-system, \"Noto Sans KR\", sans-serif`\n- English: `-apple-system, \"SF Pro Display\", sans-serif`\n- Long-form: `\"Georgia\", serif` (blogs)\n\n**Scale:**\n```css\nDisplay:  32px / 700  /* Hero only */\nXL:       24px / 600  /* Sections */\nLG:       18px / 500  /* Restaurant/blog titles */\nBase:     16px / 400  /* Body */\nSM:       14px / 400  /* Metadata */\nXS:       12px / 400  /* Labels */\n```\n\n**Content-Specific:**\n- Video titles: 18px/600, line-height 1.3\n- Blog excerpts: 16px/400, line-height 1.6\n- Min mobile text: 14px, 44px touch targets\n\n---\n\n## Layout Architecture\n\n**Spacing:** 8px increments only: `8, 16, 24, 32, 48px`  \n**Container:** `max-w-md` (448px) mobile, centered desktop\n\n**Universal Screen Structure:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Header (60px) z-50  â”‚ Sticky\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Scrollable Content  â”‚ flex-1\nâ”‚ (8px grid spacing)  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Bottom Nav (72px)   â”‚ z-40 Sticky\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Ad Placement Pattern:**\n- Top: 90px banner after header\n- Mid: 250px rectangle every 3 content items (32px margin top/bottom)\n- Detail pages: Mid-content rectangle after description\n- Bottom: 90px banner before nav\n\n---\n\n## Core Components\n\n### Cards\n```css\nbackground: var(--card);\nborder-radius: 12px;\npadding: 16px;\nbox-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\nhover: translateY(-4px) + enhanced shadow;\nactive: scale(0.98);\n```\n\n### Buttons\n- **Primary:** `var(--primary)` bg, white text, 44px height\n- **Secondary:** Transparent bg, `var(--primary)` border/text\n- **Icon:** 40Ã—40px circle, 24px icon\n\n### Bottom Navigation (72px)\n- 4 tabs: Discover, AI, Content, My\n- Icons: 24px Lucide React\n- Active: `var(--primary)` + 2px top border\n- Labels: 12px below icons, 4px gap\n\n### Tags/Chips\n```css\npadding: 8px 16px;\nborder-radius: 16px; /* Pill */\nbackground: var(--primary) at 10% opacity;\nfont-size: 14px;\n```\n\n### Search Bar\n```css\nheight: 48px;\nborder-radius: 24px; /* Pill */\nbackground: var(--muted);\nicon: left-aligned, 16px;\n```\n\n---\n\n## Content Components\n\n### YouTube Embed\n```css\naspect-ratio: 16/9;\nborder-radius: 12px;\nplay-button: 64px centered circle overlay;\nduration-badge: bottom-right, 8px padding, dark bg;\nautoplay: OFF;\nrelated-videos: OFF;\n```\n\n### Blog Card\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Thumbnail (16:9)    â”‚ 200px height, cover\nâ”‚ 200px height        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Title (18px/600)    â”‚ 2 lines max, ellipsis\nâ”‚ Excerpt (14px/400)  â”‚ 3 lines max\nâ”‚ ğŸ•’ Read Time (12px) â”‚ Muted\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Review Card\n```\nAvatar (40px) â”‚ Name + Date (vertical)\n              â”‚ â˜…â˜…â˜…â˜…â˜… (16px gold stars)\n              â”‚ Comment text (16px)\n              â”‚ Photos (80px squares, horizontal scroll)\n```\n\n### AI Chat Bubble\n```css\nuser: right-aligned, var(--primary) bg, white text;\nai: left-aligned, var(--muted) bg, black text;\nborder-radius: 16px 16px 4px 16px; /* Speech bubble */\nmax-width: 80%;\npadding: 12px 16px;\n```\n\n### Ad Container\n```css\nbackground: var(--ad-zone);\nlabel: \"Advertisement\" 10px, top-right, muted;\nmin-height: 90px | 250px; /* AdSense compliant */\nborder: none; /* Seamless */\n```\n\n---\n\n## Image Strategy\n\n### NO Traditional Hero\n**Instead:** AI Recommendation section (160px height)\n```css\nbackground: linear-gradient(135deg, var(--primary) 0%, #2D9CDB 100%);\ncontent: AI icon + title + CTA;\n```\n\n### Image Specs\n- **Restaurant primary:** 16:9, 400px min width\n- **Gallery thumbnails:** 80Ã—80px squares\n- **Blog headers:** 16:9, 800px width\n- **Video thumbnails:** YouTube auto-generated\n- **Format:** WebP, lazy load (200px before viewport), blur placeholder\n\n### Korean Food Photography\n- Warm tones (enhance reds/oranges)\n- Top-down banchan layouts\n- Close-ups (texture focus)\n- Context (wooden tables, traditional bowls)\n\n---\n\n## Section Patterns\n\n### Trending Videos\n```\nğŸ”¥ ì¸ê¸° ì˜ìƒ (18px bold)\n[Horizontal scroll: 280px cards, 16:9 thumbnail, 16px gap]\n```\n\n### Thematic Sections\n```\nğŸŒ± í•œì‹ ì´ˆë³´ì ì¶”ì²œ / Beginner-Friendly (emoji + KR + EN)\n[2-column grid mobile, 16px gap, square images with gradient title overlay]\n```\n\n### Neighborhood\n```\nğŸ“ [Area Name] ë§›ì§‘\n[Vertical list, restaurant cards with distance badge]\n```\n\n### Blog Feed\n```\nğŸ“ ìµœì‹  ê¸€\n[Vertical full-width: Image + Title + Excerpt + Read Time]\n```\n\n---\n\n## Animations\n\n**Principles:** Minimal motion, respect `prefers-reduced-motion`\n\n```css\ncard-tap: scale(0.98), 100ms ease-out;\npage-transition: slide-up 300ms + fade-in;\nloading: skeleton shimmer (subtle gray wave);\nscroll-reveal: fade-in + translateY(-20px);\n```\n\n**Prohibited:** Auto-play videos, infinite scroll animations, parallax, complex transitions\n\n---\n\n## Accessibility\n\n- **Contrast:** 4.5:1 text, 3:1 icons\n- **Touch targets:** 44Ã—44px minimum\n- **Bottom nav:** Primary actions (thumb-zone optimized)\n- **Swipe gestures:** 100px minimum distance\n- **Dark mode:** Full support, test all ad placements\n\n---\n\n## Mobile Optimization\n\n**Thumb Zone:**\n- Bottom: Primary nav (easy reach)\n- Top: Secondary actions (search/filter)\n- Center: Scroll-only content\n\n**Performance:**\n- Infinite scroll: Intersection Observer\n- Virtual scrolling: Long lists\n- Lazy load: Images 200px before viewport\n- Target: 60fps scrolling\n\n---\n\n## Revenue Strategy\n\n**High-Value Ad Zones:**\n1. Above fold: 90px banner\n2. Every 3 content items: 250px rectangle\n3. Detail mid-content: After description\n4. AI chat: Bottom sticky banner\n\n**YouTube Integration:**\n- Autoplay OFF, related videos OFF\n- `maxresdefault` thumbnails\n- View tracking on play event\n\n**Engagement Drivers:**\n- \"Read More\" truncated excerpts\n- Visible video duration\n- Prominent save/share buttons\n\n---\n\n## Critical Rules\n\n1. âœ… **CSS Variables only** - No Tailwind classes\n2. âœ… **8px grid** - All spacing multiples of 8\n3. âœ… **44px touch targets** - All interactive elements\n4. âœ… **Lucide React icons** - 24px size, consistent\n5. âœ… **Ad labeling** - Always \"Advertisement\", never cover content\n6. âœ… **Korean priority** - Korean first, English subtitle\n7. âœ… **WebP images** - Lazy load, blur placeholder\n8. âœ… **Dark mode** - Full support, test all states\n9. âœ… **60fps** - Performance budgets, instant feedback\n10. âœ… **Content density** - Information-rich, not cluttered\n\n---\n\n## Implementation Checklist\n\n1. Implement `globals.css` with 88 CSS variables\n2. Build core components (Card, Button, Nav)\n3. Create MainScreen with ad placeholders\n4. Integrate Gemini AI chat\n5. Add YouTube/Blog content sections\n\n**Design Priority:** Monetization through strategic ads + Korean food visual appeal + mobile-first efficiency + cultural authenticity","size_bytes":8241},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/LanguageSelector.tsx":{"content":"import { Globe } from \"lucide-react\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { languages } from \"@shared/i18n\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Button } from \"@/components/ui/button\";\n\nexport function LanguageSelector() {\n  const { language, setLanguage } = useLanguage();\n\n  const currentLanguage = languages.find((l) => l.code === language) || languages[0];\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"gap-2 hover-elevate active-elevate-2\"\n          data-testid=\"button-language-selector\"\n        >\n          <Globe className=\"w-4 h-4\" />\n          <span className=\"text-xs font-medium\">{currentLanguage.nativeName}</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-56\">\n        {languages.map((lang) => (\n          <DropdownMenuItem\n            key={lang.code}\n            onClick={() => setLanguage(lang.code)}\n            className={`cursor-pointer ${language === lang.code ? \"bg-accent\" : \"\"}`}\n            data-testid={`language-${lang.code}`}\n          >\n            <div className=\"flex flex-col\">\n              <span className=\"font-medium\">{lang.nativeName}</span>\n              <span className=\"text-xs text-muted-foreground\">{lang.name}</span>\n            </div>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","size_bytes":1570},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/pages/ContentPage.tsx":{"content":"import { BookText, Play, Clock, TrendingUp, Calendar, Bell, ChevronRight } from \"lucide-react\";\nimport { BottomNav } from \"@/components/BottomNav\";\nimport { LanguageSelector } from \"@/components/LanguageSelector\";\nimport { SEO } from \"@/components/SEO\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea, ScrollBar } from \"@/components/ui/scroll-area\";\nimport { AdSlot } from \"@/components/AdSlot\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { Announcement, EventBanner } from \"@shared/schema\";\n\nexport default function ContentPage() {\n  const { t, language } = useLanguage();\n\n  const { data: announcements = [] } = useQuery<Announcement[]>({\n    queryKey: [\"/api/announcements\"],\n  });\n\n  const { data: eventBanners = [] } = useQuery<EventBanner[]>({\n    queryKey: [\"/api/event-banners\"],\n  });\n\n  const videos = [\n    {\n      id: 1,\n      title: \"í™ëŒ€ í•œì‹ë‹¹ BEST 5 - ì™¸êµ­ì¸ì´ ê¼­ ê°€ì•¼í•  ë§›ì§‘\",\n      titleEn: \"Top 5 Korean Restaurants in Hongdae for Tourists\",\n      thumbnail: \"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400\",\n      duration: \"12:34\",\n      views: \"15.2K\",\n      date: \"2 days ago\",\n    },\n    {\n      id: 2,\n      title: \"í•œì‹ ì´ˆë³´ì ê°€ì´ë“œ - ë­˜ ì£¼ë¬¸í•´ì•¼ í• ê¹Œ?\",\n      titleEn: \"Korean Food Guide for Beginners\",\n      thumbnail: \"https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=400\",\n      duration: \"8:45\",\n      views: \"23.5K\",\n      date: \"4 days ago\",\n    },\n    {\n      id: 3,\n      title: \"ê¹€ì¹˜ì°Œê°œ ë§›ì§‘ íˆ¬ì–´ - ì„œìš¸ 5ê³³\",\n      titleEn: \"Best Kimchi Jjigae in Seoul - 5 Places\",\n      thumbnail: \"https://images.unsplash.com/photo-1580822184713-fc5400e7fe10?w=400\",\n      duration: \"15:20\",\n      views: \"18.7K\",\n      date: \"1 week ago\",\n    },\n  ];\n\n  const blogs = [\n    {\n      id: 1,\n      title: \"í™ëŒ€ í•œì‹ë‹¹ ì™„ë²½ ê°€ì´ë“œ - ì™¸êµ­ì¸ ê´€ê´‘ê°ì„ ìœ„í•œ ì¶”ì²œ\",\n      titleEn: \"Complete Guide to Korean Restaurants in Hongdae\",\n      excerpt: \"í™ëŒ€ëŠ” ì„œìš¸ì—ì„œ ê°€ì¥ í™œê¸°ì°¬ ì§€ì—­ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì „í†µ í•œì‹ë¶€í„° í“¨ì „ ìš”ë¦¬ê¹Œì§€...\",\n      excerptEn: \"Hongdae is one of Seoul's most vibrant areas...\",\n      image: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800\",\n      readTime: \"5 min\",\n      date: \"1 day ago\",\n      categoryKey: \"category.guide\" as const,\n    },\n    {\n      id: 2,\n      title: \"í•œì‹ ë©”ë‰´ ì£¼ë¬¸ ê°€ì´ë“œ - ì´ê²ƒë§Œ ì•Œë©´ OK\",\n      titleEn: \"How to Order Korean Food Like a Pro\",\n      excerpt: \"í•œêµ­ ì‹ë‹¹ì—ì„œ ì²˜ìŒ ì£¼ë¬¸í•˜ëŠ” ê²ƒì´ ë‘ë µë‚˜ìš”? ê±±ì • ë§ˆì„¸ìš”...\",\n      excerptEn: \"Nervous about ordering at a Korean restaurant?...\",\n      image: \"https://images.unsplash.com/photo-1553163147-622ab57be1c7?w=800\",\n      readTime: \"4 min\",\n      date: \"3 days ago\",\n      categoryKey: \"category.tips\" as const,\n    },\n    {\n      id: 3,\n      title: \"ì„œìš¸ ì „í†µ í•œì •ì‹ ë§›ì§‘ TOP 10\",\n      titleEn: \"Top 10 Traditional Korean Set Menu Restaurants\",\n      excerpt: \"ê²©ì‹ìˆëŠ” í•œì •ì‹ì„ ê²½í—˜í•˜ê³  ì‹¶ë‹¤ë©´ ì´ê³³ì„ ë°©ë¬¸í•˜ì„¸ìš”...\",\n      excerptEn: \"Experience authentic Korean set menu at these places...\",\n      image: \"https://images.unsplash.com/photo-1590301157890-4810ed352733?w=800\",\n      readTime: \"7 min\",\n      date: \"5 days ago\",\n      categoryKey: \"category.recommendation\" as const,\n    },\n  ];\n\n  return (\n    <>\n      <SEO\n        title={t(\"content.title\")}\n        description=\"Discover Korean food culture through videos and blogs. Learn about authentic restaurants and Korean cuisine.\"\n        keywords={[\"Korean food videos\", \"restaurant blogs\", \"Korean cuisine guide\", \"food content\", \"travel guides\"]}\n        url=\"/content\"\n      />\n      <div className=\"min-h-screen bg-background pb-[72px]\">\n        {/* Header */}\n      <header className=\"sticky top-0 z-50 bg-card border-b border-border\">\n        <div className=\"max-w-7xl mx-auto px-4 xl:px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <img\n              src=\"/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png\"\n              alt=\"í•œì‹ë‹¹\"\n              className=\"h-8\"\n            />\n            <div className=\"flex items-center gap-1\">\n              <LanguageSelector />\n              <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-filter\">\n                {t(\"content.filter\")}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Top Ad */}\n        <div className=\"px-4 pt-4\">\n          <AdSlot variant=\"banner\" />\n        </div>\n\n        {/* Trending Videos Section */}\n        <section className=\"px-4 py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-full bg-[hsl(var(--video-indicator))] flex items-center justify-center\">\n                <Play className=\"w-4 h-4 text-white fill-white\" />\n              </div>\n              <h2 className=\"text-lg font-bold\">{t(\"content.videos\")}</h2>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-videos\">\n              {t(\"content.seeAll\")}\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n            {videos.map((video) => (\n              <Card\n                key={video.id}\n                className=\"overflow-hidden hover-elevate active-elevate-2 cursor-pointer\"\n                data-testid={`card-video-${video.id}`}\n              >\n                <div className=\"flex flex-col\">\n                  <div className=\"relative w-full aspect-video overflow-hidden\">\n                    <img\n                      src={video.thumbnail}\n                      alt={video.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <div className=\"absolute inset-0 bg-black/30 flex items-center justify-center\">\n                      <div className=\"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center\">\n                        <Play className=\"w-6 h-6 text-primary fill-primary ml-0.5\" />\n                      </div>\n                    </div>\n                    <div className=\"absolute bottom-2 right-2 bg-black/80 text-white text-xs px-1.5 py-0.5 rounded\">\n                      {video.duration}\n                    </div>\n                  </div>\n                  <div className=\"p-3\">\n                    <h3 className=\"font-semibold text-sm mb-1 line-clamp-2\">\n                      {language === \"en\" ? video.titleEn : video.title}\n                    </h3>\n                    {language !== \"en\" && language !== \"ko\" && (\n                      <p className=\"text-xs text-muted-foreground mb-2 line-clamp-1\">\n                        {video.titleEn}\n                      </p>\n                    )}\n                    <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                      <TrendingUp className=\"w-3 h-3\" />\n                      <span>{video.views} {t(\"content.views\")}</span>\n                      <span>â€¢</span>\n                      <span>{video.date}</span>\n                    </div>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        </section>\n\n        {/* Event Banners */}\n        {eventBanners.length > 0 && (\n          <section className=\"py-4\">\n            <div className=\"px-4 mb-3\">\n              <h2 className=\"text-lg font-semibold\">{t(\"events.title\")}</h2>\n            </div>\n            <ScrollArea className=\"w-full whitespace-nowrap\">\n              <div className=\"flex gap-4 px-4 pb-2\">\n                {eventBanners.map((banner) => (\n                  <a\n                    key={banner.id}\n                    href={banner.linkUrl || \"#\"}\n                    target={banner.linkUrl ? \"_blank\" : undefined}\n                    rel={banner.linkUrl ? \"noopener noreferrer\" : undefined}\n                    className=\"flex-shrink-0\"\n                    data-testid={`banner-event-${banner.id}`}\n                  >\n                    <Card className=\"w-[320px] overflow-hidden hover-elevate active-elevate-2 cursor-pointer\">\n                      <div className=\"relative aspect-[2/1]\">\n                        <img\n                          src={banner.imageUrl}\n                          alt={language === \"en\" ? banner.titleEn : banner.title}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      </div>\n                      <div className=\"p-4\">\n                        <h3 className=\"font-semibold text-base mb-1\">\n                          {language === \"en\" ? banner.titleEn : banner.title}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                          {language === \"en\" ? banner.descriptionEn : banner.description}\n                        </p>\n                      </div>\n                    </Card>\n                  </a>\n                ))}\n              </div>\n              <ScrollBar orientation=\"horizontal\" />\n            </ScrollArea>\n          </section>\n        )}\n\n        {/* Mid Ad */}\n        <div className=\"px-4 py-4\">\n          <AdSlot variant=\"rectangle\" />\n        </div>\n\n        {/* Blog Posts Section */}\n        <section className=\"px-4 py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-full bg-[hsl(var(--blog-indicator))] flex items-center justify-center text-white text-sm font-bold\">\n                B\n              </div>\n              <h2 className=\"text-lg font-bold\">{t(\"content.blogs\")}</h2>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-blogs\">\n              {t(\"content.seeAll\")}\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n            {blogs.map((blog) => (\n              <Card\n                key={blog.id}\n                className=\"overflow-hidden hover-elevate active-elevate-2 cursor-pointer\"\n                data-testid={`card-blog-${blog.id}`}\n              >\n                <img\n                  src={blog.image}\n                  alt={blog.title}\n                  className=\"w-full h-48 object-cover\"\n                />\n                <div className=\"p-4\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Badge variant=\"secondary\" className=\"text-xs\">\n                      {t(blog.categoryKey)}\n                    </Badge>\n                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                      <Clock className=\"w-3 h-3\" />\n                      <span>{blog.readTime} read</span>\n                    </div>\n                  </div>\n                  <h3 className=\"font-bold text-base mb-2 line-clamp-2\">\n                    {language === \"en\" ? blog.titleEn : blog.title}\n                  </h3>\n                  {language !== \"en\" && language !== \"ko\" && (\n                    <p className=\"text-sm text-muted-foreground mb-1 line-clamp-1\">\n                      {blog.titleEn}\n                    </p>\n                  )}\n                  <p className=\"text-sm mb-3 line-clamp-2\">\n                    {language === \"en\" ? blog.excerptEn : blog.excerpt}\n                  </p>\n                  <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                    <Calendar className=\"w-3 h-3\" />\n                    <span>{blog.date}</span>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        </section>\n\n        {/* Announcements Section */}\n        <section className=\"px-4 py-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5 text-primary\" />\n              <h2 className=\"text-lg font-semibold\">{t(\"announcements.title\")}</h2>\n            </div>\n            <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-see-all-announcements\">\n              {t(\"announcements.viewAll\")}\n            </Button>\n          </div>\n\n          {announcements.length === 0 ? (\n            <Card className=\"p-6 text-center\">\n              <p className=\"text-sm text-muted-foreground\">{t(\"announcements.noItems\")}</p>\n            </Card>\n          ) : (\n            <div className=\"space-y-2\">\n              {announcements.slice(0, 2).map((announcement) => (\n                <Card\n                  key={announcement.id}\n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  data-testid={`card-announcement-${announcement.id}`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {announcement.isPinned === 1 && (\n                      <Badge variant=\"secondary\" className=\"text-xs flex-shrink-0\">\n                        ğŸ“Œ\n                      </Badge>\n                    )}\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold text-sm line-clamp-2\">\n                        {language === \"en\" ? announcement.titleEn : announcement.title}\n                      </h3>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {new Date(announcement.createdAt).toLocaleDateString(language === \"en\" ? \"en-US\" : \"ko-KR\")}\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-4 h-4 text-muted-foreground flex-shrink-0\" />\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </section>\n\n        {/* Bottom Ad */}\n        <div className=\"px-4 pb-6\">\n          <AdSlot variant=\"banner\" />\n        </div>\n      </div>\n\n      <BottomNav />\n    </div>\n    </>\n  );\n}\n","size_bytes":14285},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, timestamp, real, jsonb, index, unique } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table for Replit Auth\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  isAdmin: integer(\"is_admin\").notNull().default(0),\n  tier: varchar(\"tier\").notNull().default(\"bronze\"), // bronze, silver, gold, platinum\n  language: varchar(\"language\").default(\"ko\"), // ko, en, ja, zh-CN, zh-TW, es, fr, de, ru\n  ssoProvider: varchar(\"sso_provider\"), // google, apple, github, replit, etc.\n  region: varchar(\"region\"),\n  visitors1d: integer(\"visitors_1d\").notNull().default(0),\n  visitors7d: integer(\"visitors_7d\").notNull().default(0),\n  visitors10d: integer(\"visitors_10d\").notNull().default(0),\n  visitors30d: integer(\"visitors_30d\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\nexport const restaurants = pgTable(\"restaurants\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  nameEn: text(\"name_en\").notNull(),\n  category: text(\"category\").notNull(),\n  cuisine: text(\"cuisine\").notNull(),\n  district: text(\"district\").notNull(),\n  address: text(\"address\").notNull(),\n  latitude: real(\"latitude\"),\n  longitude: real(\"longitude\"),\n  description: text(\"description\").notNull(),\n  descriptionEn: text(\"description_en\").notNull(),\n  rating: real(\"rating\").notNull().default(0),\n  reviewCount: integer(\"review_count\").notNull().default(0),\n  priceRange: integer(\"price_range\").notNull(),\n  imageUrl: text(\"image_url\").notNull(),\n  openHours: text(\"open_hours\").notNull(),\n  phone: text(\"phone\"),\n  naverPlaceId: text(\"naver_place_id\"),\n  googlePlaceId: text(\"google_place_id\"),\n  naverMapUrl: text(\"naver_map_url\"),\n  googleMapUrl: text(\"google_map_url\"),\n  naverRating: real(\"naver_rating\"),\n  naverReviewCount: integer(\"naver_review_count\"),\n  googleRating: real(\"google_rating\"),\n  googleReviewCount: integer(\"google_review_count\"),\n  popularityScore: real(\"popularity_score\"),\n  isVegan: integer(\"is_vegan\").notNull().default(0),\n  isHalal: integer(\"is_halal\").notNull().default(0),\n  isFeatured: integer(\"is_featured\").notNull().default(0),\n  visitors1d: integer(\"visitors_1d\").notNull().default(0),\n  visitors7d: integer(\"visitors_7d\").notNull().default(0),\n  visitors10d: integer(\"visitors_10d\").notNull().default(0),\n  visitors1m: integer(\"visitors_1m\").notNull().default(0),\n  city: text(\"city\"),\n  districtDetail: text(\"district_detail\"),\n}, (table) => [\n  index(\"idx_restaurants_name\").on(table.name),\n  index(\"idx_restaurants_name_en\").on(table.nameEn),\n  index(\"idx_restaurants_district\").on(table.district),\n  index(\"idx_restaurants_cuisine\").on(table.cuisine),\n  index(\"idx_restaurants_category\").on(table.category),\n  index(\"idx_restaurants_rating\").on(table.rating),\n  index(\"idx_restaurants_is_featured\").on(table.isFeatured),\n  index(\"idx_restaurants_visitors_1m\").on(table.visitors1m),\n  index(\"idx_restaurants_naver_place_id\").on(table.naverPlaceId),\n  index(\"idx_restaurants_popularity_score\").on(table.popularityScore),\n]);\n\nexport const insertRestaurantSchema = createInsertSchema(restaurants).omit({\n  id: true,\n  rating: true,\n  reviewCount: true,\n});\n\nexport type InsertRestaurant = z.infer<typeof insertRestaurantSchema>;\nexport type Restaurant = typeof restaurants.$inferSelect;\n\nexport const reviews = pgTable(\"reviews\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  userId: varchar(\"user_id\").references(() => users.id),\n  userName: text(\"user_name\").notNull(),\n  rating: integer(\"rating\").notNull(),\n  comment: text(\"comment\").notNull(),\n  imageUrls: text(\"image_urls\").array(),\n  videoUrls: text(\"video_urls\").array(),\n  isPinned: integer(\"is_pinned\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_reviews_restaurant_id\").on(table.restaurantId),\n  index(\"idx_reviews_user_id\").on(table.userId),\n  index(\"idx_reviews_created_at\").on(table.createdAt),\n  index(\"idx_reviews_is_pinned\").on(table.isPinned),\n]);\n\nexport const insertReviewSchema = createInsertSchema(reviews).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertReview = z.infer<typeof insertReviewSchema>;\nexport type Review = typeof reviews.$inferSelect;\n\nexport const savedRestaurants = pgTable(\"saved_restaurants\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => ({\n  uniqueUserRestaurant: unique().on(table.userId, table.restaurantId),\n}));\n\nexport const insertSavedRestaurantSchema = createInsertSchema(savedRestaurants).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertSavedRestaurant = z.infer<typeof insertSavedRestaurantSchema>;\nexport type SavedRestaurant = typeof savedRestaurants.$inferSelect;\n\nexport const announcements = pgTable(\"announcements\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  titleEn: text(\"title_en\").notNull(),\n  content: text(\"content\").notNull(),\n  contentEn: text(\"content_en\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  isPinned: integer(\"is_pinned\").notNull().default(0),\n});\n\nexport const insertAnnouncementSchema = createInsertSchema(announcements).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertAnnouncement = z.infer<typeof insertAnnouncementSchema>;\nexport type Announcement = typeof announcements.$inferSelect;\n\nexport const eventBanners = pgTable(\"event_banners\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  titleEn: text(\"title_en\").notNull(),\n  description: text(\"description\").notNull(),\n  descriptionEn: text(\"description_en\").notNull(),\n  imageUrl: text(\"image_url\").notNull(),\n  linkUrl: text(\"link_url\"),\n  startDate: timestamp(\"start_date\").notNull(),\n  endDate: timestamp(\"end_date\").notNull(),\n  isActive: integer(\"is_active\").notNull().default(1),\n  displayOrder: integer(\"display_order\").notNull().default(0),\n});\n\nexport const insertEventBannerSchema = createInsertSchema(eventBanners).omit({\n  id: true,\n});\n\nexport type InsertEventBanner = z.infer<typeof insertEventBannerSchema>;\nexport type EventBanner = typeof eventBanners.$inferSelect;\n\nexport const menus = pgTable(\"menus\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  name: text(\"name\").notNull(),\n  nameEn: text(\"name_en\").notNull(),\n  description: text(\"description\"),\n  descriptionEn: text(\"description_en\"),\n  price: integer(\"price\").notNull(),\n  category: text(\"category\"),\n  imageUrl: text(\"image_url\"),\n  isPopular: integer(\"is_popular\").notNull().default(0),\n  isRecommended: integer(\"is_recommended\").notNull().default(0),\n  displayOrder: integer(\"display_order\").notNull().default(0),\n});\n\nexport const insertMenuSchema = createInsertSchema(menus).omit({\n  id: true,\n});\n\nexport type InsertMenu = z.infer<typeof insertMenuSchema>;\nexport type Menu = typeof menus.$inferSelect;\n\nexport const menuAnalysis = pgTable(\"menu_analysis\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  menuId: varchar(\"menu_id\").notNull().references(() => menus.id),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  howToEat: text(\"how_to_eat\").notNull(),\n  howToEatEn: text(\"how_to_eat_en\").notNull(),\n  orderingTips: text(\"ordering_tips\").notNull(),\n  orderingTipsEn: text(\"ordering_tips_en\").notNull(),\n  pairingRecommendations: text(\"pairing_recommendations\"),\n  pairingRecommendationsEn: text(\"pairing_recommendations_en\"),\n  culturalNotes: text(\"cultural_notes\"),\n  culturalNotesEn: text(\"cultural_notes_en\"),\n  analyzedAt: timestamp(\"analyzed_at\").notNull().defaultNow(),\n});\n\nexport const insertMenuAnalysisSchema = createInsertSchema(menuAnalysis).omit({\n  id: true,\n  analyzedAt: true,\n});\n\nexport type InsertMenuAnalysis = z.infer<typeof insertMenuAnalysisSchema>;\nexport type MenuAnalysis = typeof menuAnalysis.$inferSelect;\n\nexport const youtubeVideos = pgTable(\"youtube_videos\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  videoId: text(\"video_id\").notNull(),\n  title: text(\"title\").notNull(),\n  channelName: text(\"channel_name\").notNull(),\n  thumbnailUrl: text(\"thumbnail_url\").notNull(),\n  viewCount: integer(\"view_count\"),\n  publishedAt: timestamp(\"published_at\"),\n  relevanceScore: real(\"relevance_score\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertYoutubeVideoSchema = createInsertSchema(youtubeVideos).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertYoutubeVideo = z.infer<typeof insertYoutubeVideoSchema>;\nexport type YoutubeVideo = typeof youtubeVideos.$inferSelect;\n\nexport const externalReviews = pgTable(\"external_reviews\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  source: text(\"source\").notNull(),\n  rating: real(\"rating\"),\n  comment: text(\"comment\").notNull(),\n  commentEn: text(\"comment_en\"),\n  author: text(\"author\"),\n  publishedAt: timestamp(\"published_at\"),\n  imageUrls: text(\"image_urls\").array(),\n  fetchedAt: timestamp(\"fetched_at\").notNull().defaultNow(),\n});\n\nexport const insertExternalReviewSchema = createInsertSchema(externalReviews).omit({\n  id: true,\n  fetchedAt: true,\n});\n\nexport type InsertExternalReview = z.infer<typeof insertExternalReviewSchema>;\nexport type ExternalReview = typeof externalReviews.$inferSelect;\n\nexport const restaurantInsights = pgTable(\"restaurant_insights\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id).unique(),\n  reviewInsights: text(\"review_insights\").notNull(),\n  reviewInsightsEn: text(\"review_insights_en\").notNull(),\n  bestFor: text(\"best_for\").notNull(),\n  bestForEn: text(\"best_for_en\").notNull(),\n  culturalTips: text(\"cultural_tips\"),\n  culturalTipsEn: text(\"cultural_tips_en\"),\n  firstTimerTips: text(\"first_timer_tips\").notNull(),\n  firstTimerTipsEn: text(\"first_timer_tips_en\").notNull(),\n  generatedAt: timestamp(\"generated_at\").notNull().defaultNow(),\n  lastUpdated: timestamp(\"last_updated\").notNull().defaultNow(),\n});\n\nexport const insertRestaurantInsightsSchema = createInsertSchema(restaurantInsights).omit({\n  id: true,\n  generatedAt: true,\n  lastUpdated: true,\n});\n\nexport type InsertRestaurantInsights = z.infer<typeof insertRestaurantInsightsSchema>;\nexport type RestaurantInsights = typeof restaurantInsights.$inferSelect;\n\n// Restaurant Owners - Links users to restaurants they manage\nexport const restaurantOwners = pgTable(\"restaurant_owners\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  role: text(\"role\").notNull().default(\"owner\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_restaurant_owners_user_id\").on(table.userId),\n  index(\"idx_restaurant_owners_restaurant_id\").on(table.restaurantId),\n  unique().on(table.userId, table.restaurantId),\n]);\n\nexport const insertRestaurantOwnerSchema = createInsertSchema(restaurantOwners).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertRestaurantOwner = z.infer<typeof insertRestaurantOwnerSchema>;\nexport type RestaurantOwner = typeof restaurantOwners.$inferSelect;\n\n// Review Responses - Restaurant owner responses to reviews\nexport const reviewResponses = pgTable(\"review_responses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  reviewId: varchar(\"review_id\").notNull().references(() => reviews.id),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  response: text(\"response\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_review_responses_review_id\").on(table.reviewId),\n  index(\"idx_review_responses_restaurant_id\").on(table.restaurantId),\n  unique().on(table.reviewId),\n]);\n\nexport const insertReviewResponseSchema = createInsertSchema(reviewResponses).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertReviewResponse = z.infer<typeof insertReviewResponseSchema>;\nexport type ReviewResponse = typeof reviewResponses.$inferSelect;\n\n// Promotions - Restaurant promotional offers\nexport const promotions = pgTable(\"promotions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  title: text(\"title\").notNull(),\n  titleEn: text(\"title_en\").notNull(),\n  description: text(\"description\").notNull(),\n  descriptionEn: text(\"description_en\").notNull(),\n  discountType: text(\"discount_type\").notNull(),\n  discountValue: integer(\"discount_value\"),\n  startDate: timestamp(\"start_date\").notNull(),\n  endDate: timestamp(\"end_date\").notNull(),\n  isActive: integer(\"is_active\").notNull().default(1),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_promotions_restaurant_id\").on(table.restaurantId),\n  index(\"idx_promotions_is_active\").on(table.isActive),\n  index(\"idx_promotions_dates\").on(table.startDate, table.endDate),\n]);\n\nexport const insertPromotionSchema = createInsertSchema(promotions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertPromotion = z.infer<typeof insertPromotionSchema>;\nexport type Promotion = typeof promotions.$inferSelect;\n\n// Restaurant Images - Multiple images per restaurant\nexport const restaurantImages = pgTable(\"restaurant_images\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  imageUrl: text(\"image_url\").notNull(),\n  displayOrder: integer(\"display_order\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_restaurant_images_restaurant_id\").on(table.restaurantId),\n  index(\"idx_restaurant_images_display_order\").on(table.displayOrder),\n]);\n\nexport const insertRestaurantImageSchema = createInsertSchema(restaurantImages).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertRestaurantImage = z.infer<typeof insertRestaurantImageSchema>;\nexport type RestaurantImage = typeof restaurantImages.$inferSelect;\n\n// Restaurant Applications - ì ì£¼ ì‹ ê·œ ì‹ ì²­\nexport const restaurantApplications = pgTable(\"restaurant_applications\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  restaurantName: text(\"restaurant_name\").notNull(),\n  restaurantNameEn: text(\"restaurant_name_en\").notNull(),\n  businessNumber: text(\"business_number\").notNull(),\n  address: text(\"address\").notNull(),\n  phone: text(\"phone\").notNull(),\n  email: text(\"email\").notNull(),\n  description: text(\"description\"),\n  status: varchar(\"status\").notNull().default(\"pending\"), // pending, approved, rejected\n  adminNote: text(\"admin_note\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  processedAt: timestamp(\"processed_at\"),\n}, (table) => [\n  index(\"idx_applications_user_id\").on(table.userId),\n  index(\"idx_applications_status\").on(table.status),\n  index(\"idx_applications_created_at\").on(table.createdAt),\n]);\n\nexport const insertRestaurantApplicationSchema = createInsertSchema(restaurantApplications).omit({\n  id: true,\n  createdAt: true,\n  processedAt: true,\n});\n\nexport type InsertRestaurantApplication = z.infer<typeof insertRestaurantApplicationSchema>;\nexport type RestaurantApplication = typeof restaurantApplications.$inferSelect;\n\n// Owner Inquiries - ì ì£¼ê°€ ë³¸ì‚¬ì— í•˜ëŠ” Q&A\nexport const ownerInquiries = pgTable(\"owner_inquiries\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  restaurantId: varchar(\"restaurant_id\").references(() => restaurants.id),\n  category: varchar(\"category\").notNull(), // general, technical, billing, other\n  title: text(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  status: varchar(\"status\").notNull().default(\"pending\"), // pending, answered, closed\n  adminResponse: text(\"admin_response\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  answeredAt: timestamp(\"answered_at\"),\n}, (table) => [\n  index(\"idx_owner_inquiries_user_id\").on(table.userId),\n  index(\"idx_owner_inquiries_restaurant_id\").on(table.restaurantId),\n  index(\"idx_owner_inquiries_status\").on(table.status),\n  index(\"idx_owner_inquiries_created_at\").on(table.createdAt),\n]);\n\nexport const insertOwnerInquirySchema = createInsertSchema(ownerInquiries).omit({\n  id: true,\n  createdAt: true,\n  answeredAt: true,\n});\n\nexport type InsertOwnerInquiry = z.infer<typeof insertOwnerInquirySchema>;\nexport type OwnerInquiry = typeof ownerInquiries.$inferSelect;\n\n// Owner Notices - ë³¸ì‚¬ê°€ ì ì£¼ë“¤ì—ê²Œ ë³´ë‚´ëŠ” ê³µì§€ì‚¬í•­\nexport const ownerNotices = pgTable(\"owner_notices\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  category: varchar(\"category\").notNull(), // announcement, update, maintenance, promotion\n  isPinned: integer(\"is_pinned\").notNull().default(0),\n  targetRestaurants: text(\"target_restaurants\").array(), // null means all\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  publishedAt: timestamp(\"published_at\"),\n}, (table) => [\n  index(\"idx_owner_notices_is_pinned\").on(table.isPinned),\n  index(\"idx_owner_notices_created_at\").on(table.createdAt),\n]);\n\nexport const insertOwnerNoticeSchema = createInsertSchema(ownerNotices).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertOwnerNotice = z.infer<typeof insertOwnerNoticeSchema>;\nexport type OwnerNotice = typeof ownerNotices.$inferSelect;\n\n// Payments - ì ì£¼ ê²°ì œ ê´€ë¦¬\nexport const payments = pgTable(\"payments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  restaurantId: varchar(\"restaurant_id\").notNull().references(() => restaurants.id),\n  userId: varchar(\"user_id\").notNull().references(() => users.id),\n  amount: integer(\"amount\").notNull(),\n  currency: varchar(\"currency\").notNull().default(\"KRW\"),\n  paymentType: varchar(\"payment_type\").notNull(), // subscription, promotion, ad\n  status: varchar(\"status\").notNull().default(\"pending\"), // pending, completed, failed, refunded\n  paymentMethod: varchar(\"payment_method\"),\n  transactionId: text(\"transaction_id\"),\n  description: text(\"description\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  paidAt: timestamp(\"paid_at\"),\n}, (table) => [\n  index(\"idx_payments_restaurant_id\").on(table.restaurantId),\n  index(\"idx_payments_user_id\").on(table.userId),\n  index(\"idx_payments_status\").on(table.status),\n  index(\"idx_payments_created_at\").on(table.createdAt),\n]);\n\nexport const insertPaymentSchema = createInsertSchema(payments).omit({\n  id: true,\n  createdAt: true,\n  paidAt: true,\n});\n\nexport type InsertPayment = z.infer<typeof insertPaymentSchema>;\nexport type Payment = typeof payments.$inferSelect;\n\n// Customer Inquiries - ê³ ê° ë¬¸ì˜\nexport const customerInquiries = pgTable(\"customer_inquiries\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").references(() => users.id),\n  email: text(\"email\").notNull(),\n  name: text(\"name\").notNull(),\n  category: varchar(\"category\").notNull(), // general, complaint, suggestion, other\n  title: text(\"title\").notNull(),\n  content: text(\"content\").notNull(),\n  status: varchar(\"status\").notNull().default(\"pending\"), // pending, answered, closed\n  adminResponse: text(\"admin_response\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  answeredAt: timestamp(\"answered_at\"),\n}, (table) => [\n  index(\"idx_customer_inquiries_user_id\").on(table.userId),\n  index(\"idx_customer_inquiries_status\").on(table.status),\n  index(\"idx_customer_inquiries_created_at\").on(table.createdAt),\n]);\n\nexport const insertCustomerInquirySchema = createInsertSchema(customerInquiries).omit({\n  id: true,\n  createdAt: true,\n  answeredAt: true,\n});\n\nexport type InsertCustomerInquiry = z.infer<typeof insertCustomerInquirySchema>;\nexport type CustomerInquiry = typeof customerInquiries.$inferSelect;\n\n// Partnership Inquiries - ì œíœ´ ë¬¸ì˜\nexport const partnershipInquiries = pgTable(\"partnership_inquiries\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  companyName: text(\"company_name\").notNull(),\n  contactName: text(\"contact_name\").notNull(),\n  email: text(\"email\").notNull(),\n  phone: text(\"phone\").notNull(),\n  partnershipType: varchar(\"partnership_type\").notNull(), // advertisement, collaboration, sponsorship, other\n  description: text(\"description\").notNull(),\n  status: varchar(\"status\").notNull().default(\"pending\"), // pending, reviewing, accepted, rejected\n  adminNote: text(\"admin_note\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  processedAt: timestamp(\"processed_at\"),\n}, (table) => [\n  index(\"idx_partnership_inquiries_status\").on(table.status),\n  index(\"idx_partnership_inquiries_created_at\").on(table.createdAt),\n]);\n\nexport const insertPartnershipInquirySchema = createInsertSchema(partnershipInquiries).omit({\n  id: true,\n  createdAt: true,\n  processedAt: true,\n});\n\nexport type InsertPartnershipInquiry = z.infer<typeof insertPartnershipInquirySchema>;\nexport type PartnershipInquiry = typeof partnershipInquiries.$inferSelect;\n\n// Blog Posts - ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸\nexport const blogPosts = pgTable(\"blog_posts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  titleEn: text(\"title_en\").notNull(),\n  content: text(\"content\").notNull(),\n  contentEn: text(\"content_en\").notNull(),\n  excerpt: text(\"excerpt\"),\n  excerptEn: text(\"excerpt_en\"),\n  imageUrl: text(\"image_url\"),\n  author: text(\"author\").notNull(),\n  category: varchar(\"category\").notNull(), // food, culture, travel, tips\n  tags: text(\"tags\").array(),\n  isExternal: integer(\"is_external\").notNull().default(0),\n  externalUrl: text(\"external_url\"),\n  viewCount: integer(\"view_count\").notNull().default(0),\n  isPublished: integer(\"is_published\").notNull().default(1),\n  publishedAt: timestamp(\"published_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => [\n  index(\"idx_blog_posts_category\").on(table.category),\n  index(\"idx_blog_posts_is_published\").on(table.isPublished),\n  index(\"idx_blog_posts_published_at\").on(table.publishedAt),\n  index(\"idx_blog_posts_created_at\").on(table.createdAt),\n]);\n\nexport const insertBlogPostSchema = createInsertSchema(blogPosts).omit({\n  id: true,\n  viewCount: true,\n  createdAt: true,\n});\n\nexport type InsertBlogPost = z.infer<typeof insertBlogPostSchema>;\nexport type BlogPost = typeof blogPosts.$inferSelect;\n","size_bytes":24269},"client/src/contexts/LanguageContext.tsx":{"content":"import { createContext, useContext, ReactNode } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Language } from \"@shared/i18n\";\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (key: string) => string;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const { i18n, t: i18nT } = useTranslation();\n  \n  const language = (i18n.language as Language) || \"en\";\n\n  const setLanguage = (lang: Language) => {\n    i18n.changeLanguage(lang);\n  };\n\n  const t = (key: string): string => {\n    return i18nT(key);\n  };\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error(\"useLanguage must be used within LanguageProvider\");\n  }\n  return context;\n}\n","size_bytes":1024},"client/src/lib/structuredData.ts":{"content":"export const createOrganizationSchema = (baseUrl: string) => ({\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Organization\",\n  name: \"í•œì‹ë‹¹ (Hansikdang)\",\n  alternateName: \"Hansikdang\",\n  url: baseUrl,\n  logo: `${baseUrl}/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png`,\n  description: \"AI-powered Korean restaurant discovery platform for tourists visiting Korea\",\n  address: {\n    \"@type\": \"PostalAddress\",\n    addressCountry: \"KR\",\n  },\n  sameAs: [\n    // Add social media links when available\n  ],\n});\n\nexport const createWebsiteSchema = (baseUrl: string) => ({\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"WebSite\",\n  name: \"í•œì‹ë‹¹ (Hansikdang)\",\n  alternateName: \"Hansikdang\",\n  url: baseUrl,\n  description: \"Discover authentic Korean restaurants with AI-powered recommendations\",\n  potentialAction: {\n    \"@type\": \"SearchAction\",\n    target: {\n      \"@type\": \"EntryPoint\",\n      urlTemplate: `${baseUrl}/search?q={search_term_string}`,\n    },\n    \"query-input\": \"required name=search_term_string\",\n  },\n  inLanguage: [\"ko\", \"en\", \"ja\", \"zh-CN\", \"zh-TW\", \"es\", \"fr\", \"de\"],\n});\n\nexport const createMobileApplicationSchema = () => ({\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"MobileApplication\",\n  name: \"í•œì‹ë‹¹ (Hansikdang)\",\n  applicationCategory: \"TravelApplication\",\n  operatingSystem: [\"iOS\", \"Android\"],\n  offers: {\n    \"@type\": \"Offer\",\n    price: \"0\",\n    priceCurrency: \"KRW\",\n  },\n  aggregateRating: {\n    \"@type\": \"AggregateRating\",\n    ratingValue: \"4.8\",\n    ratingCount: \"2500\",\n  },\n});\n\nexport const createRestaurantSchema = (restaurant: {\n  name: string;\n  nameEn?: string;\n  cuisine: string;\n  rating?: number;\n  reviews?: number;\n  image?: string;\n  address?: string;\n  priceRange?: string;\n}) => ({\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Restaurant\",\n  name: restaurant.name,\n  alternateName: restaurant.nameEn,\n  image: restaurant.image,\n  servesCuisine: restaurant.cuisine,\n  aggregateRating: restaurant.rating\n    ? {\n        \"@type\": \"AggregateRating\",\n        ratingValue: restaurant.rating,\n        reviewCount: restaurant.reviews || 0,\n      }\n    : undefined,\n  address: restaurant.address\n    ? {\n        \"@type\": \"PostalAddress\",\n        addressCountry: \"KR\",\n        streetAddress: restaurant.address,\n      }\n    : undefined,\n  priceRange: restaurant.priceRange || \"â‚©â‚©\",\n});\n\nexport const createBreadcrumbSchema = (items: Array<{ name: string; url: string }>) => ({\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"BreadcrumbList\",\n  itemListElement: items.map((item, index) => ({\n    \"@type\": \"ListItem\",\n    position: index + 1,\n    name: item.name,\n    item: item.url,\n  })),\n});\n\nexport const createArticleSchema = (article: {\n  title: string;\n  description: string;\n  image: string;\n  datePublished: string;\n  dateModified?: string;\n  author?: string;\n}) => ({\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Article\",\n  headline: article.title,\n  description: article.description,\n  image: article.image,\n  datePublished: article.datePublished,\n  dateModified: article.dateModified || article.datePublished,\n  author: {\n    \"@type\": \"Organization\",\n    name: article.author || \"Hansikdang\",\n  },\n  publisher: {\n    \"@type\": \"Organization\",\n    name: \"Hansikdang\",\n    logo: {\n      \"@type\": \"ImageObject\",\n      url: \"/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png\",\n    },\n  },\n});\n","size_bytes":3377},"server/seed.ts":{"content":"import { storage } from \"./storage\";\n\nconst seedRestaurants = [\n  {\n    name: \"ëª…ë™êµì\",\n    nameEn: \"Myeongdong Kyoja\",\n    category: \"í•œì‹\",\n    cuisine: \"ë§Œë‘, ì¹¼êµ­ìˆ˜\",\n    district: \"ëª…ë™\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ëª…ë™10ê¸¸ 29\",\n    description: \"1966ë…„ë¶€í„° ì´ì–´ì˜¨ ì „í†µ ì¹¼êµ­ìˆ˜ ë§›ì§‘. ì†ìœ¼ë¡œ ë¹šì€ ë§Œë‘ì™€ ì–¼í°í•œ ì¹¼êµ­ìˆ˜ê°€ ìœ ëª…í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Traditional kalguksu (knife-cut noodles) restaurant since 1966. Famous for handmade dumplings and spicy noodle soup.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=800\",\n    openHours: \"10:30-21:30 (ì—°ì¤‘ë¬´íœ´)\",\n    phone: \"02-776-5348\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ê´‘ì¥ì‹œì¥\",\n    nameEn: \"Gwangjang Market\",\n    category: \"ì „í†µì‹œì¥\",\n    cuisine: \"ë¹ˆëŒ€ë–¡, ë§ˆì•½ê¹€ë°¥, ìœ¡íšŒ\",\n    district: \"ì¢…ë¡œ\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì°½ê²½ê¶ë¡œ 88\",\n    description: \"100ë…„ ì—­ì‚¬ì˜ ì„œìš¸ ëŒ€í‘œ ì „í†µì‹œì¥. ë¹ˆëŒ€ë–¡, ë§ˆì•½ê¹€ë°¥, ìœ¡íšŒ ë“± ë‹¤ì–‘í•œ ê¸¸ê±°ë¦¬ ìŒì‹ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\n    descriptionEn: \"Historic 100-year-old traditional market in Seoul. Famous for bindaetteok (mung bean pancakes), mayak gimbap, and yukhoe (Korean beef tartare).\",\n    priceRange: 1,\n    imageUrl: \"https://images.unsplash.com/photo-1590301157890-4810ed352733?w=800\",\n    openHours: \"09:00-23:00\",\n    phone: \"02-2267-0291\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"í† ì†ì´Œì‚¼ê³„íƒ•\",\n    nameEn: \"Tosokchon Samgyetang\",\n    category: \"í•œì‹\",\n    cuisine: \"ì‚¼ê³„íƒ•\",\n    district: \"ê²½ë³µê¶\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ìí•˜ë¬¸ë¡œ5ê¸¸ 5\",\n    description: \"ê²½ë³µê¶ ê·¼ì²˜ 40ë…„ ì „í†µì˜ ì‚¼ê³„íƒ• ì „ë¬¸ì . êµ­ë‚´ì‚° ì˜ê³„ì™€ í•œì•½ì¬ë¡œ ë§Œë“  ë³´ì–‘ì‹ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"40-year-old ginseng chicken soup restaurant near Gyeongbokgung Palace. Made with Korean young chicken and traditional medicinal herbs.\",\n    priceRange: 3,\n    imageUrl: \"https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=800\",\n    openHours: \"10:00-22:00\",\n    phone: \"02-737-7444\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ìš°ë˜ì˜¥\",\n    nameEn: \"Wooraeok\",\n    category: \"í•œì‹\",\n    cuisine: \"í‰ì–‘ëƒ‰ë©´\",\n    district: \"ì„ì§€ë¡œ\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ì°½ê²½ê¶ë¡œ 62-29\",\n    description: \"1946ë…„ ê°œì—…í•œ ì„œìš¸ 3ëŒ€ í‰ì–‘ëƒ‰ë©´ ë§›ì§‘. ê¹Šì€ ìœ¡ìˆ˜ì™€ ì«„ê¹ƒí•œ ë©´ë°œì´ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Established in 1946, one of Seoul's top 3 Pyongyang-style cold noodle restaurants. Known for rich broth and chewy noodles.\",\n    priceRange: 3,\n    imageUrl: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800\",\n    openHours: \"11:30-21:00 (ì›”ìš”ì¼ íœ´ë¬´)\",\n    phone: \"02-2265-0151\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ë¯¸ì§„\",\n    nameEn: \"Mijin\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡íšŒë¹„ë¹”ë°¥\",\n    district: \"ì••êµ¬ì •\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì••êµ¬ì •ë¡œ2ê¸¸ 27\",\n    description: \"ì‹ ì„ í•œ ìœ¡íšŒì™€ ë¹„ë¹”ë°¥ìœ¼ë¡œ ìœ ëª…í•œ ë§›ì§‘. 1960ë…„ëŒ€ë¶€í„° 3ëŒ€ì§¸ ì´ì–´ì˜¨ ì „í†µì˜ ë§›ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Famous for fresh yukhoe (beef tartare) bibimbap. Third generation family restaurant since the 1960s.\",\n    priceRange: 3,\n    imageUrl: \"https://images.unsplash.com/photo-1553621042-f6e147245754?w=800\",\n    openHours: \"11:30-22:00\",\n    phone: \"02-548-3200\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ì´ë¬¸ì„¤ë†íƒ•\",\n    nameEn: \"Imun Seolleongtang\",\n    category: \"í•œì‹\",\n    cuisine: \"ì„¤ë íƒ•\",\n    district: \"ì´ë¬¸ë™\",\n    address: \"ì„œìš¸ ë™ëŒ€ë¬¸êµ¬ ì´ë¬¸ë¡œ 34\",\n    description: \"1907ë…„ ê°œì—…í•œ 100ë…„ ì „í†µ ì„¤ë íƒ• ë§›ì§‘. ì§„í•œ êµ­ë¬¼ê³¼ ë¶€ë“œëŸ¬ìš´ ê³ ê¸°ê°€ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Established in 1907, a century-old seolleongtang (ox bone soup) restaurant. Famous for rich broth and tender meat.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1618329482768-8e3ea6ce8b60?w=800\",\n    openHours: \"00:00-24:00 (24ì‹œê°„)\",\n    phone: \"02-969-1010\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"í•œì¼ê´€\",\n    nameEn: \"Hanilkwan\",\n    category: \"í•œì‹\",\n    cuisine: \"ê°ˆë¹„êµ¬ì´, í•œì •ì‹\",\n    district: \"ì²­ë‹´\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì••êµ¬ì •ë¡œ2ê¸¸ 35\",\n    description: \"1939ë…„ ê°œì—…í•œ ê³ ê¸‰ í•œì •ì‹ ì „ë¬¸ì . íŠ¹ì œ ê°ˆë¹„êµ¬ì´ì™€ ë‹¤ì–‘í•œ ë°˜ì°¬ì´ ìœ ëª…í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Upscale Korean restaurant established in 1939. Famous for special galbi (grilled ribs) and various banchan (side dishes).\",\n    priceRange: 4,\n    imageUrl: \"https://images.unsplash.com/photo-1588207036722-0a86fe9f2b03?w=800\",\n    openHours: \"11:30-22:00\",\n    phone: \"02-547-9081\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"í•˜ë™ê´€\",\n    nameEn: \"Hadongkwan\",\n    category: \"í•œì‹\",\n    cuisine: \"ê³°íƒ•\",\n    district: \"ëª…ë™\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ëª…ë™9ê¸¸ 12\",\n    description: \"1939ë…„ë¶€í„° 3ëŒ€ì§¸ ì´ì–´ì˜¨ ê³°íƒ• ì „ë¬¸ì . ê¹Šê³  ì§„í•œ ê³°íƒ• êµ­ë¬¼ì´ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Third-generation gomtang (beef bone soup) restaurant since 1939. Known for deep and rich broth.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1585032226651-759b368d7246?w=800\",\n    openHours: \"07:00-21:30 (ì¼ìš”ì¼ íœ´ë¬´)\",\n    phone: \"02-776-5656\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ì§„ë¯¸í‰ì–‘ëƒ‰ë©´\",\n    nameEn: \"Jinmi Pyongyang Naengmyeon\",\n    category: \"í•œì‹\",\n    cuisine: \"í‰ì–‘ëƒ‰ë©´\",\n    district: \"ì¢…ë¡œ\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ëˆí™”ë¬¸ë¡œ11ê°€ê¸¸ 34\",\n    description: \"1953ë…„ ê°œì—…í•œ í‰ì–‘ëƒ‰ë©´ ì „ë¬¸ì . ë‹´ë°±í•œ ìœ¡ìˆ˜ì™€ ì«„ê¹ƒí•œ ë©´ë°œì´ íŠ¹ì§•ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Pyongyang-style cold noodle restaurant since 1953. Characterized by light broth and chewy noodles.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800\",\n    openHours: \"11:00-21:00\",\n    phone: \"02-733-6566\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ë°œìš°ê³µì–‘\",\n    nameEn: \"Balwoo Gongyang\",\n    category: \"ì‚¬ì°°ìŒì‹\",\n    cuisine: \"ì‚¬ì°°ìŒì‹, ë¹„ê±´\",\n    district: \"ì¢…ë¡œ\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ìš°ì •êµ­ë¡œ 56\",\n    description: \"ë¯¸ìŠë­ 1ìŠ¤íƒ€ ì‚¬ì°°ìŒì‹ ë ˆìŠ¤í† ë‘. ì •ê°ˆí•œ ë¹„ê±´ í•œì •ì‹ì„ ë§›ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\n    descriptionEn: \"Michelin 1-star temple food restaurant. Offers refined vegan Korean cuisine.\",\n    priceRange: 4,\n    imageUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800\",\n    openHours: \"12:00-15:00, 18:00-21:00 (ì¼ìš”ì¼ íœ´ë¬´)\",\n    phone: \"02-2031-2081\",\n    isVegan: 1,\n    isHalal: 1,\n  },\n  {\n    name: \"ì‚¼ì›ê°€ë“ \",\n    nameEn: \"Samwon Garden\",\n    category: \"í•œì‹\",\n    cuisine: \"í•œìš°êµ¬ì´\",\n    district: \"ì••êµ¬ì •\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì••êµ¬ì •ë¡œ45ê¸¸ 16\",\n    description: \"1976ë…„ ê°œì—…í•œ ê³ ê¸‰ í•œìš° ì „ë¬¸ì . ë„“ì€ ì •ì›ê³¼ í•¨ê»˜ ìµœê³ ê¸‰ í•œìš°ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\n    descriptionEn: \"Premium Korean beef restaurant since 1976. Enjoy top-quality hanwoo in a beautiful garden setting.\",\n    priceRange: 4,\n    imageUrl: \"https://images.unsplash.com/photo-1590846406792-0adc7f938f1d?w=800\",\n    openHours: \"11:30-22:00\",\n    phone: \"02-548-3030\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ë¶ì´Œì†ë§Œë‘\",\n    nameEn: \"Bukchon Son Mandu\",\n    category: \"í•œì‹\",\n    cuisine: \"ë§Œë‘, ë§Œë‘£êµ­\",\n    district: \"ë¶ì´Œ\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ë¶ì´Œë¡œ 5ê¸¸ 27\",\n    description: \"ë¶ì´Œ í•œì˜¥ë§ˆì„ì˜ ì†ë§Œë‘ ì „ë¬¸ì . ë§¤ì¼ ì•„ì¹¨ ì§ì ‘ ë¹šì€ ë§Œë‘ê°€ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Handmade dumpling restaurant in Bukchon Hanok Village. Fresh dumplings made every morning.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1534422298391-e4f8c172dddb?w=800\",\n    openHours: \"10:30-21:00\",\n    phone: \"02-742-1970\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ì „ì£¼ì¤‘ì•™íšŒê´€\",\n    nameEn: \"Jeonju Jungang Hoegwan\",\n    category: \"í•œì‹\",\n    cuisine: \"ë¹„ë¹”ë°¥, ì½©ë‚˜ë¬¼êµ­ë°¥\",\n    district: \"ëª…ë™\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ì‚¼ì¼ëŒ€ë¡œ 299\",\n    description: \"1954ë…„ ê°œì—…í•œ ì „ì£¼ ë¹„ë¹”ë°¥ ì›ì¡°ì§‘. ê³ ì†Œí•œ ì°¸ê¸°ë¦„ê³¼ ì‹ ì„ í•œ ë‚˜ë¬¼ì´ ì–´ìš°ëŸ¬ì§„ ë¹„ë¹”ë°¥ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Original Jeonju bibimbap restaurant since 1954. Features aromatic sesame oil and fresh vegetables.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1553621042-f6e147245754?w=800\",\n    openHours: \"11:30-21:30\",\n    phone: \"02-776-3525\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ì§„ì§„\",\n    nameEn: \"Jin Jin\",\n    category: \"í•œì‹\",\n    cuisine: \"ë°”ë¼\",\n    district: \"ì¢…ë¡œ\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ìí•˜ë¬¸ë¡œ 149\",\n    description: \"ë¯¸ìŠë­ ê°€ì´ë“œ ì„ ì • í˜„ëŒ€ì  í•œì‹ ë ˆìŠ¤í† ë‘. ì „í†µ í•œì‹ì„ ëª¨ë˜í•˜ê²Œ ì¬í•´ì„í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Michelin Guide selected modern Korean restaurant. Reinterprets traditional Korean cuisine with a contemporary twist.\",\n    priceRange: 4,\n    imageUrl: \"https://images.unsplash.com/photo-1580822184713-fc5400e7fe10?w=800\",\n    openHours: \"12:00-15:00, 18:00-22:00 (ì›”ìš”ì¼ íœ´ë¬´)\",\n    phone: \"02-730-1079\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n  {\n    name: \"ì˜¤ì¥ë™í¥ë‚¨ì§‘\",\n    nameEn: \"Ojang-dong Heungnamjip\",\n    category: \"í•œì‹\",\n    cuisine: \"ëƒ‰ë©´, ì¡±ë°œ\",\n    district: \"ë§ˆí¬\",\n    address: \"ì„œìš¸ ë§ˆí¬êµ¬ í† ì •ë¡œ 35\",\n    description: \"1987ë…„ ê°œì—…í•œ í•¨í¥ëƒ‰ë©´ê³¼ ì¡±ë°œ ì „ë¬¸ì . ë§¤ì½¤ë‹¬ì½¤í•œ í•¨í¥ëƒ‰ë©´ì´ ì¸ê¸°ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Hamheung-style cold noodles and jokbal restaurant since 1987. Famous for sweet and spicy cold noodles.\",\n    priceRange: 2,\n    imageUrl: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=800\",\n    openHours: \"11:00-23:00\",\n    phone: \"02-704-4399\",\n    isVegan: 0,\n    isHalal: 0,\n  },\n];\n\nasync function seed() {\n  console.log(\"ğŸŒ± Seeding restaurants...\");\n  \n  for (const restaurant of seedRestaurants) {\n    try {\n      await storage.createRestaurant(restaurant);\n      console.log(`âœ… Added: ${restaurant.name}`);\n    } catch (error) {\n      console.error(`âŒ Failed to add ${restaurant.name}:`, error);\n    }\n  }\n  \n  console.log(\"âœ¨ Seeding complete!\");\n  process.exit(0);\n}\n\nseed();\n","size_bytes":10341},"client/src/components/SEO.tsx":{"content":"import { Helmet } from \"react-helmet-async\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\ntype SEOProps = {\n  title?: string;\n  description?: string;\n  keywords?: string[];\n  image?: string;\n  url?: string;\n  type?: \"website\" | \"article\" | \"restaurant\";\n  structuredData?: object;\n};\n\nexport function SEO({\n  title,\n  description,\n  keywords = [],\n  image = \"/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png\",\n  url,\n  type = \"website\",\n  structuredData,\n}: SEOProps) {\n  const { language } = useLanguage();\n  \n  const baseUrl = typeof window !== 'undefined' ? window.location.origin : '';\n  const fullUrl = url ? `${baseUrl}${url}` : baseUrl;\n  const fullImageUrl = image.startsWith('http') ? image : `${baseUrl}${image}`;\n  \n  const defaultTitle = \"í•œì‹ë‹¹ (Hansikdang) - Your Korean Restaurant Guide\";\n  const defaultDescription = \"Discover authentic Korean restaurants with AI-powered recommendations. Perfect guide for tourists visiting Korea. Available in 9 languages.\";\n  \n  const finalTitle = title ? `${title} | í•œì‹ë‹¹` : defaultTitle;\n  const finalDescription = description || defaultDescription;\n  const keywordString = keywords.length > 0 \n    ? keywords.join(\", \") \n    : \"Korean restaurant, Korean food, Seoul restaurants, Korean cuisine, restaurant guide, AI recommendations, tourist guide Korea, í•œì‹ë‹¹, ë§›ì§‘\";\n\n  return (\n    <Helmet>\n      {/* Basic Meta Tags */}\n      <html lang={language} />\n      <title>{finalTitle}</title>\n      <meta name=\"description\" content={finalDescription} />\n      <meta name=\"keywords\" content={keywordString} />\n      <meta name=\"author\" content=\"Hansikdang\" />\n      <meta name=\"robots\" content=\"index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1\" />\n      \n      {/* Mobile App Meta Tags */}\n      <meta name=\"mobile-web-app-capable\" content=\"yes\" />\n      <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n      <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"default\" />\n      <meta name=\"apple-mobile-web-app-title\" content=\"í•œì‹ë‹¹\" />\n      <meta name=\"application-name\" content=\"í•œì‹ë‹¹\" />\n      <meta name=\"theme-color\" content=\"#1A5F7A\" />\n      \n      {/* Open Graph Meta Tags */}\n      <meta property=\"og:type\" content={type} />\n      <meta property=\"og:title\" content={finalTitle} />\n      <meta property=\"og:description\" content={finalDescription} />\n      <meta property=\"og:image\" content={fullImageUrl} />\n      <meta property=\"og:image:width\" content=\"1200\" />\n      <meta property=\"og:image:height\" content=\"630\" />\n      <meta property=\"og:url\" content={fullUrl} />\n      <meta property=\"og:site_name\" content=\"í•œì‹ë‹¹ (Hansikdang)\" />\n      <meta property=\"og:locale\" content={language === 'ko' ? 'ko_KR' : language === 'ja' ? 'ja_JP' : 'en_US'} />\n      \n      {/* Twitter Card Meta Tags */}\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:title\" content={finalTitle} />\n      <meta name=\"twitter:description\" content={finalDescription} />\n      <meta name=\"twitter:image\" content={fullImageUrl} />\n      \n      {/* Multilingual Tags */}\n      <link rel=\"alternate\" hrefLang=\"ko\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"en\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"ja\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"zh-Hans\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"zh-Hant\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"es\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"fr\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"de\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"vi\" href={`${baseUrl}${url || '/'}`} />\n      <link rel=\"alternate\" hrefLang=\"x-default\" href={`${baseUrl}${url || '/'}`} />\n      \n      {/* Canonical URL */}\n      <link rel=\"canonical\" href={fullUrl} />\n      \n      {/* Structured Data */}\n      {structuredData && (\n        <script type=\"application/ld+json\">\n          {JSON.stringify(structuredData)}\n        </script>\n      )}\n    </Helmet>\n  );\n}\n","size_bytes":4217},"client/src/pages/RestaurantDetailPage.tsx":{"content":"import { useState, useRef, useEffect } from \"react\";\nimport { useRoute, Link } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { ArrowLeft, MapPin, Phone, Clock, Star, DollarSign, Users, Heart, Sparkles, Lightbulb, UtensilsCrossed, Play, Eye, Calendar, MessageSquare, MessageCircle, Send, X, Navigation, Store, Image as ImageIcon, Video, Upload, Trash2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { OptimizedImage } from \"@/components/OptimizedImage\";\nimport { SEO } from \"@/components/SEO\";\nimport { AdSense } from \"@/components/AdSense\";\nimport { NaverMap } from \"@/components/NaverMap\";\nimport { PopularityCard } from \"@/components/PopularityCard\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Restaurant, Review, RestaurantInsights, Menu, YoutubeVideo, ExternalReview, ReviewResponse, Promotion } from \"@shared/schema\";\n\ntype AICardType = \"reviews\" | \"menu\" | \"howToEat\" | \"ordering\";\n\ninterface ChatMessage {\n  role: \"user\" | \"assistant\";\n  content: string;\n}\n\nexport default function RestaurantDetailPage() {\n  const { t, language } = useLanguage();\n  const { toast } = useToast();\n  const { user, isAuthenticated } = useAuth();\n  const [, params] = useRoute(\"/restaurant/:id\");\n  const restaurantId = params?.id;\n  \n  const [isReviewDialogOpen, setIsReviewDialogOpen] = useState(false);\n  const [reviewRating, setReviewRating] = useState(0);\n  const [reviewComment, setReviewComment] = useState(\"\");\n  const [reviewImageUrls, setReviewImageUrls] = useState<string[]>([]);\n  const [reviewVideoUrls, setReviewVideoUrls] = useState<string[]>([]);\n  const [editingReviewId, setEditingReviewId] = useState<string | null>(null);\n  \n  const [isResponseDialogOpen, setIsResponseDialogOpen] = useState(false);\n  const [responseText, setResponseText] = useState(\"\");\n  const [editingResponseReviewId, setEditingResponseReviewId] = useState<string | null>(null);\n  const [editingResponseId, setEditingResponseId] = useState<string | null>(null);\n  \n  const [isAIChatOpen, setIsAIChatOpen] = useState(false);\n  const [currentAICard, setCurrentAICard] = useState<AICardType | null>(null);\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n  const [chatInput, setChatInput] = useState(\"\");\n  const [isSendingMessage, setIsSendingMessage] = useState(false);\n  const chatScrollRef = useRef<HTMLDivElement>(null);\n  const [isGalleryOpen, setIsGalleryOpen] = useState(false);\n  const [showAllMenus, setShowAllMenus] = useState(false);\n  const [showAllVideos, setShowAllVideos] = useState(false);\n\n  const { data: restaurant, isLoading: loadingRestaurant } = useQuery<Restaurant>({\n    queryKey: [\"/api/restaurants\", restaurantId],\n    enabled: !!restaurantId,\n  });\n\n  const { data: reviews = [], isLoading: loadingReviews, refetch: refetchReviews } = useQuery<Review[]>({\n    queryKey: [\"/api/reviews\", restaurantId],\n    queryFn: async () => {\n      const res = await fetch(`/api/reviews/${restaurantId}`, {\n        credentials: \"include\",\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch reviews\");\n      return res.json();\n    },\n    enabled: !!restaurantId,\n  });\n\n  const { data: savedStatus } = useQuery<{ isSaved: boolean }>({\n    queryKey: [\"/api/saved/check\", restaurantId],\n    enabled: !!restaurantId && isAuthenticated,\n    retry: false,\n  });\n\n  const { data: insights } = useQuery<RestaurantInsights | null>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"insights\"],\n    enabled: !!restaurantId,\n  });\n\n  const { data: menus = [], isLoading: loadingMenus } = useQuery<Menu[]>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"menus\"],\n    enabled: !!restaurantId,\n  });\n\n  const { data: videos = [], isLoading: loadingVideos } = useQuery<YoutubeVideo[]>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"videos\"],\n    enabled: !!restaurantId,\n  });\n\n  const { data: externalReviews = [] } = useQuery<ExternalReview[]>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"external-reviews\"],\n    enabled: !!restaurantId,\n  });\n\n  // Check if current user is owner of this restaurant\n  const { data: ownershipStatus } = useQuery<{ isOwner: boolean }>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"is-owner\"],\n    enabled: !!restaurantId && isAuthenticated,\n    retry: false,\n  });\n\n  // Fetch review responses - map of reviewId -> response\n  const { data: reviewResponses = {} } = useQuery<Record<string, ReviewResponse>>({\n    queryKey: [\"/api/review-responses\", restaurantId],\n    queryFn: async () => {\n      if (!reviews || reviews.length === 0) return {};\n      \n      const responses: Record<string, ReviewResponse> = {};\n      await Promise.all(\n        reviews.map(async (review) => {\n          const res = await fetch(`/api/reviews/${review.id}/response`, {\n            credentials: \"include\",\n          });\n          if (res.ok) {\n            const data = await res.json();\n            if (data) {\n              responses[review.id] = data;\n            }\n          }\n        })\n      );\n      return responses;\n    },\n    enabled: !!restaurantId && reviews.length > 0,\n  });\n\n  // Fetch active promotions\n  const { data: promotions = [] } = useQuery<Promotion[]>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"promotions\"],\n    enabled: !!restaurantId,\n  });\n\n  // Fetch restaurant images\n  const { data: restaurantImages = [] } = useQuery<Array<{ id: string; imageUrl: string; displayOrder: number }>>({\n    queryKey: [\"/api/restaurants\", restaurantId, \"images\"],\n    enabled: !!restaurantId,\n  });\n\n  const isSaved = savedStatus?.isSaved || false;\n  const isOwner = ownershipStatus?.isOwner || false;\n\n  useEffect(() => {\n    if (chatScrollRef.current) {\n      chatScrollRef.current.scrollTop = chatScrollRef.current.scrollHeight;\n    }\n  }, [chatMessages]);\n\n  const getInitialPrompt = (cardType: AICardType): string => {\n    if (cardType === \"reviews\") {\n      return language === \"en\" \n        ? \"Please analyze the reviews for this restaurant and tell me what customers love most about it.\"\n        : \"ì´ ë ˆìŠ¤í† ë‘ì˜ ë¦¬ë·°ë¥¼ ë¶„ì„í•´ì„œ ê³ ê°ë“¤ì´ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì ì„ ì•Œë ¤ì£¼ì„¸ìš”.\";\n    } else if (cardType === \"menu\") {\n      return language === \"en\"\n        ? \"What are the most popular and recommended menu items here? Please provide recommendations.\"\n        : \"ì´ ê³³ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆê³  ì¶”ì²œí•˜ëŠ” ë©”ë‰´ëŠ” ë¬´ì—‡ì¸ê°€ìš”? ì¶”ì²œí•´ì£¼ì„¸ìš”.\";\n    } else if (cardType === \"howToEat\") {\n      return language === \"en\"\n        ? \"How should I eat Korean food at this restaurant? Please teach me the proper way and etiquette.\"\n        : \"ì´ ë ˆìŠ¤í† ë‘ì—ì„œ í•œêµ­ ìŒì‹ì„ ì–´ë–»ê²Œ ë¨¹ì–´ì•¼ í•˜ë‚˜ìš”? ì˜¬ë°”ë¥¸ ë°©ë²•ê³¼ ì—í‹°ì¼“ì„ ì•Œë ¤ì£¼ì„¸ìš”.\";\n    } else if (cardType === \"ordering\") {\n      return language === \"en\"\n        ? \"What Korean phrases should I know for ordering at this restaurant? Please teach me useful expressions.\"\n        : \"ì´ ë ˆìŠ¤í† ë‘ì—ì„œ ì£¼ë¬¸í•  ë•Œ ì•Œì•„ì•¼ í•  í•œêµ­ì–´ í‘œí˜„ì„ ì•Œë ¤ì£¼ì„¸ìš”. ìœ ìš©í•œ í‘œí˜„ì„ ê°€ë¥´ì³ì£¼ì„¸ìš”.\";\n    }\n    return \"\";\n  };\n\n  const sendInitialMessage = async (cardType: AICardType) => {\n    if (!restaurant) return;\n\n    const initialPrompt = getInitialPrompt(cardType);\n    if (!initialPrompt) return;\n\n    setIsSendingMessage(true);\n\n    try {\n      const context = {\n        cardType,\n        restaurant: {\n          id: restaurant.id,\n          name: language === \"en\" ? restaurant.nameEn : restaurant.name,\n          cuisine: restaurant.cuisine,\n          description: language === \"en\" ? restaurant.descriptionEn : restaurant.description,\n        },\n        menus: menus.map(m => ({\n          name: language === \"en\" ? m.nameEn : m.name,\n          description: language === \"en\" ? m.descriptionEn : m.description,\n          price: m.price,\n          category: m.category,\n        })),\n        externalReviews: externalReviews.map(r => ({\n          source: r.source,\n          rating: r.rating,\n          comment: language === \"en\" ? (r.commentEn || r.comment) : r.comment,\n        })),\n        insights,\n      };\n\n      const response = await fetch(\"/api/ai-chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          message: initialPrompt,\n          language,\n          context,\n          conversationHistory: [],\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to send initial message\");\n\n      const data = await response.json();\n      setChatMessages([{ role: \"assistant\", content: data.response }]);\n    } catch (error) {\n      toast({\n        title: language === \"en\" ? \"Error\" : \"ì˜¤ë¥˜\",\n        description: language === \"en\" ? \"Failed to load AI analysis\" : \"AI ë¶„ì„ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSendingMessage(false);\n    }\n  };\n\n  const openAIChat = (cardType: AICardType) => {\n    setCurrentAICard(cardType);\n    setIsAIChatOpen(true);\n    setChatMessages([]);\n    setChatInput(\"\");\n    sendInitialMessage(cardType);\n  };\n\n  const closeAIChat = () => {\n    setIsAIChatOpen(false);\n    setCurrentAICard(null);\n    setChatMessages([]);\n    setChatInput(\"\");\n  };\n\n  const sendChatMessage = async () => {\n    if (!chatInput.trim() || isSendingMessage || !restaurant || !currentAICard) return;\n\n    const userMessage = chatInput.trim();\n    setChatInput(\"\");\n    setChatMessages(prev => [...prev, { role: \"user\", content: userMessage }]);\n    setIsSendingMessage(true);\n\n    try {\n      const context = {\n        cardType: currentAICard,\n        restaurant: {\n          id: restaurant.id,\n          name: language === \"en\" ? restaurant.nameEn : restaurant.name,\n          cuisine: restaurant.cuisine,\n          description: language === \"en\" ? restaurant.descriptionEn : restaurant.description,\n        },\n        menus: menus.map(m => ({\n          name: language === \"en\" ? m.nameEn : m.name,\n          description: language === \"en\" ? m.descriptionEn : m.description,\n          price: m.price,\n          category: m.category,\n        })),\n        externalReviews: externalReviews.map(r => ({\n          source: r.source,\n          rating: r.rating,\n          comment: language === \"en\" ? (r.commentEn || r.comment) : r.comment,\n        })),\n        insights,\n      };\n\n      const response = await fetch(\"/api/ai-chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          message: userMessage,\n          language,\n          context,\n          conversationHistory: chatMessages,\n        }),\n      });\n\n      if (!response.ok) throw new Error(\"Failed to send message\");\n\n      const data = await response.json();\n      setChatMessages(prev => [...prev, { role: \"assistant\", content: data.response }]);\n    } catch (error) {\n      toast({\n        title: language === \"en\" ? \"Error\" : \"ì˜¤ë¥˜\",\n        description: language === \"en\" ? \"Failed to send message\" : \"ë©”ì‹œì§€ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSendingMessage(false);\n    }\n  };\n\n  const saveMutation = useMutation({\n    mutationFn: async () => {\n      if (!isAuthenticated) {\n        throw new Error(\"Please log in to save restaurants\");\n      }\n      \n      if (isSaved) {\n        await apiRequest(\"DELETE\", `/api/saved/${restaurantId}`);\n      } else {\n        await apiRequest(\"POST\", \"/api/saved\", { restaurantId });\n      }\n    },\n    onSuccess: async () => {\n      console.log('[Save mutation] Invalidating queries after save/unsave');\n      await queryClient.invalidateQueries({ \n        queryKey: [\"/api/saved/check\", restaurantId],\n        refetchType: 'all'\n      });\n      await queryClient.invalidateQueries({ \n        queryKey: [\"/api/saved\"],\n        refetchType: 'all'\n      });\n      console.log('[Save mutation] Queries invalidated, cache should update');\n      toast({\n        title: isSaved ? (language === \"en\" ? \"Removed from saved\" : \"ì €ì¥ ì·¨ì†Œë¨\") : (language === \"en\" ? \"Saved successfully\" : \"ì €ì¥ ì™„ë£Œ\"),\n        description: isSaved \n          ? (language === \"en\" ? \"Restaurant removed from your saved list\" : \"ë ˆìŠ¤í† ë‘ì´ ì €ì¥ ëª©ë¡ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤\")\n          : (language === \"en\" ? \"Restaurant saved to your list\" : \"ë ˆìŠ¤í† ë‘ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤\"),\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error) || error.message === \"Please log in to save restaurants\") {\n        toast({\n          title: language === \"en\" ? \"Login Required\" : \"ë¡œê·¸ì¸ í•„ìš”\",\n          description: language === \"en\" ? \"Please log in to save restaurants\" : \"ë ˆìŠ¤í† ë‘ì„ ì €ì¥í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 1000);\n      } else {\n        toast({\n          title: language === \"en\" ? \"Error\" : \"ì˜¤ë¥˜\",\n          description: language === \"en\" ? \"Failed to save restaurant\" : \"ë ˆìŠ¤í† ë‘ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤\",\n          variant: \"destructive\",\n        });\n      }\n    },\n  });\n\n  const reviewMutation = useMutation({\n    mutationFn: async () => {\n      if (!isAuthenticated) {\n        throw new Error(\"Please log in to write reviews\");\n      }\n      \n      if (editingReviewId) {\n        await apiRequest(\"PATCH\", `/api/reviews/${editingReviewId}`, {\n          rating: reviewRating,\n          comment: reviewComment,\n          imageUrls: reviewImageUrls.length > 0 ? reviewImageUrls : undefined,\n          videoUrls: reviewVideoUrls.length > 0 ? reviewVideoUrls : undefined,\n        });\n      } else {\n        await apiRequest(\"POST\", \"/api/reviews\", {\n          restaurantId,\n          rating: reviewRating,\n          comment: reviewComment,\n          imageUrls: reviewImageUrls.length > 0 ? reviewImageUrls : undefined,\n          videoUrls: reviewVideoUrls.length > 0 ? reviewVideoUrls : undefined,\n        });\n      }\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/reviews\", restaurantId] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", restaurantId] });\n      setIsReviewDialogOpen(false);\n      setReviewRating(0);\n      setReviewComment(\"\");\n      setReviewImageUrls([]);\n      setReviewVideoUrls([]);\n      setEditingReviewId(null);\n      toast({\n        title: editingReviewId ? (language === \"en\" ? \"Review updated\" : \"ë¦¬ë·° ìˆ˜ì •ë¨\") : t(\"review.success\"),\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error) || error.message === \"Please log in to write reviews\") {\n        toast({\n          title: language === \"en\" ? \"Login Required\" : \"ë¡œê·¸ì¸ í•„ìš”\",\n          description: language === \"en\" ? \"Please log in to write reviews\" : \"ë¦¬ë·°ë¥¼ ì‘ì„±í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 1000);\n      } else {\n        toast({\n          title: t(\"review.error\"),\n          variant: \"destructive\",\n        });\n      }\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (reviewId: string) => {\n      if (!isAuthenticated) {\n        throw new Error(\"Please log in to delete reviews\");\n      }\n      await apiRequest(\"DELETE\", `/api/reviews/${reviewId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/reviews\", restaurantId] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", restaurantId] });\n      toast({\n        title: language === \"en\" ? \"Review deleted\" : \"ë¦¬ë·° ì‚­ì œë¨\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to delete review\" : \"ë¦¬ë·° ì‚­ì œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Review Response Mutations\n  const responseCreateMutation = useMutation({\n    mutationFn: async ({ reviewId, response }: { reviewId: string; response: string }) => {\n      if (!isAuthenticated || !isOwner) {\n        throw new Error(\"Unauthorized\");\n      }\n      await apiRequest(\"POST\", \"/api/review-responses\", {\n        reviewId,\n        restaurantId,\n        response,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/review-responses\", restaurantId] });\n      setIsResponseDialogOpen(false);\n      setResponseText(\"\");\n      setEditingResponseReviewId(null);\n      setEditingResponseId(null);\n      toast({\n        title: language === \"en\" ? \"Response posted\" : \"ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to post response\" : \"ë‹µë³€ ë“±ë¡ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const responseUpdateMutation = useMutation({\n    mutationFn: async ({ responseId, response }: { responseId: string; response: string }) => {\n      if (!isAuthenticated || !isOwner) {\n        throw new Error(\"Unauthorized\");\n      }\n      await apiRequest(\"PATCH\", `/api/review-responses/${responseId}`, {\n        restaurantId,\n        response,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/review-responses\", restaurantId] });\n      setIsResponseDialogOpen(false);\n      setResponseText(\"\");\n      setEditingResponseReviewId(null);\n      setEditingResponseId(null);\n      toast({\n        title: language === \"en\" ? \"Response updated\" : \"ë‹µë³€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to update response\" : \"ë‹µë³€ ìˆ˜ì • ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const responseDeleteMutation = useMutation({\n    mutationFn: async (responseId: string) => {\n      if (!isAuthenticated || !isOwner) {\n        throw new Error(\"Unauthorized\");\n      }\n      await apiRequest(\"DELETE\", `/api/review-responses/${responseId}`, {\n        restaurantId,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/review-responses\", restaurantId] });\n      toast({\n        title: language === \"en\" ? \"Response deleted\" : \"ë‹µë³€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to delete response\" : \"ë‹µë³€ ì‚­ì œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmitReview = () => {\n    if (reviewRating === 0) {\n      toast({\n        title: t(\"review.error\"),\n        description: t(\"review.yourRating\"),\n        variant: \"destructive\",\n      });\n      return;\n    }\n    reviewMutation.mutate();\n  };\n\n  const handleDeleteReview = (reviewId: string) => {\n    if (window.confirm(language === \"en\" ? \"Are you sure you want to delete this review?\" : \"ì´ ë¦¬ë·°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\n      deleteMutation.mutate(reviewId);\n    }\n  };\n\n  const handleOpenResponseDialog = (reviewId: string, existingResponse?: ReviewResponse) => {\n    setEditingResponseReviewId(reviewId);\n    if (existingResponse) {\n      setEditingResponseId(existingResponse.id);\n      setResponseText(existingResponse.response);\n    } else {\n      setEditingResponseId(null);\n      setResponseText(\"\");\n    }\n    setIsResponseDialogOpen(true);\n  };\n\n  const handleSubmitResponse = () => {\n    if (!responseText.trim()) {\n      toast({\n        title: language === \"en\" ? \"Please enter a response\" : \"ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (editingResponseId) {\n      responseUpdateMutation.mutate({\n        responseId: editingResponseId,\n        response: responseText,\n      });\n    } else if (editingResponseReviewId) {\n      responseCreateMutation.mutate({\n        reviewId: editingResponseReviewId,\n        response: responseText,\n      });\n    }\n  };\n\n  const handleDeleteResponse = (responseId: string) => {\n    if (window.confirm(language === \"en\" ? \"Are you sure you want to delete this response?\" : \"ì´ ë‹µë³€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\n      responseDeleteMutation.mutate(responseId);\n    }\n  };\n\n  if (loadingRestaurant) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"h-64 bg-muted animate-pulse\" />\n          <div className=\"p-4 space-y-4\">\n            <div className=\"h-8 bg-muted rounded animate-pulse\" />\n            <div className=\"h-6 bg-muted rounded animate-pulse w-3/4\" />\n            <div className=\"h-20 bg-muted rounded animate-pulse\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!restaurant) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold mb-2\">{t(\"error.notFound\")}</h2>\n          <Link href=\"/\">\n            <Button variant=\"default\" data-testid=\"button-back-home\">\n              {t(\"nav.discover\")}\n            </Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const restaurantName = language === \"en\" ? restaurant.nameEn : restaurant.name;\n  const restaurantDescription = language === \"en\" ? restaurant.descriptionEn : restaurant.description;\n\n  return (\n    <>\n      <SEO\n        title={`${restaurantName} - ${t(\"nav.discover\")}`}\n        description={restaurantDescription}\n        keywords={[restaurant.name, restaurant.nameEn, restaurant.cuisine, restaurant.district, \"Korean restaurant\"]}\n        url={`/restaurant/${restaurant.id}`}\n      />\n      <div className=\"min-h-screen bg-background pb-8\">\n        <div className=\"max-w-7xl mx-auto px-4 xl:px-6\">\n          {/* Header Image Gallery */}\n          <div className=\"relative\">\n            {/* Gallery Grid */}\n            <div className=\"grid grid-cols-4 gap-1 h-64\">\n              {/* Main Image - Takes 2 columns */}\n              <div className=\"col-span-2 row-span-2 relative overflow-hidden cursor-pointer\" onClick={() => setIsGalleryOpen(true)}>\n                <OptimizedImage\n                  src={restaurant.imageUrl}\n                  alt={restaurantName}\n                  className=\"w-full h-full\"\n                  height={256}\n                  priority={true}\n                  objectFit=\"cover\"\n                  data-testid=\"img-restaurant-hero\"\n                />\n              </div>\n              \n              {/* Additional Images - 2x2 Grid */}\n              {restaurantImages.length > 0 ? (\n                restaurantImages.slice(0, 4).map((img, index) => (\n                  <div\n                    key={img.id}\n                    className=\"relative overflow-hidden cursor-pointer hover-elevate\"\n                    onClick={() => setIsGalleryOpen(true)}\n                  >\n                    {index === 3 && restaurantImages.length > 4 && (\n                      <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center z-10\">\n                        <div className=\"text-white text-center\">\n                          <Eye className=\"w-6 h-6 mx-auto mb-1\" />\n                          <p className=\"text-sm font-semibold\">{language === \"en\" ? \"View All\" : \"ì „ì²´ë³´ê¸°\"}</p>\n                        </div>\n                      </div>\n                    )}\n                    <OptimizedImage\n                      src={img.imageUrl}\n                      alt={`${restaurantName} ${index + 2}`}\n                      className=\"w-full h-full\"\n                      objectFit=\"cover\"\n                    />\n                  </div>\n                ))\n              ) : (\n                [\n                  \"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400\",\n                  \"https://images.unsplash.com/photo-1498654896293-37aacf113fd9?w=400\",\n                  \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=400\",\n                  \"https://images.unsplash.com/photo-1551218808-94e220e084d2?w=400\",\n                ].map((imgUrl, index) => (\n                  <div\n                    key={index}\n                    className=\"relative overflow-hidden cursor-pointer hover-elevate\"\n                    onClick={() => setIsGalleryOpen(true)}\n                  >\n                    {index === 3 && (\n                      <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center z-10\">\n                        <div className=\"text-white text-center\">\n                          <Eye className=\"w-6 h-6 mx-auto mb-1\" />\n                          <p className=\"text-sm font-semibold\">{language === \"en\" ? \"View All\" : \"ì „ì²´ë³´ê¸°\"}</p>\n                        </div>\n                      </div>\n                    )}\n                    <OptimizedImage\n                      src={imgUrl}\n                      alt={`${restaurantName} ${index + 2}`}\n                      className=\"w-full h-full\"\n                      objectFit=\"cover\"\n                    />\n                  </div>\n                ))\n              )}\n            </div>\n\n            {/* Overlay Buttons */}\n            <div className=\"absolute top-4 left-4 right-4 flex justify-between items-start z-20\">\n              <Link href=\"/\">\n                <Button\n                  size=\"icon\"\n                  variant=\"secondary\"\n                  className=\"bg-background/80 backdrop-blur-sm\"\n                  data-testid=\"button-back\"\n                >\n                  <ArrowLeft className=\"w-5 h-5\" />\n                </Button>\n              </Link>\n              <Button\n                size=\"icon\"\n                variant=\"secondary\"\n                className=\"bg-background/80 backdrop-blur-sm\"\n                onClick={() => saveMutation.mutate()}\n                disabled={saveMutation.isPending}\n                data-testid=\"button-save\"\n              >\n                <Heart className={`w-5 h-5 ${isSaved ? \"fill-red-500 text-red-500\" : \"\"}`} />\n              </Button>\n            </div>\n          </div>\n\n          {/* Restaurant Info */}\n          <div className=\"px-4 pt-4\">\n            {/* Title & Rating */}\n            <div className=\"mb-4\">\n              <h1 className=\"text-2xl font-bold mb-1\" data-testid=\"text-restaurant-name\">\n                {restaurantName}\n              </h1>\n              <p className=\"text-muted-foreground mb-3\">\n                {language === \"en\" ? restaurant.name : restaurant.nameEn}\n              </p>\n              <div className=\"flex items-center gap-3 flex-wrap\">\n                <Badge variant=\"secondary\" data-testid=\"badge-cuisine\">\n                  {restaurant.cuisine}\n                </Badge>\n                {restaurant.rating > 0 && (\n                  <div className=\"flex items-center gap-1\" data-testid=\"rating-display\">\n                    <Star className=\"w-5 h-5 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                    <span className=\"font-semibold text-lg\">{restaurant.rating}</span>\n                    <span className=\"text-muted-foreground\">\n                      ({restaurant.reviewCount} {t(\"reviews.title\")})\n                    </span>\n                  </div>\n                )}\n                {restaurant.isVegan === 1 && (\n                  <Badge variant=\"outline\" className=\"border-green-500 text-green-700 dark:text-green-400\">\n                    Vegan\n                  </Badge>\n                )}\n                {restaurant.isHalal === 1 && (\n                  <Badge variant=\"outline\" className=\"border-blue-500 text-blue-700 dark:text-blue-400\">\n                    Halal\n                  </Badge>\n                )}\n              </div>\n            </div>\n\n            {/* Quick Info Cards */}\n            <div className=\"grid grid-cols-2 gap-3 mb-6\">\n              <Card className=\"p-3\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <DollarSign className=\"w-4 h-4 text-muted-foreground\" />\n                  <span className=\"text-xs text-muted-foreground\">{t(\"restaurant.price\")}</span>\n                </div>\n                <p className=\"font-semibold\" data-testid=\"text-price-range\">\n                  {restaurant.priceRange}\n                </p>\n              </Card>\n              <Card className=\"p-3\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <MapPin className=\"w-4 h-4 text-muted-foreground\" />\n                  <span className=\"text-xs text-muted-foreground\">{t(\"restaurant.location\")}</span>\n                </div>\n                <p className=\"font-semibold truncate\" data-testid=\"text-district\">\n                  {restaurant.district}\n                </p>\n              </Card>\n            </div>\n\n            {/* Description */}\n            <Card className=\"p-4 mb-6\">\n              <h2 className=\"font-semibold mb-2\">{t(\"restaurant.about\")}</h2>\n              <p className=\"text-muted-foreground leading-relaxed\" data-testid=\"text-description\">\n                {restaurantDescription}\n              </p>\n            </Card>\n\n            {/* Popularity Index */}\n            <PopularityCard\n              naverRating={(restaurant as any).naverRating}\n              naverReviewCount={(restaurant as any).naverReviewCount}\n              googleRating={(restaurant as any).googleRating}\n              googleReviewCount={(restaurant as any).googleReviewCount}\n              popularityScore={(restaurant as any).popularityScore}\n            />\n\n            {/* Contact Info */}\n            <Card className=\"p-4 mb-6\">\n              <h2 className=\"font-semibold mb-3\">{t(\"restaurant.info\")}</h2>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-start gap-3\">\n                  <MapPin className=\"w-5 h-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-medium mb-1\">{t(\"restaurant.address\")}</p>\n                    <p className=\"text-sm text-muted-foreground mb-2\" data-testid=\"text-address\">\n                      {restaurant.address}\n                    </p>\n                    <div className=\"flex items-center gap-2 flex-wrap\">\n                      {(restaurant as any).googleMapUrl && (\n                        <a\n                          href={(restaurant as any).googleMapUrl}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          data-testid=\"button-google-maps\"\n                        >\n                          <Badge variant=\"outline\" className=\"hover-elevate active-elevate-2 cursor-pointer text-xs gap-1\">\n                            <Navigation className=\"w-3 h-3\" />\n                            {language === \"en\" ? \"Google Maps\" : \"êµ¬ê¸€ ì§€ë„\"}\n                          </Badge>\n                        </a>\n                      )}\n                      {(restaurant as any).naverMapUrl && (\n                        <a\n                          href={(restaurant as any).naverMapUrl}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          data-testid=\"button-naver-maps\"\n                        >\n                          <Badge variant=\"outline\" className=\"hover-elevate active-elevate-2 cursor-pointer text-xs gap-1\">\n                            <Navigation className=\"w-3 h-3\" />\n                            {language === \"en\" ? \"Naver Map\" : \"ë„¤ì´ë²„ ì§€ë„\"}\n                          </Badge>\n                        </a>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <Phone className=\"w-5 h-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium mb-1\">{t(\"restaurant.phone\")}</p>\n                    <a\n                      href={`tel:${restaurant.phone}`}\n                      className=\"text-sm text-primary hover:underline\"\n                      data-testid=\"link-phone\"\n                    >\n                      {restaurant.phone}\n                    </a>\n                  </div>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <Clock className=\"w-5 h-5 text-muted-foreground flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium mb-1\">{t(\"restaurant.hours\")}</p>\n                    <p className=\"text-sm text-muted-foreground whitespace-pre-line\" data-testid=\"text-hours\">\n                      {restaurant.openHours}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </Card>\n\n\n            {/* Promotions Section */}\n            {promotions.length > 0 && (\n              <div className=\"space-y-3 mb-6\">\n                {promotions.map((promotion) => (\n                  <Card \n                    key={promotion.id} \n                    className=\"p-4 border-2 border-[hsl(var(--accent-success))] bg-[hsl(var(--accent-success))]/5\"\n                    data-testid={`promotion-${promotion.id}`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"flex-shrink-0 bg-[hsl(var(--accent-success))] text-white px-3 py-1 rounded-md\">\n                        <p className=\"text-xs font-bold\">\n                          {promotion.discountType === \"percentage\" \n                            ? `${promotion.discountValue}%` \n                            : promotion.discountType === \"amount\"\n                            ? `â‚©${promotion.discountValue?.toLocaleString()}`\n                            : language === \"en\" ? \"Special\" : \"íŠ¹ê°€\"}\n                        </p>\n                      </div>\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-[hsl(var(--accent-success))] mb-1\">\n                          {language === \"en\" ? promotion.titleEn : promotion.title}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground mb-2\">\n                          {language === \"en\" ? promotion.descriptionEn : promotion.description}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {new Date(promotion.startDate).toLocaleDateString(language)} - {new Date(promotion.endDate).toLocaleDateString(language)}\n                        </p>\n                      </div>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            )}\n\n            {/* Ad Slot 1 - Before Menu */}\n            <AdSense slot=\"menu-top\" format=\"auto\" className=\"mb-6\" />\n\n            {/* Menu Section */}\n            {menus.length > 0 && (\n              <Card className=\"p-4 mb-6\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <UtensilsCrossed className=\"w-5 h-5 text-primary\" />\n                  <h2 className=\"font-semibold\">{language === \"en\" ? \"Menu\" : \"ë©”ë‰´\"}</h2>\n                </div>\n                \n                {loadingMenus ? (\n                  <div className=\"space-y-3\">\n                    {Array.from({ length: 3 }).map((_, i) => (\n                      <div key={i} className=\"h-20 bg-muted rounded animate-pulse\" />\n                    ))}\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"space-y-3\">\n                      {(showAllMenus ? menus : menus.slice(0, 5)).map((menu) => (\n                        <Card key={menu.id} className=\"p-3 hover-elevate\" data-testid={`menu-item-${menu.id}`}>\n                          <div className=\"flex justify-between items-start gap-3\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-2 mb-1 flex-wrap\">\n                                <h3 className=\"font-semibold\" data-testid=\"text-menu-name\">\n                                  {language === \"en\" ? menu.nameEn : menu.name}\n                                </h3>\n                                {menu.isPopular === 1 && (\n                                  <Badge variant=\"secondary\" className=\"text-xs\">\n                                    {language === \"en\" ? \"Popular\" : \"ì¸ê¸°\"}\n                                  </Badge>\n                                )}\n                                {menu.isRecommended === 1 && (\n                                  <Badge variant=\"outline\" className=\"text-xs border-primary text-primary\">\n                                    {language === \"en\" ? \"Recommended\" : \"ì¶”ì²œ\"}\n                                  </Badge>\n                                )}\n                              </div>\n                              {menu.description && (\n                                <p className=\"text-sm text-muted-foreground mb-1\" data-testid=\"text-menu-description\">\n                                  {language === \"en\" ? menu.descriptionEn : menu.description}\n                                </p>\n                              )}\n                              {menu.category && (\n                                <p className=\"text-xs text-muted-foreground\">\n                                  {menu.category}\n                                </p>\n                              )}\n                            </div>\n                            <div className=\"flex-shrink-0\">\n                              <p className=\"font-semibold text-primary\" data-testid=\"text-menu-price\">\n                                â‚©{menu.price.toLocaleString()}\n                              </p>\n                            </div>\n                          </div>\n                        </Card>\n                      ))}\n                    </div>\n                    {menus.length > 5 && (\n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full mt-3\"\n                        onClick={() => setShowAllMenus(!showAllMenus)}\n                        data-testid=\"button-toggle-menus\"\n                      >\n                        {showAllMenus \n                          ? (language === \"en\" ? \"Show Less\" : \"ì ‘ê¸°\")\n                          : (language === \"en\" ? `Show All (${menus.length})` : `ì „ì²´ë³´ê¸° (${menus.length}ê°œ)`)}\n                      </Button>\n                    )}\n                  </>\n                )}\n              </Card>\n            )}\n\n            {/* YouTube Videos Section */}\n            {videos.length > 0 && (\n              <Card className=\"p-4 mb-6\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Play className=\"w-5 h-5 text-red-500\" />\n                  <h2 className=\"font-semibold\">{language === \"en\" ? \"Videos\" : \"ì˜ìƒ ë¦¬ë·°\"}</h2>\n                </div>\n                \n                {loadingVideos ? (\n                  <div className=\"space-y-3\">\n                    {Array.from({ length: 2 }).map((_, i) => (\n                      <div key={i} className=\"h-24 bg-muted rounded animate-pulse\" />\n                    ))}\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"space-y-3\">\n                      {(showAllVideos ? videos : videos.slice(0, 5)).map((video) => (\n                        <a\n                          key={video.id}\n                          href={`https://www.youtube.com/watch?v=${video.videoId}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"block\"\n                          data-testid={`video-${video.id}`}\n                        >\n                          <Card className=\"p-3 hover-elevate active-elevate-2\">\n                            <div className=\"flex gap-3\">\n                              <div className=\"relative flex-shrink-0 w-32 h-20 bg-muted rounded overflow-hidden\">\n                                <OptimizedImage\n                                  src={video.thumbnailUrl}\n                                  alt={video.title}\n                                  className=\"w-full h-full\"\n                                  width={128}\n                                  height={80}\n                                  objectFit=\"cover\"\n                                  data-testid=\"img-video-thumbnail\"\n                                />\n                                <div className=\"absolute inset-0 flex items-center justify-center bg-black/30\">\n                                  <Play className=\"w-8 h-8 text-white fill-white\" />\n                                </div>\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <h3 className=\"font-medium text-sm line-clamp-2 mb-1\" data-testid=\"text-video-title\">\n                                  {video.title}\n                                </h3>\n                                <p className=\"text-xs text-muted-foreground mb-1\" data-testid=\"text-channel-name\">\n                                  {video.channelName}\n                                </p>\n                                <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                                  {video.viewCount && (\n                                    <span className=\"flex items-center gap-1\">\n                                      <Eye className=\"w-3 h-3\" />\n                                      {video.viewCount.toLocaleString()}\n                                    </span>\n                                  )}\n                                  {video.publishedAt && (\n                                    <span className=\"flex items-center gap-1\">\n                                      <Calendar className=\"w-3 h-3\" />\n                                      {new Date(video.publishedAt).toLocaleDateString(language === \"en\" ? \"en-US\" : \"ko-KR\", { year: 'numeric', month: 'short' })}\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                          </Card>\n                        </a>\n                      ))}\n                    </div>\n                    {videos.length > 5 && (\n                      <Button\n                        variant=\"outline\"\n                        className=\"w-full mt-3\"\n                        onClick={() => setShowAllVideos(!showAllVideos)}\n                        data-testid=\"button-toggle-videos\"\n                      >\n                        {showAllVideos \n                          ? (language === \"en\" ? \"Show Less\" : \"ì ‘ê¸°\")\n                          : (language === \"en\" ? `Show All (${videos.length})` : `ì „ì²´ë³´ê¸° (${videos.length}ê°œ)`)}\n                      </Button>\n                    )}\n                  </>\n                )}\n              </Card>\n            )}\n\n            {/* AI Assistant Cards */}\n            <div className=\"mb-6\">\n              <div className=\"flex items-center gap-2 mb-4\">\n                <Sparkles className=\"w-5 h-5 text-primary\" />\n                <h2 className=\"font-semibold\">{language === \"en\" ? \"AI Assistant\" : \"AI ë„ìš°ë¯¸\"}</h2>\n              </div>\n              <div className=\"grid grid-cols-2 gap-3\">\n                {/* Review Analysis Card */}\n                <Card \n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  onClick={() => openAIChat(\"reviews\")}\n                  data-testid=\"card-ai-reviews\"\n                >\n                  <div className=\"flex flex-col items-center text-center gap-2\">\n                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <MessageSquare className=\"w-6 h-6 text-primary\" />\n                    </div>\n                    <h3 className=\"font-semibold text-sm\">\n                      {language === \"en\" ? \"Review Analysis\" : \"ë¦¬ë·° ë¶„ì„\"}\n                    </h3>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {language === \"en\" ? \"Ask about reviews\" : \"ë¦¬ë·° ê¶ê¸ˆí•œ ì \"}\n                    </p>\n                  </div>\n                </Card>\n\n                {/* Menu Recommendations Card */}\n                <Card \n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  onClick={() => openAIChat(\"menu\")}\n                  data-testid=\"card-ai-menu\"\n                >\n                  <div className=\"flex flex-col items-center text-center gap-2\">\n                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <UtensilsCrossed className=\"w-6 h-6 text-primary\" />\n                    </div>\n                    <h3 className=\"font-semibold text-sm\">\n                      {language === \"en\" ? \"Menu Guide\" : \"ë©”ë‰´ ì¶”ì²œ\"}\n                    </h3>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {language === \"en\" ? \"Get menu tips\" : \"ë©”ë‰´ ì¶”ì²œë°›ê¸°\"}\n                    </p>\n                  </div>\n                </Card>\n\n                {/* How to Eat Card */}\n                <Card \n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  onClick={() => openAIChat(\"howToEat\")}\n                  data-testid=\"card-ai-how-to-eat\"\n                >\n                  <div className=\"flex flex-col items-center text-center gap-2\">\n                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <Lightbulb className=\"w-6 h-6 text-primary\" />\n                    </div>\n                    <h3 className=\"font-semibold text-sm\">\n                      {language === \"en\" ? \"How to Eat\" : \"ë¨¹ëŠ” ë°©ë²•\"}\n                    </h3>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {language === \"en\" ? \"Learn eating tips\" : \"ë¨¹ëŠ” ë²• ë°°ìš°ê¸°\"}\n                    </p>\n                  </div>\n                </Card>\n\n                {/* Ordering Tips Card */}\n                <Card \n                  className=\"p-4 hover-elevate active-elevate-2 cursor-pointer\"\n                  onClick={() => openAIChat(\"ordering\")}\n                  data-testid=\"card-ai-ordering\"\n                >\n                  <div className=\"flex flex-col items-center text-center gap-2\">\n                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <MessageCircle className=\"w-6 h-6 text-primary\" />\n                    </div>\n                    <h3 className=\"font-semibold text-sm\">\n                      {language === \"en\" ? \"Ordering Tips\" : \"ì£¼ë¬¸ ìš”ë ¹\"}\n                    </h3>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {language === \"en\" ? \"Order like a local\" : \"í˜„ì§€ì¸ì²˜ëŸ¼ ì£¼ë¬¸\"}\n                    </p>\n                  </div>\n                </Card>\n              </div>\n            </div>\n\n            {/* Ad Slot 2 - After AI Cards */}\n            <AdSense slot=\"ai-cards-bottom\" format=\"auto\" className=\"mb-6\" />\n\n            {/* AI Insights Section */}\n            {insights && (\n              <Card className=\"p-4 mb-6 border-primary/20\">\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Sparkles className=\"w-5 h-5 text-primary\" />\n                  <h2 className=\"font-semibold\">{language === \"en\" ? \"AI Insights\" : \"AI ì¶”ì²œ ì •ë³´\"}</h2>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  {/* Review Insights */}\n                  {(language === \"en\" ? insights.reviewInsightsEn : insights.reviewInsights) && (\n                    <div className=\"pb-4 border-b\">\n                      <div className=\"flex items-start gap-2 mb-2\">\n                        <Star className=\"w-4 h-4 text-[hsl(var(--accent-success))] mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <p className=\"text-sm font-medium mb-1\">\n                            {language === \"en\" ? \"What customers love\" : \"ê³ ê°ë“¤ì´ ì¢‹ì•„í•˜ëŠ” ì \"}\n                          </p>\n                          <p className=\"text-sm text-muted-foreground\" data-testid=\"text-review-insights\">\n                            {language === \"en\" ? insights.reviewInsightsEn : insights.reviewInsights}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Best For */}\n                  {(language === \"en\" ? insights.bestForEn : insights.bestFor) && (\n                    <div className=\"pb-4 border-b\">\n                      <div className=\"flex items-start gap-2 mb-2\">\n                        <Users className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <p className=\"text-sm font-medium mb-1\">\n                            {language === \"en\" ? \"Best for\" : \"ì¶”ì²œ ìƒí™©\"}\n                          </p>\n                          <div className=\"flex flex-wrap gap-2\" data-testid=\"badges-best-for\">\n                            {(language === \"en\" ? insights.bestForEn : insights.bestFor)\n                              .split(\",\")\n                              .map((item: string, idx: number) => (\n                                <Badge key={idx} variant=\"secondary\" className=\"text-xs\">\n                                  {item.trim()}\n                                </Badge>\n                              ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Cultural Tips */}\n                  {(language === \"en\" ? insights.culturalTipsEn : insights.culturalTips) && (\n                    <div className=\"pb-4 border-b\">\n                      <div className=\"flex items-start gap-2 mb-2\">\n                        <Lightbulb className=\"w-4 h-4 text-amber-500 mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <p className=\"text-sm font-medium mb-1\">\n                            {language === \"en\" ? \"Cultural tip\" : \"ë¬¸í™” íŒ\"}\n                          </p>\n                          <p className=\"text-sm text-muted-foreground\" data-testid=\"text-cultural-tips\">\n                            {language === \"en\" ? insights.culturalTipsEn : insights.culturalTips}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* First Timer Tips */}\n                  {(language === \"en\" ? insights.firstTimerTipsEn : insights.firstTimerTips) && (\n                    <div>\n                      <div className=\"flex items-start gap-2 mb-2\">\n                        <Sparkles className=\"w-4 h-4 text-primary mt-0.5 flex-shrink-0\" />\n                        <div>\n                          <p className=\"text-sm font-medium mb-1\">\n                            {language === \"en\" ? \"First-timer tip\" : \"ì²« ë°©ë¬¸ íŒ\"}\n                          </p>\n                          <p className=\"text-sm text-muted-foreground\" data-testid=\"text-first-timer-tips\">\n                            {language === \"en\" ? insights.firstTimerTipsEn : insights.firstTimerTips}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </Card>\n            )}\n\n            {/* Reviews Section */}\n            <Card className=\"p-4\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"font-semibold flex items-center gap-2\">\n                  <Users className=\"w-5 h-5\" />\n                  {t(\"reviews.title\")} ({reviews.length})\n                </h2>\n                <Button \n                  size=\"sm\" \n                  variant=\"default\" \n                  onClick={() => setIsReviewDialogOpen(true)}\n                  data-testid=\"button-write-review\"\n                >\n                  {t(\"reviews.write\")}\n                </Button>\n              </div>\n\n              {loadingReviews ? (\n                <div className=\"space-y-3\">\n                  {Array.from({ length: 2 }).map((_, i) => (\n                    <div key={i} className=\"border-t pt-3\">\n                      <div className=\"h-4 bg-muted rounded animate-pulse w-1/3 mb-2\" />\n                      <div className=\"h-3 bg-muted rounded animate-pulse w-full mb-1\" />\n                      <div className=\"h-3 bg-muted rounded animate-pulse w-3/4\" />\n                    </div>\n                  ))}\n                </div>\n              ) : reviews.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <p className=\"text-muted-foreground\" data-testid=\"text-no-reviews\">\n                    {t(\"reviews.empty\")}\n                  </p>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    {t(\"reviews.beFirst\")}\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {reviews.map((review) => {\n                    const isOwnReview = user && review.userId === user.id;\n                    return (\n                      <div key={review.id} className=\"border-t pt-4 first:border-t-0 first:pt-0\" data-testid={`review-${review.id}`}>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <p className=\"font-medium\">{review.userName}</p>\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"flex items-center gap-1\">\n                              <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                              <span className=\"font-medium\">{review.rating}</span>\n                            </div>\n                            {isOwnReview && (\n                              <div className=\"flex gap-1\">\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => {\n                                    setEditingReviewId(review.id);\n                                    setReviewRating(review.rating);\n                                    setReviewComment(review.comment);\n                                    setReviewImageUrls(review.imageUrls || []);\n                                    setReviewVideoUrls(review.videoUrls || []);\n                                    setIsReviewDialogOpen(true);\n                                  }}\n                                  data-testid={`button-edit-review-${review.id}`}\n                                >\n                                  Edit\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleDeleteReview(review.id)}\n                                  data-testid={`button-delete-review-${review.id}`}\n                                >\n                                  Delete\n                                </Button>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground mb-2\">{review.comment}</p>\n                        \n                        {/* Review Images */}\n                        {review.imageUrls && review.imageUrls.length > 0 && (\n                          <div className=\"grid grid-cols-3 gap-2 mb-2\">\n                            {review.imageUrls.map((url, idx) => (\n                              <div key={idx} className=\"relative aspect-square rounded-md overflow-hidden bg-muted\">\n                                <img\n                                  src={url}\n                                  alt={`Review image ${idx + 1}`}\n                                  className=\"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity\"\n                                  onClick={() => window.open(url, '_blank')}\n                                  data-testid={`review-image-${review.id}-${idx}`}\n                                />\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                        \n                        {/* Review Videos */}\n                        {review.videoUrls && review.videoUrls.length > 0 && (\n                          <div className=\"grid grid-cols-2 gap-2 mb-2\">\n                            {review.videoUrls.map((url, idx) => (\n                              <div key={idx} className=\"relative aspect-video rounded-md overflow-hidden bg-muted\">\n                                <video\n                                  src={url}\n                                  controls\n                                  className=\"w-full h-full object-cover\"\n                                  data-testid={`review-video-${review.id}-${idx}`}\n                                />\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                        \n                        <p className=\"text-xs text-muted-foreground\">\n                          {new Date(review.createdAt).toLocaleDateString(language)}\n                        </p>\n\n                        {/* Owner Response Section */}\n                        {reviewResponses[review.id] ? (\n                          <div className=\"mt-3 ml-4 pl-4 border-l-2 border-primary/30 bg-muted/30 p-3 rounded-r\" data-testid={`response-${review.id}`}>\n                            <div className=\"flex items-start justify-between mb-2\">\n                              <div className=\"flex items-center gap-2\">\n                                <Store className=\"w-4 h-4 text-primary\" />\n                                <p className=\"text-sm font-medium text-primary\">\n                                  {language === \"en\" ? \"Owner's Response\" : \"ì‚¬ì¥ë‹˜ ë‹µë³€\"}\n                                </p>\n                              </div>\n                              {isOwner && (\n                                <div className=\"flex gap-1\">\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => handleOpenResponseDialog(review.id, reviewResponses[review.id])}\n                                    data-testid={`button-edit-response-${review.id}`}\n                                  >\n                                    {language === \"en\" ? \"Edit\" : \"ìˆ˜ì •\"}\n                                  </Button>\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"ghost\"\n                                    onClick={() => handleDeleteResponse(reviewResponses[review.id].id)}\n                                    data-testid={`button-delete-response-${review.id}`}\n                                  >\n                                    {language === \"en\" ? \"Delete\" : \"ì‚­ì œ\"}\n                                  </Button>\n                                </div>\n                              )}\n                            </div>\n                            <p className=\"text-sm text-muted-foreground\">{reviewResponses[review.id].response}</p>\n                            <p className=\"text-xs text-muted-foreground mt-2\">\n                              {new Date(reviewResponses[review.id].createdAt).toLocaleDateString(language)}\n                            </p>\n                          </div>\n                        ) : isOwner && (\n                          <div className=\"mt-3 ml-4\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => handleOpenResponseDialog(review.id)}\n                              data-testid={`button-add-response-${review.id}`}\n                            >\n                              <MessageSquare className=\"w-4 h-4 mr-2\" />\n                              {language === \"en\" ? \"Respond\" : \"ë‹µë³€í•˜ê¸°\"}\n                            </Button>\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </Card>\n\n            {/* Ad Slot 3 - After Reviews */}\n            <AdSense slot=\"reviews-bottom\" format=\"auto\" className=\"mb-6\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Review Dialog */}\n      <Dialog open={isReviewDialogOpen} onOpenChange={(open) => {\n        setIsReviewDialogOpen(open);\n        if (!open) {\n          setEditingReviewId(null);\n          setReviewRating(0);\n          setReviewComment(\"\");\n          setReviewImageUrls([]);\n          setReviewVideoUrls([]);\n        }\n      }}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>{editingReviewId ? (language === \"en\" ? \"Edit Review\" : \"ë¦¬ë·° ìˆ˜ì •\") : t(\"review.write\")}</DialogTitle>\n            <DialogDescription>{restaurantName}</DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4 py-4\">\n            {/* Star Rating */}\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">{t(\"review.yourRating\")}</label>\n              <div className=\"flex gap-2\" data-testid=\"rating-input\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <button\n                    key={star}\n                    type=\"button\"\n                    onClick={() => setReviewRating(star)}\n                    className=\"focus:outline-none transition-transform hover:scale-110\"\n                    data-testid={`button-star-${star}`}\n                  >\n                    <Star\n                      className={`w-8 h-8 ${\n                        star <= reviewRating\n                          ? \"fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\"\n                          : \"text-muted-foreground\"\n                      }`}\n                    />\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Comment */}\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">{t(\"review.yourReview\")}</label>\n              <Textarea\n                placeholder={t(\"review.placeholder\")}\n                value={reviewComment}\n                onChange={(e) => setReviewComment(e.target.value)}\n                rows={4}\n                data-testid=\"textarea-review-comment\"\n              />\n            </div>\n\n            {/* Photos */}\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                <ImageIcon className=\"w-4 h-4 inline mr-1\" />\n                {language === \"en\" ? \"Photos (optional)\" : \"ì‚¬ì§„ (ì„ íƒ)\"}\n              </label>\n              <div className=\"space-y-2\">\n                {reviewImageUrls.length > 0 && (\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {reviewImageUrls.map((url, idx) => (\n                      <div key={idx} className=\"relative aspect-square rounded-md overflow-hidden bg-muted group\">\n                        <img\n                          src={url}\n                          alt={`Preview ${idx + 1}`}\n                          className=\"w-full h-full object-cover\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setReviewImageUrls(prev => prev.filter((_, i) => i !== idx))}\n                          className=\"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                          data-testid={`button-remove-image-${idx}`}\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                <Input\n                  type=\"text\"\n                  placeholder={language === \"en\" ? \"Enter image URL\" : \"ì´ë¯¸ì§€ URL ì…ë ¥\"}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && e.currentTarget.value.trim()) {\n                      e.preventDefault();\n                      setReviewImageUrls(prev => [...prev, e.currentTarget.value.trim()]);\n                      e.currentTarget.value = '';\n                    }\n                  }}\n                  data-testid=\"input-image-url\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  {language === \"en\" ? \"Press Enter to add image URL\" : \"Enter í‚¤ë¥¼ ëˆŒëŸ¬ ì´ë¯¸ì§€ URL ì¶”ê°€\"}\n                </p>\n              </div>\n            </div>\n\n            {/* Videos */}\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                <Video className=\"w-4 h-4 inline mr-1\" />\n                {language === \"en\" ? \"Videos (optional)\" : \"ì˜ìƒ (ì„ íƒ)\"}\n              </label>\n              <div className=\"space-y-2\">\n                {reviewVideoUrls.length > 0 && (\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    {reviewVideoUrls.map((url, idx) => (\n                      <div key={idx} className=\"relative aspect-video rounded-md overflow-hidden bg-muted group\">\n                        <video\n                          src={url}\n                          className=\"w-full h-full object-cover\"\n                        />\n                        <button\n                          type=\"button\"\n                          onClick={() => setReviewVideoUrls(prev => prev.filter((_, i) => i !== idx))}\n                          className=\"absolute top-1 right-1 p-1 bg-destructive text-destructive-foreground rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                          data-testid={`button-remove-video-${idx}`}\n                        >\n                          <Trash2 className=\"w-3 h-3\" />\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n                <Input\n                  type=\"text\"\n                  placeholder={language === \"en\" ? \"Enter video URL\" : \"ì˜ìƒ URL ì…ë ¥\"}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && e.currentTarget.value.trim()) {\n                      e.preventDefault();\n                      setReviewVideoUrls(prev => [...prev, e.currentTarget.value.trim()]);\n                      e.currentTarget.value = '';\n                    }\n                  }}\n                  data-testid=\"input-video-url\"\n                />\n                <p className=\"text-xs text-muted-foreground\">\n                  {language === \"en\" ? \"Press Enter to add video URL\" : \"Enter í‚¤ë¥¼ ëˆŒëŸ¬ ì˜ìƒ URL ì¶”ê°€\"}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsReviewDialogOpen(false);\n                setReviewRating(0);\n                setReviewComment(\"\");\n                setReviewImageUrls([]);\n                setReviewVideoUrls([]);\n                setEditingReviewId(null);\n              }}\n              data-testid=\"button-cancel-review\"\n            >\n              {t(\"review.cancel\")}\n            </Button>\n            <Button\n              onClick={handleSubmitReview}\n              disabled={reviewMutation.isPending || reviewRating === 0}\n              data-testid=\"button-submit-review\"\n            >\n              {reviewMutation.isPending ? \"...\" : t(\"review.submit\")}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Response Dialog */}\n      <Dialog open={isResponseDialogOpen} onOpenChange={(open) => {\n        setIsResponseDialogOpen(open);\n        if (!open) {\n          setEditingResponseReviewId(null);\n          setEditingResponseId(null);\n          setResponseText(\"\");\n        }\n      }}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingResponseId \n                ? (language === \"en\" ? \"Edit Response\" : \"ë‹µë³€ ìˆ˜ì •\") \n                : (language === \"en\" ? \"Respond to Review\" : \"ë¦¬ë·°ì— ë‹µë³€í•˜ê¸°\")}\n            </DialogTitle>\n            <DialogDescription>\n              {language === \"en\" \n                ? \"Share your appreciation or address customer feedback\" \n                : \"ê³ ê°ì˜ ë¦¬ë·°ì— ê°ì‚¬ë¥¼ í‘œí•˜ê±°ë‚˜ í”¼ë“œë°±ì— ì‘ë‹µí•˜ì„¸ìš”\"}\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"py-4\">\n            <Textarea\n              placeholder={language === \"en\" \n                ? \"Thank you for your feedback! We appreciate...\" \n                : \"ì†Œì¤‘í•œ ë¦¬ë·° ê°ì‚¬í•©ë‹ˆë‹¤. ì €í¬ëŠ”...\"}\n              value={responseText}\n              onChange={(e) => setResponseText(e.target.value)}\n              rows={4}\n              data-testid=\"textarea-response\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsResponseDialogOpen(false);\n                setResponseText(\"\");\n                setEditingResponseReviewId(null);\n                setEditingResponseId(null);\n              }}\n              data-testid=\"button-cancel-response\"\n            >\n              {language === \"en\" ? \"Cancel\" : \"ì·¨ì†Œ\"}\n            </Button>\n            <Button\n              onClick={handleSubmitResponse}\n              disabled={responseCreateMutation.isPending || responseUpdateMutation.isPending || !responseText.trim()}\n              data-testid=\"button-submit-response\"\n            >\n              {(responseCreateMutation.isPending || responseUpdateMutation.isPending) \n                ? \"...\" \n                : (language === \"en\" ? \"Post\" : \"ë“±ë¡\")}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* AI Chat Dialog */}\n      <Dialog open={isAIChatOpen} onOpenChange={closeAIChat}>\n        <DialogContent className=\"max-w-md h-[80vh] flex flex-col p-0\">\n          <DialogHeader className=\"px-4 pt-4 pb-3 border-b\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                {currentAICard === \"reviews\" && <MessageSquare className=\"w-5 h-5 text-primary\" />}\n                {currentAICard === \"menu\" && <UtensilsCrossed className=\"w-5 h-5 text-primary\" />}\n                {currentAICard === \"howToEat\" && <Lightbulb className=\"w-5 h-5 text-primary\" />}\n                {currentAICard === \"ordering\" && <MessageCircle className=\"w-5 h-5 text-primary\" />}\n                <DialogTitle>\n                  {currentAICard === \"reviews\" && (language === \"en\" ? \"Review Analysis\" : \"ë¦¬ë·° ë¶„ì„\")}\n                  {currentAICard === \"menu\" && (language === \"en\" ? \"Menu Guide\" : \"ë©”ë‰´ ì¶”ì²œ\")}\n                  {currentAICard === \"howToEat\" && (language === \"en\" ? \"How to Eat\" : \"ë¨¹ëŠ” ë°©ë²•\")}\n                  {currentAICard === \"ordering\" && (language === \"en\" ? \"Ordering Tips\" : \"ì£¼ë¬¸ ìš”ë ¹\")}\n                </DialogTitle>\n              </div>\n              <Button\n                size=\"icon\"\n                variant=\"ghost\"\n                onClick={closeAIChat}\n                data-testid=\"button-close-ai-chat\"\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n            <DialogDescription className=\"text-xs\">\n              {language === \"en\" \n                ? \"Chat with AI assistant about \" + restaurantName\n                : restaurantName + \" ì— ëŒ€í•´ AIì™€ ëŒ€í™”í•˜ê¸°\"}\n            </DialogDescription>\n          </DialogHeader>\n\n          {/* Chat Messages */}\n          <div \n            ref={chatScrollRef}\n            className=\"flex-1 overflow-y-auto px-4 py-3 space-y-3\"\n            data-testid=\"chat-messages-container\"\n          >\n            {chatMessages.length === 0 && !isSendingMessage ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center py-8\">\n                <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-3\">\n                  <Sparkles className=\"w-8 h-8 text-primary\" />\n                </div>\n                <p className=\"text-sm text-muted-foreground mb-2\">\n                  {language === \"en\" \n                    ? \"Start a conversation with AI\" \n                    : \"AIì™€ ëŒ€í™”ë¥¼ ì‹œì‘í•˜ì„¸ìš”\"}\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                  {currentAICard === \"reviews\" && (language === \"en\" \n                    ? \"Ask about customer reviews and ratings\" \n                    : \"ê³ ê° ë¦¬ë·°ì™€ í‰ì ì— ëŒ€í•´ ë¬¼ì–´ë³´ì„¸ìš”\")}\n                  {currentAICard === \"menu\" && (language === \"en\" \n                    ? \"Get personalized menu recommendations\" \n                    : \"ë§ì¶¤í˜• ë©”ë‰´ ì¶”ì²œì„ ë°›ì•„ë³´ì„¸ìš”\")}\n                  {currentAICard === \"howToEat\" && (language === \"en\" \n                    ? \"Learn how to eat Korean food properly\" \n                    : \"í•œêµ­ ìŒì‹ ë¨¹ëŠ” ë²•ì„ ë°°ì›Œë³´ì„¸ìš”\")}\n                  {currentAICard === \"ordering\" && (language === \"en\" \n                    ? \"Learn ordering tips and phrases\" \n                    : \"ì£¼ë¬¸ íŒê³¼ í‘œí˜„ì„ ë°°ì›Œë³´ì„¸ìš”\")}\n                </p>\n              </div>\n            ) : chatMessages.length === 0 && isSendingMessage ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center py-8\">\n                <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-3\">\n                  <Sparkles className=\"w-8 h-8 text-primary animate-pulse\" />\n                </div>\n                <p className=\"text-sm text-muted-foreground mb-2\">\n                  {language === \"en\" \n                    ? \"AI is analyzing...\" \n                    : \"AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...\"}\n                </p>\n                <p className=\"text-xs text-muted-foreground\">\n                  {currentAICard === \"reviews\" && (language === \"en\" \n                    ? \"Analyzing customer reviews\" \n                    : \"ê³ ê° ë¦¬ë·°ë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤\")}\n                  {currentAICard === \"menu\" && (language === \"en\" \n                    ? \"Preparing menu recommendations\" \n                    : \"ë©”ë‰´ ì¶”ì²œì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤\")}\n                  {currentAICard === \"howToEat\" && (language === \"en\" \n                    ? \"Gathering cultural insights\" \n                    : \"ë¬¸í™” ì •ë³´ë¥¼ ëª¨ìœ¼ê³  ìˆìŠµë‹ˆë‹¤\")}\n                  {currentAICard === \"ordering\" && (language === \"en\" \n                    ? \"Preparing ordering tips\" \n                    : \"ì£¼ë¬¸ íŒì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤\")}\n                </p>\n              </div>\n            ) : (\n              chatMessages.map((message, index) => (\n                <div\n                  key={index}\n                  className={`flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n                  data-testid={`chat-message-${index}`}\n                >\n                  <div\n                    className={`max-w-[80%] rounded-lg px-3 py-2 ${\n                      message.role === \"user\"\n                        ? \"bg-primary text-primary-foreground\"\n                        : \"bg-muted\"\n                    }`}\n                  >\n                    <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                  </div>\n                </div>\n              ))\n            )}\n            {isSendingMessage && chatMessages.length > 0 && (\n              <div className=\"flex justify-start\">\n                <div className=\"max-w-[80%] rounded-lg px-3 py-2 bg-muted\">\n                  <div className=\"flex gap-1\">\n                    <div className=\"w-2 h-2 rounded-full bg-muted-foreground animate-bounce\" style={{ animationDelay: \"0ms\" }} />\n                    <div className=\"w-2 h-2 rounded-full bg-muted-foreground animate-bounce\" style={{ animationDelay: \"150ms\" }} />\n                    <div className=\"w-2 h-2 rounded-full bg-muted-foreground animate-bounce\" style={{ animationDelay: \"300ms\" }} />\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Chat Input */}\n          <div className=\"px-4 pb-4 pt-3 border-t\">\n            <div className=\"flex gap-2\">\n              <Input\n                placeholder={language === \"en\" ? \"Type your message...\" : \"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"}\n                value={chatInput}\n                onChange={(e) => setChatInput(e.target.value)}\n                onKeyDown={(e) => {\n                  if (e.key === \"Enter\" && !e.shiftKey) {\n                    e.preventDefault();\n                    sendChatMessage();\n                  }\n                }}\n                disabled={isSendingMessage}\n                data-testid=\"input-chat-message\"\n              />\n              <Button\n                size=\"icon\"\n                onClick={sendChatMessage}\n                disabled={!chatInput.trim() || isSendingMessage}\n                data-testid=\"button-send-message\"\n              >\n                <Send className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Image Gallery Dialog */}\n      <Dialog open={isGalleryOpen} onOpenChange={setIsGalleryOpen}>\n        <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-hidden p-0\">\n          <DialogHeader className=\"px-6 pt-6 pb-3\">\n            <DialogTitle>\n              {restaurantName} - {language === \"en\" ? \"Photos\" : \"ì‚¬ì§„\"}\n            </DialogTitle>\n          </DialogHeader>\n          <ScrollArea className=\"max-h-[calc(90vh-80px)] px-6 pb-6\">\n            <div className=\"grid grid-cols-2 gap-2\">\n              {/* Show main restaurant image first, then all DB images */}\n              {[{ id: 'main', imageUrl: restaurant.imageUrl }, ...restaurantImages].map((img, index) => (\n                <div key={img.id} className=\"relative aspect-[4/3] overflow-hidden rounded-lg\">\n                  <OptimizedImage\n                    src={img.imageUrl}\n                    alt={`${restaurantName} ${index + 1}`}\n                    className=\"w-full h-full\"\n                    objectFit=\"cover\"\n                  />\n                </div>\n              ))}\n            </div>\n          </ScrollArea>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":80190},"client/src/pages/AuthPage.tsx":{"content":"import { useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { SEO } from \"@/components/SEO\";\nimport { LogIn } from \"lucide-react\";\n\nexport default function AuthPage() {\n  const [, setLocation] = useLocation();\n  const { t } = useLanguage();\n  const { user, isLoading } = useAuth();\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (!isLoading && user) {\n      setLocation(\"/\");\n    }\n  }, [user, isLoading, setLocation]);\n\n  const handleLogin = () => {\n    // Redirect to Replit Auth login\n    window.location.href = \"/api/login\";\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <SEO\n        title={t(\"auth.login\")}\n        description={t(\"auth.loginDescription\")}\n      />\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md p-8\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl font-bold mb-2\" data-testid=\"text-auth-title\">\n              {t(\"auth.login\")}\n            </h1>\n            <p className=\"text-muted-foreground\">\n              {t(\"auth.loginSubtitle\")}\n            </p>\n          </div>\n\n          <Button\n            onClick={handleLogin}\n            className=\"w-full\"\n            size=\"lg\"\n            data-testid=\"button-submit\"\n          >\n            <LogIn className=\"w-5 h-5 mr-2\" />\n            {t(\"auth.login\")}\n          </Button>\n\n          <p className=\"text-center text-sm text-muted-foreground mt-6\">\n            Powered by Replit Auth\n          </p>\n        </Card>\n      </div>\n    </>\n  );\n}\n","size_bytes":2002},"client/src/contexts/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport type { User } from \"@shared/schema\";\n\ninterface AuthContextType {\n  user: User | null;\n  login: (user: User) => void;\n  logout: () => void;\n  isLoading: boolean;\n  refetch: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const fetchUser = async () => {\n    try {\n      const response = await fetch(\"/api/auth/user\");\n      if (response.ok) {\n        const userData = await response.json();\n        setUser(userData);\n      } else {\n        setUser(null);\n      }\n    } catch (error) {\n      console.error(\"Failed to fetch user:\", error);\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchUser();\n  }, []);\n\n  const login = (newUser: User) => {\n    setUser(newUser);\n  };\n\n  const logout = () => {\n    setUser(null);\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout, isLoading, refetch: fetchUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":1431},"client/public/sw.js":{"content":"const CACHE_NAME = 'hansikdang-v2-logos';\nconst urlsToCache = [\n  '/',\n  '/manifest.json',\n  '/favicon.ico',\n  '/apple-touch-icon.png',\n  '/pwa-icon-192.png',\n  '/pwa-icon-512.png',\n];\n\nself.addEventListener('install', (event) => {\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then((cache) => {\n        return cache.addAll(urlsToCache);\n      })\n  );\n  self.skipWaiting();\n});\n\nself.addEventListener('activate', (event) => {\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames.map((cacheName) => {\n          if (cacheName !== CACHE_NAME) {\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n  self.clients.claim();\n});\n\nself.addEventListener('fetch', (event) => {\n  if (event.request.method !== 'GET') {\n    return;\n  }\n\n  event.respondWith(\n    caches.match(event.request)\n      .then((response) => {\n        if (response) {\n          return response;\n        }\n        return fetch(event.request).then((response) => {\n          if (!response || response.status !== 200 || response.type !== 'basic') {\n            return response;\n          }\n          const responseToCache = response.clone();\n          caches.open(CACHE_NAME)\n            .then((cache) => {\n              cache.put(event.request, responseToCache);\n            });\n          return response;\n        });\n      })\n  );\n});\n","size_bytes":1391},"client/src/components/AdSense.tsx":{"content":"import { useEffect } from \"react\";\n\ninterface AdSenseProps {\n  slot: string;\n  format?: \"auto\" | \"fluid\" | \"rectangle\" | \"vertical\" | \"horizontal\";\n  style?: React.CSSProperties;\n  className?: string;\n}\n\nexport function AdSense({ slot, format = \"auto\", style, className = \"\" }: AdSenseProps) {\n  const publisherId = import.meta.env.VITE_ADSENSE_PUBLISHER_ID;\n\n  useEffect(() => {\n    try {\n      if (window.adsbygoogle && publisherId) {\n        (window.adsbygoogle = window.adsbygoogle || []).push({});\n      }\n    } catch (err) {\n      console.error(\"AdSense error:\", err);\n    }\n  }, [publisherId]);\n\n  if (!publisherId) {\n    return (\n      <div className={className} data-testid={`ad-slot-${slot}`}>\n        <div className=\"rounded-xl border-2 border-dashed border-border bg-muted/30 p-4\">\n          <div className=\"text-center text-sm text-muted-foreground\">\n            <p className=\"font-semibold mb-1\">Advertisement Placeholder</p>\n            <p className=\"text-xs\">\n              Set VITE_ADSENSE_PUBLISHER_ID to enable ads\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={className} data-testid={`ad-slot-${slot}`}>\n      <ins\n        className=\"adsbygoogle\"\n        style={{ display: \"block\", ...style }}\n        data-ad-client={publisherId}\n        data-ad-slot={slot}\n        data-ad-format={format}\n        data-full-width-responsive=\"true\"\n      />\n    </div>\n  );\n}\n\ndeclare global {\n  interface Window {\n    adsbygoogle: any[];\n  }\n}\n","size_bytes":1508},"server/seed-videos.ts":{"content":"import { storage } from \"./storage\";\n\nasync function seedYoutubeVideos() {\n  console.log(\"ğŸ“¹ Starting YouTube videos seeding...\");\n\n  try {\n    const restaurants = await storage.getAllRestaurants();\n    console.log(`ğŸ“Š Found ${restaurants.length} restaurants`);\n\n    for (const restaurant of restaurants) {\n      console.log(`\\nğŸª Adding videos for: ${restaurant.name}`);\n\n      let videos: Array<{\n        videoId: string;\n        title: string;\n        channelName: string;\n        thumbnailUrl: string;\n        viewCount?: number;\n        publishedAt?: string;\n        relevanceScore?: number;\n      }> = [];\n\n      switch (restaurant.name) {\n        case \"ëª…ë™êµì\":\n          videos = [\n            {\n              videoId: \"dQw4w9WgXcQ\",\n              title: \"ëª…ë™êµì ì¹¼êµ­ìˆ˜ ë¨¹ë°©! 50ë…„ ì „í†µì˜ ë§› | Seoul Food Tour\",\n              channelName: \"Seoul Eats\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400\",\n              viewCount: 125000,\n              publishedAt: \"2024-11-15\",\n              relevanceScore: 0.95,\n            },\n            {\n              videoId: \"K8LFU5N0u9M\",\n              title: \"ëª…ë™ ë§›ì§‘ ëª…ë™êµì ë¦¬ë·° - ì¹¼êµ­ìˆ˜ì™€ ë§Œë‘ ë§›ì§‘\",\n              channelName: \"í•œêµ­ ë§›ì§‘ íƒë°©\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1569718212165-3a8278d5f624?w=400\",\n              viewCount: 89000,\n              publishedAt: \"2024-12-01\",\n              relevanceScore: 0.92,\n            },\n          ];\n          break;\n\n        case \"ê´‘ì¥ì‹œì¥\":\n          videos = [\n            {\n              videoId: \"P5yf7jqBq3A\",\n              title: \"ê´‘ì¥ì‹œì¥ ë¨¹ë°© íˆ¬ì–´! ë§ˆì•½ê¹€ë°¥ë¶€í„° ìœ¡íšŒê¹Œì§€ | Gwangjang Market Food Tour\",\n              channelName: \"Korean Food Adventure\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1590301157890-4810ed352733?w=400\",\n              viewCount: 450000,\n              publishedAt: \"2024-10-20\",\n              relevanceScore: 0.98,\n            },\n            {\n              videoId: \"hK9vL7qLm2w\",\n              title: \"ì„œìš¸ ì „í†µì‹œì¥ ê´‘ì¥ì‹œì¥ ì™„ë²½ ê°€ì´ë“œ\",\n              channelName: \"ì„œìš¸ ì—¬í–‰\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1590301157890-4810ed352733?w=400\",\n              viewCount: 280000,\n              publishedAt: \"2024-11-05\",\n              relevanceScore: 0.94,\n            },\n          ];\n          break;\n\n        case \"í† ì†ì´Œì‚¼ê³„íƒ•\":\n          videos = [\n            {\n              videoId: \"L7zMq9wF5jE\",\n              title: \"í† ì†ì´Œ ì‚¼ê³„íƒ• ë¦¬ë·° - ì˜¤ë°”ë§ˆë„ ë¨¹ì€ ê·¸ ë§›! | Tosokchon Samgyetang\",\n              channelName: \"Seoul Food Guide\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=400\",\n              viewCount: 320000,\n              publishedAt: \"2024-09-10\",\n              relevanceScore: 0.96,\n            },\n            {\n              videoId: \"N9qJ3mKLq8w\",\n              title: \"ê²½ë³µê¶ ê·¼ì²˜ ì‚¼ê³„íƒ• ë§›ì§‘ í† ì†ì´Œ\",\n              channelName: \"ë§›ì§‘ í—Œí„°\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?w=400\",\n              viewCount: 175000,\n              publishedAt: \"2024-11-20\",\n              relevanceScore: 0.91,\n            },\n          ];\n          break;\n\n        case \"ìš°ë˜ì˜¥\":\n          videos = [\n            {\n              videoId: \"dYw4WgXcQ9Q\",\n              title: \"ìš°ë˜ì˜¥ í‰ì–‘ëƒ‰ë©´ - 70ë…„ ì „í†µì˜ ê¹Šì€ ë§› | Wooraeok Naengmyeon\",\n              channelName: \"ëƒ‰ë©´ ë•í›„\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=400\",\n              viewCount: 210000,\n              publishedAt: \"2024-08-15\",\n              relevanceScore: 0.93,\n            },\n          ];\n          break;\n\n        case \"ì´ë¬¸ì„¤ë†íƒ•\":\n          videos = [\n            {\n              videoId: \"M9qJ3mKLq8w\",\n              title: \"100ë…„ ì „í†µ ì´ë¬¸ì„¤ë†íƒ• - ì§„í•œ ì‚¬ê³¨ êµ­ë¬¼ì˜ ë¹„ë°€\",\n              channelName: \"ì „í†µ ë§›ì§‘\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1618329482768-8e3ea6ce8b60?w=400\",\n              viewCount: 145000,\n              publishedAt: \"2024-10-05\",\n              relevanceScore: 0.89,\n            },\n          ];\n          break;\n\n        case \"í•œì¼ê´€\":\n          videos = [\n            {\n              videoId: \"Q5yf7jqBq3A\",\n              title: \"í•œì¼ê´€ ë¶ˆê³ ê¸° ë§›ì§‘ - 85ë…„ ì „í†µì˜ íŠ¹ì œ ê°ˆë¹„êµ¬ì´\",\n              channelName: \"ê³ ê¸‰ ë§›ì§‘\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1588207036722-0a86fe9f2b03?w=400\",\n              viewCount: 195000,\n              publishedAt: \"2024-09-25\",\n              relevanceScore: 0.90,\n            },\n          ];\n          break;\n\n        case \"ë¯¸ì§„\":\n          videos = [\n            {\n              videoId: \"R6zMq9wF5jE\",\n              title: \"ë¯¸ì§„ ìœ¡íšŒë¹„ë¹”ë°¥ - ì••êµ¬ì • ìˆ¨ì€ ë§›ì§‘\",\n              channelName: \"ì„œìš¸ ë§›ì§‘ íƒë°©\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1553621042-f6e147245754?w=400\",\n              viewCount: 118000,\n              publishedAt: \"2024-11-10\",\n              relevanceScore: 0.87,\n            },\n          ];\n          break;\n\n        case \"í•˜ë™ê´€\":\n          videos = [\n            {\n              videoId: \"S7zMq9wF5jE\",\n              title: \"í•˜ë™ê´€ ê³°íƒ• ë¨¹ë°© - ëª…ë™ ê³°íƒ• ë§›ì§‘\",\n              channelName: \"ê³°íƒ• ì¢‹ì•„\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1585032226651-759b368d7246?w=400\",\n              viewCount: 92000,\n              publishedAt: \"2024-12-05\",\n              relevanceScore: 0.85,\n            },\n          ];\n          break;\n\n        case \"ì§„ë¯¸í‰ì–‘ëƒ‰ë©´\":\n          videos = [\n            {\n              videoId: \"T8AMq9wF5jE\",\n              title: \"ì§„ë¯¸í‰ì–‘ëƒ‰ë©´ ë¦¬ë·° - ì¢…ë¡œ ëƒ‰ë©´ ë§›ì§‘\",\n              channelName: \"ëƒ‰ë©´ ë§ˆë‹ˆì•„\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=400\",\n              viewCount: 78000,\n              publishedAt: \"2024-10-28\",\n              relevanceScore: 0.84,\n            },\n          ];\n          break;\n\n        case \"ë°œìš°ê³µì–‘\":\n          videos = [\n            {\n              videoId: \"U9BNq9wF5jE\",\n              title: \"ë°œìš°ê³µì–‘ ë¯¸ìŠë­ 1ìŠ¤íƒ€ ì‚¬ì°°ìŒì‹ - ë¹„ê±´ í•œì •ì‹ì˜ ì •ì„\",\n              channelName: \"Michelin Guide Korea\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400\",\n              viewCount: 385000,\n              publishedAt: \"2024-08-20\",\n              relevanceScore: 0.97,\n            },\n            {\n              videoId: \"V0CPq9wF5jE\",\n              title: \"ì‚¬ì°°ìŒì‹ì˜ ì•„ë¦„ë‹¤ì›€ - ë°œìš°ê³µì–‘ ì²´í—˜ê¸°\",\n              channelName: \"ë¹„ê±´ ë¼ì´í”„\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400\",\n              viewCount: 165000,\n              publishedAt: \"2024-11-15\",\n              relevanceScore: 0.88,\n            },\n          ];\n          break;\n\n        case \"ì‚¼ì›ê°€ë“ \":\n          videos = [\n            {\n              videoId: \"W1DQq9wF5jE\",\n              title: \"ì‚¼ì›ê°€ë“  í•œìš° ë§›ì§‘ - ìµœê³ ê¸‰ í•œìš° ë“±ì‹¬ ë¨¹ë°©\",\n              channelName: \"í•œìš° ì‚¬ë‘\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1590846406792-0adc7f938f1d?w=400\",\n              viewCount: 275000,\n              publishedAt: \"2024-09-30\",\n              relevanceScore: 0.92,\n            },\n          ];\n          break;\n\n        case \"ë¶ì´Œì†ë§Œë‘\":\n          videos = [\n            {\n              videoId: \"X2ERq9wF5jE\",\n              title: \"ë¶ì´Œ í•œì˜¥ë§ˆì„ ë§›ì§‘ - ë¶ì´Œì†ë§Œë‘ ë¦¬ë·°\",\n              channelName: \"ì„œìš¸ ì—¬í–‰\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1534422298391-e4f8c172dddb?w=400\",\n              viewCount: 132000,\n              publishedAt: \"2024-10-18\",\n              relevanceScore: 0.86,\n            },\n          ];\n          break;\n\n        case \"ì „ì£¼ì¤‘ì•™íšŒê´€\":\n          videos = [\n            {\n              videoId: \"Y3FSq9wF5jE\",\n              title: \"ì „ì£¼ì¤‘ì•™íšŒê´€ ë¹„ë¹”ë°¥ - 1954ë…„ ì›ì¡° ì „ì£¼ë¹„ë¹”ë°¥\",\n              channelName: \"ì „í†µ í•œì‹\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1553621042-f6e147245754?w=400\",\n              viewCount: 198000,\n              publishedAt: \"2024-11-08\",\n              relevanceScore: 0.90,\n            },\n          ];\n          break;\n\n        case \"ì§„ì§„\":\n          videos = [\n            {\n              videoId: \"Z4GTq9wF5jE\",\n              title: \"ì§„ì§„ - ë¯¸ìŠë­ ê°€ì´ë“œ ì„ ì • ëª¨ë˜ í•œì‹ ë ˆìŠ¤í† ë‘\",\n              channelName: \"Fine Dining Korea\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1580822184713-fc5400e7fe10?w=400\",\n              viewCount: 325000,\n              publishedAt: \"2024-09-12\",\n              relevanceScore: 0.95,\n            },\n          ];\n          break;\n\n        case \"ì˜¤ì¥ë™í¥ë‚¨ì§‘\":\n          videos = [\n            {\n              videoId: \"A5HUq9wF5jE\",\n              title: \"ì˜¤ì¥ë™í¥ë‚¨ì§‘ í•¨í¥ëƒ‰ë©´ & ì¡±ë°œ - ë§ˆí¬ ë§›ì§‘\",\n              channelName: \"ëƒ‰ë©´ê³¼ ì¡±ë°œ\",\n              thumbnailUrl: \"https://images.unsplash.com/photo-1582878826629-29b7ad1cdc43?w=400\",\n              viewCount: 105000,\n              publishedAt: \"2024-12-10\",\n              relevanceScore: 0.83,\n            },\n          ];\n          break;\n\n        default:\n          console.log(`âš ï¸ No video data for: ${restaurant.name}`);\n          continue;\n      }\n\n      for (const video of videos) {\n        try {\n          await storage.createYoutubeVideo({\n            restaurantId: restaurant.id,\n            videoId: video.videoId,\n            title: video.title,\n            channelName: video.channelName,\n            thumbnailUrl: video.thumbnailUrl,\n            viewCount: video.viewCount,\n            publishedAt: video.publishedAt ? new Date(video.publishedAt) : undefined,\n            relevanceScore: video.relevanceScore,\n          });\n          console.log(`  âœ… Added video: ${video.title}`);\n        } catch (error) {\n          console.error(`  âŒ Failed to add video:`, error);\n        }\n      }\n    }\n\n    console.log(\"\\nğŸ‰ YouTube videos seeding completed successfully!\");\n  } catch (error) {\n    console.error(\"âŒ Error during video seeding:\", error);\n    throw error;\n  }\n}\n\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedYoutubeVideos()\n    .then(() => {\n      console.log(\"âœ… Video seed completed\");\n      process.exit(0);\n    })\n    .catch((error) => {\n      console.error(\"âŒ Video seed failed:\", error);\n      process.exit(1);\n    });\n}\n\nexport { seedYoutubeVideos };\n","size_bytes":10851},"server/seed-reviews.ts":{"content":"import { storage } from \"./storage\";\n\nasync function seedExternalReviews() {\n  console.log(\"â­ Starting external reviews seeding...\");\n\n  try {\n    const restaurants = await storage.getAllRestaurants();\n    console.log(`ğŸ“Š Found ${restaurants.length} restaurants`);\n\n    const reviewPlatforms = [\"Google\", \"Naver\", \"Kakao\", \"Tripadvisor\"];\n    \n    for (const restaurant of restaurants) {\n      console.log(`\\nğŸª Adding reviews for: ${restaurant.name}`);\n\n      let reviews: Array<{\n        source: string;\n        rating: number;\n        comment: string;\n        author: string;\n        publishedAt: string;\n      }> = [];\n\n      switch (restaurant.name) {\n        case \"ëª…ë™êµì\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.5,\n              comment: \"ì¹¼êµ­ìˆ˜ì™€ ë§Œë‘ ëª¨ë‘ ìµœê³ ì˜ˆìš”! ì¤„ ì„œì„œ ë¨¹ì„ ê°€ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤. ì–‘ë„ í‘¸ì§í•˜ê³  ê°€ê²©ë„ í•©ë¦¬ì ì…ë‹ˆë‹¤.\",\n              author: \"ê¹€ë¯¼ì¤€\",\n              publishedAt: \"2024-12-15\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.8,\n              comment: \"ëª…ë™ ë§›ì§‘ì˜ ëŒ€ëª…ì‚¬! ë§Œë‘ê°€ ì •ë§ ë§›ìˆê³  ì¹¼êµ­ìˆ˜ êµ­ë¬¼ì´ ê¹”ë”í•´ìš”. ë‹¤ë§Œ ëŒ€ê¸° ì‹œê°„ì´ ì¢€ ê¸¸ì–´ìš”.\",\n              author: \"ì´ì„œì—°\",\n              publishedAt: \"2024-12-20\",\n            },\n            {\n              source: \"Kakao\",\n              rating: 4.3,\n              comment: \"The dumplings are handmade and delicious. The kalguksu noodle soup is also very tasty. Worth the wait!\",\n              author: \"Sarah Kim\",\n              publishedAt: \"2025-01-05\",\n            },\n          ];\n          break;\n\n        case \"ê´‘ì¥ì‹œì¥\":\n          reviews = [\n            {\n              source: \"Tripadvisor\",\n              rating: 4.7,\n              comment: \"Amazing street food market! The yukhoe (beef tartare) was incredibly fresh. Bindaetteok was crispy and delicious.\",\n              author: \"John Smith\",\n              publishedAt: \"2024-11-28\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.9,\n              comment: \"ì„œìš¸ì—ì„œ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì‹œì¥ì´ì—ìš”. ë§ˆì•½ê¹€ë°¥ì€ ì •ë§ ì¤‘ë…ì ì´ê³ , ë¹ˆëŒ€ë–¡ì€ ë°”ì‚­ë°”ì‚­í•©ë‹ˆë‹¤!\",\n              author: \"ë°•ì§€ìš°\",\n              publishedAt: \"2024-12-30\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.6,\n              comment: \"ì „í†µì‹œì¥ì˜ í™œê¸°ì™€ ë‹¤ì–‘í•œ ìŒì‹ì„ ê²½í—˜í•  ìˆ˜ ìˆì–´ìš”. ìœ¡íšŒê°€ ì‹ ì„ í•˜ê³  ë§›ìˆìŠµë‹ˆë‹¤.\",\n              author: \"ìµœìˆ˜ë¯¼\",\n              publishedAt: \"2025-01-10\",\n            },\n          ];\n          break;\n\n        case \"í† ì†ì´Œì‚¼ê³„íƒ•\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.6,\n              comment: \"ì‚¼ê³„íƒ• ë§›ì§‘ ì¤‘ ìµœê³ ! ì¸ì‚¼í–¥ì´ ì§„í•˜ê³  ë‹­ì´ ë¶€ë“œëŸ¬ì›Œìš”. ì˜¤ë°”ë§ˆë„ ë¨¹ì—ˆë‹¤ëŠ” ê·¸ ë§›!\",\n              author: \"ì •ë¯¼ì¬\",\n              publishedAt: \"2024-12-18\",\n            },\n            {\n              source: \"Tripadvisor\",\n              rating: 4.5,\n              comment: \"Best samgyetang in Seoul! The ginseng chicken soup is rich and nourishing. Great location near Gyeongbokgung Palace.\",\n              author: \"Emma Wilson\",\n              publishedAt: \"2024-12-22\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.7,\n              comment: \"30ë…„ ì „í†µì˜ ë§›ì´ ëŠê»´ì§‘ë‹ˆë‹¤. êµ­ë¬¼ì´ ì§„í•˜ê³  ì˜ì–‘ê°€ ë†’ì•„ìš”. ë³´ì–‘ì‹ìœ¼ë¡œ ìµœê³ !\",\n              author: \"ê°•ì„œìœ¤\",\n              publishedAt: \"2025-01-02\",\n            },\n          ];\n          break;\n\n        case \"ìš°ë˜ì˜¥\":\n          reviews = [\n            {\n              source: \"Naver\",\n              rating: 4.4,\n              comment: \"í‰ì–‘ëƒ‰ë©´ ì›ì¡° ë§›ì§‘ë‹µê²Œ ìœ¡ìˆ˜ê°€ ê¹Šê³  ì‹œì›í•´ìš”. ë©´ë°œë„ ì«„ê¹ƒí•˜ê³  ì¢‹ìŠµë‹ˆë‹¤.\",\n              author: \"ìœ¤ë„í˜„\",\n              publishedAt: \"2024-12-25\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.6,\n              comment: \"1946ë…„ë¶€í„° ì´ì–´ì˜¨ ì „í†µì˜ ë§›! ëƒ‰ë©´ë„ ë§›ìˆì§€ë§Œ ë¶ˆê³ ê¸°ë„ ì¼í’ˆì…ë‹ˆë‹¤.\",\n              author: \"ì†¡í•˜ì€\",\n              publishedAt: \"2025-01-08\",\n            },\n            {\n              source: \"Kakao\",\n              rating: 4.3,\n              comment: \"Authentic Pyongyang-style naengmyeon. The cold noodles are refreshing and the broth is clean.\",\n              author: \"David Lee\",\n              publishedAt: \"2024-12-12\",\n            },\n          ];\n          break;\n\n        case \"ì´ë¬¸ì„¤ë†íƒ•\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.7,\n              comment: \"100ë…„ ì „í†µ ê·¸ëŒ€ë¡œì˜ ê¹Šì€ ë§›! ì‚¬ê³¨ êµ­ë¬¼ì´ ì§„í•˜ê³  ê³ ê¸°ë„ ë¶€ë“œëŸ¬ì›Œìš”.\",\n              author: \"í™ì¤€ì„œ\",\n              publishedAt: \"2024-12-28\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.8,\n              comment: \"í•´ì¥í•˜ëŸ¬ ìì£¼ ê°€ëŠ” ê³³ì´ì—ìš”. 24ì‹œê°„ ìš´ì˜í•´ì„œ ì–¸ì œë“  ê°ˆ ìˆ˜ ìˆì–´ ì¢‹ì•„ìš”.\",\n              author: \"ê¹€ì‹œìš°\",\n              publishedAt: \"2025-01-12\",\n            },\n          ];\n          break;\n\n        case \"í•œì¼ê´€\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.5,\n              comment: \"85ë…„ ì „í†µì˜ ê³ ê¸‰ í•œì‹ë‹¹. ë¶ˆê³ ê¸° ì„ì‡ ê°€ ë…íŠ¹í•˜ê³  ë§›ë„ í›Œë¥­í•©ë‹ˆë‹¤.\",\n              author: \"ì´ì¤€í˜\",\n              publishedAt: \"2024-12-20\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.6,\n              comment: \"ê°€ì¡± ëª¨ì„ìœ¼ë¡œ ë°©ë¬¸í–ˆëŠ”ë° ëª¨ë“  ìŒì‹ì´ ì •ê°ˆí•˜ê³  ë§›ìˆì—ˆì–´ìš”. íŠ¹íˆ ê°ˆë¹„êµ¬ì´ ì¶”ì²œ!\",\n              author: \"ë°•ì„œì¤€\",\n              publishedAt: \"2025-01-05\",\n            },\n            {\n              source: \"Tripadvisor\",\n              rating: 4.4,\n              comment: \"Traditional Korean restaurant with excellent bulgogi. The round grill is unique and the food is delicious.\",\n              author: \"Michael Park\",\n              publishedAt: \"2024-12-15\",\n            },\n          ];\n          break;\n\n        case \"ë¯¸ì§„\":\n          reviews = [\n            {\n              source: \"Naver\",\n              rating: 4.7,\n              comment: \"ìœ¡íšŒë¹„ë¹”ë°¥ ì •ë§ ë§›ìˆì–´ìš”! ìœ¡íšŒê°€ ì‹ ì„ í•˜ê³  ë¹„ë¹”ë°¥ê³¼ ì™„ë²½í•œ ì¡°í™”ì…ë‹ˆë‹¤.\",\n              author: \"ìµœì˜ˆë¦°\",\n              publishedAt: \"2024-12-22\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.5,\n              comment: \"3ëŒ€ì§¸ ì´ì–´ì˜¨ ì „í†µì˜ ë§›. ìœ¡íšŒê°€ ë¶€ë“œëŸ½ê³  ì‹ ì„ í•´ìš”. ì••êµ¬ì • ë§›ì§‘!\",\n              author: \"ê°•ë¯¼ì„\",\n              publishedAt: \"2025-01-07\",\n            },\n          ];\n          break;\n\n        case \"í•˜ë™ê´€\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.6,\n              comment: \"ê³°íƒ• êµ­ë¬¼ì´ ì§„í•˜ê³  ê¹Šì€ ë§›ì´ ë‚˜ìš”. 85ë…„ ì „í†µì´ ëŠê»´ì§‘ë‹ˆë‹¤.\",\n              author: \"ì •ìˆ˜ì•„\",\n              publishedAt: \"2024-12-30\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.7,\n              comment: \"ëª…ë™ì—ì„œ ê³°íƒ• ë¨¹ì„ ë• ì—¬ê¸°! ê³ ê¸°ë„ ë§ì´ ë“¤ì–´ìˆê³  êµ­ë¬¼ ë§›ì´ ì¼í’ˆì…ë‹ˆë‹¤.\",\n              author: \"ì„ì¬í˜„\",\n              publishedAt: \"2025-01-10\",\n            },\n          ];\n          break;\n\n        case \"ì§„ë¯¸í‰ì–‘ëƒ‰ë©´\":\n          reviews = [\n            {\n              source: \"Naver\",\n              rating: 4.5,\n              comment: \"í‰ì–‘ëƒ‰ë©´ ìœ¡ìˆ˜ê°€ ë‹´ë°±í•˜ê³  ê¹”ë”í•´ìš”. ë§Œë‘ë„ ë§›ìˆìŠµë‹ˆë‹¤!\",\n              author: \"ì¡°ì€ì§€\",\n              publishedAt: \"2024-12-28\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.4,\n              comment: \"1953ë…„ë¶€í„° ì´ì–´ì˜¨ ì „í†µ ëƒ‰ë©´ì§‘. ë©´ë°œì´ ì«„ê¹ƒí•˜ê³  ë§›ìˆì–´ìš”.\",\n              author: \"ë°±í˜„ìš°\",\n              publishedAt: \"2025-01-03\",\n            },\n          ];\n          break;\n\n        case \"ë°œìš°ê³µì–‘\":\n          reviews = [\n            {\n              source: \"Tripadvisor\",\n              rating: 4.8,\n              comment: \"Michelin 1-star temple food restaurant. Every dish is beautifully presented and delicious. Vegan-friendly!\",\n              author: \"Lisa Chen\",\n              publishedAt: \"2024-12-18\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.9,\n              comment: \"ë¯¸ìŠë­ ìŠ¤íƒ€ ë§›ì§‘ë‹µê²Œ ëª¨ë“  ìš”ë¦¬ê°€ ì •ê°ˆí•˜ê³  í’ˆê²© ìˆì–´ìš”. ë¹„ê±´ í•œì •ì‹ ìµœê³ !\",\n              author: \"í•œì§€ë¯¼\",\n              publishedAt: \"2025-01-06\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.7,\n              comment: \"ì‚¬ì°°ìŒì‹ì˜ ê¹Šì€ ë§›ì„ ê²½í—˜í•  ìˆ˜ ìˆì–´ìš”. ê±´ê°•í•˜ê³  ë§›ìˆìŠµë‹ˆë‹¤.\",\n              author: \"ì˜¤ì„¸í›ˆ\",\n              publishedAt: \"2024-12-25\",\n            },\n          ];\n          break;\n\n        case \"ì‚¼ì›ê°€ë“ \":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.7,\n              comment: \"ìµœê³ ê¸‰ í•œìš°ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê³³! ì •ì›ë„ ì•„ë¦„ë‹µê³  ê³ ê¸° ë§›ì´ í™˜ìƒì ì´ì—ìš”.\",\n              author: \"ì„œë¯¼í˜¸\",\n              publishedAt: \"2024-12-20\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.8,\n              comment: \"íŠ¹ë³„í•œ ë‚  ê°€ê¸° ì¢‹ì€ ê³ ê¸‰ í•œìš° ë ˆìŠ¤í† ë‘. ê°€ê²©ì€ ìˆì§€ë§Œ ê·¸ë§Œí•œ ê°€ì¹˜ê°€ ìˆì–´ìš”.\",\n              author: \"ê¹€ë‚˜ì—°\",\n              publishedAt: \"2025-01-04\",\n            },\n          ];\n          break;\n\n        case \"ë¶ì´Œì†ë§Œë‘\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.6,\n              comment: \"ë¶ì´Œ í•œì˜¥ë§ˆì„ êµ¬ê²½í•˜ê³  ë§Œë‘ ë¨¹ê¸° ì™„ë²½! ì†ë§Œë‘ê°€ ì •ë§ ë§›ìˆì–´ìš”.\",\n              author: \"ë‚¨ê¶í˜„\",\n              publishedAt: \"2024-12-27\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.5,\n              comment: \"ë§¤ì¼ ì•„ì¹¨ ë¹šëŠ”ë‹¤ëŠ” ë§Œë‘ê°€ ì •ë§ ì‹ ì„ í•˜ê³  ë§›ìˆìŠµë‹ˆë‹¤.\",\n              author: \"í™©ì§€ìš°\",\n              publishedAt: \"2025-01-09\",\n            },\n          ];\n          break;\n\n        case \"ì „ì£¼ì¤‘ì•™íšŒê´€\":\n          reviews = [\n            {\n              source: \"Google\",\n              rating: 4.6,\n              comment: \"ì „ì£¼ ë¹„ë¹”ë°¥ ì›ì¡°ì§‘! ì°¸ê¸°ë¦„ í–¥ì´ ì¢‹ê³  ë‚˜ë¬¼ì´ ì‹ ì„ í•´ìš”.\",\n              author: \"ë¬¸ì±„ì›\",\n              publishedAt: \"2024-12-23\",\n            },\n            {\n              source: \"Naver\",\n              rating: 4.7,\n              comment: \"1954ë…„ë¶€í„° ì´ì–´ì˜¨ ë¹„ë¹”ë°¥ ë§›ì§‘. ì—­ì‹œ ì›ì¡°ëŠ” ë‹¤ë¥´ë„¤ìš”!\",\n              author: \"ë¥˜ìŠ¹ì™„\",\n              publishedAt: \"2025-01-11\",\n            },\n          ];\n          break;\n\n        case \"ì§„ì§„\":\n          reviews = [\n            {\n              source: \"Tripadvisor\",\n              rating: 4.8,\n              comment: \"Michelin Guide selected modern Korean restaurant. Creative dishes with traditional flavors. Highly recommended!\",\n              author: \"James Anderson\",\n              publishedAt: \"2024-12-19\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.7,\n              comment: \"ëª¨ë˜ í•œì‹ì˜ ì •ìˆ˜! ì „í†µ í•œì‹ì„ í˜„ëŒ€ì ìœ¼ë¡œ ì¬í•´ì„í•œ ìš”ë¦¬ë“¤ì´ ì¸ìƒì ì´ì—ìš”.\",\n              author: \"ì•ˆì†Œí¬\",\n              publishedAt: \"2025-01-02\",\n            },\n          ];\n          break;\n\n        case \"ì˜¤ì¥ë™í¥ë‚¨ì§‘\":\n          reviews = [\n            {\n              source: \"Naver\",\n              rating: 4.5,\n              comment: \"í•¨í¥ëƒ‰ë©´ì´ ë§¤ì½¤ë‹¬ì½¤í•´ì„œ ì •ë§ ë§›ìˆì–´ìš”. ì¡±ë°œë„ ë¶€ë“œëŸ½ê³  ì¢‹ì•„ìš”!\",\n              author: \"ì‹ ë™ì—½\",\n              publishedAt: \"2024-12-26\",\n            },\n            {\n              source: \"Google\",\n              rating: 4.4,\n              comment: \"ë§ˆí¬ì—ì„œ ëƒ‰ë©´ê³¼ ì¡±ë°œ ë¨¹ì„ ë• ì—¬ê¸°! í•¨í¥ëƒ‰ë©´ ì–‘ë…ì´ ì¼í’ˆì…ë‹ˆë‹¤.\",\n              author: \"ê³½ë¯¼ì •\",\n              publishedAt: \"2025-01-08\",\n            },\n          ];\n          break;\n\n        default:\n          console.log(`âš ï¸ No review data for: ${restaurant.name}`);\n          continue;\n      }\n\n      for (const review of reviews) {\n        try {\n          await storage.createExternalReview({\n            restaurantId: restaurant.id,\n            source: review.source,\n            rating: review.rating,\n            comment: review.comment,\n            author: review.author,\n            publishedAt: new Date(review.publishedAt),\n          });\n          console.log(`  âœ… Added ${review.source} review by ${review.author}`);\n        } catch (error) {\n          console.error(`  âŒ Failed to add review:`, error);\n        }\n      }\n    }\n\n    console.log(\"\\nğŸ‰ External reviews seeding completed successfully!\");\n  } catch (error) {\n    console.error(\"âŒ Error during review seeding:\", error);\n    throw error;\n  }\n}\n\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedExternalReviews()\n    .then(() => {\n      console.log(\"âœ… Review seed completed\");\n      process.exit(0);\n    })\n    .catch((error) => {\n      console.error(\"âŒ Review seed failed:\", error);\n      process.exit(1);\n    });\n}\n\nexport { seedExternalReviews };\n","size_bytes":13500},"server/seed-ai-insights.ts":{"content":"import { storage } from \"./storage\";\nimport { GoogleGenAI } from \"@google/genai\";\n\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\n\nasync function generateAIInsights(restaurantData: {\n  name: string;\n  description: string;\n  cuisine: string;\n  priceRange: number;\n  menus: Array<{ name: string; description: string; price: number }>;\n  reviews: Array<{ source: string; rating: number; comment: string; author: string }>;\n}) {\n\n  const priceRangeText = 'â‚©'.repeat(restaurantData.priceRange);\n  const prompt = `You are a Korean food expert and travel guide. Based on the following restaurant information, generate comprehensive insights in both Korean and English.\n\nRestaurant Name: ${restaurantData.name}\nDescription: ${restaurantData.description}\nCuisine: ${restaurantData.cuisine}\nPrice Range: ${priceRangeText} (${restaurantData.priceRange} out of 4)\n\nMenu Items:\n${restaurantData.menus.map(m => `- ${m.name} (${m.price.toLocaleString()}ì›): ${m.description}`).join('\\n')}\n\nCustomer Reviews:\n${restaurantData.reviews.map(r => `- [${r.source}] ${r.rating}â­ by ${r.author}: \"${r.comment}\"`).join('\\n')}\n\nPlease provide the following insights in JSON format:\n\n{\n  \"reviewInsights\": \"A 2-3 sentence summary of customer reviews highlighting common themes, praise, and any concerns (in Korean)\",\n  \"reviewInsightsEn\": \"A 2-3 sentence summary of customer reviews highlighting common themes, praise, and any concerns (in English)\",\n  \"bestFor\": \"Comma-separated list of 3-4 most relevant dining situations/contexts (in Korean)\",\n  \"bestForEn\": \"Comma-separated list of 3-4 most relevant dining situations/contexts (in English)\",\n  \"culturalTips\": \"Cultural etiquette and dining tips specific to this restaurant (in Korean, 2-3 sentences)\",\n  \"culturalTipsEn\": \"Cultural etiquette and dining tips specific to this restaurant (in English, 2-3 sentences)\",\n  \"firstTimerTips\": \"Essential tips for first-time visitors - what to order, when to visit, how to navigate (in Korean, 2-3 sentences)\",\n  \"firstTimerTipsEn\": \"Essential tips for first-time visitors - what to order, when to visit, how to navigate (in English, 2-3 sentences)\"\n}\n\nFor \"bestFor\", choose from these categories (select 3-4 most relevant):\n- \"First-time Korean food experience\"\n- \"Traditional Korean dining\"\n- \"Business lunch/dinner\"\n- \"Family gathering\"\n- \"Date night\"\n- \"Solo dining\"\n- \"Tourist must-visit\"\n- \"Local favorite\"\n- \"Special occasion\"\n- \"Quick meal\"\n- \"Late night dining\"\n- \"Vegetarian/vegan options\"\n- \"Budget-friendly\"\n- \"Luxury dining\"\n\nReturn ONLY the JSON object, no additional text.`;\n\n  try {\n    const response = await ai.models.generateContent({\n      model: \"gemini-2.5-flash\",\n      contents: prompt,\n    });\n    \n    const text = response.text;\n    if (!text) {\n      throw new Error(\"Empty response from AI\");\n    }\n    \n    // Clean up the response - remove markdown code blocks if present\n    const cleanText = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n    \n    const insights = JSON.parse(cleanText);\n    return insights;\n  } catch (error) {\n    console.error(\"Error generating AI insights:\", error);\n    throw error;\n  }\n}\n\nasync function seedAIInsights() {\n  console.log(\"ğŸ¤– Starting AI insights generation...\");\n  \n  if (!process.env.GEMINI_API_KEY) {\n    console.error(\"âŒ GOOGLE_API_KEY_HANSIKDANG environment variable is not set\");\n    process.exit(1);\n  }\n\n  try {\n    const restaurants = await storage.getAllRestaurants();\n    console.log(`ğŸ“Š Found ${restaurants.length} restaurants`);\n\n    let processed = 0;\n    let skipped = 0;\n    let created = 0;\n\n    for (const restaurant of restaurants) {\n      // Check if insights already exist - skip if they do\n      const existingInsights = await storage.getRestaurantInsights(restaurant.id);\n      \n      if (existingInsights) {\n        console.log(`â­ï¸  Skipping ${restaurant.name} (insights already exist)`);\n        skipped++;\n        continue;\n      }\n\n      console.log(`\\nğŸª Generating AI insights for: ${restaurant.name}`);\n\n      // Gather restaurant data\n      const menus = await storage.getMenusByRestaurant(restaurant.id);\n      const reviews = await storage.getExternalReviewsByRestaurant(restaurant.id);\n\n      console.log(`  ğŸ“‹ Found ${menus.length} menu items`);\n      console.log(`  ğŸ’¬ Found ${reviews.length} reviews`);\n\n      try {\n        const insights = await generateAIInsights({\n          name: restaurant.name,\n          description: restaurant.description,\n          cuisine: restaurant.cuisine,\n          priceRange: restaurant.priceRange,\n          menus: menus.map((m: any) => ({\n            name: m.name,\n            description: m.description || \"\",\n            price: m.price,\n          })),\n          reviews: reviews.map((r: any) => ({\n            source: r.source,\n            rating: r.rating || 0,\n            comment: r.comment,\n            author: r.author || \"Anonymous\",\n          })),\n        });\n\n        console.log(`  ğŸ¤– AI insights generated successfully`);\n        console.log(`     - Review insights (KO): ${insights.reviewInsights.substring(0, 50)}...`);\n        console.log(`     - Best for: ${insights.bestFor}`);\n\n        // Create new insights (we already checked it doesn't exist)\n        await storage.createRestaurantInsights({\n          restaurantId: restaurant.id,\n          reviewInsights: insights.reviewInsights,\n          reviewInsightsEn: insights.reviewInsightsEn,\n          bestFor: insights.bestFor,\n          bestForEn: insights.bestForEn,\n          culturalTips: insights.culturalTips,\n          culturalTipsEn: insights.culturalTipsEn,\n          firstTimerTips: insights.firstTimerTips,\n          firstTimerTipsEn: insights.firstTimerTipsEn,\n        });\n        console.log(`  âœ… Created new restaurant insights`);\n        created++;\n        processed++;\n        \n        // Add a small delay to avoid rate limiting\n        await new Promise(resolve => setTimeout(resolve, 1000));\n      } catch (error) {\n        console.error(`  âŒ Failed to generate/save AI insights:`, error);\n      }\n    }\n\n    console.log(\"\\nğŸ‰ AI insights generation completed successfully!\");\n    console.log(`ğŸ“Š Summary: ${created} created, ${skipped} skipped, ${restaurants.length} total`);\n  } catch (error) {\n    console.error(\"âŒ Error during AI insights seeding:\", error);\n    throw error;\n  }\n}\n\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedAIInsights()\n    .then(() => {\n      console.log(\"âœ… AI insights seed completed\");\n      process.exit(0);\n    })\n    .catch((error) => {\n      console.error(\"âŒ AI insights seed failed:\", error);\n      process.exit(1);\n    });\n}\n\nexport { seedAIInsights };\n","size_bytes":6685},"server/seed-menus.ts":{"content":"import { storage } from \"./storage\";\n\nasync function seedMenus() {\n  console.log(\"ğŸœ Starting menu seeding...\");\n\n  try {\n    const restaurants = await storage.getAllRestaurants();\n    console.log(`ğŸ“Š Found ${restaurants.length} restaurants`);\n\n    for (const restaurant of restaurants) {\n      console.log(`\\nğŸª Adding menus for: ${restaurant.name}`);\n      \n      let menus: Array<{\n        name: string;\n        nameEn: string;\n        price: number;\n        description?: string;\n        descriptionEn?: string;\n        imageUrl?: string;\n        isVegan?: number;\n        isHalal?: number;\n        spicyLevel?: number;\n      }> = [];\n\n      switch (restaurant.name) {\n        case \"ëª…ë™êµì\":\n          menus = [\n            {\n              name: \"ì¹¼êµ­ìˆ˜\",\n              nameEn: \"Kalguksu (Knife-cut Noodles)\",\n              price: 10000,\n              description: \"ì–¼í°í•˜ê³  ì‹œì›í•œ ì¹¼êµ­ìˆ˜\",\n              descriptionEn: \"Spicy and refreshing knife-cut noodle soup\",\n              spicyLevel: 2,\n            },\n            {\n              name: \"ë¹„ë¹”êµ­ìˆ˜\",\n              nameEn: \"Bibim Guksu (Spicy Cold Noodles)\",\n              price: 10000,\n              description: \"ë§¤ì½¤ë‹¬ì½¤í•œ ë¹„ë¹”êµ­ìˆ˜\",\n              descriptionEn: \"Sweet and spicy cold noodles\",\n              spicyLevel: 3,\n            },\n            {\n              name: \"ë§Œë‘\",\n              nameEn: \"Mandu (Dumplings)\",\n              price: 12000,\n              description: \"ì†ìœ¼ë¡œ ë¹šì€ ê³ ê¸° ë§Œë‘\",\n              descriptionEn: \"Handmade meat dumplings\",\n            },\n            {\n              name: \"ë§Œë‘ì „ê³¨\",\n              nameEn: \"Mandu Jeongol (Dumpling Hot Pot)\",\n              price: 30000,\n              description: \"ë§Œë‘ì™€ ì•¼ì±„ê°€ ê°€ë“í•œ ì „ê³¨\",\n              descriptionEn: \"Hot pot filled with dumplings and vegetables\",\n            },\n          ];\n          break;\n\n        case \"ê´‘ì¥ì‹œì¥\":\n          menus = [\n            {\n              name: \"ë¹ˆëŒ€ë–¡\",\n              nameEn: \"Bindaetteok (Mung Bean Pancake)\",\n              price: 6000,\n              description: \"ê³ ì†Œí•œ ë…¹ë‘ì „\",\n              descriptionEn: \"Savory mung bean pancake\",\n              isVegan: 0,\n            },\n            {\n              name: \"ë§ˆì•½ê¹€ë°¥\",\n              nameEn: \"Mayak Kimbap (Addictive Kimbap)\",\n              price: 3000,\n              description: \"ì‘ê³  ì¤‘ë…ì„± ìˆëŠ” ê¹€ë°¥\",\n              descriptionEn: \"Small and addictive kimbap rolls\",\n              isVegan: 0,\n            },\n            {\n              name: \"ìœ¡íšŒ\",\n              nameEn: \"Yukhoe (Korean Beef Tartare)\",\n              price: 15000,\n              description: \"ì‹ ì„ í•œ ìƒê³ ê¸° ìœ¡íšŒ\",\n              descriptionEn: \"Fresh raw beef tartare\",\n            },\n            {\n              name: \"ìˆœëŒ€\",\n              nameEn: \"Sundae (Blood Sausage)\",\n              price: 5000,\n              description: \"ì „í†µ ìˆœëŒ€\",\n              descriptionEn: \"Traditional Korean blood sausage\",\n            },\n          ];\n          break;\n\n        case \"í† ì†ì´Œì‚¼ê³„íƒ•\":\n          menus = [\n            {\n              name: \"ì‚¼ê³„íƒ•\",\n              nameEn: \"Samgyetang (Ginseng Chicken Soup)\",\n              price: 25000,\n              description: \"ì¸ì‚¼, ëŒ€ì¶”, ë°¤ì´ ë“¤ì–´ê°„ ì˜ê³„ ìš”ë¦¬\",\n              descriptionEn: \"Young chicken soup with ginseng, jujube, and chestnuts\",\n            },\n            {\n              name: \"ì˜¤ê³¨ê³„ì‚¼ê³„íƒ•\",\n              nameEn: \"Black Chicken Samgyetang\",\n              price: 30000,\n              description: \"ì˜¤ê³¨ê³„ë¡œ ë§Œë“  í”„ë¦¬ë¯¸ì—„ ì‚¼ê³„íƒ•\",\n              descriptionEn: \"Premium ginseng soup with black chicken\",\n            },\n            {\n              name: \"ëŠ¥ì´ë°±ìˆ™\",\n              nameEn: \"Neungi Baeksuk (Chicken Soup with Mushrooms)\",\n              price: 35000,\n              description: \"ëŠ¥ì´ë²„ì„¯ì„ ë„£ì€ ë°±ìˆ™\",\n              descriptionEn: \"Chicken soup with neungi mushrooms\",\n            },\n          ];\n          break;\n\n        case \"ìš°ë˜ì˜¥\":\n          menus = [\n            {\n              name: \"í‰ì–‘ëƒ‰ë©´\",\n              nameEn: \"Pyongyang Naengmyeon (Cold Noodles)\",\n              price: 18000,\n              description: \"ì‹œì›í•œ ìœ¡ìˆ˜ì˜ ëƒ‰ë©´\",\n              descriptionEn: \"Cold buckwheat noodles in beef broth\",\n            },\n            {\n              name: \"ë¹„ë¹”ëƒ‰ë©´\",\n              nameEn: \"Bibim Naengmyeon (Spicy Cold Noodles)\",\n              price: 18000,\n              description: \"ë§¤ì½¤í•œ ë¹„ë¹”ëƒ‰ë©´\",\n              descriptionEn: \"Spicy cold buckwheat noodles\",\n              spicyLevel: 2,\n            },\n            {\n              name: \"ë¶ˆê³ ê¸°\",\n              nameEn: \"Bulgogi (Marinated Beef)\",\n              price: 45000,\n              description: \"ì „í†µ ë°©ì‹ì˜ ë¶ˆê³ ê¸°\",\n              descriptionEn: \"Traditional marinated beef\",\n            },\n            {\n              name: \"ê°ˆë¹„ì°œ\",\n              nameEn: \"Galbijjim (Braised Short Ribs)\",\n              price: 55000,\n              description: \"ë¶€ë“œëŸ¬ìš´ ê°ˆë¹„ì°œ\",\n              descriptionEn: \"Tender braised beef short ribs\",\n            },\n          ];\n          break;\n\n        case \"ì´ë¬¸ì„¤ë†íƒ•\":\n          menus = [\n            {\n              name: \"ì„¤ë íƒ•\",\n              nameEn: \"Seolleongtang (Ox Bone Soup)\",\n              price: 14000,\n              description: \"24ì‹œê°„ ë“ì¸ ì§„í•œ ì‚¬ê³¨ êµ­ë¬¼\",\n              descriptionEn: \"Rich bone broth cooked for 24 hours\",\n            },\n            {\n              name: \"ë„ê°€ë‹ˆíƒ•\",\n              nameEn: \"Doganitang (Ox Knee Soup)\",\n              price: 16000,\n              description: \"ë„ê°€ë‹ˆê°€ ë“¤ì–´ê°„ ë³´ì–‘íƒ•\",\n              descriptionEn: \"Nourishing soup with ox knee bone\",\n            },\n            {\n              name: \"ê³°íƒ•\",\n              nameEn: \"Gomtang (Beef Bone Soup)\",\n              price: 15000,\n              description: \"ì§„í•œ ì†Œê³ ê¸° êµ­ë¬¼\",\n              descriptionEn: \"Rich beef bone soup\",\n            },\n          ];\n          break;\n\n        case \"í•œì¼ê´€\":\n          menus = [\n            {\n              name: \"íŠ¹ì œ ê°ˆë¹„êµ¬ì´\",\n              nameEn: \"Special Galbi (Grilled Ribs)\",\n              price: 65000,\n              description: \"íŠ¹ì œ ì–‘ë…ì˜ í•œìš° ê°ˆë¹„\",\n              descriptionEn: \"Korean beef ribs with special marinade\",\n            },\n            {\n              name: \"ë¶ˆê³ ê¸°ì •ì‹\",\n              nameEn: \"Bulgogi Set Menu\",\n              price: 50000,\n              description: \"ë¶ˆê³ ê¸°ì™€ ë‹¤ì–‘í•œ ë°˜ì°¬\",\n              descriptionEn: \"Bulgogi with various side dishes\",\n            },\n            {\n              name: \"í•œì •ì‹\",\n              nameEn: \"Hanjeongsik (Korean Table d'hote)\",\n              price: 80000,\n              description: \"ê³ ê¸‰ í•œì •ì‹ ì½”ìŠ¤\",\n              descriptionEn: \"Premium Korean course meal\",\n            },\n          ];\n          break;\n\n        case \"ë¯¸ì§„\":\n          menus = [\n            {\n              name: \"ìœ¡íšŒë¹„ë¹”ë°¥\",\n              nameEn: \"Yukhoe Bibimbap\",\n              price: 18000,\n              description: \"ì‹ ì„ í•œ ìœ¡íšŒê°€ ì˜¬ë¼ê°„ ë¹„ë¹”ë°¥\",\n              descriptionEn: \"Bibimbap topped with fresh beef tartare\",\n            },\n            {\n              name: \"ìœ¡íšŒ\",\n              nameEn: \"Yukhoe (Beef Tartare)\",\n              price: 35000,\n              description: \"ì‹ ì„ í•œ ìƒê³ ê¸° ìœ¡íšŒ\",\n              descriptionEn: \"Fresh raw beef tartare\",\n            },\n            {\n              name: \"ë¹„ë¹”ë°¥\",\n              nameEn: \"Bibimbap\",\n              price: 12000,\n              description: \"ì „í†µ ë¹„ë¹”ë°¥\",\n              descriptionEn: \"Traditional mixed rice with vegetables\",\n            },\n          ];\n          break;\n\n        case \"í•˜ë™ê´€\":\n          menus = [\n            {\n              name: \"ê³°íƒ•\",\n              nameEn: \"Gomtang (Beef Soup)\",\n              price: 14000,\n              description: \"ê¹Šì€ ë§›ì˜ ê³°íƒ•\",\n              descriptionEn: \"Deep flavored beef soup\",\n            },\n            {\n              name: \"íŠ¹ê³°íƒ•\",\n              nameEn: \"Special Gomtang\",\n              price: 16000,\n              description: \"ê³ ê¸°ê°€ ë” ë§ì´ ë“¤ì–´ê°„ ê³°íƒ•\",\n              descriptionEn: \"Beef soup with extra meat\",\n            },\n          ];\n          break;\n\n        case \"ì§„ë¯¸í‰ì–‘ëƒ‰ë©´\":\n          menus = [\n            {\n              name: \"ë¬¼ëƒ‰ë©´\",\n              nameEn: \"Mul Naengmyeon (Cold Noodle Soup)\",\n              price: 14000,\n              description: \"ë‹´ë°±í•œ í‰ì–‘ì‹ ë¬¼ëƒ‰ë©´\",\n              descriptionEn: \"Light Pyongyang-style cold noodle soup\",\n            },\n            {\n              name: \"ë¹„ë¹”ëƒ‰ë©´\",\n              nameEn: \"Bibim Naengmyeon\",\n              price: 14000,\n              description: \"ë§¤ì½¤í•œ ë¹„ë¹”ëƒ‰ë©´\",\n              descriptionEn: \"Spicy cold noodles\",\n              spicyLevel: 2,\n            },\n            {\n              name: \"ë§Œë‘\",\n              nameEn: \"Mandu (Dumplings)\",\n              price: 10000,\n              description: \"ì „í†µ ë§Œë‘\",\n              descriptionEn: \"Traditional dumplings\",\n            },\n          ];\n          break;\n\n        case \"ë°œìš°ê³µì–‘\":\n          menus = [\n            {\n              name: \"ë°œìš°ê³µì–‘ ì •ì‹\",\n              nameEn: \"Balwoo Gongyang Set\",\n              price: 65000,\n              description: \"ì‚¬ì°°ìŒì‹ ì •ì‹ ì½”ìŠ¤\",\n              descriptionEn: \"Temple food set course\",\n              isVegan: 1,\n              isHalal: 1,\n            },\n            {\n              name: \"ì ì‹¬ íŠ¹ì„ \",\n              nameEn: \"Lunch Special\",\n              price: 38000,\n              description: \"ì ì‹¬ ì‚¬ì°°ìŒì‹ ì„¸íŠ¸\",\n              descriptionEn: \"Lunch temple food set\",\n              isVegan: 1,\n              isHalal: 1,\n            },\n          ];\n          break;\n\n        case \"ì‚¼ì›ê°€ë“ \":\n          menus = [\n            {\n              name: \"í•œìš° ë“±ì‹¬\",\n              nameEn: \"Hanwoo Sirloin\",\n              price: 75000,\n              description: \"ìµœê³ ê¸‰ í•œìš° ë“±ì‹¬\",\n              descriptionEn: \"Premium Korean beef sirloin\",\n            },\n            {\n              name: \"í•œìš° ì•ˆì‹¬\",\n              nameEn: \"Hanwoo Tenderloin\",\n              price: 85000,\n              description: \"ë¶€ë“œëŸ¬ìš´ í•œìš° ì•ˆì‹¬\",\n              descriptionEn: \"Tender Korean beef tenderloin\",\n            },\n            {\n              name: \"ê°ˆë¹„\",\n              nameEn: \"Galbi (Short Ribs)\",\n              price: 65000,\n              description: \"í•œìš° ê°ˆë¹„\",\n              descriptionEn: \"Korean beef short ribs\",\n            },\n          ];\n          break;\n\n        case \"ë¶ì´Œì†ë§Œë‘\":\n          menus = [\n            {\n              name: \"ê³ ê¸°ë§Œë‘\",\n              nameEn: \"Meat Mandu\",\n              price: 8000,\n              description: \"ì†ìœ¼ë¡œ ë¹šì€ ê³ ê¸°ë§Œë‘\",\n              descriptionEn: \"Handmade meat dumplings\",\n            },\n            {\n              name: \"ê¹€ì¹˜ë§Œë‘\",\n              nameEn: \"Kimchi Mandu\",\n              price: 8000,\n              description: \"ê¹€ì¹˜ê°€ ë“¤ì–´ê°„ ë§Œë‘\",\n              descriptionEn: \"Dumplings filled with kimchi\",\n              spicyLevel: 1,\n            },\n            {\n              name: \"ë§Œë‘£êµ­\",\n              nameEn: \"Mandutguk (Dumpling Soup)\",\n              price: 10000,\n              description: \"ë§Œë‘ê°€ ë“¤ì–´ê°„ êµ­\",\n              descriptionEn: \"Soup with dumplings\",\n            },\n          ];\n          break;\n\n        case \"ì „ì£¼ì¤‘ì•™íšŒê´€\":\n          menus = [\n            {\n              name: \"ì „ì£¼ë¹„ë¹”ë°¥\",\n              nameEn: \"Jeonju Bibimbap\",\n              price: 15000,\n              description: \"ì „í†µ ì „ì£¼ì‹ ë¹„ë¹”ë°¥\",\n              descriptionEn: \"Traditional Jeonju-style bibimbap\",\n            },\n            {\n              name: \"ì½©ë‚˜ë¬¼êµ­ë°¥\",\n              nameEn: \"Kongnamul Gukbap (Bean Sprout Soup)\",\n              price: 10000,\n              description: \"ì‹œì›í•œ ì½©ë‚˜ë¬¼êµ­ë°¥\",\n              descriptionEn: \"Refreshing bean sprout soup with rice\",\n            },\n          ];\n          break;\n\n        case \"ì§„ì§„\":\n          menus = [\n            {\n              name: \"ëŸ°ì¹˜ ì½”ìŠ¤\",\n              nameEn: \"Lunch Course\",\n              price: 55000,\n              description: \"ì ì‹¬ ëª¨ë˜ í•œì‹ ì½”ìŠ¤\",\n              descriptionEn: \"Modern Korean lunch course\",\n            },\n            {\n              name: \"ë””ë„ˆ ì½”ìŠ¤\",\n              nameEn: \"Dinner Course\",\n              price: 95000,\n              description: \"ì €ë… ëª¨ë˜ í•œì‹ ì½”ìŠ¤\",\n              descriptionEn: \"Modern Korean dinner course\",\n            },\n          ];\n          break;\n\n        case \"ì˜¤ì¥ë™í¥ë‚¨ì§‘\":\n          menus = [\n            {\n              name: \"í•¨í¥ëƒ‰ë©´\",\n              nameEn: \"Hamheung Naengmyeon\",\n              price: 13000,\n              description: \"ë§¤ì½¤ë‹¬ì½¤í•œ í•¨í¥ëƒ‰ë©´\",\n              descriptionEn: \"Sweet and spicy Hamheung-style cold noodles\",\n              spicyLevel: 3,\n            },\n            {\n              name: \"ì¡±ë°œ\",\n              nameEn: \"Jokbal (Pig's Trotters)\",\n              price: 35000,\n              description: \"ë¶€ë“œëŸ¬ìš´ ì¡±ë°œ\",\n              descriptionEn: \"Tender braised pig's trotters\",\n            },\n            {\n              name: \"ë¬¼ëƒ‰ë©´\",\n              nameEn: \"Mul Naengmyeon\",\n              price: 12000,\n              description: \"ì‹œì›í•œ ë¬¼ëƒ‰ë©´\",\n              descriptionEn: \"Cold noodle soup\",\n            },\n          ];\n          break;\n\n        default:\n          console.log(`âš ï¸ No menu data for: ${restaurant.name}`);\n          continue;\n      }\n\n      for (const menu of menus) {\n        try {\n          await storage.createMenu({\n            restaurantId: restaurant.id,\n            ...menu,\n          });\n          console.log(`  âœ… Added menu: ${menu.name}`);\n        } catch (error) {\n          console.error(`  âŒ Failed to add menu ${menu.name}:`, error);\n        }\n      }\n    }\n\n    console.log(\"\\nğŸ‰ Menu seeding completed successfully!\");\n  } catch (error) {\n    console.error(\"âŒ Error during menu seeding:\", error);\n    throw error;\n  }\n}\n\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedMenus()\n    .then(() => {\n      console.log(\"âœ… Menu seed completed\");\n      process.exit(0);\n    })\n    .catch((error) => {\n      console.error(\"âŒ Menu seed failed:\", error);\n      process.exit(1);\n    });\n}\n\nexport { seedMenus };\n","size_bytes":14608},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","size_bytes":116},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\nimport { getQueryFn } from \"@/lib/queryClient\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User | null>({\n    queryKey: [\"/api/auth/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n    retry: false,\n    staleTime: 0,\n  });\n\n  return {\n    user: user || undefined,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}\n","size_bytes":449},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env\n    .REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/callback`,\n      },\n      verify,\n    );\n    passport.use(strategy);\n  }\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n\nexport const isAdmin: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated()) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const userId = user?.claims?.sub;\n  if (!userId) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  try {\n    const dbUser = await storage.getUser(userId);\n    if (!dbUser || dbUser.isAdmin !== 1) {\n      return res.status(403).json({ message: \"Forbidden - Admin access required\" });\n    }\n    \n    next();\n  } catch (error) {\n    console.error(\"Error checking admin status:\", error);\n    res.status(500).json({ message: \"Internal server error\" });\n  }\n};\n","size_bytes":4899},"client/src/hooks/use-analytics.tsx":{"content":"import { useEffect, useRef } from 'react';\nimport { useLocation } from 'wouter';\nimport { trackPageView } from '../lib/analytics';\n\nexport const useAnalytics = () => {\n  const [location] = useLocation();\n  const prevLocationRef = useRef<string>(location);\n  \n  useEffect(() => {\n    if (location !== prevLocationRef.current) {\n      trackPageView(location);\n      prevLocationRef.current = location;\n    }\n  }, [location]);\n};\n","size_bytes":427},"client/src/lib/geoUtils.ts":{"content":"/**\n * Calculate distance between two points using Haversine formula\n * @param lat1 Latitude of first point\n * @param lon1 Longitude of first point\n * @param lat2 Latitude of second point\n * @param lon2 Longitude of second point\n * @returns Distance in kilometers\n */\nexport function calculateDistance(\n  lat1: number,\n  lon1: number,\n  lat2: number,\n  lon2: number\n): number {\n  const R = 6371; // Earth's radius in km\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  \n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) *\n      Math.cos(toRad(lat2)) *\n      Math.sin(dLon / 2) *\n      Math.sin(dLon / 2);\n  \n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const distance = R * c;\n  \n  return Math.round(distance * 10) / 10; // Round to 1 decimal\n}\n\nfunction toRad(degrees: number): number {\n  return (degrees * Math.PI) / 180;\n}\n\n/**\n * Get user's current location\n * @returns Promise with latitude and longitude, or null if denied\n */\nexport function getUserLocation(): Promise<{ lat: number; lng: number } | null> {\n  return new Promise((resolve) => {\n    if (!navigator.geolocation) {\n      resolve(null);\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        resolve({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude,\n        });\n      },\n      () => {\n        // Permission denied or error\n        resolve(null);\n      },\n      {\n        timeout: 10000,\n        maximumAge: 300000, // Cache position for 5 minutes\n        enableHighAccuracy: false, // Faster, less battery\n      }\n    );\n  });\n}\n\n/**\n * Format distance for display\n * @param distance Distance in km\n * @param language User's language preference\n * @returns Formatted distance string\n */\nexport function formatDistance(distance: number, language: string): string {\n  if (distance < 1) {\n    const meters = Math.round(distance * 1000);\n    return language === \"en\" ? `${meters}m` : `${meters}m`;\n  }\n  return language === \"en\" ? `${distance}km` : `${distance}km`;\n}\n","size_bytes":2084},"client/src/pages/admin/AdminReviews.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Search, Trash2, ChevronUp, ChevronDown, ChevronsUpDown, Star, Pin } from \"lucide-react\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Restaurant } from \"@shared/schema\";\n\ntype SortField = \"id\" | \"restaurantName\" | \"userName\" | \"rating\" | \"createdAt\" | \"isPinned\";\ntype SortDirection = \"asc\" | \"desc\";\n\ninterface ReviewWithRestaurant {\n  id: string;\n  restaurantId: string;\n  userId: string | null;\n  userName: string;\n  rating: number;\n  comment: string;\n  imageUrls: string[] | null;\n  videoUrls: string[] | null;\n  isPinned: number;\n  createdAt: string;\n  restaurantName: string;\n  restaurantNameEn: string;\n}\n\nexport default function AdminReviews() {\n  const { toast } = useToast();\n  \n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedRating, setSelectedRating] = useState<string>(\"all\");\n  const [selectedDateFilter, setSelectedDateFilter] = useState<string>(\"all\");\n  const [selectedPinnedFilter, setSelectedPinnedFilter] = useState<string>(\"all\");\n  const [selectedRestaurantId, setSelectedRestaurantId] = useState<string>(\"all\");\n  \n  const [sortField, setSortField] = useState<SortField>(\"createdAt\");\n  const [sortDirection, setSortDirection] = useState<SortDirection>(\"desc\");\n  \n  const [selectedReview, setSelectedReview] = useState<ReviewWithRestaurant | null>(null);\n  const [isDetailsDialogOpen, setIsDetailsDialogOpen] = useState(false);\n\n  const { data: reviews = [], isLoading } = useQuery<ReviewWithRestaurant[]>({\n    queryKey: [\"/api/admin/reviews\"],\n  });\n\n  const { data: restaurants = [] } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/restaurants\"],\n  });\n\n  const filterByDate = (review: ReviewWithRestaurant) => {\n    if (selectedDateFilter === \"all\") return true;\n    \n    const reviewDate = new Date(review.createdAt);\n    const now = new Date();\n    const diffTime = now.getTime() - reviewDate.getTime();\n    const diffDays = diffTime / (1000 * 60 * 60 * 24);\n    \n    if (selectedDateFilter === \"today\") return diffDays < 1;\n    if (selectedDateFilter === \"7days\") return diffDays < 7;\n    if (selectedDateFilter === \"30days\") return diffDays < 30;\n    \n    return true;\n  };\n\n  const filteredAndSortedReviews = reviews\n    .filter(r => {\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        const matchesRestaurant = r.restaurantName?.toLowerCase().includes(query) || \n                                 r.restaurantNameEn?.toLowerCase().includes(query);\n        const matchesAuthor = r.userName?.toLowerCase().includes(query);\n        const matchesComment = r.comment?.toLowerCase().includes(query);\n        if (!matchesRestaurant && !matchesAuthor && !matchesComment) return false;\n      }\n\n      if (selectedRating !== \"all\" && r.rating !== parseInt(selectedRating)) return false;\n\n      if (!filterByDate(r)) return false;\n\n      if (selectedPinnedFilter === \"pinned\" && r.isPinned !== 1) return false;\n      if (selectedPinnedFilter === \"normal\" && r.isPinned !== 0) return false;\n\n      if (selectedRestaurantId !== \"all\" && r.restaurantId !== selectedRestaurantId) return false;\n\n      return true;\n    })\n    .sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortField) {\n        case \"id\":\n          comparison = a.id.localeCompare(b.id);\n          break;\n        case \"restaurantName\":\n          comparison = (a.restaurantName || \"\").localeCompare(b.restaurantName || \"\");\n          break;\n        case \"userName\":\n          comparison = a.userName.localeCompare(b.userName);\n          break;\n        case \"rating\":\n          comparison = a.rating - b.rating;\n          break;\n        case \"createdAt\":\n          const aDate = new Date(a.createdAt).getTime();\n          const bDate = new Date(b.createdAt).getTime();\n          comparison = aDate - bDate;\n          break;\n        case \"isPinned\":\n          comparison = a.isPinned - b.isPinned;\n          break;\n      }\n      \n      return sortDirection === \"asc\" ? comparison : -comparison;\n    });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (reviewId: string) => {\n      return apiRequest(\"DELETE\", `/api/admin/reviews/${reviewId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/reviews\"] });\n      setIsDetailsDialogOpen(false);\n      toast({\n        title: \"ì‚­ì œ ì™„ë£Œ\",\n        description: \"ë¦¬ë·°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ë¦¬ë·° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const pinMutation = useMutation({\n    mutationFn: async ({ reviewId, isPinned }: { reviewId: string; isPinned: number }) => {\n      return apiRequest(\"PATCH\", `/api/admin/reviews/${reviewId}/pin`, { isPinned });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/reviews\"] });\n      toast({\n        title: \"ì—…ë°ì´íŠ¸ ì™„ë£Œ\",\n        description: \"ë¦¬ë·° ê³ ì • ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ë¦¬ë·° ê³ ì • ìƒíƒœ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(prev => prev === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortField(field);\n      setSortDirection(\"desc\");\n    }\n  };\n\n  const getSortIcon = (field: SortField) => {\n    if (sortField !== field) {\n      return <ChevronsUpDown className=\"w-4 h-4\" />;\n    }\n    return sortDirection === \"asc\" \n      ? <ChevronUp className=\"w-4 h-4\" /> \n      : <ChevronDown className=\"w-4 h-4\" />;\n  };\n\n  const handleRowClick = (review: ReviewWithRestaurant) => {\n    setSelectedReview(review);\n    setIsDetailsDialogOpen(true);\n  };\n\n  const handleTogglePin = (review: ReviewWithRestaurant) => {\n    const newPinned = review.isPinned === 1 ? 0 : 1;\n    pinMutation.mutate({ reviewId: review.id, isPinned: newPinned });\n    \n    if (selectedReview?.id === review.id) {\n      setSelectedReview({ ...review, isPinned: newPinned });\n    }\n  };\n\n  const renderStars = (rating: number, size: \"small\" | \"large\" = \"small\") => {\n    const starClass = size === \"large\" ? \"w-6 h-6\" : \"w-4 h-4\";\n    return (\n      <div className=\"flex items-center gap-0.5\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <Star\n            key={star}\n            className={`${starClass} ${star <= rating ? \"fill-yellow-500 text-yellow-500\" : \"text-muted\"}`}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  const truncateText = (text: string, maxLength: number = 50) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + \"...\";\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">ë¦¬ë·° ê´€ë¦¬</h1>\n        <p className=\"text-muted-foreground\">ëª¨ë“  ë¦¬ë·°ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤</p>\n      </div>\n\n      <Card className=\"p-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"ë ˆìŠ¤í† ë‘ëª…, ì‘ì„±ì, ë‚´ìš© ê²€ìƒ‰...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-reviews\"\n              />\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ë³„ì  í•„í„°</label>\n              <Select value={selectedRating} onValueChange={setSelectedRating}>\n                <SelectTrigger data-testid=\"select-rating-filter\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  <SelectItem value=\"5\">â­â­â­â­â­ (5ì )</SelectItem>\n                  <SelectItem value=\"4\">â­â­â­â­ (4ì )</SelectItem>\n                  <SelectItem value=\"3\">â­â­â­ (3ì )</SelectItem>\n                  <SelectItem value=\"2\">â­â­ (2ì )</SelectItem>\n                  <SelectItem value=\"1\">â­ (1ì )</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ë‚ ì§œ í•„í„°</label>\n              <Select value={selectedDateFilter} onValueChange={setSelectedDateFilter}>\n                <SelectTrigger data-testid=\"select-date-filter\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  <SelectItem value=\"today\">ì˜¤ëŠ˜</SelectItem>\n                  <SelectItem value=\"7days\">ìµœê·¼ 7ì¼</SelectItem>\n                  <SelectItem value=\"30days\">ìµœê·¼ 30ì¼</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ìƒë‹¨ê³ ì • í•„í„°</label>\n              <Select value={selectedPinnedFilter} onValueChange={setSelectedPinnedFilter}>\n                <SelectTrigger data-testid=\"select-pinned-filter\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  <SelectItem value=\"pinned\">ê³ ì •ëœ ë¦¬ë·°ë§Œ</SelectItem>\n                  <SelectItem value=\"normal\">ì¼ë°˜ ë¦¬ë·°ë§Œ</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ë ˆìŠ¤í† ë‘ í•„í„°</label>\n              <Select value={selectedRestaurantId} onValueChange={setSelectedRestaurantId}>\n                <SelectTrigger data-testid=\"select-restaurant-filter\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´ ë ˆìŠ¤í† ë‘</SelectItem>\n                  {restaurants.map((restaurant) => (\n                    <SelectItem key={restaurant.id} value={restaurant.id}>\n                      {restaurant.name}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {isLoading ? (\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n        </div>\n      ) : (\n        <Card>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-[100px]\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleSort(\"id\")}\n                    className=\"hover-elevate gap-1\"\n                    data-testid=\"button-sort-id\"\n                  >\n                    ID {getSortIcon(\"id\")}\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleSort(\"restaurantName\")}\n                    className=\"hover-elevate gap-1\"\n                    data-testid=\"button-sort-restaurant\"\n                  >\n                    ë ˆìŠ¤í† ë‘ {getSortIcon(\"restaurantName\")}\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleSort(\"userName\")}\n                    className=\"hover-elevate gap-1\"\n                    data-testid=\"button-sort-author\"\n                  >\n                    ì‘ì„±ì {getSortIcon(\"userName\")}\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleSort(\"rating\")}\n                    className=\"hover-elevate gap-1\"\n                    data-testid=\"button-sort-rating\"\n                  >\n                    ë³„ì  {getSortIcon(\"rating\")}\n                  </Button>\n                </TableHead>\n                <TableHead className=\"max-w-md\">ë‚´ìš© ë¯¸ë¦¬ë³´ê¸°</TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleSort(\"createdAt\")}\n                    className=\"hover-elevate gap-1\"\n                    data-testid=\"button-sort-date\"\n                  >\n                    ì‘ì„±ì¼ {getSortIcon(\"createdAt\")}\n                  </Button>\n                </TableHead>\n                <TableHead>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => handleSort(\"isPinned\")}\n                    className=\"hover-elevate gap-1\"\n                    data-testid=\"button-sort-pinned\"\n                  >\n                    ê³ ì • {getSortIcon(\"isPinned\")}\n                  </Button>\n                </TableHead>\n                <TableHead>ì‘ì—…</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredAndSortedReviews.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={8} className=\"text-center text-muted-foreground py-8\">\n                    ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredAndSortedReviews.map((review) => (\n                  <TableRow\n                    key={review.id}\n                    className=\"cursor-pointer hover-elevate\"\n                    onClick={() => handleRowClick(review)}\n                    data-testid={`row-review-${review.id}`}\n                  >\n                    <TableCell className=\"font-mono text-sm\">\n                      {review.id.substring(0, 8)}...\n                    </TableCell>\n                    <TableCell className=\"font-medium\">\n                      {review.restaurantName || review.restaurantNameEn || \"Unknown\"}\n                    </TableCell>\n                    <TableCell>{review.userName}</TableCell>\n                    <TableCell>{renderStars(review.rating)}</TableCell>\n                    <TableCell className=\"max-w-md\">\n                      <p className=\"text-sm text-muted-foreground truncate\">\n                        {truncateText(review.comment, 60)}\n                      </p>\n                    </TableCell>\n                    <TableCell className=\"text-sm text-muted-foreground\">\n                      {new Date(review.createdAt).toLocaleDateString(\"ko-KR\")}\n                    </TableCell>\n                    <TableCell>\n                      {review.isPinned === 1 ? (\n                        <Badge variant=\"default\" className=\"gap-1\">\n                          <Pin className=\"w-3 h-3\" />\n                          ê³ ì •ë¨\n                        </Badge>\n                      ) : (\n                        <Badge variant=\"outline\">ì¼ë°˜</Badge>\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          deleteMutation.mutate(review.id);\n                        }}\n                        disabled={deleteMutation.isPending}\n                        data-testid={`button-delete-review-${review.id}`}\n                      >\n                        <Trash2 className=\"w-4 h-4 text-destructive\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </Card>\n      )}\n\n      <Dialog open={isDetailsDialogOpen} onOpenChange={setIsDetailsDialogOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          {selectedReview && (\n            <>\n              <DialogHeader>\n                <DialogTitle className=\"text-2xl\">ë¦¬ë·° ìƒì„¸ ì •ë³´</DialogTitle>\n                <DialogDescription>\n                  ë¦¬ë·° ID: {selectedReview.id}\n                </DialogDescription>\n              </DialogHeader>\n\n              <div className=\"space-y-6\">\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold\">\n                        {selectedReview.restaurantName}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {selectedReview.restaurantNameEn}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      {renderStars(selectedReview.rating, \"large\")}\n                      <span className=\"text-2xl font-bold\">{selectedReview.rating}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <span>ì‘ì„±ì:</span>\n                    <span className=\"font-medium\">{selectedReview.userName}</span>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-semibold\">ë¦¬ë·° ë‚´ìš©</h4>\n                  <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">\n                    {selectedReview.comment}\n                  </p>\n                </div>\n\n                {selectedReview.imageUrls && selectedReview.imageUrls.length > 0 && (\n                  <div className=\"space-y-2\">\n                    <h4 className=\"font-semibold\">ì´ë¯¸ì§€ URL</h4>\n                    <div className=\"space-y-1\">\n                      {selectedReview.imageUrls.map((url, index) => (\n                        <div key={index} className=\"text-sm text-muted-foreground break-all\">\n                          {url}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {selectedReview.videoUrls && selectedReview.videoUrls.length > 0 && (\n                  <div className=\"space-y-2\">\n                    <h4 className=\"font-semibold\">ë¹„ë””ì˜¤ URL</h4>\n                    <div className=\"space-y-1\">\n                      {selectedReview.videoUrls.map((url, index) => (\n                        <div key={index} className=\"text-sm text-muted-foreground break-all\">\n                          {url}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-semibold\">ë©”íƒ€ ì •ë³´</h4>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                    <div>\n                      <span className=\"text-muted-foreground\">ì‘ì„±ì¼:</span>\n                      <span className=\"ml-2\">\n                        {new Date(selectedReview.createdAt).toLocaleString(\"ko-KR\")}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"border-t pt-6 space-y-4\">\n                  <h4 className=\"font-semibold\">ê´€ë¦¬ ì‘ì—…</h4>\n                  \n                  <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                    <div className=\"space-y-1\">\n                      <div className=\"font-medium\">ìƒë‹¨ ê³ ì •</div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        ì´ ë¦¬ë·°ë¥¼ ë ˆìŠ¤í† ë‘ í˜ì´ì§€ ìƒë‹¨ì— ê³ ì •í•©ë‹ˆë‹¤\n                      </div>\n                    </div>\n                    <Switch\n                      checked={selectedReview.isPinned === 1}\n                      onCheckedChange={() => handleTogglePin(selectedReview)}\n                      disabled={pinMutation.isPending}\n                      data-testid=\"switch-pin-review\"\n                    />\n                  </div>\n\n                  <Button\n                    variant=\"destructive\"\n                    className=\"w-full\"\n                    onClick={() => deleteMutation.mutate(selectedReview.id)}\n                    disabled={deleteMutation.isPending}\n                    data-testid=\"button-delete-review-dialog\"\n                  >\n                    <Trash2 className=\"w-4 h-4 mr-2\" />\n                    ë¦¬ë·° ì‚­ì œ\n                  </Button>\n                </div>\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":22112},"client/src/pages/DashboardPage.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport { Store, TrendingUp, Star, MessageSquare, Tag, Plus, Edit, Trash2, ChevronRight, Image, Reply, Utensils, Sparkles, Target, Users, Lightbulb } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { SEO } from \"@/components/SEO\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Restaurant, Promotion, RestaurantImage, Review, ReviewResponse, Menu } from \"@shared/schema\";\n\ninterface DashboardStats {\n  totalReviews: number;\n  averageRating: number;\n  ratingDistribution: { rating: number; count: number }[];\n  monthlyReviews: { month: string; count: number }[];\n}\n\ninterface ReviewWithResponse extends Review {\n  response: ReviewResponse | null;\n}\n\ninterface AIAnalysisResponse {\n  restaurant: Restaurant;\n  analysis: {\n    businessAnalysis: { ko: string; en: string };\n    competitorAnalysis: { ko: string; en: string };\n    strategicRecommendations: { ko: string; en: string };\n  };\n  competitors: Restaurant[];\n  generatedAt: string;\n}\n\nexport default function DashboardPage() {\n  const { t, language } = useLanguage();\n  const { toast } = useToast();\n  const { user, isAuthenticated } = useAuth();\n\n  const [selectedRestaurant, setSelectedRestaurant] = useState<Restaurant | null>(null);\n  const [isPromotionDialogOpen, setIsPromotionDialogOpen] = useState(false);\n  const [editingPromotion, setEditingPromotion] = useState<Promotion | null>(null);\n  const [isImageDialogOpen, setIsImageDialogOpen] = useState(false);\n  const [selectedImageFile, setSelectedImageFile] = useState<File | null>(null);\n  const [isResponseDialogOpen, setIsResponseDialogOpen] = useState(false);\n  const [selectedReview, setSelectedReview] = useState<ReviewWithResponse | null>(null);\n  const [responseText, setResponseText] = useState(\"\");\n  \n  // Menu dialog state\n  const [isMenuDialogOpen, setIsMenuDialogOpen] = useState(false);\n  const [editingMenu, setEditingMenu] = useState<Menu | null>(null);\n  const [menuNameKo, setMenuNameKo] = useState(\"\");\n  const [menuNameEn, setMenuNameEn] = useState(\"\");\n  const [menuDescKo, setMenuDescKo] = useState(\"\");\n  const [menuDescEn, setMenuDescEn] = useState(\"\");\n  const [menuPrice, setMenuPrice] = useState(\"\");\n  const [menuCategory, setMenuCategory] = useState(\"\");\n  const [menuImageUrl, setMenuImageUrl] = useState(\"\");\n  const [menuIsPopular, setMenuIsPopular] = useState(false);\n  const [menuIsRecommended, setMenuIsRecommended] = useState(false);\n\n  // Promotion form state\n  const [promotionTitle, setPromotionTitle] = useState(\"\");\n  const [promotionTitleEn, setPromotionTitleEn] = useState(\"\");\n  const [promotionDescription, setPromotionDescription] = useState(\"\");\n  const [promotionDescriptionEn, setPromotionDescriptionEn] = useState(\"\");\n  const [discountType, setDiscountType] = useState<\"percentage\" | \"amount\" | \"special\">(\"percentage\");\n  const [discountValue, setDiscountValue] = useState(\"\");\n  const [startDate, setStartDate] = useState(\"\");\n  const [endDate, setEndDate] = useState(\"\");\n\n  // Fetch user's restaurants\n  const { data: restaurants = [], isLoading: loadingRestaurants } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/my-restaurants\"],\n    enabled: isAuthenticated,\n  });\n\n  // Fetch dashboard stats for selected restaurant\n  const { data: stats } = useQuery<DashboardStats>({\n    queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"dashboard-stats\"],\n    enabled: !!selectedRestaurant,\n  });\n\n  // Fetch promotions for selected restaurant\n  const { data: promotions = [] } = useQuery<Promotion[]>({\n    queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"all-promotions\"],\n    enabled: !!selectedRestaurant,\n  });\n\n  // Fetch images for selected restaurant\n  const { data: images = [] } = useQuery<RestaurantImage[]>({\n    queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"images\"],\n    enabled: !!selectedRestaurant,\n  });\n\n  // Fetch reviews with responses for selected restaurant\n  const { data: reviewsWithResponses = [] } = useQuery<ReviewWithResponse[]>({\n    queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"reviews-with-responses\"],\n    enabled: !!selectedRestaurant,\n  });\n\n  // Fetch menus for selected restaurant\n  const { data: menus = [], isLoading: menusLoading } = useQuery<Menu[]>({\n    queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"menus\"],\n    enabled: !!selectedRestaurant,\n  });\n\n  // Debug logging\n  useEffect(() => {\n    console.log(\"[Dashboard] Menus state changed:\", menus, \"length:\", menus?.length, \"selected restaurant:\", selectedRestaurant?.id);\n  }, [menus, selectedRestaurant?.id]);\n\n  // Fetch AI analysis for selected restaurant\n  const { data: aiAnalysis, refetch: refetchAIAnalysis, isLoading: isLoadingAIAnalysis } = useQuery<AIAnalysisResponse>({\n    queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"ai-analysis\"],\n    enabled: false, // Only fetch when user clicks \"Generate Analysis\"\n  });\n\n  // Promotion mutations\n  const createPromotionMutation = useMutation({\n    mutationFn: async (data: any) => {\n      await apiRequest(\"POST\", \"/api/promotions\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"all-promotions\"] });\n      setIsPromotionDialogOpen(false);\n      resetPromotionForm();\n      toast({\n        title: language === \"en\" ? \"Promotion created\" : \"í”„ë¡œëª¨ì…˜ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to create promotion\" : \"í”„ë¡œëª¨ì…˜ ìƒì„± ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePromotionMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      await apiRequest(\"PATCH\", `/api/promotions/${id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"all-promotions\"] });\n      setIsPromotionDialogOpen(false);\n      resetPromotionForm();\n      toast({\n        title: language === \"en\" ? \"Promotion updated\" : \"í”„ë¡œëª¨ì…˜ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to update promotion\" : \"í”„ë¡œëª¨ì…˜ ìˆ˜ì • ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deletePromotionMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/promotions/${id}`, {\n        restaurantId: selectedRestaurant?.id,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"all-promotions\"] });\n      toast({\n        title: language === \"en\" ? \"Promotion deleted\" : \"í”„ë¡œëª¨ì…˜ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to delete promotion\" : \"í”„ë¡œëª¨ì…˜ ì‚­ì œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Image mutations (using file upload)\n  const uploadImageMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('image', file);\n      \n      const response = await fetch(`/api/restaurants/${selectedRestaurant?.id}/upload-image`, {\n        method: 'POST',\n        body: formData,\n        credentials: 'include',\n      });\n      \n      if (!response.ok) {\n        throw new Error('Failed to upload image');\n      }\n      \n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"images\"] });\n      setIsImageDialogOpen(false);\n      setSelectedImageFile(null);\n      toast({\n        title: language === \"en\" ? \"Image uploaded\" : \"ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to upload image\" : \"ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteImageMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/restaurant-images/${id}`, {\n        restaurantId: selectedRestaurant?.id,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"images\"] });\n      toast({\n        title: language === \"en\" ? \"Image deleted\" : \"ì´ë¯¸ì§€ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to delete image\" : \"ì´ë¯¸ì§€ ì‚­ì œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Review response mutations\n  const createResponseMutation = useMutation({\n    mutationFn: async ({ reviewId, response }: { reviewId: string; response: string }) => {\n      await apiRequest(\"POST\", \"/api/review-responses\", {\n        reviewId,\n        restaurantId: selectedRestaurant?.id,\n        response,\n      });\n    },\n    onSuccess: async () => {\n      await queryClient.refetchQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"reviews-with-responses\"] });\n      setIsResponseDialogOpen(false);\n      setResponseText(\"\");\n      setSelectedReview(null);\n      toast({\n        title: language === \"en\" ? \"Response posted\" : \"ì‘ë‹µì´ ê²Œì‹œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to post response\" : \"ì‘ë‹µ ê²Œì‹œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateResponseMutation = useMutation({\n    mutationFn: async ({ id, response }: { id: string; response: string }) => {\n      await apiRequest(\"PATCH\", `/api/review-responses/${id}`, {\n        restaurantId: selectedRestaurant?.id,\n        response,\n      });\n    },\n    onSuccess: async () => {\n      await queryClient.refetchQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"reviews-with-responses\"] });\n      setIsResponseDialogOpen(false);\n      setResponseText(\"\");\n      setSelectedReview(null);\n      toast({\n        title: language === \"en\" ? \"Response updated\" : \"ì‘ë‹µì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to update response\" : \"ì‘ë‹µ ìˆ˜ì • ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteResponseMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/review-responses/${id}`, {\n        restaurantId: selectedRestaurant?.id,\n      });\n    },\n    onSuccess: async () => {\n      await queryClient.refetchQueries({ queryKey: [\"/api/restaurants\", selectedRestaurant?.id, \"reviews-with-responses\"] });\n      toast({\n        title: language === \"en\" ? \"Response deleted\" : \"ì‘ë‹µì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to delete response\" : \"ì‘ë‹µ ì‚­ì œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Menu mutations\n  const createMenuMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"POST\", \"/api/menus\", data);\n      return await response.json();\n    },\n    onSuccess: async (newMenu) => {\n      console.log(\"[Dashboard] Menu created, response:\", newMenu);\n      \n      // Invalidate and refetch menus\n      const queryKey = [\"/api/restaurants\", selectedRestaurant?.id, \"menus\"];\n      console.log(\"[Dashboard] Invalidating and refetching with key:\", queryKey);\n      \n      await queryClient.invalidateQueries({ queryKey });\n      console.log(\"[Dashboard] Invalidate and refetch complete\");\n      \n      setIsMenuDialogOpen(false);\n      resetMenuForm();\n      toast({\n        title: language === \"en\" ? \"Menu item created\" : \"ë©”ë‰´ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to create menu item\" : \"ë©”ë‰´ ìƒì„± ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMenuMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      await apiRequest(\"PATCH\", `/api/menus/${id}`, data);\n    },\n    onSuccess: async () => {\n      const queryKey = [\"/api/restaurants\", selectedRestaurant?.id, \"menus\"];\n      await queryClient.invalidateQueries({ queryKey });\n      setIsMenuDialogOpen(false);\n      resetMenuForm();\n      toast({\n        title: language === \"en\" ? \"Menu item updated\" : \"ë©”ë‰´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to update menu item\" : \"ë©”ë‰´ ìˆ˜ì • ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMenuMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest(\"DELETE\", `/api/menus/${id}`, {\n        restaurantId: selectedRestaurant?.id,\n      });\n    },\n    onSuccess: async () => {\n      const queryKey = [\"/api/restaurants\", selectedRestaurant?.id, \"menus\"];\n      await queryClient.invalidateQueries({ queryKey });\n      toast({\n        title: language === \"en\" ? \"Menu item deleted\" : \"ë©”ë‰´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: language === \"en\" ? \"Failed to delete menu item\" : \"ë©”ë‰´ ì‚­ì œ ì‹¤íŒ¨\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetPromotionForm = () => {\n    setPromotionTitle(\"\");\n    setPromotionTitleEn(\"\");\n    setPromotionDescription(\"\");\n    setPromotionDescriptionEn(\"\");\n    setDiscountType(\"percentage\");\n    setDiscountValue(\"\");\n    setStartDate(\"\");\n    setEndDate(\"\");\n    setEditingPromotion(null);\n  };\n\n  const resetMenuForm = () => {\n    setMenuNameKo(\"\");\n    setMenuNameEn(\"\");\n    setMenuDescKo(\"\");\n    setMenuDescEn(\"\");\n    setMenuPrice(\"\");\n    setMenuCategory(\"\");\n    setMenuImageUrl(\"\");\n    setMenuIsPopular(false);\n    setMenuIsRecommended(false);\n    setEditingMenu(null);\n  };\n\n  const handleOpenPromotionDialog = (promotion?: Promotion) => {\n    if (promotion) {\n      setEditingPromotion(promotion);\n      setPromotionTitle(promotion.title);\n      setPromotionTitleEn(promotion.titleEn);\n      setPromotionDescription(promotion.description);\n      setPromotionDescriptionEn(promotion.descriptionEn);\n      setDiscountType(promotion.discountType as \"percentage\" | \"amount\" | \"special\");\n      setDiscountValue(promotion.discountValue?.toString() || \"\");\n      setStartDate(new Date(promotion.startDate).toISOString().split('T')[0]);\n      setEndDate(new Date(promotion.endDate).toISOString().split('T')[0]);\n    } else {\n      resetPromotionForm();\n    }\n    setIsPromotionDialogOpen(true);\n  };\n\n  const handleSubmitPromotion = () => {\n    if (!selectedRestaurant || !promotionTitle || !promotionTitleEn || !startDate || !endDate) {\n      toast({\n        title: language === \"en\" ? \"Please fill all required fields\" : \"ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const data = {\n      restaurantId: selectedRestaurant.id,\n      title: promotionTitle,\n      titleEn: promotionTitleEn,\n      description: promotionDescription,\n      descriptionEn: promotionDescriptionEn,\n      discountType,\n      discountValue: discountValue ? parseInt(discountValue) : null,\n      startDate,\n      endDate,\n    };\n\n    if (editingPromotion) {\n      updatePromotionMutation.mutate({ id: editingPromotion.id, data });\n    } else {\n      createPromotionMutation.mutate(data);\n    }\n  };\n\n  const handleDeletePromotion = (id: string) => {\n    if (window.confirm(language === \"en\" ? \"Are you sure you want to delete this promotion?\" : \"ì´ í”„ë¡œëª¨ì…˜ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\n      deletePromotionMutation.mutate(id);\n    }\n  };\n\n  const handleOpenResponseDialog = (review: ReviewWithResponse) => {\n    setSelectedReview(review);\n    setResponseText(review.response?.response || \"\");\n    setIsResponseDialogOpen(true);\n  };\n\n  const handleSubmitResponse = () => {\n    if (!selectedReview || !responseText.trim()) {\n      toast({\n        title: language === \"en\" ? \"Please enter a response\" : \"ì‘ë‹µì„ ì…ë ¥í•˜ì„¸ìš”\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (selectedReview.response) {\n      // Update existing response\n      updateResponseMutation.mutate({\n        id: selectedReview.response.id,\n        response: responseText,\n      });\n    } else {\n      // Create new response\n      createResponseMutation.mutate({\n        reviewId: selectedReview.id,\n        response: responseText,\n      });\n    }\n  };\n\n  const handleDeleteResponse = (id: string) => {\n    if (window.confirm(language === \"en\" ? \"Are you sure you want to delete this response?\" : \"ì´ ì‘ë‹µì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\n      deleteResponseMutation.mutate(id);\n    }\n  };\n\n  const handleOpenMenuDialog = (menu?: Menu) => {\n    if (menu) {\n      setEditingMenu(menu);\n      setMenuNameKo(menu.name);\n      setMenuNameEn(menu.nameEn);\n      setMenuDescKo(menu.description || \"\");\n      setMenuDescEn(menu.descriptionEn || \"\");\n      setMenuPrice(menu.price.toString());\n      setMenuCategory(menu.category || \"\");\n      setMenuImageUrl(menu.imageUrl || \"\");\n      setMenuIsPopular(menu.isPopular === 1);\n      setMenuIsRecommended(menu.isRecommended === 1);\n    } else {\n      resetMenuForm();\n    }\n    setIsMenuDialogOpen(true);\n  };\n\n  const handleSubmitMenu = () => {\n    if (!selectedRestaurant || !menuNameKo || !menuNameEn || !menuPrice) {\n      toast({\n        title: language === \"en\" ? \"Please fill all required fields\" : \"ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const data = {\n      restaurantId: selectedRestaurant.id,\n      name: menuNameKo,\n      nameEn: menuNameEn,\n      description: menuDescKo || null,\n      descriptionEn: menuDescEn || null,\n      price: parseInt(menuPrice),\n      category: menuCategory || null,\n      imageUrl: menuImageUrl || null,\n      isPopular: menuIsPopular ? 1 : 0,\n      isRecommended: menuIsRecommended ? 1 : 0,\n      displayOrder: menus?.length || 0,\n    };\n\n    if (editingMenu) {\n      updateMenuMutation.mutate({ id: editingMenu.id, data });\n    } else {\n      createMenuMutation.mutate(data);\n    }\n  };\n\n  const handleDeleteMenu = (id: string) => {\n    if (window.confirm(language === \"en\" ? \"Are you sure you want to delete this menu item?\" : \"ì´ ë©”ë‰´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\")) {\n      deleteMenuMutation.mutate(id);\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n        <Card className=\"p-6 text-center max-w-md\">\n          <Store className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n          <h2 className=\"text-xl font-bold mb-2\">\n            {language === \"en\" ? \"Login Required\" : \"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤\"}\n          </h2>\n          <p className=\"text-muted-foreground mb-4\">\n            {language === \"en\" \n              ? \"Please log in to access your restaurant dashboard\" \n              : \"ë ˆìŠ¤í† ë‘ ëŒ€ì‹œë³´ë“œì— ì ‘ê·¼í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”\"}\n          </p>\n          <Button onClick={() => window.location.href = \"/api/login\"} data-testid=\"button-login\">\n            {language === \"en\" ? \"Log In\" : \"ë¡œê·¸ì¸\"}\n          </Button>\n        </Card>\n      </div>\n    );\n  }\n\n  if (loadingRestaurants) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"max-w-6xl mx-auto p-4\">\n          <div className=\"h-8 bg-muted rounded animate-pulse mb-6 w-1/3\" />\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n            {Array.from({ length: 3 }).map((_, i) => (\n              <div key={i} className=\"h-32 bg-muted rounded animate-pulse\" />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (restaurants.length === 0) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n        <Card className=\"p-6 text-center max-w-md\">\n          <Store className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n          <h2 className=\"text-xl font-bold mb-2\">\n            {language === \"en\" ? \"No Restaurants\" : \"ë ˆìŠ¤í† ë‘ ì—†ìŒ\"}\n          </h2>\n          <p className=\"text-muted-foreground mb-4\">\n            {language === \"en\" \n              ? \"You don't own any restaurants yet\" \n              : \"ì•„ì§ ì†Œìœ í•œ ë ˆìŠ¤í† ë‘ì´ ì—†ìŠµë‹ˆë‹¤\"}\n          </p>\n          <Link href=\"/\">\n            <Button variant=\"outline\" data-testid=\"button-back-home\">\n              {language === \"en\" ? \"Go Home\" : \"í™ˆìœ¼ë¡œ\"}\n            </Button>\n          </Link>\n        </Card>\n      </div>\n    );\n  }\n\n  const restaurantName = selectedRestaurant \n    ? (language === \"en\" ? selectedRestaurant.nameEn : selectedRestaurant.name)\n    : \"\";\n\n  return (\n    <>\n      <SEO\n        title={language === \"en\" ? \"Restaurant Dashboard\" : \"ë ˆìŠ¤í† ë‘ ëŒ€ì‹œë³´ë“œ\"}\n        description={language === \"en\" ? \"Manage your restaurant, view analytics, and respond to reviews\" : \"ë ˆìŠ¤í† ë‘ ê´€ë¦¬, ë¶„ì„ ë³´ê¸°, ë¦¬ë·° ì‘ë‹µ\"}\n      />\n      \n      <div className=\"min-h-screen bg-background pb-20\">\n        <div className=\"max-w-6xl mx-auto p-4\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h1 className=\"text-2xl font-bold mb-1\">\n                {language === \"en\" ? \"Restaurant Dashboard\" : \"ë ˆìŠ¤í† ë‘ ëŒ€ì‹œë³´ë“œ\"}\n              </h1>\n              <p className=\"text-sm text-muted-foreground\">\n                {language === \"en\" ? \"Manage your restaurant and promotions\" : \"ë ˆìŠ¤í† ë‘ê³¼ í”„ë¡œëª¨ì…˜ì„ ê´€ë¦¬í•˜ì„¸ìš”\"}\n              </p>\n            </div>\n            <Link href=\"/\">\n              <Button variant=\"outline\" size=\"sm\" data-testid=\"button-home\">\n                {language === \"en\" ? \"Home\" : \"í™ˆ\"}\n              </Button>\n            </Link>\n          </div>\n\n          {/* Restaurant Selection */}\n          {!selectedRestaurant ? (\n            <div>\n              <h2 className=\"text-lg font-semibold mb-4\">\n                {language === \"en\" ? \"Select a Restaurant\" : \"ë ˆìŠ¤í† ë‘ ì„ íƒ\"}\n              </h2>\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                {restaurants.map((restaurant) => (\n                  <Card\n                    key={restaurant.id}\n                    className=\"p-4 hover-elevate cursor-pointer\"\n                    onClick={() => setSelectedRestaurant(restaurant)}\n                    data-testid={`restaurant-card-${restaurant.id}`}\n                  >\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <h3 className=\"font-semibold\">\n                        {language === \"en\" ? restaurant.nameEn : restaurant.name}\n                      </h3>\n                      <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\n                    </div>\n                    <p className=\"text-sm text-muted-foreground mb-2\">{restaurant.district}</p>\n                    <div className=\"flex items-center gap-2\">\n                      <Star className=\"w-4 h-4 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                      <span className=\"text-sm font-medium\">{restaurant.rating.toFixed(1)}</span>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          ) : (\n            <div>\n              {/* Selected Restaurant Header */}\n              <div className=\"flex items-center justify-between mb-6\">\n                <div>\n                  <h2 className=\"text-xl font-bold\">{restaurantName}</h2>\n                  <p className=\"text-sm text-muted-foreground\">{selectedRestaurant.district}</p>\n                </div>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setSelectedRestaurant(null)}\n                  data-testid=\"button-change-restaurant\"\n                >\n                  {language === \"en\" ? \"Change Restaurant\" : \"ë ˆìŠ¤í† ë‘ ë³€ê²½\"}\n                </Button>\n              </div>\n\n              {/* Quick Actions */}\n              <div className=\"grid gap-4 md:grid-cols-2 mb-6\">\n                <Link href={`/restaurant/${selectedRestaurant.id}`}>\n                  <Card className=\"p-4 hover-elevate cursor-pointer\" data-testid=\"card-view-page\">\n                    <div className=\"flex items-center gap-3\">\n                      <Store className=\"w-5 h-5 text-primary\" />\n                      <div>\n                        <h3 className=\"font-semibold\">\n                          {language === \"en\" ? \"View Restaurant Page\" : \"ë ˆìŠ¤í† ë‘ í˜ì´ì§€ ë³´ê¸°\"}\n                        </h3>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {language === \"en\" ? \"See how customers see your restaurant\" : \"ê³ ê°ì´ ë³´ëŠ” í˜ì´ì§€ í™•ì¸\"}\n                        </p>\n                      </div>\n                    </div>\n                  </Card>\n                </Link>\n\n                <Card\n                  className=\"p-4 hover-elevate cursor-pointer\"\n                  onClick={() => handleOpenPromotionDialog()}\n                  data-testid=\"card-create-promotion\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <Plus className=\"w-5 h-5 text-primary\" />\n                    <div>\n                      <h3 className=\"font-semibold\">\n                        {language === \"en\" ? \"Create Promotion\" : \"í”„ë¡œëª¨ì…˜ ìƒì„±\"}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"en\" ? \"Add a special offer for customers\" : \"ê³ ê°ì„ ìœ„í•œ íŠ¹ë³„ ì œì•ˆ ì¶”ê°€\"}\n                      </p>\n                    </div>\n                  </div>\n                </Card>\n              </div>\n\n              {/* Statistics */}\n              {stats && (\n                <div className=\"grid gap-4 md:grid-cols-4 mb-6\">\n                  <Card className=\"p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <MessageSquare className=\"w-4 h-4 text-primary\" />\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"en\" ? \"Total Reviews\" : \"ì „ì²´ ë¦¬ë·°\"}\n                      </p>\n                    </div>\n                    <p className=\"text-2xl font-bold\" data-testid=\"stat-total-reviews\">{stats.totalReviews}</p>\n                  </Card>\n\n                  <Card className=\"p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Star className=\"w-4 h-4 text-[hsl(var(--accent-success))]\" />\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"en\" ? \"Average Rating\" : \"í‰ê·  í‰ì \"}\n                      </p>\n                    </div>\n                    <p className=\"text-2xl font-bold\" data-testid=\"stat-average-rating\">{stats.averageRating.toFixed(1)}</p>\n                  </Card>\n\n                  <Card className=\"p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <TrendingUp className=\"w-4 h-4 text-primary\" />\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"en\" ? \"This Month\" : \"ì´ë²ˆ ë‹¬\"}\n                      </p>\n                    </div>\n                    <p className=\"text-2xl font-bold\" data-testid=\"stat-monthly-reviews\">\n                      {stats.monthlyReviews?.[0]?.count || 0}\n                    </p>\n                  </Card>\n\n                  <Card className=\"p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Tag className=\"w-4 h-4 text-primary\" />\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"en\" ? \"Active Promotions\" : \"í™œì„± í”„ë¡œëª¨ì…˜\"}\n                      </p>\n                    </div>\n                    <p className=\"text-2xl font-bold\" data-testid=\"stat-promotions\">\n                      {promotions.filter(p => p.isActive === 1).length}\n                    </p>\n                  </Card>\n                </div>\n              )}\n\n              {/* Rating Distribution */}\n              {stats && stats.ratingDistribution.length > 0 && (\n                <Card className=\"p-4 mb-6\">\n                  <h3 className=\"font-semibold mb-4\">\n                    {language === \"en\" ? \"Rating Distribution\" : \"í‰ì  ë¶„í¬\"}\n                  </h3>\n                  <div className=\"space-y-2\">\n                    {[5, 4, 3, 2, 1].map((rating) => {\n                      const data = stats.ratingDistribution.find(r => r.rating === rating);\n                      const count = data?.count || 0;\n                      const percentage = stats.totalReviews > 0 ? (count / stats.totalReviews) * 100 : 0;\n                      \n                      return (\n                        <div key={rating} className=\"flex items-center gap-3\" data-testid={`rating-dist-${rating}`}>\n                          <div className=\"flex items-center gap-1 w-16\">\n                            <span className=\"text-sm font-medium\">{rating}</span>\n                            <Star className=\"w-3 h-3 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                          </div>\n                          <div className=\"flex-1 bg-muted rounded-full h-2 overflow-hidden\">\n                            <div \n                              className=\"h-full bg-[hsl(var(--accent-success))]\"\n                              style={{ width: `${percentage}%` }}\n                            />\n                          </div>\n                          <span className=\"text-sm text-muted-foreground w-12 text-right\">{count}</span>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </Card>\n              )}\n\n              {/* Promotions List */}\n              <Card className=\"p-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"font-semibold\">\n                    {language === \"en\" ? \"Promotions\" : \"í”„ë¡œëª¨ì…˜\"}\n                  </h3>\n                  <Button \n                    size=\"sm\" \n                    variant=\"default\"\n                    onClick={() => handleOpenPromotionDialog()}\n                    data-testid=\"button-add-promotion\"\n                  >\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    {language === \"en\" ? \"Add\" : \"ì¶”ê°€\"}\n                  </Button>\n                </div>\n\n                {promotions.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Tag className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                    <p className=\"text-muted-foreground\">\n                      {language === \"en\" ? \"No promotions yet\" : \"í”„ë¡œëª¨ì…˜ì´ ì—†ìŠµë‹ˆë‹¤\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {language === \"en\" ? \"Create your first promotion to attract customers\" : \"ì²« í”„ë¡œëª¨ì…˜ì„ ë§Œë“¤ì–´ ê³ ê°ì„ ìœ ì¹˜í•˜ì„¸ìš”\"}\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {promotions.map((promotion) => (\n                      <Card key={promotion.id} className=\"p-3\" data-testid={`promotion-item-${promotion.id}`}>\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <h4 className=\"font-semibold\">\n                                {language === \"en\" ? promotion.titleEn : promotion.title}\n                              </h4>\n                              {promotion.isActive === 1 ? (\n                                <Badge variant=\"default\" className=\"text-xs\">\n                                  {language === \"en\" ? \"Active\" : \"í™œì„±\"}\n                                </Badge>\n                              ) : (\n                                <Badge variant=\"secondary\" className=\"text-xs\">\n                                  {language === \"en\" ? \"Inactive\" : \"ë¹„í™œì„±\"}\n                                </Badge>\n                              )}\n                            </div>\n                            <p className=\"text-sm text-muted-foreground mb-2\">\n                              {language === \"en\" ? promotion.descriptionEn : promotion.description}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground\">\n                              {new Date(promotion.startDate).toLocaleDateString(language)} - {new Date(promotion.endDate).toLocaleDateString(language)}\n                            </p>\n                          </div>\n                          <div className=\"flex gap-1 ml-3\">\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={() => handleOpenPromotionDialog(promotion)}\n                              data-testid={`button-edit-promotion-${promotion.id}`}\n                            >\n                              <Edit className=\"w-4 h-4\" />\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"ghost\"\n                              onClick={() => handleDeletePromotion(promotion.id)}\n                              data-testid={`button-delete-promotion-${promotion.id}`}\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                )}\n              </Card>\n\n              {/* Menu Management Section */}\n              <Card className=\"p-6 mb-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <Utensils className=\"w-5 h-5 text-primary\" />\n                    <h3 className=\"font-semibold\">\n                      {language === \"en\" ? \"Menu Management\" : \"ë©”ë‰´ ê´€ë¦¬\"}\n                    </h3>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => handleOpenMenuDialog()}\n                    data-testid=\"button-add-menu\"\n                  >\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    {language === \"en\" ? \"Add\" : \"ì¶”ê°€\"}\n                  </Button>\n                </div>\n\n                {menus.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Utensils className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                    <p className=\"text-muted-foreground\">\n                      {language === \"en\" ? \"No menu items yet\" : \"ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {language === \"en\" ? \"Add menu items to showcase your dishes\" : \"ìš”ë¦¬ë¥¼ ì†Œê°œí•  ë©”ë‰´ë¥¼ ì¶”ê°€í•˜ì„¸ìš”\"}\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"grid gap-3 md:grid-cols-2\">\n                    {menus.map((menu) => (\n                      <Card key={menu.id} className=\"p-3\" data-testid={`menu-item-${menu.id}`}>\n                        <div className=\"flex gap-3\">\n                          {menu.imageUrl && (\n                            <div className=\"w-20 h-20 rounded-lg overflow-hidden bg-muted flex-shrink-0\">\n                              <img\n                                src={menu.imageUrl}\n                                alt={language === \"en\" ? menu.nameEn : menu.name}\n                                className=\"w-full h-full object-cover\"\n                              />\n                            </div>\n                          )}\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-start justify-between gap-2 mb-1\">\n                              <div className=\"flex-1 min-w-0\">\n                                <h4 className=\"font-semibold truncate\">\n                                  {language === \"en\" ? menu.nameEn : menu.name}\n                                </h4>\n                                {menu.category && (\n                                  <Badge variant=\"secondary\" className=\"text-xs mt-1\">\n                                    {menu.category}\n                                  </Badge>\n                                )}\n                              </div>\n                              <div className=\"flex gap-1 flex-shrink-0\">\n                                {menu.isPopular === 1 && (\n                                  <Badge variant=\"default\" className=\"text-xs\">\n                                    {language === \"en\" ? \"Popular\" : \"ì¸ê¸°\"}\n                                  </Badge>\n                                )}\n                                {menu.isRecommended === 1 && (\n                                  <Badge variant=\"default\" className=\"text-xs\">\n                                    {language === \"en\" ? \"Recommended\" : \"ì¶”ì²œ\"}\n                                  </Badge>\n                                )}\n                              </div>\n                            </div>\n                            {menu.description && (\n                              <p className=\"text-sm text-muted-foreground line-clamp-2 mb-1\">\n                                {language === \"en\" ? menu.descriptionEn : menu.description}\n                              </p>\n                            )}\n                            <div className=\"flex items-center justify-between mt-2\">\n                              <p className=\"font-semibold text-primary\">\n                                â‚©{menu.price?.toLocaleString() || '0'}\n                              </p>\n                              <div className=\"flex gap-1\">\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleOpenMenuDialog(menu)}\n                                  data-testid={`button-edit-menu-${menu.id}`}\n                                >\n                                  <Edit className=\"w-4 h-4\" />\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleDeleteMenu(menu.id)}\n                                  data-testid={`button-delete-menu-${menu.id}`}\n                                >\n                                  <Trash2 className=\"w-4 h-4\" />\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                )}\n              </Card>\n\n              {/* Images Section */}\n              <Card className=\"p-6 mb-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <Image className=\"w-5 h-5 text-primary\" />\n                    <h3 className=\"font-semibold\">\n                      {language === \"en\" ? \"Restaurant Images\" : \"ë ˆìŠ¤í† ë‘ ì´ë¯¸ì§€\"}\n                    </h3>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => setIsImageDialogOpen(true)}\n                    data-testid=\"button-add-image\"\n                  >\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    {language === \"en\" ? \"Add\" : \"ì¶”ê°€\"}\n                  </Button>\n                </div>\n\n                {images.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <Image className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                    <p className=\"text-muted-foreground\">\n                      {language === \"en\" ? \"No images yet\" : \"ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {language === \"en\" ? \"Add images to showcase your restaurant\" : \"ë ˆìŠ¤í† ë‘ì„ ì†Œê°œí•  ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•˜ì„¸ìš”\"}\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {images.map((image, index) => (\n                      <div key={image.id} className=\"relative group\">\n                        <div className=\"aspect-square rounded-lg overflow-hidden bg-muted\">\n                          <img\n                            src={image.imageUrl}\n                            alt={`Image ${index + 1}`}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        </div>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\"\n                          onClick={() => deleteImageMutation.mutate(image.id)}\n                          data-testid={`button-delete-image-${image.id}`}\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                        <div className=\"absolute bottom-2 left-2 bg-background/80 backdrop-blur-sm px-2 py-1 rounded text-xs\">\n                          #{index + 1}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </Card>\n\n              {/* Reviews & Responses Section */}\n              <Card className=\"p-6 mb-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <MessageSquare className=\"w-5 h-5 text-primary\" />\n                    <h3 className=\"font-semibold\">\n                      {language === \"en\" ? \"Customer Reviews & Responses\" : \"ê³ ê° ë¦¬ë·° ë° ì‘ë‹µ\"}\n                    </h3>\n                  </div>\n                  <Badge variant=\"secondary\">\n                    {reviewsWithResponses.length} {language === \"en\" ? \"reviews\" : \"ë¦¬ë·°\"}\n                  </Badge>\n                </div>\n\n                {reviewsWithResponses.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <MessageSquare className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                    <p className=\"text-muted-foreground\">\n                      {language === \"en\" ? \"No reviews yet\" : \"ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {language === \"en\" ? \"Customer reviews will appear here\" : \"ê³ ê° ë¦¬ë·°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤\"}\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {reviewsWithResponses.map((review) => (\n                      <Card key={review.id} className=\"p-4\" data-testid={`review-item-${review.id}`}>\n                        {/* Review */}\n                        <div className=\"mb-3\">\n                          <div className=\"flex items-start justify-between mb-2\">\n                            <div>\n                              <p className=\"font-medium\">{review.userName}</p>\n                              <div className=\"flex items-center gap-1 mt-1\">\n                                {Array.from({ length: 5 }).map((_, i) => (\n                                  <Star\n                                    key={i}\n                                    className={`w-4 h-4 ${\n                                      i < review.rating\n                                        ? \"fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\"\n                                        : \"fill-muted text-muted\"\n                                    }`}\n                                  />\n                                ))}\n                              </div>\n                            </div>\n                            <p className=\"text-xs text-muted-foreground\">\n                              {new Date(review.createdAt).toLocaleDateString(language)}\n                            </p>\n                          </div>\n                          <p className=\"text-sm\">{review.comment}</p>\n                        </div>\n\n                        {/* Response */}\n                        {review.response ? (\n                          <div className=\"bg-muted/50 rounded-lg p-3 border-l-4 border-primary\">\n                            <div className=\"flex items-start justify-between mb-2\">\n                              <div className=\"flex items-center gap-2\">\n                                <Reply className=\"w-4 h-4 text-primary\" />\n                                <p className=\"text-sm font-medium text-primary\">\n                                  {language === \"en\" ? \"Your Response\" : \"ê·€í•˜ì˜ ì‘ë‹µ\"}\n                                </p>\n                              </div>\n                              <div className=\"flex gap-1\">\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleOpenResponseDialog(review)}\n                                  data-testid={`button-edit-response-${review.id}`}\n                                >\n                                  <Edit className=\"w-3 h-3\" />\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"ghost\"\n                                  onClick={() => handleDeleteResponse(review.response!.id)}\n                                  data-testid={`button-delete-response-${review.id}`}\n                                >\n                                  <Trash2 className=\"w-3 h-3\" />\n                                </Button>\n                              </div>\n                            </div>\n                            <p className=\"text-sm\">{review.response.response}</p>\n                            <p className=\"text-xs text-muted-foreground mt-2\">\n                              {new Date(review.response.createdAt).toLocaleDateString(language)}\n                            </p>\n                          </div>\n                        ) : (\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => handleOpenResponseDialog(review)}\n                            className=\"w-full\"\n                            data-testid={`button-respond-${review.id}`}\n                          >\n                            <Reply className=\"w-4 h-4 mr-2\" />\n                            {language === \"en\" ? \"Respond to Review\" : \"ë¦¬ë·°ì— ì‘ë‹µí•˜ê¸°\"}\n                          </Button>\n                        )}\n                      </Card>\n                    ))}\n                  </div>\n                )}\n              </Card>\n\n              {/* AI Business Analysis Section */}\n              <Card className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-2\">\n                    <Sparkles className=\"w-5 h-5 text-primary\" />\n                    <h3 className=\"font-semibold\">\n                      {language === \"en\" ? \"AI Business Insights\" : \"AI ë¹„ì¦ˆë‹ˆìŠ¤ ë¶„ì„\"}\n                    </h3>\n                  </div>\n                  <Button\n                    size=\"sm\"\n                    onClick={() => refetchAIAnalysis()}\n                    disabled={isLoadingAIAnalysis}\n                    data-testid=\"button-generate-ai-analysis\"\n                  >\n                    {isLoadingAIAnalysis ? \"...\" : (language === \"en\" ? \"Generate Analysis\" : \"ë¶„ì„ ìƒì„±\")}\n                  </Button>\n                </div>\n\n                {!aiAnalysis && !isLoadingAIAnalysis && (\n                  <div className=\"text-center py-8\">\n                    <Sparkles className=\"w-12 h-12 mx-auto mb-3 text-muted-foreground\" />\n                    <p className=\"text-muted-foreground\">\n                      {language === \"en\" ? \"No AI analysis generated yet\" : \"ì•„ì§ AI ë¶„ì„ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {language === \"en\" \n                        ? \"Click 'Generate Analysis' to get AI-powered business insights\" \n                        : \"'ë¶„ì„ ìƒì„±'ì„ í´ë¦­í•˜ì—¬ AI ê¸°ë°˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸ë¥¼ ë°›ìœ¼ì„¸ìš”\"}\n                    </p>\n                  </div>\n                )}\n\n                {isLoadingAIAnalysis && (\n                  <div className=\"text-center py-12\">\n                    <div className=\"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4\" />\n                    <p className=\"text-muted-foreground\">\n                      {language === \"en\" ? \"Generating AI analysis...\" : \"AI ë¶„ì„ ìƒì„± ì¤‘...\"}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      {language === \"en\" ? \"This may take a few moments\" : \"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”\"}\n                    </p>\n                  </div>\n                )}\n\n                {aiAnalysis && (\n                  <div className=\"space-y-4\">\n                    {/* Business Analysis Card */}\n                    <Card className=\"p-4\" data-testid=\"card-business-analysis\">\n                      <div className=\"flex items-start gap-3 mb-3\">\n                        <Target className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <h4 className=\"font-semibold mb-2\">\n                            {language === \"en\" ? \"Business Analysis\" : \"AI ì—…ì²´ ë¶„ì„\"}\n                          </h4>\n                          <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\n                            {language === \"en\" \n                              ? aiAnalysis.analysis.businessAnalysis.en \n                              : aiAnalysis.analysis.businessAnalysis.ko}\n                          </p>\n                        </div>\n                      </div>\n                    </Card>\n\n                    {/* Competitor Analysis Card */}\n                    <Card className=\"p-4\" data-testid=\"card-competitor-analysis\">\n                      <div className=\"flex items-start gap-3 mb-3\">\n                        <Users className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold mb-2\">\n                            {language === \"en\" ? \"Competitor Analysis\" : \"ê²½ìŸì—…ì²´ ë¶„ì„\"}\n                          </h4>\n                          <p className=\"text-sm text-muted-foreground whitespace-pre-line mb-3\">\n                            {language === \"en\" \n                              ? aiAnalysis.analysis.competitorAnalysis.en \n                              : aiAnalysis.analysis.competitorAnalysis.ko}\n                          </p>\n                          {aiAnalysis.competitors && aiAnalysis.competitors.length > 0 && (\n                            <div>\n                              <p className=\"text-xs font-medium text-muted-foreground mb-2\">\n                                {language === \"en\" ? \"Nearby Competitors:\" : \"ì¸ê·¼ ê²½ìŸì—…ì²´:\"}\n                              </p>\n                              <div className=\"space-y-2\">\n                                {aiAnalysis.competitors.slice(0, 3).map((competitor) => (\n                                  <div \n                                    key={competitor.id} \n                                    className=\"flex items-center justify-between text-xs\"\n                                    data-testid={`competitor-${competitor.id}`}\n                                  >\n                                    <span>{language === \"en\" ? competitor.nameEn : competitor.name}</span>\n                                    <div className=\"flex items-center gap-2\">\n                                      <Badge variant=\"secondary\" className=\"text-xs\">\n                                        {competitor.district}\n                                      </Badge>\n                                      <div className=\"flex items-center gap-1\">\n                                        <Star className=\"w-3 h-3 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\" />\n                                        <span>{competitor.rating.toFixed(1)}</span>\n                                      </div>\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </Card>\n\n                    {/* Strategic Recommendations Card */}\n                    <Card className=\"p-4\" data-testid=\"card-strategic-recommendations\">\n                      <div className=\"flex items-start gap-3 mb-3\">\n                        <Lightbulb className=\"w-5 h-5 text-primary flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <h4 className=\"font-semibold mb-2\">\n                            {language === \"en\" ? \"Strategic Recommendations\" : \"AI ì „ëµ ì œì•ˆ\"}\n                          </h4>\n                          <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\n                            {language === \"en\" \n                              ? aiAnalysis.analysis.strategicRecommendations.en \n                              : aiAnalysis.analysis.strategicRecommendations.ko}\n                          </p>\n                        </div>\n                      </div>\n                    </Card>\n\n                    <p className=\"text-xs text-muted-foreground text-center\">\n                      {language === \"en\" ? \"Analysis generated on\" : \"ë¶„ì„ ìƒì„± ì¼ì‹œ:\"} {new Date(aiAnalysis.generatedAt).toLocaleString(language)}\n                    </p>\n                  </div>\n                )}\n              </Card>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Promotion Dialog */}\n      <Dialog open={isPromotionDialogOpen} onOpenChange={(open) => {\n        setIsPromotionDialogOpen(open);\n        if (!open) resetPromotionForm();\n      }}>\n        <DialogContent className=\"max-w-md max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingPromotion \n                ? (language === \"en\" ? \"Edit Promotion\" : \"í”„ë¡œëª¨ì…˜ ìˆ˜ì •\") \n                : (language === \"en\" ? \"Create Promotion\" : \"í”„ë¡œëª¨ì…˜ ìƒì„±\")}\n            </DialogTitle>\n            <DialogDescription>\n              {restaurantName}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Title (Korean)\" : \"ì œëª© (í•œêµ­ì–´)\"}\n              </label>\n              <Input\n                value={promotionTitle}\n                onChange={(e) => setPromotionTitle(e.target.value)}\n                placeholder={language === \"en\" ? \"e.g., 10% Discount\" : \"ì˜ˆ: 10% í• ì¸\"}\n                data-testid=\"input-promotion-title\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Title (English)\" : \"ì œëª© (ì˜ì–´)\"}\n              </label>\n              <Input\n                value={promotionTitleEn}\n                onChange={(e) => setPromotionTitleEn(e.target.value)}\n                placeholder=\"e.g., 10% Discount\"\n                data-testid=\"input-promotion-title-en\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Description (Korean)\" : \"ì„¤ëª… (í•œêµ­ì–´)\"}\n              </label>\n              <Textarea\n                value={promotionDescription}\n                onChange={(e) => setPromotionDescription(e.target.value)}\n                placeholder={language === \"en\" ? \"Promotion details...\" : \"í”„ë¡œëª¨ì…˜ ìƒì„¸ ë‚´ìš©...\"}\n                rows={3}\n                data-testid=\"textarea-promotion-description\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Description (English)\" : \"ì„¤ëª… (ì˜ì–´)\"}\n              </label>\n              <Textarea\n                value={promotionDescriptionEn}\n                onChange={(e) => setPromotionDescriptionEn(e.target.value)}\n                placeholder=\"Promotion details...\"\n                rows={3}\n                data-testid=\"textarea-promotion-description-en\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Discount Type\" : \"í• ì¸ ìœ í˜•\"}\n              </label>\n              <Select value={discountType} onValueChange={(value) => setDiscountType(value as any)}>\n                <SelectTrigger data-testid=\"select-discount-type\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"percentage\">\n                    {language === \"en\" ? \"Percentage (%)\" : \"í¼ì„¼íŠ¸ (%)\"}\n                  </SelectItem>\n                  <SelectItem value=\"amount\">\n                    {language === \"en\" ? \"Fixed Amount (â‚©)\" : \"ê³ ì • ê¸ˆì•¡ (â‚©)\"}\n                  </SelectItem>\n                  <SelectItem value=\"special\">\n                    {language === \"en\" ? \"Special Offer\" : \"íŠ¹ë³„ ì œì•ˆ\"}\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {discountType !== \"special\" && (\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Discount Value\" : \"í• ì¸ ê°’\"}\n                </label>\n                <Input\n                  type=\"number\"\n                  value={discountValue}\n                  onChange={(e) => setDiscountValue(e.target.value)}\n                  placeholder={discountType === \"percentage\" ? \"10\" : \"5000\"}\n                  data-testid=\"input-discount-value\"\n                />\n              </div>\n            )}\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Start Date\" : \"ì‹œì‘ì¼\"}\n                </label>\n                <Input\n                  type=\"date\"\n                  value={startDate}\n                  onChange={(e) => setStartDate(e.target.value)}\n                  data-testid=\"input-start-date\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"End Date\" : \"ì¢…ë£Œì¼\"}\n                </label>\n                <Input\n                  type=\"date\"\n                  value={endDate}\n                  onChange={(e) => setEndDate(e.target.value)}\n                  data-testid=\"input-end-date\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsPromotionDialogOpen(false);\n                resetPromotionForm();\n              }}\n              data-testid=\"button-cancel-promotion\"\n            >\n              {language === \"en\" ? \"Cancel\" : \"ì·¨ì†Œ\"}\n            </Button>\n            <Button\n              onClick={handleSubmitPromotion}\n              disabled={createPromotionMutation.isPending || updatePromotionMutation.isPending}\n              data-testid=\"button-submit-promotion\"\n            >\n              {(createPromotionMutation.isPending || updatePromotionMutation.isPending) \n                ? \"...\" \n                : (language === \"en\" ? \"Save\" : \"ì €ì¥\")}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Image Upload Dialog */}\n      <Dialog open={isImageDialogOpen} onOpenChange={(open) => {\n        setIsImageDialogOpen(open);\n        if (!open) setSelectedImageFile(null);\n      }}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>\n              {language === \"en\" ? \"Add Restaurant Image\" : \"ë ˆìŠ¤í† ë‘ ì´ë¯¸ì§€ ì¶”ê°€\"}\n            </DialogTitle>\n            <DialogDescription>\n              {restaurantName}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Select Image File\" : \"ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ\"}\n              </label>\n              <Input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={(e) => {\n                  const file = e.target.files?.[0];\n                  if (file) {\n                    if (file.size > 5 * 1024 * 1024) {\n                      toast({\n                        title: language === \"en\" ? \"File too large\" : \"íŒŒì¼ì´ ë„ˆë¬´ í½ë‹ˆë‹¤\",\n                        description: language === \"en\" ? \"Maximum file size is 5MB\" : \"ìµœëŒ€ íŒŒì¼ í¬ê¸°ëŠ” 5MBì…ë‹ˆë‹¤\",\n                        variant: \"destructive\",\n                      });\n                      return;\n                    }\n                    setSelectedImageFile(file);\n                  }\n                }}\n                data-testid=\"input-image-file\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                {language === \"en\" \n                  ? \"Upload an image file (JPG, PNG, GIF, WebP). Max 5MB\" \n                  : \"ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš” (JPG, PNG, GIF, WebP). ìµœëŒ€ 5MB\"}\n              </p>\n            </div>\n\n            {selectedImageFile && (\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Preview\" : \"ë¯¸ë¦¬ë³´ê¸°\"}\n                </label>\n                <div className=\"aspect-video rounded-lg overflow-hidden bg-muted\">\n                  <img\n                    src={URL.createObjectURL(selectedImageFile)}\n                    alt=\"Preview\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-2\">\n                  {selectedImageFile.name} ({(selectedImageFile.size / 1024 / 1024).toFixed(2)} MB)\n                </p>\n              </div>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsImageDialogOpen(false);\n                setSelectedImageFile(null);\n              }}\n              data-testid=\"button-cancel-image\"\n            >\n              {language === \"en\" ? \"Cancel\" : \"ì·¨ì†Œ\"}\n            </Button>\n            <Button\n              onClick={() => selectedImageFile && uploadImageMutation.mutate(selectedImageFile)}\n              disabled={!selectedImageFile || uploadImageMutation.isPending}\n              data-testid=\"button-submit-image\"\n            >\n              {uploadImageMutation.isPending \n                ? \"...\" \n                : (language === \"en\" ? \"Upload Image\" : \"ì´ë¯¸ì§€ ì—…ë¡œë“œ\")}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Review Response Dialog */}\n      <Dialog open={isResponseDialogOpen} onOpenChange={(open) => {\n        setIsResponseDialogOpen(open);\n        if (!open) {\n          setSelectedReview(null);\n          setResponseText(\"\");\n        }\n      }}>\n        <DialogContent className=\"max-w-md\">\n          <DialogHeader>\n            <DialogTitle>\n              {selectedReview?.response \n                ? (language === \"en\" ? \"Edit Response\" : \"ì‘ë‹µ ìˆ˜ì •\") \n                : (language === \"en\" ? \"Respond to Review\" : \"ë¦¬ë·°ì— ì‘ë‹µí•˜ê¸°\")}\n            </DialogTitle>\n            <DialogDescription>\n              {selectedReview && (\n                <div className=\"mt-3 p-3 bg-muted rounded-lg\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <p className=\"font-medium text-sm\">{selectedReview.userName}</p>\n                    <div className=\"flex items-center gap-1\">\n                      {Array.from({ length: selectedReview.rating }).map((_, i) => (\n                        <Star\n                          key={i}\n                          className=\"w-3 h-3 fill-[hsl(var(--accent-success))] text-[hsl(var(--accent-success))]\"\n                        />\n                      ))}\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">{selectedReview.comment}</p>\n                </div>\n              )}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Your Response\" : \"ê·€í•˜ì˜ ì‘ë‹µ\"}\n              </label>\n              <Textarea\n                value={responseText}\n                onChange={(e) => setResponseText(e.target.value)}\n                placeholder={language === \"en\" \n                  ? \"Thank you for your review! We're glad you enjoyed...\" \n                  : \"ë¦¬ë·° ê°ì‚¬í•©ë‹ˆë‹¤! ì¦ê±°ìš´ ì‹œê°„ ë³´ë‚´ì…¨ë‹¤ë‹ˆ...\"}\n                rows={5}\n                data-testid=\"textarea-response\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-2\">\n                {language === \"en\"\n                  ? \"Be professional and courteous in your response\"\n                  : \"ì „ë¬¸ì ì´ê³  ì •ì¤‘í•˜ê²Œ ì‘ë‹µí•˜ì„¸ìš”\"}\n              </p>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsResponseDialogOpen(false);\n                setSelectedReview(null);\n                setResponseText(\"\");\n              }}\n              data-testid=\"button-cancel-response\"\n            >\n              {language === \"en\" ? \"Cancel\" : \"ì·¨ì†Œ\"}\n            </Button>\n            <Button\n              onClick={handleSubmitResponse}\n              disabled={!responseText.trim() || createResponseMutation.isPending || updateResponseMutation.isPending}\n              data-testid=\"button-submit-response\"\n            >\n              {(createResponseMutation.isPending || updateResponseMutation.isPending) \n                ? \"...\" \n                : (language === \"en\" ? \"Submit Response\" : \"ì‘ë‹µ ì œì¶œ\")}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n\n      {/* Menu Dialog */}\n      <Dialog open={isMenuDialogOpen} onOpenChange={(open) => {\n        setIsMenuDialogOpen(open);\n        if (!open) resetMenuForm();\n      }}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {editingMenu \n                ? (language === \"en\" ? \"Edit Menu Item\" : \"ë©”ë‰´ ìˆ˜ì •\") \n                : (language === \"en\" ? \"Add Menu Item\" : \"ë©”ë‰´ ì¶”ê°€\")}\n            </DialogTitle>\n            <DialogDescription>\n              {restaurantName}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Name (Korean)\" : \"ì´ë¦„ (í•œêµ­ì–´)\"} <span className=\"text-destructive\">*</span>\n                </label>\n                <Input\n                  value={menuNameKo}\n                  onChange={(e) => setMenuNameKo(e.target.value)}\n                  placeholder={language === \"en\" ? \"e.g., ê¹€ì¹˜ì°Œê°œ\" : \"ì˜ˆ: ê¹€ì¹˜ì°Œê°œ\"}\n                  data-testid=\"input-menu-name-ko\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Name (English)\" : \"ì´ë¦„ (ì˜ì–´)\"} <span className=\"text-destructive\">*</span>\n                </label>\n                <Input\n                  value={menuNameEn}\n                  onChange={(e) => setMenuNameEn(e.target.value)}\n                  placeholder=\"e.g., Kimchi Stew\"\n                  data-testid=\"input-menu-name-en\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Description (Korean)\" : \"ì„¤ëª… (í•œêµ­ì–´)\"}\n                </label>\n                <Textarea\n                  value={menuDescKo}\n                  onChange={(e) => setMenuDescKo(e.target.value)}\n                  placeholder={language === \"en\" ? \"Menu description...\" : \"ë©”ë‰´ ì„¤ëª…...\"}\n                  rows={3}\n                  data-testid=\"textarea-menu-desc-ko\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Description (English)\" : \"ì„¤ëª… (ì˜ì–´)\"}\n                </label>\n                <Textarea\n                  value={menuDescEn}\n                  onChange={(e) => setMenuDescEn(e.target.value)}\n                  placeholder=\"Menu description...\"\n                  rows={3}\n                  data-testid=\"textarea-menu-desc-en\"\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Price (â‚©)\" : \"ê°€ê²© (â‚©)\"} <span className=\"text-destructive\">*</span>\n                </label>\n                <Input\n                  type=\"number\"\n                  value={menuPrice}\n                  onChange={(e) => setMenuPrice(e.target.value)}\n                  placeholder=\"15000\"\n                  data-testid=\"input-menu-price\"\n                />\n              </div>\n\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">\n                  {language === \"en\" ? \"Category\" : \"ì¹´í…Œê³ ë¦¬\"}\n                </label>\n                <Input\n                  value={menuCategory}\n                  onChange={(e) => setMenuCategory(e.target.value)}\n                  placeholder={language === \"en\" ? \"e.g., Main Dish\" : \"ì˜ˆ: ë©”ì¸ ìš”ë¦¬\"}\n                  data-testid=\"input-menu-category\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">\n                {language === \"en\" ? \"Image URL\" : \"ì´ë¯¸ì§€ URL\"}\n              </label>\n              <Input\n                value={menuImageUrl}\n                onChange={(e) => setMenuImageUrl(e.target.value)}\n                placeholder=\"https://example.com/menu-image.jpg\"\n                data-testid=\"input-menu-image-url\"\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                <label className=\"text-sm font-medium\">\n                  {language === \"en\" ? \"Popular Item\" : \"ì¸ê¸° ë©”ë‰´\"}\n                </label>\n                <Switch\n                  checked={menuIsPopular}\n                  onCheckedChange={setMenuIsPopular}\n                  data-testid=\"switch-menu-is-popular\"\n                />\n              </div>\n\n              <div className=\"flex items-center justify-between p-3 border rounded-lg\">\n                <label className=\"text-sm font-medium\">\n                  {language === \"en\" ? \"Recommended\" : \"ì¶”ì²œ ë©”ë‰´\"}\n                </label>\n                <Switch\n                  checked={menuIsRecommended}\n                  onCheckedChange={setMenuIsRecommended}\n                  data-testid=\"switch-menu-is-recommended\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setIsMenuDialogOpen(false);\n                resetMenuForm();\n              }}\n              data-testid=\"button-cancel-menu\"\n            >\n              {language === \"en\" ? \"Cancel\" : \"ì·¨ì†Œ\"}\n            </Button>\n            <Button\n              onClick={handleSubmitMenu}\n              disabled={createMenuMutation.isPending || updateMenuMutation.isPending}\n              data-testid=\"button-submit-menu\"\n            >\n              {(createMenuMutation.isPending || updateMenuMutation.isPending) \n                ? \"...\" \n                : (language === \"en\" ? \"Save\" : \"ì €ì¥\")}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","size_bytes":75418},"client/src/i18n.ts":{"content":"import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport HttpApi from 'i18next-http-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\n\ni18n\n  .use(HttpApi)\n  .use(LanguageDetector)\n  .use(initReactI18next)\n  .init({\n    fallbackLng: 'en',\n    supportedLngs: ['en', 'ko', 'ja', 'zh-CN', 'zh-TW', 'es', 'fr', 'de', 'ru'],\n    interpolation: {\n      escapeValue: false,\n    },\n    backend: {\n      loadPath: '/locales/{{lng}}/translation.json',\n    },\n    detection: {\n      order: ['localStorage', 'navigator'],\n      caches: ['localStorage'],\n    },\n    react: {\n      useSuspense: true,\n    },\n  });\n\nexport default i18n;\n","size_bytes":675},"client/src/pages/admin/AdminDashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Users, UtensilsCrossed, MessageSquare, Megaphone, AlertCircle, FileText, HelpCircle, Handshake, Star, ChevronRight } from \"lucide-react\";\nimport { Bar, BarChart, CartesianGrid, XAxis, YAxis, ResponsiveContainer, Tooltip, Legend, Line, LineChart } from \"recharts\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Link } from \"wouter\";\n\ninterface DashboardStats {\n  totalRestaurants: number;\n  totalUsers: number;\n  totalReviews: number;\n  totalAnnouncements: number;\n  recentUsers: any[];\n  recentReviews: any[];\n  restaurantsByCuisine: { cuisine: string; count: number }[];\n  reviewsPerDay: { date: string; count: number }[];\n}\n\ninterface PriorityTask {\n  id: string;\n  title: string;\n  description: string;\n  count: number;\n  priority: \"high\" | \"medium\" | \"low\";\n  link: string;\n  icon: React.ComponentType<{ className?: string }>;\n}\n\ninterface PriorityTasksData {\n  pendingApplications: any[];\n  pendingOwnerInquiries: any[];\n  pendingCustomerInquiries: any[];\n  pendingPartnershipInquiries: any[];\n}\n\nexport default function AdminDashboard() {\n  const { data: stats, isLoading } = useQuery<DashboardStats>({\n    queryKey: [\"/api/admin/dashboard/stats\"],\n  });\n\n  const { data: priorityTasksData, isLoading: tasksLoading } = useQuery<PriorityTasksData>({\n    queryKey: [\"/api/admin/dashboard/priority-tasks\"],\n  });\n\n  // Transform priority tasks data into display format\n  const priorityTasks: PriorityTask[] = priorityTasksData ? [\n    {\n      id: \"restaurant-applications\",\n      title: \"Restaurant Applications\",\n      description: \"New partnership applications pending review\",\n      count: priorityTasksData.pendingApplications?.length || 0,\n      priority: \"high\" as const,\n      link: \"/admin/restaurant-applications\",\n      icon: FileText,\n    },\n    {\n      id: \"owner-inquiries\",\n      title: \"Owner Inquiries\",\n      description: \"Restaurant owner support requests\",\n      count: priorityTasksData.pendingOwnerInquiries?.length || 0,\n      priority: \"medium\" as const,\n      link: \"/admin/owner-inquiries\",\n      icon: HelpCircle,\n    },\n    {\n      id: \"customer-inquiries\",\n      title: \"Customer Inquiries\",\n      description: \"Customer support requests\",\n      count: priorityTasksData.pendingCustomerInquiries?.length || 0,\n      priority: \"medium\" as const,\n      link: \"/admin/customer-inquiries\",\n      icon: MessageSquare,\n    },\n    {\n      id: \"partnership-inquiries\",\n      title: \"Partnership Inquiries\",\n      description: \"Business partnership requests\",\n      count: priorityTasksData.pendingPartnershipInquiries?.length || 0,\n      priority: \"low\" as const,\n      link: \"/admin/partnership-inquiries\",\n      icon: Handshake,\n    },\n  ].filter(task => task.count > 0) : [];\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case \"high\":\n        return \"bg-red-500/10 text-red-600 dark:text-red-400\";\n      case \"medium\":\n        return \"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400\";\n      default:\n        return \"bg-blue-500/10 text-blue-600 dark:text-blue-400\";\n    }\n  };\n\n  const statCards = [\n    {\n      title: \"Total Restaurants\",\n      value: stats?.totalRestaurants || 0,\n      icon: UtensilsCrossed,\n      color: \"text-blue-600\",\n    },\n    {\n      title: \"Total Users\",\n      value: stats?.totalUsers || 0,\n      icon: Users,\n      color: \"text-green-600\",\n    },\n    {\n      title: \"Total Reviews\",\n      value: stats?.totalReviews || 0,\n      icon: MessageSquare,\n      color: \"text-purple-600\",\n    },\n    {\n      title: \"Announcements\",\n      value: stats?.totalAnnouncements || 0,\n      icon: Megaphone,\n      color: \"text-orange-600\",\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Admin Dashboard</h1>\n        <p className=\"text-muted-foreground\">Overview of platform statistics</p>\n      </div>\n\n      {/* AI Priority Tasks Section */}\n      <Card className=\"p-6 border-primary/20 bg-gradient-to-br from-primary/5 to-transparent\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"p-2 rounded-lg bg-primary/10\">\n            <AlertCircle className=\"w-6 h-6 text-primary\" />\n          </div>\n          <div>\n            <h2 className=\"text-xl font-semibold\">AI Priority Tasks</h2>\n            <p className=\"text-sm text-muted-foreground\">\n              Items requiring immediate attention\n            </p>\n          </div>\n        </div>\n\n        {tasksLoading ? (\n          <div className=\"flex items-center justify-center h-40\">\n            <div className=\"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : !priorityTasks || priorityTasks.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <p className=\"text-muted-foreground\">No urgent tasks at the moment. Great job!</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {priorityTasks.map((task) => (\n              <Link key={task.id} href={task.link}>\n                <Card className=\"p-4 hover-elevate active-elevate-2 cursor-pointer h-full\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`p-2 rounded-lg ${getPriorityColor(task.priority)}`}>\n                        <task.icon className=\"w-4 h-4\" />\n                      </div>\n                      <Badge variant={task.priority === \"high\" ? \"destructive\" : \"secondary\"}>\n                        {task.count}\n                      </Badge>\n                    </div>\n                    <ChevronRight className=\"w-4 h-4 text-muted-foreground\" />\n                  </div>\n                  <h3 className=\"font-semibold mb-1\">{task.title}</h3>\n                  <p className=\"text-sm text-muted-foreground\">{task.description}</p>\n                </Card>\n              </Link>\n            ))}\n          </div>\n        )}\n      </Card>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {statCards.map((stat) => (\n          <Card key={stat.title} className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{stat.title}</p>\n                <p className=\"text-3xl font-bold mt-2\">{stat.value}</p>\n              </div>\n              <stat.icon className={`w-12 h-12 ${stat.color}`} />\n            </div>\n          </Card>\n        ))}\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Restaurants by Cuisine */}\n        <Card className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Restaurants by Cuisine</h3>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={stats?.restaurantsByCuisine || []}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"cuisine\" />\n              <YAxis />\n              <Tooltip />\n              <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </Card>\n\n        {/* Reviews Per Day */}\n        <Card className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Reviews (Last 30 Days)</h3>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <LineChart data={stats?.reviewsPerDay || []}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"date\" />\n              <YAxis />\n              <Tooltip />\n              <Legend />\n              <Line type=\"monotone\" dataKey=\"count\" stroke=\"hsl(var(--primary))\" strokeWidth={2} />\n            </LineChart>\n          </ResponsiveContainer>\n        </Card>\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Recent Users */}\n        <Card className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Recent Users</h3>\n          <div className=\"space-y-3\">\n            {stats?.recentUsers.slice(0, 5).map((user) => (\n              <div key={user.id} className=\"flex items-center gap-3 p-3 rounded-lg bg-muted\">\n                <div className=\"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold\">\n                  {user.firstName?.[0] || \"U\"}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-medium truncate\">{user.firstName} {user.lastName}</p>\n                  <p className=\"text-sm text-muted-foreground truncate\">{user.email}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n\n        {/* Recent Reviews */}\n        <Card className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Recent Reviews</h3>\n          <div className=\"space-y-3\">\n            {stats?.recentReviews.slice(0, 5).map((review) => (\n              <div key={review.id} className=\"p-3 rounded-lg bg-muted\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <p className=\"font-medium\">{review.userName}</p>\n                  <div className=\"flex items-center gap-1\">\n                    <span className=\"text-yellow-500\">â˜…</span>\n                    <span className=\"text-sm font-medium\">{review.rating}</span>\n                  </div>\n                </div>\n                <p className=\"text-sm text-muted-foreground line-clamp-2\">{review.comment}</p>\n              </div>\n            ))}\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":10080},"client/src/components/AdminSidebar.tsx":{"content":"import { useState } from \"react\";\nimport { \n  Home, \n  Users, \n  UtensilsCrossed, \n  MessageSquare, \n  Megaphone, \n  LayoutDashboard,\n  ChevronDown,\n  ChevronRight,\n  UserCog,\n  FileText,\n  CreditCard,\n  Bell,\n  UserCheck,\n  BarChart3,\n  Video,\n  BookOpen,\n  Calendar,\n  HelpCircle,\n  Handshake\n} from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSub,\n  SidebarMenuSubItem,\n  SidebarMenuSubButton,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from \"@/components/ui/collapsible\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\ninterface MenuItem {\n  title: string;\n  url?: string;\n  icon: React.ComponentType<{ className?: string }>;\n  items?: MenuItem[];\n}\n\nconst menuItems: MenuItem[] = [\n  {\n    title: \"Dashboard\",\n    url: \"/admin\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"ë ˆìŠ¤í† ë‘\",\n    icon: UtensilsCrossed,\n    items: [\n      {\n        title: \"ë ˆìŠ¤í† ë‘ ê´€ë¦¬\",\n        url: \"/admin/restaurants\",\n        icon: UtensilsCrossed,\n      },\n    ],\n  },\n  {\n    title: \"ê´‘ê³ ì—…ì²´ê´€ë¦¬\",\n    icon: UserCog,\n    items: [\n      {\n        title: \"ì…ì ì‹ ì²­\",\n        url: \"/admin/restaurants/applications\",\n        icon: FileText,\n      },\n      {\n        title: \"ì—…ì£¼ ë¬¸ì˜\",\n        url: \"/admin/restaurants/owner-inquiries\",\n        icon: HelpCircle,\n      },\n      {\n        title: \"ê²°ì œ ë‚´ì—­\",\n        url: \"/admin/restaurants/payments\",\n        icon: CreditCard,\n      },\n      {\n        title: \"ì—…ì£¼ ê³µì§€\",\n        url: \"/admin/restaurants/owner-notices\",\n        icon: Bell,\n      },\n    ],\n  },\n  {\n    title: \"Users\",\n    icon: Users,\n    items: [\n      {\n        title: \"User Management\",\n        url: \"/admin/users\",\n        icon: UserCheck,\n      },\n      {\n        title: \"By Tier\",\n        url: \"/admin/users/tiers\",\n        icon: Users,\n      },\n      {\n        title: \"Analytics\",\n        url: \"/admin/users/analytics\",\n        icon: BarChart3,\n      },\n    ],\n  },\n  {\n    title: \"Reviews\",\n    url: \"/admin/reviews\",\n    icon: MessageSquare,\n  },\n  {\n    title: \"Content\",\n    icon: Megaphone,\n    items: [\n      {\n        title: \"YouTube Videos\",\n        url: \"/admin/content/youtube\",\n        icon: Video,\n      },\n      {\n        title: \"Blog Posts\",\n        url: \"/admin/content/blog\",\n        icon: BookOpen,\n      },\n      {\n        title: \"Events\",\n        url: \"/admin/content/events\",\n        icon: Calendar,\n      },\n      {\n        title: \"Announcements\",\n        url: \"/admin/content/announcements\",\n        icon: Bell,\n      },\n    ],\n  },\n  {\n    title: \"Inquiries\",\n    icon: HelpCircle,\n    items: [\n      {\n        title: \"Customer Inquiries\",\n        url: \"/admin/inquiries/customer\",\n        icon: MessageSquare,\n      },\n      {\n        title: \"Partnership Inquiries\",\n        url: \"/admin/inquiries/partnership\",\n        icon: Handshake,\n      },\n    ],\n  },\n];\n\ninterface MenuItemComponentProps {\n  item: MenuItem;\n  level?: number;\n}\n\nfunction MenuItemComponent({ item, level = 0 }: MenuItemComponentProps) {\n  const [location] = useLocation();\n  const [isOpen, setIsOpen] = useState(() => {\n    if (!item.items) return false;\n    \n    const checkActive = (items: MenuItem[]): boolean => {\n      return items.some(subItem => {\n        if (subItem.url && location.startsWith(subItem.url)) return true;\n        if (subItem.items) return checkActive(subItem.items);\n        return false;\n      });\n    };\n    \n    return checkActive(item.items);\n  });\n\n  if (item.items) {\n    return (\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <SidebarMenuItem>\n          <CollapsibleTrigger asChild>\n            <SidebarMenuButton\n              data-testid={`button-menu-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}\n            >\n              <item.icon />\n              <span>{item.title}</span>\n              {isOpen ? (\n                <ChevronDown className=\"ml-auto h-4 w-4\" />\n              ) : (\n                <ChevronRight className=\"ml-auto h-4 w-4\" />\n              )}\n            </SidebarMenuButton>\n          </CollapsibleTrigger>\n          <CollapsibleContent>\n            <SidebarMenuSub>\n              {item.items.map((subItem) => (\n                <MenuItemComponent key={subItem.title} item={subItem} level={level + 1} />\n              ))}\n            </SidebarMenuSub>\n          </CollapsibleContent>\n        </SidebarMenuItem>\n      </Collapsible>\n    );\n  }\n\n  if (level > 0) {\n    return (\n      <SidebarMenuSubItem>\n        <SidebarMenuSubButton\n          asChild\n          isActive={location === item.url}\n        >\n          <Link href={item.url!} data-testid={`link-admin-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n            <item.icon className=\"h-4 w-4\" />\n            <span>{item.title}</span>\n          </Link>\n        </SidebarMenuSubButton>\n      </SidebarMenuSubItem>\n    );\n  }\n\n  return (\n    <SidebarMenuItem>\n      <SidebarMenuButton asChild isActive={location === item.url}>\n        <Link href={item.url!} data-testid={`link-admin-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n          <item.icon />\n          <span>{item.title}</span>\n        </Link>\n      </SidebarMenuButton>\n    </SidebarMenuItem>\n  );\n}\n\nexport function AdminSidebar() {\n  const { user } = useAuth();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b p-4\">\n        <div className=\"flex items-center gap-2\">\n          <img\n            src=\"/attached_assets/í°ìƒ‰ë°°ê²½pngë©”ì¸_1761805151469.png\"\n            alt=\"í•œì‹ë‹¹\"\n            className=\"h-8\"\n          />\n          <div>\n            <h2 className=\"font-bold\">í•œì‹ë‹¹</h2>\n            <p className=\"text-xs text-muted-foreground\">Admin Panel</p>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Management</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <MenuItemComponent key={item.title} item={item} />\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"border-t p-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-sm font-semibold\">\n            {user?.firstName?.[0] || \"A\"}\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium truncate\">{user?.firstName} {user?.lastName}</p>\n            <p className=\"text-xs text-muted-foreground truncate\">{user?.email}</p>\n          </div>\n        </div>\n        <Link href=\"/\">\n          <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" data-testid=\"button-back-to-main\">\n            <Home className=\"w-4 h-4 mr-2\" />\n            Main Site\n          </Button>\n        </Link>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":7244},"client/src/pages/admin/AdminContent.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Plus, Pencil, Trash2 } from \"lucide-react\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport type { Announcement, EventBanner } from \"@shared/schema\";\n\nexport default function AdminContent() {\n  const { data: announcements, isLoading: loadingAnnouncements } = useQuery<Announcement[]>({\n    queryKey: [\"/api/admin/announcements\"],\n  });\n\n  const { data: banners, isLoading: loadingBanners } = useQuery<EventBanner[]>({\n    queryKey: [\"/api/admin/event-banners\"],\n  });\n\n  const deleteAnnouncementMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await fetch(`/api/admin/announcements/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete announcement\");\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/announcements\"] });\n    },\n  });\n\n  const deleteBannerMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await fetch(`/api/admin/event-banners/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!response.ok) throw new Error(\"Failed to delete banner\");\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/event-banners\"] });\n    },\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Content Management</h1>\n        <p className=\"text-muted-foreground\">Manage announcements and event banners</p>\n      </div>\n\n      <Tabs defaultValue=\"announcements\">\n        <TabsList>\n          <TabsTrigger value=\"announcements\">Announcements</TabsTrigger>\n          <TabsTrigger value=\"banners\">Event Banners</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"announcements\" className=\"space-y-4\">\n          <Button data-testid=\"button-add-announcement\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Announcement\n          </Button>\n\n          {loadingAnnouncements ? (\n            <div className=\"flex items-center justify-center h-64\">\n              <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {announcements?.map((announcement) => (\n                <Card key={announcement.id} className=\"p-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold mb-1\">{announcement.title}</h3>\n                      <p className=\"text-sm text-muted-foreground mb-2\">{announcement.titleEn}</p>\n                      <p className=\"text-sm\">{announcement.content}</p>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button variant=\"ghost\" size=\"sm\">\n                        <Pencil className=\"w-4 h-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => deleteAnnouncementMutation.mutate(announcement.id)}\n                        data-testid={`button-delete-announcement-${announcement.id}`}\n                      >\n                        <Trash2 className=\"w-4 h-4 text-destructive\" />\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"banners\" className=\"space-y-4\">\n          <Button data-testid=\"button-add-banner\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Event Banner\n          </Button>\n\n          {loadingBanners ? (\n            <div className=\"flex items-center justify-center h-64\">\n              <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {banners?.map((banner) => (\n                <Card key={banner.id} className=\"overflow-hidden\">\n                  <img\n                    src={banner.imageUrl}\n                    alt={banner.title}\n                    className=\"w-full h-40 object-cover\"\n                  />\n                  <div className=\"p-4\">\n                    <h3 className=\"font-semibold mb-1\">{banner.title}</h3>\n                    <p className=\"text-sm text-muted-foreground mb-2\">{banner.titleEn}</p>\n                    <div className=\"flex items-center justify-between mt-3\">\n                      <p className=\"text-xs text-muted-foreground\">\n                        {new Date(banner.startDate).toLocaleDateString()} - {new Date(banner.endDate).toLocaleDateString()}\n                      </p>\n                      <div className=\"flex gap-2\">\n                        <Button variant=\"ghost\" size=\"sm\">\n                          <Pencil className=\"w-4 h-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => deleteBannerMutation.mutate(banner.id)}\n                          data-testid={`button-delete-banner-${banner.id}`}\n                        >\n                          <Trash2 className=\"w-4 h-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","size_bytes":5889},"client/src/pages/admin/AdminRestaurants.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Search, DollarSign, Trash2, ChevronUp, ChevronDown, ChevronsUpDown } from \"lucide-react\";\nimport type { Restaurant } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertRestaurantSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\n\n// í•œêµ­ ë„ì‹œ > êµ¬ ë°ì´í„°\nconst KOREA_CITIES = {\n  \"ì„œìš¸\": [\"ê°•ë‚¨êµ¬\", \"ê°•ë™êµ¬\", \"ê°•ë¶êµ¬\", \"ê°•ì„œêµ¬\", \"ê´€ì•…êµ¬\", \"ê´‘ì§„êµ¬\", \"êµ¬ë¡œêµ¬\", \"ê¸ˆì²œêµ¬\", \"ë…¸ì›êµ¬\", \"ë„ë´‰êµ¬\", \"ë™ëŒ€ë¬¸êµ¬\", \"ë™ì‘êµ¬\", \"ë§ˆí¬êµ¬\", \"ì„œëŒ€ë¬¸êµ¬\", \"ì„œì´ˆêµ¬\", \"ì„±ë™êµ¬\", \"ì„±ë¶êµ¬\", \"ì†¡íŒŒêµ¬\", \"ì–‘ì²œêµ¬\", \"ì˜ë“±í¬êµ¬\", \"ìš©ì‚°êµ¬\", \"ì€í‰êµ¬\", \"ì¢…ë¡œêµ¬\", \"ì¤‘êµ¬\", \"ì¤‘ë‘êµ¬\"],\n  \"ë¶€ì‚°\": [\"ê°•ì„œêµ¬\", \"ê¸ˆì •êµ¬\", \"ê¸°ì¥êµ°\", \"ë‚¨êµ¬\", \"ë™êµ¬\", \"ë™ë˜êµ¬\", \"ë¶€ì‚°ì§„êµ¬\", \"ë¶êµ¬\", \"ì‚¬ìƒêµ¬\", \"ì‚¬í•˜êµ¬\", \"ì„œêµ¬\", \"ìˆ˜ì˜êµ¬\", \"ì—°ì œêµ¬\", \"ì˜ë„êµ¬\", \"ì¤‘êµ¬\", \"í•´ìš´ëŒ€êµ¬\"],\n  \"ëŒ€êµ¬\": [\"ë‚¨êµ¬\", \"ë‹¬ì„œêµ¬\", \"ë‹¬ì„±êµ°\", \"ë™êµ¬\", \"ë¶êµ¬\", \"ì„œêµ¬\", \"ìˆ˜ì„±êµ¬\", \"ì¤‘êµ¬\"],\n  \"ì¸ì²œ\": [\"ê°•í™”êµ°\", \"ê³„ì–‘êµ¬\", \"ë‚¨ë™êµ¬\", \"ë™êµ¬\", \"ë¯¸ì¶”í™€êµ¬\", \"ë¶€í‰êµ¬\", \"ì„œêµ¬\", \"ì—°ìˆ˜êµ¬\", \"ì˜¹ì§„êµ°\", \"ì¤‘êµ¬\"],\n  \"ê´‘ì£¼\": [\"ê´‘ì‚°êµ¬\", \"ë‚¨êµ¬\", \"ë™êµ¬\", \"ë¶êµ¬\", \"ì„œêµ¬\"],\n  \"ëŒ€ì „\": [\"ëŒ€ë•êµ¬\", \"ë™êµ¬\", \"ì„œêµ¬\", \"ìœ ì„±êµ¬\", \"ì¤‘êµ¬\"],\n  \"ìš¸ì‚°\": [\"ë‚¨êµ¬\", \"ë™êµ¬\", \"ë¶êµ¬\", \"ìš¸ì£¼êµ°\", \"ì¤‘êµ¬\"],\n  \"ì„¸ì¢…\": [\"ì„¸ì¢…ì‹œ\"],\n  \"ê²½ê¸°\": [\"ê³ ì–‘ì‹œ\", \"ê³¼ì²œì‹œ\", \"ê´‘ëª…ì‹œ\", \"ê´‘ì£¼ì‹œ\", \"êµ¬ë¦¬ì‹œ\", \"êµ°í¬ì‹œ\", \"ê¹€í¬ì‹œ\", \"ë‚¨ì–‘ì£¼ì‹œ\", \"ë™ë‘ì²œì‹œ\", \"ë¶€ì²œì‹œ\", \"ì„±ë‚¨ì‹œ\", \"ìˆ˜ì›ì‹œ\", \"ì‹œí¥ì‹œ\", \"ì•ˆì‚°ì‹œ\", \"ì•ˆì„±ì‹œ\", \"ì•ˆì–‘ì‹œ\", \"ì–‘ì£¼ì‹œ\", \"ì—¬ì£¼ì‹œ\", \"ì˜¤ì‚°ì‹œ\", \"ìš©ì¸ì‹œ\", \"ì˜ì™•ì‹œ\", \"ì˜ì •ë¶€ì‹œ\", \"ì´ì²œì‹œ\", \"íŒŒì£¼ì‹œ\", \"í‰íƒì‹œ\", \"í¬ì²œì‹œ\", \"í•˜ë‚¨ì‹œ\", \"í™”ì„±ì‹œ\"],\n};\n\n// ì£¼ìš” ì§€ì—­ (ë¹ ë¥¸ ê²€ìƒ‰ìš©)\nconst POPULAR_REGIONS = [\n  { city: \"ì„œìš¸\", district: \"ê°•ë‚¨êµ¬\", label: \"ê°•ë‚¨\" },\n  { city: \"ì„œìš¸\", district: \"í™ëŒ€/ë§ˆí¬êµ¬\", label: \"í™ëŒ€\" },\n  { city: \"ì„œìš¸\", district: \"ì¤‘êµ¬\", label: \"ëª…ë™\" },\n  { city: \"ì„œìš¸\", district: \"ì¢…ë¡œêµ¬\", label: \"ì¸ì‚¬ë™\" },\n  { city: \"ì„œìš¸\", district: \"ì†¡íŒŒêµ¬\", label: \"ì ì‹¤\" },\n  { city: \"ì„œìš¸\", district: \"ìš©ì‚°êµ¬\", label: \"ì´íƒœì›\" },\n  { city: \"ë¶€ì‚°\", district: \"í•´ìš´ëŒ€êµ¬\", label: \"í•´ìš´ëŒ€\" },\n  { city: \"ë¶€ì‚°\", district: \"ì¤‘êµ¬\", label: \"ë‚¨í¬ë™\" },\n];\n\ntype SortField = \"name\" | \"city\" | \"rating\" | \"reviewCount\" | \"visitors\" | \"popularity\";\ntype SortDirection = \"asc\" | \"desc\";\n\ninterface RestaurantWithRanking extends Restaurant {\n  popularityRank?: number;\n}\n\nexport default function AdminRestaurants() {\n  const { toast } = useToast();\n  \n  // Search & Filter State\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCity, setSelectedCity] = useState<string>(\"all\");\n  const [selectedDistrict, setSelectedDistrict] = useState<string>(\"all\");\n  const [selectedPopularRegion, setSelectedPopularRegion] = useState<string>(\"all\");\n  const [visitorPeriod, setVisitorPeriod] = useState<\"1d\" | \"7d\" | \"10d\" | \"1m\">(\"1m\");\n  \n  // Sorting State\n  const [sortField, setSortField] = useState<SortField>(\"popularity\");\n  const [sortDirection, setSortDirection] = useState<SortDirection>(\"desc\");\n  \n  // Dialog State\n  const [editingRestaurant, setEditingRestaurant] = useState<Restaurant | null>(null);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n\n  // Fetch restaurants\n  const { data: restaurants = [], isLoading } = useQuery<Restaurant[]>({\n    queryKey: [\"/api/restaurants\"],\n  });\n\n  // Calculate popularity rankings\n  const restaurantsWithRanking: RestaurantWithRanking[] = restaurants\n    .map((r: Restaurant) => ({ ...r }))\n    .sort((a: Restaurant, b: Restaurant) => b.visitors1m - a.visitors1m)\n    .map((r: Restaurant, index: number) => ({ ...r, popularityRank: index + 1 }));\n\n  // Filter & Sort\n  const filteredAndSortedRestaurants = restaurantsWithRanking\n    .filter(r => {\n      // Search query\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        const matchesName = r.name.toLowerCase().includes(query) || \n                          r.nameEn.toLowerCase().includes(query);\n        const matchesAddress = r.address.toLowerCase().includes(query);\n        const matchesPhone = r.phone?.toLowerCase().includes(query);\n        if (!matchesName && !matchesAddress && !matchesPhone) return false;\n      }\n\n      // Popular region filter\n      if (selectedPopularRegion !== \"all\") {\n        const region = POPULAR_REGIONS.find(pr => pr.label === selectedPopularRegion);\n        if (region) {\n          if (r.city !== region.city || r.districtDetail !== region.district) {\n            return false;\n          }\n        }\n      } else {\n        // City & District filter\n        if (selectedCity !== \"all\" && r.city !== selectedCity) return false;\n        if (selectedDistrict !== \"all\" && r.districtDetail !== selectedDistrict) return false;\n      }\n\n      return true;\n    })\n    .sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortField) {\n        case \"name\":\n          comparison = a.name.localeCompare(b.name);\n          break;\n        case \"city\":\n          comparison = (a.city || \"\").localeCompare(b.city || \"\");\n          break;\n        case \"rating\":\n          comparison = a.rating - b.rating;\n          break;\n        case \"reviewCount\":\n          comparison = a.reviewCount - b.reviewCount;\n          break;\n        case \"visitors\":\n          const aVisitors = visitorPeriod === \"1d\" ? a.visitors1d :\n                          visitorPeriod === \"7d\" ? a.visitors7d :\n                          visitorPeriod === \"10d\" ? a.visitors10d : a.visitors1m;\n          const bVisitors = visitorPeriod === \"1d\" ? b.visitors1d :\n                          visitorPeriod === \"7d\" ? b.visitors7d :\n                          visitorPeriod === \"10d\" ? b.visitors10d : b.visitors1m;\n          comparison = aVisitors - bVisitors;\n          break;\n        case \"popularity\":\n          comparison = (a.popularityRank || 0) - (b.popularityRank || 0);\n          break;\n      }\n      \n      return sortDirection === \"asc\" ? comparison : -comparison;\n    });\n\n  // Delete mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const res = await fetch(`/api/admin/restaurants/${id}`, {\n        method: \"DELETE\",\n      });\n      if (!res.ok) throw new Error(\"Failed to delete\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\"] });\n      toast({\n        title: \"ì‚­ì œ ì™„ë£Œ\",\n        description: \"ë ˆìŠ¤í† ë‘ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ë ˆìŠ¤í† ë‘ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Edit form\n  const form = useForm<z.infer<typeof insertRestaurantSchema>>({\n    resolver: zodResolver(insertRestaurantSchema),\n    defaultValues: {\n      name: \"\",\n      nameEn: \"\",\n      category: \"\",\n      cuisine: \"\",\n      district: \"\",\n      address: \"\",\n      description: \"\",\n      descriptionEn: \"\",\n      priceRange: 2,\n      imageUrl: \"\",\n      openHours: \"\",\n      phone: \"\",\n      isVegan: 0,\n      isHalal: 0,\n      isFeatured: 0,\n    },\n  });\n\n  // Update mutation\n  const updateMutation = useMutation({\n    mutationFn: async (data: { id: string; updates: z.infer<typeof insertRestaurantSchema> }) => {\n      const res = await fetch(`/api/admin/restaurants/${data.id}`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data.updates),\n      });\n      if (!res.ok) throw new Error(\"Failed to update\");\n      return res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/restaurants\"] });\n      setIsEditDialogOpen(false);\n      toast({\n        title: \"ìˆ˜ì • ì™„ë£Œ\",\n        description: \"ë ˆìŠ¤í† ë‘ ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ë ˆìŠ¤í† ë‘ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(prev => prev === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortField(field);\n      setSortDirection(\"desc\");\n    }\n  };\n\n  const getSortIcon = (field: SortField) => {\n    if (sortField !== field) {\n      return <ChevronsUpDown className=\"w-4 h-4 ml-1 text-muted-foreground\" />;\n    }\n    return sortDirection === \"asc\" ? \n      <ChevronUp className=\"w-4 h-4 ml-1\" /> : \n      <ChevronDown className=\"w-4 h-4 ml-1\" />;\n  };\n\n  const handleEdit = (restaurant: Restaurant) => {\n    setEditingRestaurant(restaurant);\n    form.reset({\n      name: restaurant.name,\n      nameEn: restaurant.nameEn,\n      category: restaurant.category,\n      cuisine: restaurant.cuisine,\n      district: restaurant.district,\n      address: restaurant.address,\n      description: restaurant.description,\n      descriptionEn: restaurant.descriptionEn,\n      priceRange: restaurant.priceRange,\n      imageUrl: restaurant.imageUrl,\n      openHours: restaurant.openHours,\n      phone: restaurant.phone || \"\",\n      latitude: restaurant.latitude,\n      longitude: restaurant.longitude,\n      isVegan: restaurant.isVegan,\n      isHalal: restaurant.isHalal,\n      isFeatured: restaurant.isFeatured,\n    });\n    setIsEditDialogOpen(true);\n  };\n\n  const handleSubmit = (data: z.infer<typeof insertRestaurantSchema>) => {\n    if (editingRestaurant) {\n      updateMutation.mutate({ id: editingRestaurant.id, updates: data });\n    }\n  };\n\n  const handleDelete = (id: string, name: string) => {\n    if (confirm(`\"${name}\" ë ˆìŠ¤í† ë‘ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleSearch = () => {\n    // Search is reactive, so this just triggers a re-render\n    // In a real app, you might want to add analytics tracking here\n  };\n\n  const getVisitorCount = (restaurant: Restaurant) => {\n    switch (visitorPeriod) {\n      case \"1d\": return restaurant.visitors1d;\n      case \"7d\": return restaurant.visitors7d;\n      case \"10d\": return restaurant.visitors10d;\n      case \"1m\": return restaurant.visitors1m;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">ë ˆìŠ¤í† ë‘ ê´€ë¦¬</h1>\n      </div>\n\n      {/* Search & Filter Section */}\n      <Card className=\"p-6\">\n        <div className=\"space-y-4\">\n          {/* Search Bar */}\n          <div className=\"flex gap-2\">\n            <Input\n              placeholder=\"ë ˆìŠ¤í† ë‘ëª…, ì£¼ì†Œ, ì „í™”ë²ˆí˜¸ ê²€ìƒ‰...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              data-testid=\"input-search\"\n              className=\"flex-1\"\n            />\n            <Button onClick={handleSearch} data-testid=\"button-search\">\n              <Search className=\"w-4 h-4 mr-2\" />\n              ê²€ìƒ‰\n            </Button>\n          </div>\n\n          {/* Popular Regions Quick Filter */}\n          <div className=\"space-y-2\">\n            <label className=\"text-sm font-medium\">ì£¼ìš” ì§€ì—­</label>\n            <div className=\"flex flex-wrap gap-2\">\n              <Button\n                variant={selectedPopularRegion === \"all\" ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => {\n                  setSelectedPopularRegion(\"all\");\n                  setSelectedCity(\"all\");\n                  setSelectedDistrict(\"all\");\n                }}\n                data-testid=\"button-region-all\"\n              >\n                ì „ì²´\n              </Button>\n              {POPULAR_REGIONS.map((region) => (\n                <Button\n                  key={region.label}\n                  variant={selectedPopularRegion === region.label ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setSelectedPopularRegion(region.label)}\n                  data-testid={`button-region-${region.label}`}\n                >\n                  {region.label}\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* City & District Filters */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ë„ì‹œ</label>\n              <Select\n                value={selectedCity}\n                onValueChange={(value) => {\n                  setSelectedCity(value);\n                  setSelectedDistrict(\"all\");\n                  setSelectedPopularRegion(\"all\");\n                }}\n              >\n                <SelectTrigger data-testid=\"select-city\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  {Object.keys(KOREA_CITIES).map((city) => (\n                    <SelectItem key={city} value={city}>\n                      {city}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">êµ¬/êµ°</label>\n              <Select\n                value={selectedDistrict}\n                onValueChange={(value) => {\n                  setSelectedDistrict(value);\n                  setSelectedPopularRegion(\"all\");\n                }}\n                disabled={selectedCity === \"all\"}\n              >\n                <SelectTrigger data-testid=\"select-district\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  {selectedCity !== \"all\" && KOREA_CITIES[selectedCity as keyof typeof KOREA_CITIES]?.map((district) => (\n                    <SelectItem key={district} value={district}>\n                      {district}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {/* Results */}\n      <Card>\n        <div className=\"p-4 border-b\">\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\">\n              ì´ {filteredAndSortedRestaurants.length}ê°œ ë ˆìŠ¤í† ë‘\n            </p>\n            <div className=\"flex items-center gap-2\">\n              <label className=\"text-sm\">ë°©ë¬¸ììˆ˜ ê¸°ì¤€:</label>\n              <Select value={visitorPeriod} onValueChange={(v) => setVisitorPeriod(v as any)}>\n                <SelectTrigger className=\"w-32\" data-testid=\"select-visitor-period\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"1d\">1ì¼</SelectItem>\n                  <SelectItem value=\"7d\">7ì¼</SelectItem>\n                  <SelectItem value=\"10d\">10ì¼</SelectItem>\n                  <SelectItem value=\"1m\">1ê°œì›”</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"name\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-name\"\n                    >\n                      ì—…ì²´ëª…\n                      {getSortIcon(\"name\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"city\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-city\"\n                    >\n                      ì§€ì—­\n                      {getSortIcon(\"city\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"rating\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-rating\"\n                    >\n                      í‰ì \n                      {getSortIcon(\"rating\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"reviewCount\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-reviews\"\n                    >\n                      ë¦¬ë·°ìˆ˜\n                      {getSortIcon(\"reviewCount\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"visitors\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-visitors\"\n                    >\n                      ë°©ë¬¸ììˆ˜\n                      {getSortIcon(\"visitors\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"popularity\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-popularity\"\n                    >\n                      ì¸ê¸°ìˆœìœ„\n                      {getSortIcon(\"popularity\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>ì‘ì—…</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredAndSortedRestaurants.map((restaurant) => (\n                  <TableRow key={restaurant.id}>\n                    <TableCell>\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() => handleEdit(restaurant)}\n                          className=\"text-left hover:underline font-medium\"\n                          data-testid={`link-edit-${restaurant.id}`}\n                        >\n                          {restaurant.name}\n                        </button>\n                        {restaurant.isFeatured === 1 && (\n                          <DollarSign className=\"w-4 h-4 text-primary\" data-testid={`icon-featured-${restaurant.id}`} />\n                        )}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      {restaurant.city && restaurant.districtDetail ? \n                        `${restaurant.city} > ${restaurant.districtDetail}` : \n                        restaurant.district}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\">\n                        â­ {restaurant.rating.toFixed(1)}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>{restaurant.reviewCount}</TableCell>\n                    <TableCell>{getVisitorCount(restaurant).toLocaleString()}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"secondary\">\n                        #{restaurant.popularityRank}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleDelete(restaurant.id, restaurant.name)}\n                        data-testid={`button-delete-${restaurant.id}`}\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        )}\n      </Card>\n\n      {/* Edit Dialog */}\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>ë ˆìŠ¤í† ë‘ ìˆ˜ì •</DialogTitle>\n            <DialogDescription>\n              ë ˆìŠ¤í† ë‘ ì •ë³´ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-6\">\n              {/* Basic Info */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold\">ê¸°ë³¸ ì •ë³´</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ë ˆìŠ¤í† ë‘ëª… (í•œê¸€)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"nameEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ë ˆìŠ¤í† ë‘ëª… (ì˜ë¬¸)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-name-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"category\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ì¹´í…Œê³ ë¦¬</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-category\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"cuisine\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ë©”ë‰´ íƒ€ì…</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-cuisine\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Location */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold\">ìœ„ì¹˜ ì •ë³´</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"district\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ì§€ì—­</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-district\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"address\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ìƒì„¸ ì£¼ì†Œ</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-address\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Description */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold\">ì„¤ëª…</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ì„¤ëª… (í•œê¸€)</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} rows={4} data-testid=\"input-description\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"descriptionEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ì„¤ëª… (ì˜ë¬¸)</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} rows={4} data-testid=\"input-description-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Contact & Hours */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold\">ì—°ë½ì²˜ ë° ìš´ì˜ì‹œê°„</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"phone\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ì „í™”ë²ˆí˜¸</FormLabel>\n                        <FormControl>\n                          <Input {...field} value={field.value || \"\"} placeholder=\"02-1234-5678\" data-testid=\"input-phone\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"openHours\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ìš´ì˜ì‹œê°„</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-open-hours\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Ratings & Reviews */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold\">í‰ì  ì •ë³´ (ë„¤ì´ë²„)</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"naverRating\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ë„¤ì´ë²„ í‰ì  (0-5)</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            step=\"0.1\"\n                            min=\"0\"\n                            max=\"5\"\n                            {...field}\n                            value={field.value || \"\"}\n                            onChange={(e) => field.onChange(e.target.value ? parseFloat(e.target.value) : null)}\n                            placeholder=\"4.5\"\n                            data-testid=\"input-naver-rating\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"naverReviewCount\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ë„¤ì´ë²„ ë¦¬ë·° ìˆ˜</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            {...field}\n                            value={field.value || \"\"}\n                            onChange={(e) => field.onChange(e.target.value ? parseInt(e.target.value) : null)}\n                            placeholder=\"1234\"\n                            data-testid=\"input-naver-review-count\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              {/* Options */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold\">ì˜µì…˜</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"priceRange\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ê°€ê²©ëŒ€ (1-4)</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            {...field}\n                            onChange={(e) => field.onChange(parseInt(e.target.value))}\n                            data-testid=\"input-price-range\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"imageUrl\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>ì´ë¯¸ì§€ URL</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-image-url\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"isFeatured\"\n                    render={({ field }) => (\n                      <FormItem className=\"flex items-center justify-between space-y-0\">\n                        <FormLabel>ê´‘ê³ ì—…ì²´</FormLabel>\n                        <FormControl>\n                          <Switch\n                            checked={field.value === 1}\n                            onCheckedChange={(checked) => field.onChange(checked ? 1 : 0)}\n                            data-testid=\"switch-featured\"\n                          />\n                        </FormControl>\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"isVegan\"\n                    render={({ field }) => (\n                      <FormItem className=\"flex items-center justify-between space-y-0\">\n                        <FormLabel>ë¹„ê±´</FormLabel>\n                        <FormControl>\n                          <Switch\n                            checked={field.value === 1}\n                            onCheckedChange={(checked) => field.onChange(checked ? 1 : 0)}\n                            data-testid=\"switch-vegan\"\n                          />\n                        </FormControl>\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"isHalal\"\n                    render={({ field }) => (\n                      <FormItem className=\"flex items-center justify-between space-y-0\">\n                        <FormLabel>í• ë„</FormLabel>\n                        <FormControl>\n                          <Switch\n                            checked={field.value === 1}\n                            onCheckedChange={(checked) => field.onChange(checked ? 1 : 0)}\n                            data-testid=\"switch-halal\"\n                          />\n                        </FormControl>\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setIsEditDialogOpen(false)}\n                  data-testid=\"button-cancel\"\n                >\n                  ì·¨ì†Œ\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={updateMutation.isPending}\n                  data-testid=\"button-save\"\n                >\n                  {updateMutation.isPending ? \"ì €ì¥ ì¤‘...\" : \"ì €ì¥\"}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":35013},"client/src/components/OptimizedImage.tsx":{"content":"import { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ntype OptimizedImageProps = {\n  src: string;\n  alt: string;\n  className?: string;\n  width?: number;\n  height?: number;\n  priority?: boolean;\n  objectFit?: \"cover\" | \"contain\" | \"fill\" | \"none\" | \"scale-down\";\n  onLoad?: () => void;\n  onError?: () => void;\n  \"data-testid\"?: string;\n};\n\nexport function OptimizedImage({\n  src,\n  alt,\n  className,\n  width,\n  height,\n  priority = false,\n  objectFit = \"cover\",\n  onLoad,\n  onError,\n  \"data-testid\": testId,\n}: OptimizedImageProps) {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [hasError, setHasError] = useState(false);\n\n  const handleLoad = () => {\n    setIsLoaded(true);\n    onLoad?.();\n  };\n\n  const handleError = () => {\n    setHasError(true);\n    onError?.();\n  };\n\n  const fallbackImage = \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect width='400' height='300' fill='%23f3f4f6'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='18' fill='%239ca3af'%3EImage%3C/text%3E%3C/svg%3E\";\n\n  return (\n    <div className={cn(\"relative overflow-hidden\", className)} style={{ width, height }}>\n      {!isLoaded && !hasError && (\n        <div className=\"absolute inset-0 bg-muted animate-pulse\" />\n      )}\n      <img\n        src={hasError ? fallbackImage : src}\n        alt={alt}\n        loading={priority ? \"eager\" : \"lazy\"}\n        decoding=\"async\"\n        className={cn(\n          \"w-full h-full transition-opacity duration-300\",\n          isLoaded ? \"opacity-100\" : \"opacity-0\"\n        )}\n        style={{ objectFit }}\n        onLoad={handleLoad}\n        onError={handleError}\n        width={width}\n        height={height}\n        data-testid={testId}\n      />\n    </div>\n  );\n}\n","size_bytes":1822},"client/src/lib/analytics.ts":{"content":"// Google Analytics integration for han sik dang\n\n// Define the gtag function globally\ndeclare global {\n  interface Window {\n    dataLayer: any[];\n    gtag: (...args: any[]) => void;\n  }\n}\n\n// Initialize Google Analytics\nexport const initGA = () => {\n  const measurementId = import.meta.env.VITE_GA_MEASUREMENT_ID;\n\n  if (!measurementId) {\n    console.warn('Missing required Google Analytics key: VITE_GA_MEASUREMENT_ID');\n    return;\n  }\n\n  const script1 = document.createElement('script');\n  script1.async = true;\n  script1.src = `https://www.googletagmanager.com/gtag/js?id=${measurementId}`;\n  document.head.appendChild(script1);\n\n  const script2 = document.createElement('script');\n  script2.textContent = `\n    window.dataLayer = window.dataLayer || [];\n    function gtag(){dataLayer.push(arguments);}\n    gtag('js', new Date());\n    gtag('config', '${measurementId}');\n  `;\n  document.head.appendChild(script2);\n};\n\n// Track page views - useful for single-page applications\nexport const trackPageView = (url: string) => {\n  if (typeof window === 'undefined' || !window.gtag) return;\n  \n  const measurementId = import.meta.env.VITE_GA_MEASUREMENT_ID;\n  if (!measurementId) return;\n  \n  window.gtag('config', measurementId, {\n    page_path: url\n  });\n};\n\n// Track events\nexport const trackEvent = (\n  action: string, \n  category?: string, \n  label?: string, \n  value?: number\n) => {\n  if (typeof window === 'undefined' || !window.gtag) return;\n  \n  window.gtag('event', action, {\n    event_category: category,\n    event_label: label,\n    value: value,\n  });\n};\n","size_bytes":1566},"client/src/components/NaverMap.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Navigation, ExternalLink } from \"lucide-react\";\n\ninterface NaverMapProps {\n  latitude: number;\n  longitude: number;\n  restaurantName: string;\n  address: string;\n  zoom?: number;\n  className?: string;\n  naverPlaceId?: string | null;\n  googlePlaceId?: string | null;\n  naverMapUrl?: string;\n  googleMapUrl?: string;\n}\n\ndeclare global {\n  interface Window {\n    naver: any;\n  }\n}\n\nexport function NaverMap({\n  latitude,\n  longitude,\n  restaurantName,\n  address,\n  zoom = 16,\n  className = \"\",\n  naverPlaceId,\n  googlePlaceId,\n  naverMapUrl,\n  googleMapUrl,\n}: NaverMapProps) {\n  const { language } = useLanguage();\n  const mapRef = useRef<HTMLDivElement>(null);\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [scriptError, setScriptError] = useState(false);\n  const [clientId, setClientId] = useState<string | null>(null);\n\n  // Fetch Naver Maps Client ID from API\n  useEffect(() => {\n    fetch('/api/config')\n      .then(res => res.json())\n      .then(data => setClientId(data.naverMapsClientId))\n      .catch(() => setScriptError(true));\n  }, []);\n\n  // Load Naver Maps script dynamically\n  useEffect(() => {\n    if (!clientId) return;\n\n    // Check if already loaded\n    if (window.naver && window.naver.maps) {\n      setMapLoaded(true);\n      return;\n    }\n\n    // Map language codes (4 supported: ko, en, zh, ja)\n    // Fallback to English for unsupported languages\n    const mapLanguage = ['ko', 'en', 'zh', 'ja'].includes(language) ? language : 'en';\n\n    const script = document.createElement('script');\n    script.src = `https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${clientId}&language=${mapLanguage}`;\n    script.async = true;\n    script.onload = () => setMapLoaded(true);\n    script.onerror = () => setScriptError(true);\n    \n    document.head.appendChild(script);\n\n    return () => {\n      // Cleanup: remove script if component unmounts\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n    };\n  }, [language, clientId]);\n\n  // Initialize map when script is loaded\n  useEffect(() => {\n    if (!mapLoaded || !mapRef.current || !window.naver) return;\n\n    try {\n      const mapOptions = {\n        center: new window.naver.maps.LatLng(latitude, longitude),\n        zoom: zoom,\n        zoomControl: true,\n        zoomControlOptions: {\n          position: window.naver.maps.Position.TOP_RIGHT,\n        },\n        mapTypeControl: false,\n      };\n\n      const map = new window.naver.maps.Map(mapRef.current, mapOptions);\n\n      // Add marker\n      const marker = new window.naver.maps.Marker({\n        position: new window.naver.maps.LatLng(latitude, longitude),\n        map: map,\n        title: restaurantName,\n      });\n\n      // Add info window\n      const contentString = [\n        `<div style=\"padding: 10px; min-width: 200px;\">`,\n        `<h4 style=\"margin: 0 0 5px; font-weight: 600;\">${restaurantName}</h4>`,\n        `<p style=\"margin: 0; font-size: 12px; color: #666;\">${address}</p>`,\n        `</div>`,\n      ].join('');\n\n      const infoWindow = new window.naver.maps.InfoWindow({\n        content: contentString,\n      });\n\n      infoWindow.open(map, marker);\n\n      // Click marker to toggle info window\n      window.naver.maps.Event.addListener(marker, 'click', () => {\n        if (infoWindow.getMap()) {\n          infoWindow.close();\n        } else {\n          infoWindow.open(map, marker);\n        }\n      });\n\n      return () => {\n        try {\n          if (marker) {\n            marker.setMap(null);\n          }\n          if (infoWindow) {\n            infoWindow.close();\n          }\n        } catch (error) {\n          console.error('Naver Maps cleanup error:', error);\n        }\n      };\n    } catch (error) {\n      console.error('Naver Maps initialization error:', error);\n      setScriptError(true);\n    }\n  }, [mapLoaded, latitude, longitude, restaurantName, address, zoom]);\n\n  // Open in Naver Maps app or web\n  const openInNaverMaps = () => {\n    const url = naverMapUrl || naverPlaceId \n      ? `https://map.naver.com/p/entry/place/${naverPlaceId}`\n      : `https://map.naver.com/v5/search/${encodeURIComponent(restaurantName)}?c=${longitude},${latitude},16,0,0,0,dh`;\n    window.open(url, '_blank');\n  };\n\n  // Get directions in Naver Maps\n  const getDirections = () => {\n    const url = `https://map.naver.com/v5/directions/-/-/-/car?c=${longitude},${latitude},16,0,0,0,dh&e=${longitude},${latitude}`;\n    window.open(url, '_blank');\n  };\n\n  if (scriptError) {\n    return (\n      <Card className=\"p-6 text-center\">\n        <p className=\"text-muted-foreground\">\n          {language === \"en\" ? \"Failed to load map\" : \"ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\"}\n        </p>\n      </Card>\n    );\n  }\n\n  if (!mapLoaded) {\n    return (\n      <Card className=\"p-6 text-center\">\n        <p className=\"text-muted-foreground\">\n          {language === \"en\" ? \"Loading map...\" : \"ì§€ë„ ë¡œë”© ì¤‘...\"}\n        </p>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className={`overflow-hidden ${className}`}>\n      <div ref={mapRef} className=\"w-full h-64\" data-testid=\"naver-map\" />\n      <div className=\"p-3 flex gap-2 border-t\">\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          onClick={getDirections}\n          className=\"flex-1\"\n          data-testid=\"button-directions\"\n        >\n          <Navigation className=\"w-4 h-4 mr-2\" />\n          {language === \"en\" ? \"Directions\" : \"ê¸¸ì°¾ê¸°\"}\n        </Button>\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          onClick={openInNaverMaps}\n          className=\"flex-1\"\n          data-testid=\"button-open-naver-maps\"\n        >\n          <ExternalLink className=\"w-4 h-4 mr-2\" />\n          {language === \"en\" ? \"Open in Naver Maps\" : \"ë„¤ì´ë²„ ì§€ë„ì—ì„œ ë³´ê¸°\"}\n        </Button>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":6006},"client/env.d.ts":{"content":"/// <reference types=\"vite/client\" />\n\ninterface ImportMetaEnv {\n  readonly VITE_GA_MEASUREMENT_ID: string;\n  readonly VITE_ADSENSE_PUBLISHER_ID: string;\n}\n\ninterface ImportMeta {\n  readonly env: ImportMetaEnv;\n}\n","size_bytes":213},"client/src/pages/admin/AdminLayout.tsx":{"content":"import { useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AdminSidebar } from \"@/components/AdminSidebar\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut } from \"lucide-react\";\n\ninterface AdminLayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function AdminLayout({ children }: AdminLayoutProps) {\n  const { user, isLoading } = useAuth();\n  const [, setLocation] = useLocation();\n\n  useEffect(() => {\n    if (!isLoading && (!user || user.isAdmin !== 1)) {\n      setLocation(\"/\");\n    }\n  }, [user, isLoading, setLocation]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-background\">\n        <div className=\"flex flex-col items-center gap-4\">\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          <p className=\"text-sm text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user || user.isAdmin !== 1) {\n    return null;\n  }\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  const handleLogout = async () => {\n    window.location.href = \"/api/logout\";\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"flex items-center justify-between h-14 px-4 border-b bg-background\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleLogout}\n              data-testid=\"button-logout\"\n            >\n              <LogOut className=\"w-4 h-4 mr-2\" />\n              Logout\n            </Button>\n          </header>\n          <main className=\"flex-1 overflow-auto p-6 bg-muted/30\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n","size_bytes":2148},"client/src/components/LanguageSwitcher.tsx":{"content":"import { useTranslation } from 'react-i18next';\nimport { Globe } from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Button } from '@/components/ui/button';\n\nconst languages = [\n  { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },\n  { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },\n  { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },\n  { code: 'zh-CN', name: 'ç®€ä½“ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },\n  { code: 'zh-TW', name: 'ç¹é«”ä¸­æ–‡', flag: 'ğŸ‡¹ğŸ‡¼' },\n  { code: 'es', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },\n  { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },\n  { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },\n  { code: 'ru', name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', flag: 'ğŸ‡·ğŸ‡º' },\n];\n\nexport function LanguageSwitcher() {\n  const { i18n } = useTranslation();\n\n  const currentLanguage = languages.find((lang) => lang.code === i18n.language) || languages[0];\n\n  const handleLanguageChange = (languageCode: string) => {\n    i18n.changeLanguage(languageCode);\n  };\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          data-testid=\"button-language-switcher\"\n          className=\"hover-elevate active-elevate-2\"\n        >\n          <Globe className=\"h-5 w-5\" />\n          <span className=\"sr-only\">Select language</span>\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-48\">\n        {languages.map((language) => (\n          <DropdownMenuItem\n            key={language.code}\n            onClick={() => handleLanguageChange(language.code)}\n            className={`cursor-pointer ${\n              currentLanguage.code === language.code ? 'bg-accent' : ''\n            }`}\n            data-testid={`menu-item-language-${language.code}`}\n          >\n            <span className=\"mr-2\">{language.flag}</span>\n            <span>{language.name}</span>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","size_bytes":2086},"client/src/pages/admin/AdminUsers.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Search, Trash2, ChevronUp, ChevronDown, ChevronsUpDown, Star, MessageSquare, Bookmark, HelpCircle } from \"lucide-react\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport type { User, Review, SavedRestaurant, Restaurant, CustomerInquiry } from \"@shared/schema\";\nimport type { UserDetailsResponse } from \"@shared/types\";\n\ntype SortField = \"id\" | \"tier\" | \"language\" | \"ssoProvider\" | \"savedCount\" | \"visitors\" | \"createdAt\";\ntype SortDirection = \"asc\" | \"desc\";\n\ninterface UserWithStats extends User {\n  savedCount: number;\n}\n\nconst updateUserSchema = z.object({\n  tier: z.string(),\n  language: z.string().optional(),\n  ssoProvider: z.string().optional(),\n  region: z.string().optional(),\n});\n\ntype UpdateUserForm = z.infer<typeof updateUserSchema>;\n\nconst LANGUAGES = [\n  { value: \"ko\", label: \"í•œêµ­ì–´\" },\n  { value: \"en\", label: \"English\" },\n  { value: \"ja\", label: \"æ—¥æœ¬èª\" },\n  { value: \"zh-CN\", label: \"ç®€ä½“ä¸­æ–‡\" },\n  { value: \"zh-TW\", label: \"ç¹é«”ä¸­æ–‡\" },\n  { value: \"es\", label: \"EspaÃ±ol\" },\n  { value: \"fr\", label: \"FranÃ§ais\" },\n  { value: \"de\", label: \"Deutsch\" },\n  { value: \"ru\", label: \"Ğ ÑƒÑÑĞºĞ¸Ğ¹\" },\n];\n\nexport default function AdminUsers() {\n  const { toast } = useToast();\n  \n  // Search & Filter State\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedTier, setSelectedTier] = useState<string>(\"all\");\n  const [selectedLanguage, setSelectedLanguage] = useState<string>(\"all\");\n  const [selectedSsoProvider, setSelectedSsoProvider] = useState<string>(\"all\");\n  const [visitorPeriod, setVisitorPeriod] = useState<\"1d\" | \"7d\" | \"10d\" | \"30d\">(\"30d\");\n  \n  // Sorting State\n  const [sortField, setSortField] = useState<SortField>(\"createdAt\");\n  const [sortDirection, setSortDirection] = useState<SortDirection>(\"desc\");\n  \n  // Dialog State\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null);\n  const [isDetailsDialogOpen, setIsDetailsDialogOpen] = useState(false);\n  const [activeTab, setActiveTab] = useState(\"overview\");\n\n  const { data: users = [], isLoading } = useQuery<UserWithStats[]>({\n    queryKey: [\"/api/admin/users\"],\n  });\n\n  // Fetch user details when dialog is opened\n  const { data: userDetails, isLoading: isLoadingDetails } = useQuery<UserDetailsResponse>({\n    queryKey: [\"/api/admin/users\", selectedUserId, \"details\"],\n    enabled: !!selectedUserId && isDetailsDialogOpen,\n  });\n\n  // Filter & Sort\n  const filteredAndSortedUsers = users\n    .filter(u => {\n      // Search query\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        const matchesEmail = u.email?.toLowerCase().includes(query);\n        const matchesName = u.firstName?.toLowerCase().includes(query) || \n                          u.lastName?.toLowerCase().includes(query);\n        const matchesId = u.id.toLowerCase().includes(query);\n        if (!matchesEmail && !matchesName && !matchesId) return false;\n      }\n\n      // Tier filter\n      if (selectedTier !== \"all\" && u.tier !== selectedTier) return false;\n\n      // Language filter\n      if (selectedLanguage !== \"all\" && u.language !== selectedLanguage) return false;\n\n      // SSO Provider filter\n      if (selectedSsoProvider !== \"all\" && u.ssoProvider !== selectedSsoProvider) return false;\n\n      return true;\n    })\n    .sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortField) {\n        case \"id\":\n          comparison = a.id.localeCompare(b.id);\n          break;\n        case \"tier\":\n          const tierOrder = { bronze: 1, silver: 2, gold: 3, platinum: 4 };\n          comparison = (tierOrder[a.tier as keyof typeof tierOrder] || 0) - \n                      (tierOrder[b.tier as keyof typeof tierOrder] || 0);\n          break;\n        case \"language\":\n          comparison = (a.language || \"\").localeCompare(b.language || \"\");\n          break;\n        case \"ssoProvider\":\n          comparison = (a.ssoProvider || \"\").localeCompare(b.ssoProvider || \"\");\n          break;\n        case \"savedCount\":\n          comparison = a.savedCount - b.savedCount;\n          break;\n        case \"visitors\":\n          const aVisitors = visitorPeriod === \"1d\" ? a.visitors1d :\n                          visitorPeriod === \"7d\" ? a.visitors7d :\n                          visitorPeriod === \"10d\" ? a.visitors10d : a.visitors30d;\n          const bVisitors = visitorPeriod === \"1d\" ? b.visitors1d :\n                          visitorPeriod === \"7d\" ? b.visitors7d :\n                          visitorPeriod === \"10d\" ? b.visitors10d : b.visitors30d;\n          comparison = aVisitors - bVisitors;\n          break;\n        case \"createdAt\":\n          const aDate = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n          const bDate = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n          comparison = aDate - bDate;\n          break;\n      }\n      \n      return sortDirection === \"asc\" ? comparison : -comparison;\n    });\n\n  // Delete mutation\n  const deleteMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      return apiRequest(\"DELETE\", `/api/admin/users/${userId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: \"ì‚­ì œ ì™„ë£Œ\",\n        description: \"ì‚¬ìš©ìê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ì‚¬ìš©ì ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update mutation\n  const updateMutation = useMutation({\n    mutationFn: async (data: { id: string; updates: UpdateUserForm }) => {\n      return apiRequest(\"PATCH\", `/api/admin/users/${data.id}`, data.updates);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\", selectedUserId, \"details\"] });\n      toast({\n        title: \"ìˆ˜ì • ì™„ë£Œ\",\n        description: \"ì‚¬ìš©ì ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ì‚¬ìš©ì ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n\n  const form = useForm<UpdateUserForm>({\n    resolver: zodResolver(updateUserSchema),\n    defaultValues: {\n      tier: \"bronze\",\n      language: \"ko\",\n      ssoProvider: \"\",\n      region: \"\",\n    },\n  });\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(prev => prev === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortField(field);\n      setSortDirection(\"desc\");\n    }\n  };\n\n  const getSortIcon = (field: SortField) => {\n    if (sortField !== field) {\n      return <ChevronsUpDown className=\"w-4 h-4 ml-1 text-muted-foreground\" />;\n    }\n    return sortDirection === \"asc\" ? \n      <ChevronUp className=\"w-4 h-4 ml-1\" /> : \n      <ChevronDown className=\"w-4 h-4 ml-1\" />;\n  };\n\n  const handleViewDetails = (user: UserWithStats) => {\n    setSelectedUserId(user.id);\n    setActiveTab(\"overview\");\n    form.reset({\n      tier: user.tier,\n      language: user.language || \"ko\",\n      ssoProvider: user.ssoProvider || \"\",\n      region: user.region || \"\",\n    });\n    setIsDetailsDialogOpen(true);\n  };\n\n  const handleSubmit = (data: UpdateUserForm) => {\n    if (selectedUserId) {\n      updateMutation.mutate({ id: selectedUserId, updates: data });\n    }\n  };\n\n  const handleDelete = (id: string, email: string) => {\n    if (confirm(`\"${email}\" ì‚¬ìš©ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const getVisitorCount = (user: UserWithStats) => {\n    switch (visitorPeriod) {\n      case \"1d\": return user.visitors1d;\n      case \"7d\": return user.visitors7d;\n      case \"10d\": return user.visitors10d;\n      case \"30d\": return user.visitors30d;\n    }\n  };\n\n  const getTierColor = (tier: string) => {\n    switch (tier?.toLowerCase()) {\n      case \"platinum\": return \"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200\";\n      case \"gold\": return \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\";\n      case \"silver\": return \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\";\n      case \"bronze\": return \"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200\";\n      default: return \"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200\";\n    }\n  };\n\n  const getLanguageName = (lang: string) => {\n    const language = LANGUAGES.find(l => l.value === lang);\n    return language?.label || lang;\n  };\n\n  const formatDate = (date: Date | string | null | undefined) => {\n    if (!date) return \"-\";\n    const d = new Date(date);\n    return `${d.getFullYear()}.${String(d.getMonth() + 1).padStart(2, '0')}.${String(d.getDate()).padStart(2, '0')}`;\n  };\n\n  // All possible filter values\n  const allTiers = [\"bronze\", \"silver\", \"gold\", \"platinum\"];\n  const allSsoProviders = [\"Google\", \"Apple\", \"GitHub\", \"Replit\"];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-3xl font-bold\">ì´ìš©ì ê´€ë¦¬</h1>\n      </div>\n\n      {/* Search & Filter Section */}\n      <Card className=\"p-6\">\n        <div className=\"space-y-4\">\n          {/* Search Bar */}\n          <div className=\"flex gap-2\">\n            <Input\n              placeholder=\"ì´ë¦„, ì´ë©”ì¼, ID ê²€ìƒ‰...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              data-testid=\"input-search\"\n              className=\"flex-1\"\n            />\n            <Button onClick={() => {}} data-testid=\"button-search\">\n              <Search className=\"w-4 h-4 mr-2\" />\n              ê²€ìƒ‰\n            </Button>\n          </div>\n\n          {/* Filters */}\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ë“±ê¸‰</label>\n              <Select value={selectedTier} onValueChange={setSelectedTier}>\n                <SelectTrigger data-testid=\"select-tier\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  {allTiers.map((tier) => (\n                    <SelectItem key={tier} value={tier}>\n                      {tier.charAt(0).toUpperCase() + tier.slice(1)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">ì–¸ì–´</label>\n              <Select value={selectedLanguage} onValueChange={setSelectedLanguage}>\n                <SelectTrigger data-testid=\"select-language\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  {LANGUAGES.map((lang) => (\n                    <SelectItem key={lang.value} value={lang.value}>\n                      {lang.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium\">SSO ì œê³µì</label>\n              <Select value={selectedSsoProvider} onValueChange={setSelectedSsoProvider}>\n                <SelectTrigger data-testid=\"select-sso-provider\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">ì „ì²´</SelectItem>\n                  {allSsoProviders.map((provider) => (\n                    <SelectItem key={provider} value={provider}>\n                      {provider}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {/* Results */}\n      <Card>\n        <div className=\"p-4 border-b\">\n          <div className=\"flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\">\n              ì´ {filteredAndSortedUsers.length}ëª…\n            </p>\n            <div className=\"flex items-center gap-2\">\n              <label className=\"text-sm\">ë°©ë¬¸íšŸìˆ˜ ê¸°ì¤€:</label>\n              <Select value={visitorPeriod} onValueChange={(v) => setVisitorPeriod(v as any)}>\n                <SelectTrigger className=\"w-32\" data-testid=\"select-visitor-period\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"1d\">1ì¼</SelectItem>\n                  <SelectItem value=\"7d\">7ì¼</SelectItem>\n                  <SelectItem value=\"10d\">10ì¼</SelectItem>\n                  <SelectItem value=\"30d\">30ì¼</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </div>\n\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"id\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-id\"\n                    >\n                      ID\n                      {getSortIcon(\"id\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"tier\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-tier\"\n                    >\n                      ë“±ê¸‰\n                      {getSortIcon(\"tier\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"language\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-language\"\n                    >\n                      ì–¸ì–´\n                      {getSortIcon(\"language\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"ssoProvider\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-sso-provider\"\n                    >\n                      SSO\n                      {getSortIcon(\"ssoProvider\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"savedCount\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-saved\"\n                    >\n                      ì €ì¥ìˆ˜\n                      {getSortIcon(\"savedCount\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"visitors\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-visitors\"\n                    >\n                      ë°©ë¬¸íšŸìˆ˜\n                      {getSortIcon(\"visitors\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleSort(\"createdAt\")}\n                      className=\"hover-elevate\"\n                      data-testid=\"sort-created-at\"\n                    >\n                      ê°€ì…ì¼\n                      {getSortIcon(\"createdAt\")}\n                    </Button>\n                  </TableHead>\n                  <TableHead>ì‘ì—…</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {filteredAndSortedUsers.map((user) => (\n                  <TableRow key={user.id}>\n                    <TableCell>\n                      <button\n                        onClick={() => handleViewDetails(user)}\n                        className=\"text-left hover:underline font-medium text-sm\"\n                        data-testid={`link-view-details-${user.id}`}\n                      >\n                        {user.id.substring(0, 8)}...\n                      </button>\n                    </TableCell>\n                    <TableCell>\n                      <Badge className={getTierColor(user.tier)}>\n                        {user.tier.charAt(0).toUpperCase() + user.tier.slice(1)}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <span className=\"text-sm\" data-testid={`text-language-${user.id}`}>\n                        {getLanguageName(user.language || \"ko\")}\n                      </span>\n                    </TableCell>\n                    <TableCell>{user.ssoProvider || \"-\"}</TableCell>\n                    <TableCell>{user.savedCount}</TableCell>\n                    <TableCell>{getVisitorCount(user).toLocaleString()}</TableCell>\n                    <TableCell>{formatDate(user.createdAt)}</TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleDelete(user.id, user.email || user.id)}\n                        data-testid={`button-delete-${user.id}`}\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n\n            {filteredAndSortedUsers.length === 0 && (\n              <div className=\"p-8 text-center text-muted-foreground\">\n                ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤\n              </div>\n            )}\n          </div>\n        )}\n      </Card>\n\n      {/* User Details Dialog */}\n      <Dialog open={isDetailsDialogOpen} onOpenChange={setIsDetailsDialogOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>ì‚¬ìš©ì ìƒì„¸ ì •ë³´</DialogTitle>\n            <DialogDescription>\n              ì‚¬ìš©ìì˜ í™œë™ ë‚´ì—­ ë° ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n            </DialogDescription>\n          </DialogHeader>\n\n          {isLoadingDetails ? (\n            <div className=\"flex items-center justify-center h-64\">\n              <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n            </div>\n          ) : userDetails ? (\n            <div className=\"space-y-6\">\n              {/* User Header */}\n              <div className=\"p-4 bg-muted rounded-lg\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-muted-foreground\">ì´ë©”ì¼:</span>\n                    <span className=\"ml-2 font-medium\" data-testid=\"text-user-email\">\n                      {userDetails.user.email}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">ì´ë¦„:</span>\n                    <span className=\"ml-2 font-medium\" data-testid=\"text-user-name\">\n                      {userDetails.user.firstName} {userDetails.user.lastName}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">ë“±ê¸‰:</span>\n                    <Badge className={`ml-2 ${getTierColor(userDetails.user.tier)}`} data-testid=\"badge-user-tier\">\n                      {userDetails.user.tier.charAt(0).toUpperCase() + userDetails.user.tier.slice(1)}\n                    </Badge>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">ì–¸ì–´:</span>\n                    <span className=\"ml-2 font-medium\" data-testid=\"text-user-language\">\n                      {getLanguageName(userDetails.user.language || \"ko\")}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">SSO:</span>\n                    <span className=\"ml-2 font-medium\" data-testid=\"text-user-sso\">\n                      {userDetails.user.ssoProvider || \"-\"}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">ê°€ì…ì¼:</span>\n                    <span className=\"ml-2 font-medium\" data-testid=\"text-user-created\">\n                      {formatDate(userDetails.user.createdAt)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Tabs */}\n              <Tabs value={activeTab} onValueChange={setActiveTab}>\n                <TabsList className=\"grid w-full grid-cols-5\">\n                  <TabsTrigger value=\"overview\" data-testid=\"tab-overview\">\n                    <Star className=\"w-4 h-4 mr-2\" />\n                    ê°œìš”\n                  </TabsTrigger>\n                  <TabsTrigger value=\"reviews\" data-testid=\"tab-reviews\">\n                    <MessageSquare className=\"w-4 h-4 mr-2\" />\n                    ë¦¬ë·°\n                  </TabsTrigger>\n                  <TabsTrigger value=\"saved\" data-testid=\"tab-saved\">\n                    <Bookmark className=\"w-4 h-4 mr-2\" />\n                    ì €ì¥\n                  </TabsTrigger>\n                  <TabsTrigger value=\"inquiries\" data-testid=\"tab-inquiries\">\n                    <HelpCircle className=\"w-4 h-4 mr-2\" />\n                    ë¬¸ì˜\n                  </TabsTrigger>\n                  <TabsTrigger value=\"settings\" data-testid=\"tab-settings\">\n                    ì„¤ì •\n                  </TabsTrigger>\n                </TabsList>\n\n                {/* Overview Tab */}\n                <TabsContent value=\"overview\" className=\"space-y-4\">\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <Card className=\"p-4\">\n                      <div className=\"text-sm text-muted-foreground\">ì´ ë¦¬ë·° ìˆ˜</div>\n                      <div className=\"text-2xl font-bold\" data-testid=\"stat-total-reviews\">\n                        {userDetails.stats.totalReviews}\n                      </div>\n                    </Card>\n                    <Card className=\"p-4\">\n                      <div className=\"text-sm text-muted-foreground\">í‰ê·  ë³„ì </div>\n                      <div className=\"text-2xl font-bold\" data-testid=\"stat-average-rating\">\n                        â­ {userDetails.stats.averageRating.toFixed(1)}\n                      </div>\n                    </Card>\n                    <Card className=\"p-4\">\n                      <div className=\"text-sm text-muted-foreground\">ì €ì¥í•œ ë ˆìŠ¤í† ë‘</div>\n                      <div className=\"text-2xl font-bold\" data-testid=\"stat-total-saved\">\n                        {userDetails.stats.totalSaved}\n                      </div>\n                    </Card>\n                  </div>\n                </TabsContent>\n\n                {/* Reviews Tab */}\n                <TabsContent value=\"reviews\">\n                  <Card>\n                    <div className=\"p-4 border-b\">\n                      <h3 className=\"font-semibold\">ì‘ì„±í•œ ë¦¬ë·° ({userDetails.reviews.length})</h3>\n                    </div>\n                    <div className=\"divide-y max-h-96 overflow-y-auto\">\n                      {userDetails.reviews.length === 0 ? (\n                        <div className=\"p-8 text-center text-muted-foreground\">\n                          ì‘ì„±í•œ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤\n                        </div>\n                      ) : (\n                        userDetails.reviews.map((review: Review) => (\n                          <div key={review.id} className=\"p-4\" data-testid={`review-${review.id}`}>\n                            <div className=\"flex items-start justify-between mb-2\">\n                              <div className=\"font-medium\" data-testid={`review-restaurant-${review.id}`}>\n                                ë ˆìŠ¤í† ë‘ ID: {review.restaurantId.substring(0, 8)}...\n                              </div>\n                              <Badge variant=\"outline\" data-testid={`review-rating-${review.id}`}>\n                                â­ {review.rating}\n                              </Badge>\n                            </div>\n                            <p className=\"text-sm text-muted-foreground mb-2\" data-testid={`review-comment-${review.id}`}>\n                              {review.comment}\n                            </p>\n                            <div className=\"text-xs text-muted-foreground\" data-testid={`review-date-${review.id}`}>\n                              {formatDate(review.createdAt)}\n                            </div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </Card>\n                </TabsContent>\n\n                {/* Saved Restaurants Tab */}\n                <TabsContent value=\"saved\">\n                  <Card>\n                    <div className=\"p-4 border-b\">\n                      <h3 className=\"font-semibold\">ì €ì¥í•œ ë ˆìŠ¤í† ë‘ ({userDetails.savedRestaurants.length})</h3>\n                    </div>\n                    <div className=\"divide-y max-h-96 overflow-y-auto\">\n                      {userDetails.savedRestaurants.length === 0 ? (\n                        <div className=\"p-8 text-center text-muted-foreground\">\n                          ì €ì¥í•œ ë ˆìŠ¤í† ë‘ì´ ì—†ìŠµë‹ˆë‹¤\n                        </div>\n                      ) : (\n                        userDetails.savedRestaurants.map((saved: SavedRestaurant & { restaurant: Restaurant }) => (\n                          <div key={saved.id} className=\"p-4\" data-testid={`saved-${saved.id}`}>\n                            <div className=\"flex items-start justify-between mb-2\">\n                              <div className=\"font-medium\" data-testid={`saved-name-${saved.id}`}>\n                                {saved.restaurant.name}\n                              </div>\n                              <Badge variant=\"secondary\" data-testid={`saved-category-${saved.id}`}>\n                                {saved.restaurant.category}\n                              </Badge>\n                            </div>\n                            <div className=\"text-sm text-muted-foreground mb-1\" data-testid={`saved-cuisine-${saved.id}`}>\n                              {saved.restaurant.cuisine}\n                            </div>\n                            <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                              <span data-testid={`saved-location-${saved.id}`}>\n                                {saved.restaurant.city}{' > '}{saved.restaurant.districtDetail}\n                              </span>\n                              <span data-testid={`saved-date-${saved.id}`}>\n                                ì €ì¥ì¼: {formatDate(saved.createdAt)}\n                              </span>\n                            </div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </Card>\n                </TabsContent>\n\n                {/* Customer Inquiries Tab */}\n                <TabsContent value=\"inquiries\">\n                  <Card>\n                    <div className=\"p-4 border-b\">\n                      <h3 className=\"font-semibold\">ê³ ê° ë¬¸ì˜ ({userDetails.customerInquiries.length})</h3>\n                    </div>\n                    <div className=\"divide-y max-h-96 overflow-y-auto\">\n                      {userDetails.customerInquiries.length === 0 ? (\n                        <div className=\"p-8 text-center text-muted-foreground\">\n                          ë¬¸ì˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤\n                        </div>\n                      ) : (\n                        userDetails.customerInquiries.map((inquiry: CustomerInquiry) => (\n                          <div key={inquiry.id} className=\"p-4\" data-testid={`inquiry-${inquiry.id}`}>\n                            <div className=\"flex items-start justify-between mb-2\">\n                              <div className=\"font-medium\" data-testid={`inquiry-title-${inquiry.id}`}>\n                                {inquiry.title}\n                              </div>\n                              <div className=\"flex gap-2\">\n                                <Badge variant=\"outline\" data-testid={`inquiry-category-${inquiry.id}`}>\n                                  {inquiry.category}\n                                </Badge>\n                                <Badge \n                                  variant={inquiry.status === 'answered' ? 'default' : inquiry.status === 'closed' ? 'secondary' : 'outline'}\n                                  data-testid={`inquiry-status-${inquiry.id}`}\n                                >\n                                  {inquiry.status}\n                                </Badge>\n                              </div>\n                            </div>\n                            <p className=\"text-sm text-muted-foreground mb-2\" data-testid={`inquiry-content-${inquiry.id}`}>\n                              {inquiry.content}\n                            </p>\n                            {inquiry.adminResponse && (\n                              <div className=\"mt-2 p-2 bg-muted rounded text-sm\" data-testid={`inquiry-response-${inquiry.id}`}>\n                                <div className=\"font-medium mb-1\">ê´€ë¦¬ì ë‹µë³€:</div>\n                                {inquiry.adminResponse}\n                              </div>\n                            )}\n                            <div className=\"text-xs text-muted-foreground mt-2\" data-testid={`inquiry-date-${inquiry.id}`}>\n                              ì‘ì„±ì¼: {formatDate(inquiry.createdAt)}\n                            </div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  </Card>\n                </TabsContent>\n\n                {/* Settings Tab */}\n                <TabsContent value=\"settings\">\n                  <Card className=\"p-6\">\n                    <Form {...form}>\n                      <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                        <FormField\n                          control={form.control}\n                          name=\"tier\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>ë“±ê¸‰</FormLabel>\n                              <Select onValueChange={field.onChange} value={field.value}>\n                                <FormControl>\n                                  <SelectTrigger data-testid=\"input-tier\">\n                                    <SelectValue />\n                                  </SelectTrigger>\n                                </FormControl>\n                                <SelectContent>\n                                  <SelectItem value=\"bronze\">Bronze</SelectItem>\n                                  <SelectItem value=\"silver\">Silver</SelectItem>\n                                  <SelectItem value=\"gold\">Gold</SelectItem>\n                                  <SelectItem value=\"platinum\">Platinum</SelectItem>\n                                </SelectContent>\n                              </Select>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"language\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>ì–¸ì–´</FormLabel>\n                              <Select onValueChange={field.onChange} value={field.value}>\n                                <FormControl>\n                                  <SelectTrigger data-testid=\"input-language\">\n                                    <SelectValue />\n                                  </SelectTrigger>\n                                </FormControl>\n                                <SelectContent>\n                                  {LANGUAGES.map((lang) => (\n                                    <SelectItem key={lang.value} value={lang.value}>\n                                      {lang.label}\n                                    </SelectItem>\n                                  ))}\n                                </SelectContent>\n                              </Select>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"ssoProvider\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>SSO ì œê³µì</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"ì˜ˆ: Google, Apple, GitHub\" data-testid=\"input-sso-provider\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"region\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>ì§€ì—­</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"ì˜ˆ: ì„œìš¸\" data-testid=\"input-region\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <div className=\"flex justify-end gap-2 pt-4\">\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            onClick={() => setIsDetailsDialogOpen(false)}\n                            data-testid=\"button-cancel\"\n                          >\n                            ì·¨ì†Œ\n                          </Button>\n                          <Button\n                            type=\"submit\"\n                            disabled={updateMutation.isPending}\n                            data-testid=\"button-save\"\n                          >\n                            {updateMutation.isPending ? \"ì €ì¥ ì¤‘...\" : \"ì €ì¥\"}\n                          </Button>\n                        </div>\n                      </form>\n                    </Form>\n                  </Card>\n                </TabsContent>\n              </Tabs>\n            </div>\n          ) : null}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":36982},"client/src/pages/admin/AdminUsersAnalytics.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Bar, BarChart, CartesianGrid, XAxis, YAxis, ResponsiveContainer, Tooltip, Pie, PieChart, Cell } from \"recharts\";\n\ninterface UserAnalytics {\n  usersByCountry: { country: string; count: number }[];\n  usersByRegion: { region: string; count: number }[];\n  usersByTier: { tier: string; count: number }[];\n}\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8'];\n\nexport default function AdminUsersAnalytics() {\n  const { data: analytics, isLoading } = useQuery<UserAnalytics>({\n    queryKey: [\"/api/admin/users/analytics\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">User Analytics</h1>\n        <p className=\"text-muted-foreground\">Insights into user demographics and distribution</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Users by Country */}\n        <Card className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Users by Country</h3>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={analytics?.usersByCountry || []}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"country\" />\n              <YAxis />\n              <Tooltip />\n              <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </Card>\n\n        {/* Users by Tier */}\n        <Card className=\"p-6\">\n          <h3 className=\"text-lg font-semibold mb-4\">Users by Tier</h3>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <PieChart>\n              <Pie\n                data={analytics?.usersByTier || []}\n                dataKey=\"count\"\n                nameKey=\"tier\"\n                cx=\"50%\"\n                cy=\"50%\"\n                outerRadius={100}\n                label\n              >\n                {analytics?.usersByTier.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                ))}\n              </Pie>\n              <Tooltip />\n            </PieChart>\n          </ResponsiveContainer>\n        </Card>\n\n        {/* Users by Region */}\n        <Card className=\"p-6 lg:col-span-2\">\n          <h3 className=\"text-lg font-semibold mb-4\">Users by Region</h3>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={analytics?.usersByRegion || []}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"region\" />\n              <YAxis />\n              <Tooltip />\n              <Bar dataKey=\"count\" fill=\"hsl(var(--chart-2))\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3059},"client/src/pages/admin/AdminPartnershipInquiries.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useState } from \"react\";\nimport { Check, X } from \"lucide-react\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { PartnershipInquiry } from \"@shared/schema\";\n\nexport default function AdminPartnershipInquiries() {\n  const { toast } = useToast();\n  const [selectedInquiry, setSelectedInquiry] = useState<PartnershipInquiry | null>(null);\n  const [adminNote, setAdminNote] = useState(\"\");\n  const [action, setAction] = useState<\"accept\" | \"reject\" | null>(null);\n\n  const { data: inquiries, isLoading } = useQuery<PartnershipInquiry[]>({\n    queryKey: [\"/api/admin/partnership-inquiries\"],\n  });\n\n  const processMutation = useMutation({\n    mutationFn: async ({ id, status, note }: { id: string; status: string; note: string }) => {\n      return await apiRequest(\"POST\", `/api/admin/partnership-inquiries/${id}/process`, { status, adminNote: note });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/partnership-inquiries\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/dashboard/priority-tasks\"] });\n      toast({\n        title: \"Success\",\n        description: \"Partnership inquiry processed successfully\",\n      });\n      setSelectedInquiry(null);\n      setAdminNote(\"\");\n      setAction(null);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to process partnership inquiry\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleProcess = () => {\n    if (!selectedInquiry || !action) return;\n    processMutation.mutate({\n      id: selectedInquiry.id,\n      status: action === \"accept\" ? \"accepted\" : \"rejected\",\n      note: adminNote,\n    });\n  };\n\n  const openDialog = (inquiry: PartnershipInquiry, actionType: \"accept\" | \"reject\") => {\n    setSelectedInquiry(inquiry);\n    setAction(actionType);\n    setAdminNote(inquiry.adminNote || \"\");\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  const pendingInquiries = inquiries?.filter(inq => inq.status === \"pending\") || [];\n  const processedInquiries = inquiries?.filter(inq => inq.status !== \"pending\") || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Partnership Inquiries</h1>\n        <p className=\"text-muted-foreground\">Review and manage partnership proposals</p>\n      </div>\n\n      {/* Pending Inquiries */}\n      <Card className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold\">Pending Inquiries</h2>\n          <Badge variant=\"secondary\">{pendingInquiries.length}</Badge>\n        </div>\n        \n        {pendingInquiries.length === 0 ? (\n          <p className=\"text-center text-muted-foreground py-8\">No pending partnership inquiries</p>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Company</TableHead>\n                <TableHead>Type</TableHead>\n                <TableHead>Contact</TableHead>\n                <TableHead>Date</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {pendingInquiries.map((inquiry) => (\n                <TableRow key={inquiry.id}>\n                  <TableCell>\n                    <div>\n                      <p className=\"font-medium\">{inquiry.companyName}</p>\n                      <p className=\"text-sm text-muted-foreground\">{inquiry.contactName}</p>\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">{inquiry.partnershipType}</Badge>\n                  </TableCell>\n                  <TableCell>\n                    <div className=\"text-sm\">\n                      <p>{inquiry.phone}</p>\n                      <p className=\"text-muted-foreground\">{inquiry.email}</p>\n                    </div>\n                  </TableCell>\n                  <TableCell>{new Date(inquiry.createdAt).toLocaleDateString()}</TableCell>\n                  <TableCell className=\"text-right\">\n                    <div className=\"flex gap-2 justify-end\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => openDialog(inquiry, \"accept\")}\n                        data-testid={`button-accept-${inquiry.id}`}\n                      >\n                        <Check className=\"w-4 h-4 mr-1\" />\n                        Accept\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => openDialog(inquiry, \"reject\")}\n                        data-testid={`button-reject-${inquiry.id}`}\n                      >\n                        <X className=\"w-4 h-4 mr-1\" />\n                        Reject\n                      </Button>\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n\n      {/* Processed Inquiries */}\n      {processedInquiries.length > 0 && (\n        <Card className=\"p-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Processed Inquiries</h2>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Company</TableHead>\n                <TableHead>Type</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Processed Date</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {processedInquiries.map((inquiry) => (\n                <TableRow key={inquiry.id}>\n                  <TableCell className=\"font-medium\">{inquiry.companyName}</TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">{inquiry.partnershipType}</Badge>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={inquiry.status === \"accepted\" ? \"default\" : \"destructive\"}>\n                      {inquiry.status}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    {inquiry.processedAt ? new Date(inquiry.processedAt).toLocaleDateString() : \"-\"}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Card>\n      )}\n\n      {/* Process Dialog */}\n      <Dialog open={!!selectedInquiry} onOpenChange={() => {\n        setSelectedInquiry(null);\n        setAction(null);\n        setAdminNote(\"\");\n      }}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>\n              {action === \"accept\" ? \"Accept\" : \"Reject\"} Partnership\n            </DialogTitle>\n            <DialogDescription>\n              Company: {selectedInquiry?.companyName}\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <p className=\"text-sm font-medium mb-1\">Contact Details</p>\n              <div className=\"text-sm space-y-1 text-muted-foreground\">\n                <p>Contact Person: {selectedInquiry?.contactName}</p>\n                <p>Email: {selectedInquiry?.email}</p>\n                <p>Phone: {selectedInquiry?.phone}</p>\n                <p>Type: {selectedInquiry?.partnershipType}</p>\n              </div>\n            </div>\n            \n            <div>\n              <p className=\"text-sm font-medium mb-2\">Proposal Description</p>\n              <div className=\"p-3 rounded-lg bg-muted text-sm\">\n                {selectedInquiry?.description}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Admin Note</label>\n              <Textarea\n                value={adminNote}\n                onChange={(e) => setAdminNote(e.target.value)}\n                placeholder=\"Add a note about this decision...\"\n                rows={3}\n                data-testid=\"textarea-admin-note\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => {\n              setSelectedInquiry(null);\n              setAction(null);\n              setAdminNote(\"\");\n            }}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleProcess}\n              disabled={processMutation.isPending}\n              variant={action === \"accept\" ? \"default\" : \"destructive\"}\n              data-testid=\"button-confirm-process\"\n            >\n              {processMutation.isPending ? \"Processing...\" : `Confirm ${action === \"accept\" ? \"Acceptance\" : \"Rejection\"}`}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":9639},"client/src/pages/admin/AdminOwnerNotices.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Plus, Pin, Eye, Trash2 } from \"lucide-react\";\nimport type { OwnerNotice } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\nconst CATEGORY_LABELS: Record<string, string> = {\n  announcement: \"ê³µì§€ì‚¬í•­\",\n  update: \"ì—…ë°ì´íŠ¸\",\n  maintenance: \"ì‹œìŠ¤í…œ ì ê²€\",\n  promotion: \"í”„ë¡œëª¨ì…˜\",\n};\n\nexport default function AdminOwnerNotices() {\n  const { toast } = useToast();\n  \n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isViewDialogOpen, setIsViewDialogOpen] = useState(false);\n  const [selectedNotice, setSelectedNotice] = useState<OwnerNotice | null>(null);\n  \n  // Form state\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [category, setCategory] = useState(\"announcement\");\n  const [isPinned, setIsPinned] = useState(false);\n\n  // Fetch notices\n  const { data: notices = [], isLoading } = useQuery<OwnerNotice[]>({\n    queryKey: [\"/api/admin/owner-notices\"],\n  });\n\n  // Create mutation\n  const createMutation = useMutation({\n    mutationFn: async (data: { title: string; content: string; category: string; isPinned: number }) => {\n      return await apiRequest(\"POST\", \"/api/admin/owner-notices\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/owner-notices\"] });\n      setIsCreateDialogOpen(false);\n      resetForm();\n      toast({\n        title: \"ê³µì§€ ìƒì„± ì™„ë£Œ\",\n        description: \"ìƒˆ ê³µì§€ì‚¬í•­ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ê³µì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setTitle(\"\");\n    setContent(\"\");\n    setCategory(\"announcement\");\n    setIsPinned(false);\n  };\n\n  const handleCreate = () => {\n    if (!title.trim() || !content.trim()) {\n      toast({\n        title: \"ì…ë ¥ ì˜¤ë¥˜\",\n        description: \"ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    createMutation.mutate({\n      title: title.trim(),\n      content: content.trim(),\n      category,\n      isPinned: isPinned ? 1 : 0,\n    });\n  };\n\n  const handleView = (notice: OwnerNotice) => {\n    setSelectedNotice(notice);\n    setIsViewDialogOpen(true);\n  };\n\n  const pinnedNotices = notices.filter(n => n.isPinned === 1);\n  const regularNotices = notices.filter(n => n.isPinned !== 1);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">ì—…ì£¼ ê³µì§€ ê´€ë¦¬</h1>\n          <p className=\"text-muted-foreground\">ë ˆìŠ¤í† ë‘ ì—…ì£¼ë¥¼ ìœ„í•œ ê³µì§€ì‚¬í•­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>\n        </div>\n        <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-create-notice\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              ìƒˆ ê³µì§€ ì‘ì„±\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl\">\n            <DialogHeader>\n              <DialogTitle>ìƒˆ ê³µì§€ ì‘ì„±</DialogTitle>\n              <DialogDescription>\n                ë ˆìŠ¤í† ë‘ ì—…ì£¼ì—ê²Œ ì „ë‹¬í•  ê³µì§€ì‚¬í•­ì„ ì‘ì„±í•˜ì„¸ìš”.\n              </DialogDescription>\n            </DialogHeader>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">ì œëª©</label>\n                <Input\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  placeholder=\"ê³µì§€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\n                  data-testid=\"input-notice-title\"\n                />\n              </div>\n              \n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">ì¹´í…Œê³ ë¦¬</label>\n                <Select value={category} onValueChange={setCategory}>\n                  <SelectTrigger data-testid=\"select-category\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"announcement\">ê³µì§€ì‚¬í•­</SelectItem>\n                    <SelectItem value=\"update\">ì—…ë°ì´íŠ¸</SelectItem>\n                    <SelectItem value=\"maintenance\">ì‹œìŠ¤í…œ ì ê²€</SelectItem>\n                    <SelectItem value=\"promotion\">í”„ë¡œëª¨ì…˜</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              \n              <div>\n                <label className=\"text-sm font-medium mb-2 block\">ë‚´ìš©</label>\n                <Textarea\n                  value={content}\n                  onChange={(e) => setContent(e.target.value)}\n                  placeholder=\"ê³µì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”\"\n                  rows={8}\n                  data-testid=\"textarea-notice-content\"\n                />\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <Checkbox\n                  id=\"pin-notice\"\n                  checked={isPinned}\n                  onCheckedChange={(checked) => setIsPinned(checked === true)}\n                  data-testid=\"checkbox-pin\"\n                />\n                <label\n                  htmlFor=\"pin-notice\"\n                  className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n                >\n                  ìƒë‹¨ ê³ ì •\n                </label>\n              </div>\n            </div>\n\n            <DialogFooter>\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setIsCreateDialogOpen(false);\n                  resetForm();\n                }}\n                data-testid=\"button-cancel\"\n              >\n                ì·¨ì†Œ\n              </Button>\n              <Button\n                onClick={handleCreate}\n                disabled={createMutation.isPending || !title.trim() || !content.trim()}\n                data-testid=\"button-submit-notice\"\n              >\n                {createMutation.isPending ? \"ì‘ì„± ì¤‘...\" : \"ê³µì§€ ë“±ë¡\"}\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-3 gap-4\">\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì „ì²´ ê³µì§€</div>\n          <div className=\"text-2xl font-bold\">{notices.length}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ê³ ì • ê³µì§€</div>\n          <div className=\"text-2xl font-bold text-blue-600\">{pinnedNotices.length}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì¼ë°˜ ê³µì§€</div>\n          <div className=\"text-2xl font-bold\">{regularNotices.length}</div>\n        </Card>\n      </div>\n\n      {/* Notices List */}\n      <Card>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : notices.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-64 text-muted-foreground\">\n            <p>ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>\n            <p className=\"text-sm mt-2\">ìƒˆ ê³µì§€ë¥¼ ì‘ì„±í•˜ì—¬ ì—…ì£¼ë“¤ì—ê²Œ ì•Œë ¤ì£¼ì„¸ìš”.</p>\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead className=\"w-12\"></TableHead>\n                <TableHead>ì œëª©</TableHead>\n                <TableHead>ì¹´í…Œê³ ë¦¬</TableHead>\n                <TableHead>ì‘ì„±ì¼</TableHead>\n                <TableHead>ê²Œì‹œì¼</TableHead>\n                <TableHead>ì‘ì—…</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {notices.map((notice) => (\n                <TableRow key={notice.id}>\n                  <TableCell>\n                    {notice.isPinned === 1 && (\n                      <Pin className=\"w-4 h-4 text-primary\" data-testid={`icon-pinned-${notice.id}`} />\n                    )}\n                  </TableCell>\n                  <TableCell className=\"font-medium max-w-md truncate\">\n                    {notice.title}\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">\n                      {CATEGORY_LABELS[notice.category] || notice.category}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"whitespace-nowrap\">\n                    {format(new Date(notice.createdAt), \"yyyy-MM-dd\")}\n                  </TableCell>\n                  <TableCell className=\"whitespace-nowrap\">\n                    {notice.publishedAt \n                      ? format(new Date(notice.publishedAt), \"yyyy-MM-dd\")\n                      : <Badge variant=\"secondary\">ë¯¸ë°œí–‰</Badge>\n                    }\n                  </TableCell>\n                  <TableCell>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => handleView(notice)}\n                      data-testid={`button-view-${notice.id}`}\n                    >\n                      <Eye className=\"w-4 h-4\" />\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n\n      {/* View Dialog */}\n      <Dialog open={isViewDialogOpen} onOpenChange={setIsViewDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              {selectedNotice?.isPinned === 1 && <Pin className=\"w-5 h-5 text-primary\" />}\n              {selectedNotice?.title}\n            </DialogTitle>\n            <DialogDescription>\n              {selectedNotice && CATEGORY_LABELS[selectedNotice.category]} | \n              {selectedNotice && ` ${format(new Date(selectedNotice.createdAt), \"yyyy-MM-dd HH:mm\")}`}\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedNotice && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ì¹´í…Œê³ ë¦¬</div>\n                  <Badge variant=\"outline\">\n                    {CATEGORY_LABELS[selectedNotice.category] || selectedNotice.category}\n                  </Badge>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ê³ ì • ì—¬ë¶€</div>\n                  <div className=\"font-medium\">\n                    {selectedNotice.isPinned === 1 ? \"ê³ ì •ë¨\" : \"ì¼ë°˜\"}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ì‘ì„±ì¼</div>\n                  <div className=\"font-medium\">\n                    {format(new Date(selectedNotice.createdAt), \"yyyy-MM-dd HH:mm\")}\n                  </div>\n                </div>\n                {selectedNotice.publishedAt && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">ê²Œì‹œì¼</div>\n                    <div className=\"font-medium\">\n                      {format(new Date(selectedNotice.publishedAt), \"yyyy-MM-dd HH:mm\")}\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div>\n                <div className=\"text-sm text-muted-foreground mb-2\">ë‚´ìš©</div>\n                <div className=\"p-4 rounded-lg bg-muted text-sm whitespace-pre-wrap\">\n                  {selectedNotice.content}\n                </div>\n              </div>\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsViewDialogOpen(false)}\n              data-testid=\"button-close-view\"\n            >\n              ë‹«ê¸°\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":13268},"client/src/pages/admin/AdminPayments.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Eye } from \"lucide-react\";\nimport type { Payment } from \"@shared/schema\";\nimport { format } from \"date-fns\";\n\nconst STATUS_LABELS: Record<string, { label: string; variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" }> = {\n  completed: { label: \"ì™„ë£Œ\", variant: \"default\" },\n  pending: { label: \"ëŒ€ê¸°ì¤‘\", variant: \"secondary\" },\n  failed: { label: \"ì‹¤íŒ¨\", variant: \"destructive\" },\n  refunded: { label: \"í™˜ë¶ˆ\", variant: \"outline\" },\n};\n\nconst PAYMENT_TYPE_LABELS: Record<string, string> = {\n  subscription: \"êµ¬ë…\",\n  advertising: \"ê´‘ê³ \",\n  premium: \"í”„ë¦¬ë¯¸ì—„\",\n  other: \"ê¸°íƒ€\",\n};\n\ninterface PaymentWithDetails extends Payment {\n  restaurant?: {\n    name: string;\n    nameEn: string;\n  };\n  user?: {\n    firstName: string;\n    lastName: string;\n    email: string;\n  };\n}\n\nexport default function AdminPayments() {\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [selectedPayment, setSelectedPayment] = useState<PaymentWithDetails | null>(null);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n\n  // Fetch payments\n  const { data: payments = [], isLoading } = useQuery<PaymentWithDetails[]>({\n    queryKey: [\"/api/admin/payments\"],\n  });\n\n  // Filter payments\n  const filteredPayments = payments.filter(payment => \n    statusFilter === \"all\" || payment.status === statusFilter\n  );\n\n  const handleView = (payment: PaymentWithDetails) => {\n    setSelectedPayment(payment);\n    setIsDialogOpen(true);\n  };\n\n  const completedCount = payments.filter(p => p.status === \"completed\").length;\n  const pendingCount = payments.filter(p => p.status === \"pending\").length;\n  const failedCount = payments.filter(p => p.status === \"failed\").length;\n  const totalAmount = payments\n    .filter(p => p.status === \"completed\")\n    .reduce((sum, p) => sum + p.amount, 0);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">ê²°ì œ ë‚´ì—­ ê´€ë¦¬</h1>\n          <p className=\"text-muted-foreground\">ë ˆìŠ¤í† ë‘ ì—…ì£¼ì˜ ê²°ì œ ë‚´ì—­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-4 gap-4\">\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì „ì²´ ê²°ì œ</div>\n          <div className=\"text-2xl font-bold\">{payments.length}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì™„ë£Œ</div>\n          <div className=\"text-2xl font-bold text-green-600\">{completedCount}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ëŒ€ê¸°ì¤‘</div>\n          <div className=\"text-2xl font-bold text-yellow-600\">{pendingCount}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì´ ë§¤ì¶œ</div>\n          <div className=\"text-2xl font-bold\">â‚©{totalAmount.toLocaleString()}</div>\n        </Card>\n      </div>\n\n      {/* Filter */}\n      <Card className=\"p-4\">\n        <div className=\"flex gap-2\">\n          <Button\n            variant={statusFilter === \"all\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"all\")}\n            data-testid=\"filter-all\"\n          >\n            ì „ì²´ ({payments.length})\n          </Button>\n          <Button\n            variant={statusFilter === \"completed\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"completed\")}\n            data-testid=\"filter-completed\"\n          >\n            ì™„ë£Œ ({completedCount})\n          </Button>\n          <Button\n            variant={statusFilter === \"pending\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"pending\")}\n            data-testid=\"filter-pending\"\n          >\n            ëŒ€ê¸°ì¤‘ ({pendingCount})\n          </Button>\n          <Button\n            variant={statusFilter === \"failed\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"failed\")}\n            data-testid=\"filter-failed\"\n          >\n            ì‹¤íŒ¨ ({failedCount})\n          </Button>\n        </div>\n      </Card>\n\n      {/* Payments List */}\n      <Card>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>ë‚ ì§œ</TableHead>\n                <TableHead>ë ˆìŠ¤í† ë‘</TableHead>\n                <TableHead>ê²°ì œ ìœ í˜•</TableHead>\n                <TableHead>ê¸ˆì•¡</TableHead>\n                <TableHead>ê²°ì œ ë°©ë²•</TableHead>\n                <TableHead>ìƒíƒœ</TableHead>\n                <TableHead>ì‘ì—…</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredPayments.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center text-muted-foreground h-32\">\n                    ê²°ì œ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredPayments.map((payment) => (\n                  <TableRow key={payment.id}>\n                    <TableCell className=\"whitespace-nowrap\">\n                      {format(new Date(payment.createdAt), \"yyyy-MM-dd HH:mm\")}\n                    </TableCell>\n                    <TableCell className=\"font-medium\">\n                      <div>{payment.restaurant?.name || \"-\"}</div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        {payment.restaurant?.nameEn || \"-\"}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\">\n                        {PAYMENT_TYPE_LABELS[payment.paymentType] || payment.paymentType}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"font-medium\">\n                      â‚©{payment.amount.toLocaleString()}\n                    </TableCell>\n                    <TableCell className=\"text-sm\">\n                      {payment.paymentMethod || \"-\"}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={STATUS_LABELS[payment.status].variant}>\n                        {STATUS_LABELS[payment.status].label}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleView(payment)}\n                        data-testid={`button-view-${payment.id}`}\n                      >\n                        <Eye className=\"w-4 h-4\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n\n      {/* Detail Dialog */}\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>ê²°ì œ ìƒì„¸</DialogTitle>\n            <DialogDescription>\n              ê²°ì œ ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedPayment && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ë ˆìŠ¤í† ë‘</div>\n                  <div className=\"font-medium\">{selectedPayment.restaurant?.name || \"-\"}</div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {selectedPayment.restaurant?.nameEn || \"-\"}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ê²°ì œì</div>\n                  <div className=\"font-medium\">\n                    {selectedPayment.user \n                      ? `${selectedPayment.user.firstName} ${selectedPayment.user.lastName}` \n                      : \"-\"}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {selectedPayment.user?.email || \"-\"}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ê²°ì œ ìœ í˜•</div>\n                  <Badge variant=\"outline\">\n                    {PAYMENT_TYPE_LABELS[selectedPayment.paymentType] || selectedPayment.paymentType}\n                  </Badge>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ê²°ì œ ê¸ˆì•¡</div>\n                  <div className=\"text-xl font-bold\">\n                    â‚©{selectedPayment.amount.toLocaleString()}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ê²°ì œ ë°©ë²•</div>\n                  <div className=\"font-medium\">{selectedPayment.paymentMethod || \"-\"}</div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ìƒíƒœ</div>\n                  <Badge variant={STATUS_LABELS[selectedPayment.status].variant}>\n                    {STATUS_LABELS[selectedPayment.status].label}\n                  </Badge>\n                </div>\n                {selectedPayment.transactionId && (\n                  <div className=\"col-span-2\">\n                    <div className=\"text-sm text-muted-foreground\">ê±°ë˜ ID</div>\n                    <div className=\"font-mono text-sm\">{selectedPayment.transactionId}</div>\n                  </div>\n                )}\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ìƒì„±ì¼</div>\n                  <div className=\"font-medium\">\n                    {format(new Date(selectedPayment.createdAt), \"yyyy-MM-dd HH:mm:ss\")}\n                  </div>\n                </div>\n                {selectedPayment.paidAt && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">ê²°ì œ ì™„ë£Œì¼</div>\n                    <div className=\"font-medium\">\n                      {format(new Date(selectedPayment.paidAt), \"yyyy-MM-dd HH:mm:ss\")}\n                    </div>\n                  </div>\n                )}\n                {selectedPayment.description && (\n                  <div className=\"col-span-2\">\n                    <div className=\"text-sm text-muted-foreground\">ì„¤ëª…</div>\n                    <div className=\"text-sm whitespace-pre-wrap\">{selectedPayment.description}</div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11547},"client/src/pages/admin/AdminRestaurantApplications.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Check, X, Eye } from \"lucide-react\";\nimport type { RestaurantApplication } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\n\nconst STATUS_LABELS: Record<string, { label: string; variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" }> = {\n  pending: { label: \"ëŒ€ê¸°ì¤‘\", variant: \"secondary\" },\n  approved: { label: \"ìŠ¹ì¸\", variant: \"default\" },\n  rejected: { label: \"ê±°ë¶€\", variant: \"destructive\" },\n};\n\ninterface ApplicationWithUser extends RestaurantApplication {\n  user?: {\n    firstName: string;\n    lastName: string;\n    email: string;\n  };\n}\n\nexport default function AdminRestaurantApplications() {\n  const { toast } = useToast();\n  \n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [selectedApplication, setSelectedApplication] = useState<ApplicationWithUser | null>(null);\n  const [isDetailDialogOpen, setIsDetailDialogOpen] = useState(false);\n  const [isProcessDialogOpen, setIsProcessDialogOpen] = useState(false);\n  const [processAction, setProcessAction] = useState<\"approved\" | \"rejected\">(\"approved\");\n  const [adminNote, setAdminNote] = useState(\"\");\n\n  // Fetch applications\n  const { data: applications = [], isLoading } = useQuery<ApplicationWithUser[]>({\n    queryKey: [\"/api/admin/restaurant-applications\"],\n  });\n\n  // Filter applications\n  const filteredApplications = applications.filter(app => \n    statusFilter === \"all\" || app.status === statusFilter\n  );\n\n  // Process mutation\n  const processMutation = useMutation({\n    mutationFn: async (data: { id: string; status: string; adminNote: string }) => {\n      return await apiRequest(\"POST\", `/api/admin/restaurant-applications/${data.id}/process`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/restaurant-applications\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/dashboard/priority-tasks\"] });\n      setIsProcessDialogOpen(false);\n      setIsDetailDialogOpen(false);\n      setAdminNote(\"\");\n      toast({\n        title: \"ì²˜ë¦¬ ì™„ë£Œ\",\n        description: \"ì…ì ì‹ ì²­ì´ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ì…ì ì‹ ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleViewDetails = (application: ApplicationWithUser) => {\n    setSelectedApplication(application);\n    setAdminNote(application.adminNote || \"\");\n    setIsDetailDialogOpen(true);\n  };\n\n  const handleProcess = (action: \"approved\" | \"rejected\") => {\n    setProcessAction(action);\n    setIsProcessDialogOpen(true);\n  };\n\n  const handleConfirmProcess = () => {\n    if (selectedApplication) {\n      processMutation.mutate({\n        id: selectedApplication.id,\n        status: processAction,\n        adminNote,\n      });\n    }\n  };\n\n  const pendingCount = applications.filter(a => a.status === \"pending\").length;\n  const approvedCount = applications.filter(a => a.status === \"approved\").length;\n  const rejectedCount = applications.filter(a => a.status === \"rejected\").length;\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">ì…ì ì‹ ì²­ ê´€ë¦¬</h1>\n          <p className=\"text-muted-foreground\">ë ˆìŠ¤í† ë‘ ì…ì  ì‹ ì²­ì„ ê²€í† í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤</p>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-4 gap-4\">\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì „ì²´</div>\n          <div className=\"text-2xl font-bold\">{applications.length}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ëŒ€ê¸°ì¤‘</div>\n          <div className=\"text-2xl font-bold text-yellow-600\">{pendingCount}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ìŠ¹ì¸</div>\n          <div className=\"text-2xl font-bold text-green-600\">{approvedCount}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ê±°ë¶€</div>\n          <div className=\"text-2xl font-bold text-red-600\">{rejectedCount}</div>\n        </Card>\n      </div>\n\n      {/* Filter */}\n      <Card className=\"p-4\">\n        <div className=\"flex gap-2\">\n          <Button\n            variant={statusFilter === \"all\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"all\")}\n            data-testid=\"filter-all\"\n          >\n            ì „ì²´ ({applications.length})\n          </Button>\n          <Button\n            variant={statusFilter === \"pending\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"pending\")}\n            data-testid=\"filter-pending\"\n          >\n            ëŒ€ê¸°ì¤‘ ({pendingCount})\n          </Button>\n          <Button\n            variant={statusFilter === \"approved\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"approved\")}\n            data-testid=\"filter-approved\"\n          >\n            ìŠ¹ì¸ ({approvedCount})\n          </Button>\n          <Button\n            variant={statusFilter === \"rejected\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"rejected\")}\n            data-testid=\"filter-rejected\"\n          >\n            ê±°ë¶€ ({rejectedCount})\n          </Button>\n        </div>\n      </Card>\n\n      {/* Applications List */}\n      <Card>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>ì‹ ì²­ì¼</TableHead>\n                <TableHead>ë ˆìŠ¤í† ë‘ëª…</TableHead>\n                <TableHead>ì‹ ì²­ì</TableHead>\n                <TableHead>ì‚¬ì—…ìë²ˆí˜¸</TableHead>\n                <TableHead>ì—°ë½ì²˜</TableHead>\n                <TableHead>ìƒíƒœ</TableHead>\n                <TableHead>ì‘ì—…</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredApplications.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center text-muted-foreground h-32\">\n                    ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredApplications.map((app) => (\n                  <TableRow key={app.id}>\n                    <TableCell className=\"whitespace-nowrap\">\n                      {format(new Date(app.createdAt), \"yyyy-MM-dd\")}\n                    </TableCell>\n                    <TableCell className=\"font-medium\">\n                      <div>{app.restaurantName}</div>\n                      <div className=\"text-xs text-muted-foreground\">{app.restaurantNameEn}</div>\n                    </TableCell>\n                    <TableCell>\n                      {app.user ? `${app.user.firstName} ${app.user.lastName}` : \"-\"}\n                    </TableCell>\n                    <TableCell>{app.businessNumber}</TableCell>\n                    <TableCell>\n                      <div className=\"text-sm\">{app.phone}</div>\n                      <div className=\"text-xs text-muted-foreground\">{app.email}</div>\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={STATUS_LABELS[app.status].variant}>\n                        {STATUS_LABELS[app.status].label}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleViewDetails(app)}\n                        data-testid={`button-view-${app.id}`}\n                      >\n                        <Eye className=\"w-4 h-4\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n\n      {/* Detail Dialog */}\n      <Dialog open={isDetailDialogOpen} onOpenChange={setIsDetailDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>ì…ì ì‹ ì²­ ìƒì„¸</DialogTitle>\n            <DialogDescription>\n              ì‹ ì²­ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì²˜ë¦¬í•˜ì„¸ìš”.\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedApplication && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ë ˆìŠ¤í† ë‘ëª… (í•œê¸€)</div>\n                  <div className=\"font-medium\">{selectedApplication.restaurantName}</div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ë ˆìŠ¤í† ë‘ëª… (ì˜ë¬¸)</div>\n                  <div className=\"font-medium\">{selectedApplication.restaurantNameEn}</div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ì‚¬ì—…ìë²ˆí˜¸</div>\n                  <div className=\"font-medium\">{selectedApplication.businessNumber}</div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ì „í™”ë²ˆí˜¸</div>\n                  <div className=\"font-medium\">{selectedApplication.phone}</div>\n                </div>\n                <div className=\"col-span-2\">\n                  <div className=\"text-sm text-muted-foreground\">ì´ë©”ì¼</div>\n                  <div className=\"font-medium\">{selectedApplication.email}</div>\n                </div>\n                <div className=\"col-span-2\">\n                  <div className=\"text-sm text-muted-foreground\">ì£¼ì†Œ</div>\n                  <div className=\"font-medium\">{selectedApplication.address}</div>\n                </div>\n                {selectedApplication.description && (\n                  <div className=\"col-span-2\">\n                    <div className=\"text-sm text-muted-foreground\">ì„¤ëª…</div>\n                    <div className=\"font-medium whitespace-pre-wrap\">{selectedApplication.description}</div>\n                  </div>\n                )}\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ì‹ ì²­ì¼</div>\n                  <div className=\"font-medium\">\n                    {format(new Date(selectedApplication.createdAt), \"yyyy-MM-dd HH:mm\")}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ìƒíƒœ</div>\n                  <Badge variant={STATUS_LABELS[selectedApplication.status].variant}>\n                    {STATUS_LABELS[selectedApplication.status].label}\n                  </Badge>\n                </div>\n                {selectedApplication.processedAt && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground\">ì²˜ë¦¬ì¼</div>\n                    <div className=\"font-medium\">\n                      {format(new Date(selectedApplication.processedAt), \"yyyy-MM-dd HH:mm\")}\n                    </div>\n                  </div>\n                )}\n                {selectedApplication.adminNote && (\n                  <div className=\"col-span-2\">\n                    <div className=\"text-sm text-muted-foreground\">ê´€ë¦¬ì ë©”ëª¨</div>\n                    <div className=\"font-medium whitespace-pre-wrap\">{selectedApplication.adminNote}</div>\n                  </div>\n                )}\n              </div>\n\n              {selectedApplication.status === \"pending\" && (\n                <div className=\"flex gap-2 justify-end pt-4 border-t\">\n                  <Button\n                    variant=\"destructive\"\n                    onClick={() => handleProcess(\"rejected\")}\n                    data-testid=\"button-reject\"\n                  >\n                    <X className=\"w-4 h-4 mr-2\" />\n                    ê±°ë¶€\n                  </Button>\n                  <Button\n                    onClick={() => handleProcess(\"approved\")}\n                    data-testid=\"button-approve\"\n                  >\n                    <Check className=\"w-4 h-4 mr-2\" />\n                    ìŠ¹ì¸\n                  </Button>\n                </div>\n              )}\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n\n      {/* Process Dialog */}\n      <Dialog open={isProcessDialogOpen} onOpenChange={setIsProcessDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>\n              {processAction === \"approved\" ? \"ì‹ ì²­ ìŠ¹ì¸\" : \"ì‹ ì²­ ê±°ë¶€\"}\n            </DialogTitle>\n            <DialogDescription>\n              ê´€ë¦¬ì ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì„ íƒì‚¬í•­)\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <Textarea\n              value={adminNote}\n              onChange={(e) => setAdminNote(e.target.value)}\n              placeholder=\"ê´€ë¦¬ì ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n              rows={4}\n              data-testid=\"input-admin-note\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsProcessDialogOpen(false)}\n              data-testid=\"button-cancel\"\n            >\n              ì·¨ì†Œ\n            </Button>\n            <Button\n              onClick={handleConfirmProcess}\n              disabled={processMutation.isPending}\n              variant={processAction === \"rejected\" ? \"destructive\" : \"default\"}\n              data-testid=\"button-confirm\"\n            >\n              {processMutation.isPending ? \"ì²˜ë¦¬ ì¤‘...\" : \"í™•ì¸\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":14752},"client/src/pages/admin/AdminUsersByTier.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Users } from \"lucide-react\";\n\ninterface TierStats {\n  tier: string;\n  count: number;\n  users: any[];\n}\n\nexport default function AdminUsersByTier() {\n  const { data: tierStats, isLoading } = useQuery<TierStats[]>({\n    queryKey: [\"/api/admin/users/by-tier\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  const getTierColor = (tier: string) => {\n    switch (tier) {\n      case \"platinum\": return \"bg-purple-500/10 text-purple-600 dark:text-purple-400\";\n      case \"gold\": return \"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400\";\n      case \"silver\": return \"bg-gray-500/10 text-gray-600 dark:text-gray-400\";\n      default: return \"bg-orange-500/10 text-orange-600 dark:text-orange-400\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Users by Tier</h1>\n        <p className=\"text-muted-foreground\">View users organized by membership tier</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {tierStats?.map((stat) => (\n          <Card key={stat.tier} className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className={`p-3 rounded-lg ${getTierColor(stat.tier)}`}>\n                <Users className=\"w-6 h-6\" />\n              </div>\n              <Badge className={getTierColor(stat.tier)}>{stat.tier.toUpperCase()}</Badge>\n            </div>\n            <p className=\"text-3xl font-bold\">{stat.count}</p>\n            <p className=\"text-sm text-muted-foreground mt-1\">members</p>\n          </Card>\n        ))}\n      </div>\n\n      {tierStats?.map((stat) => stat.count > 0 && (\n        <Card key={`list-${stat.tier}`} className=\"p-6\">\n          <h2 className=\"text-xl font-semibold mb-4 capitalize\">{stat.tier} Members</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {stat.users.map((user) => (\n              <div key={user.id} className=\"flex items-center gap-3 p-3 rounded-lg bg-muted\">\n                <div className=\"w-10 h-10 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold\">\n                  {user.firstName?.[0] || \"U\"}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"font-medium truncate\">{user.firstName} {user.lastName}</p>\n                  <p className=\"text-sm text-muted-foreground truncate\">{user.email}</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Card>\n      ))}\n    </div>\n  );\n}\n","size_bytes":2906},"client/src/pages/admin/AdminYouTube.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Video } from \"lucide-react\";\n\nexport default function AdminYouTube() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">YouTube Content Management</h1>\n        <p className=\"text-muted-foreground\">Manage YouTube videos and content</p>\n      </div>\n\n      <Card className=\"p-12\">\n        <div className=\"flex flex-col items-center justify-center text-center\">\n          <div className=\"p-6 rounded-full bg-muted mb-4\">\n            <Video className=\"w-12 h-12 text-muted-foreground\" />\n          </div>\n          <h3 className=\"text-xl font-semibold mb-2\">YouTube Management</h3>\n          <p className=\"text-muted-foreground max-w-md\">\n            Video content management features will be available here.\n            Manage YouTube videos linked to restaurants and general content.\n          </p>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":947},"client/src/pages/admin/AdminBlog.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Plus, ExternalLink } from \"lucide-react\";\nimport type { BlogPost } from \"@shared/schema\";\n\nexport default function AdminBlog() {\n  const { data: posts, isLoading } = useQuery<BlogPost[]>({\n    queryKey: [\"/api/admin/blog-posts\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Blog Management</h1>\n          <p className=\"text-muted-foreground\">Manage blog posts and external content</p>\n        </div>\n        <Button data-testid=\"button-create-post\">\n          <Plus className=\"w-4 h-4 mr-2\" />\n          New Post\n        </Button>\n      </div>\n\n      <Card className=\"p-6\">\n        {!posts || posts.length === 0 ? (\n          <p className=\"text-center text-muted-foreground py-8\">No blog posts yet</p>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Title</TableHead>\n                <TableHead>Category</TableHead>\n                <TableHead>Type</TableHead>\n                <TableHead>Views</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Published</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {posts.map((post) => (\n                <TableRow key={post.id}>\n                  <TableCell>\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-medium\">{post.title}</span>\n                      {post.isExternal === 1 && <ExternalLink className=\"w-4 h-4 text-muted-foreground\" />}\n                    </div>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">{post.category}</Badge>\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={post.isExternal === 1 ? \"secondary\" : \"default\"}>\n                      {post.isExternal === 1 ? \"External\" : \"Internal\"}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>{post.viewCount}</TableCell>\n                  <TableCell>\n                    <Badge variant={post.isPublished === 1 ? \"default\" : \"secondary\"}>\n                      {post.isPublished === 1 ? \"Published\" : \"Draft\"}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    {post.publishedAt ? new Date(post.publishedAt).toLocaleDateString() : \"-\"}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n    </div>\n  );\n}\n","size_bytes":3189},"client/src/pages/admin/AdminOwnerInquiries.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { MessageSquare, Eye } from \"lucide-react\";\nimport type { OwnerInquiry } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { format } from \"date-fns\";\n\nconst STATUS_LABELS: Record<string, { label: string; variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\" }> = {\n  pending: { label: \"ëŒ€ê¸°ì¤‘\", variant: \"secondary\" },\n  answered: { label: \"ë‹µë³€ì™„ë£Œ\", variant: \"default\" },\n  closed: { label: \"ì¢…ë£Œ\", variant: \"outline\" },\n};\n\nconst CATEGORY_LABELS: Record<string, string> = {\n  general: \"ì¼ë°˜ë¬¸ì˜\",\n  technical: \"ê¸°ìˆ ì§€ì›\",\n  billing: \"ê²°ì œë¬¸ì˜\",\n  other: \"ê¸°íƒ€\",\n};\n\ninterface InquiryWithDetails extends OwnerInquiry {\n  user?: {\n    firstName: string;\n    lastName: string;\n    email: string;\n  };\n  restaurant?: {\n    name: string;\n  };\n}\n\nexport default function AdminOwnerInquiries() {\n  const { toast } = useToast();\n  \n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [selectedInquiry, setSelectedInquiry] = useState<InquiryWithDetails | null>(null);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [adminResponse, setAdminResponse] = useState(\"\");\n\n  // Fetch inquiries\n  const { data: inquiries = [], isLoading } = useQuery<InquiryWithDetails[]>({\n    queryKey: [\"/api/admin/owner-inquiries\"],\n  });\n\n  // Filter inquiries\n  const filteredInquiries = inquiries.filter(inq => \n    statusFilter === \"all\" || inq.status === statusFilter\n  );\n\n  // Respond mutation\n  const respondMutation = useMutation({\n    mutationFn: async (data: { id: string; adminResponse: string; status: string }) => {\n      return await apiRequest(\"POST\", `/api/admin/owner-inquiries/${data.id}/respond`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/owner-inquiries\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/dashboard/priority-tasks\"] });\n      setIsDialogOpen(false);\n      setAdminResponse(\"\");\n      toast({\n        title: \"ë‹µë³€ ì™„ë£Œ\",\n        description: \"ë¬¸ì˜ì— ë‹µë³€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"ì˜¤ë¥˜\",\n        description: \"ë‹µë³€ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleView = (inquiry: InquiryWithDetails) => {\n    setSelectedInquiry(inquiry);\n    setAdminResponse(inquiry.adminResponse || \"\");\n    setIsDialogOpen(true);\n  };\n\n  const handleRespond = () => {\n    if (selectedInquiry && adminResponse.trim()) {\n      respondMutation.mutate({\n        id: selectedInquiry.id,\n        adminResponse,\n        status: \"answered\",\n      });\n    }\n  };\n\n  const pendingCount = inquiries.filter(i => i.status === \"pending\").length;\n  const answeredCount = inquiries.filter(i => i.status === \"answered\").length;\n  const closedCount = inquiries.filter(i => i.status === \"closed\").length;\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">ì—…ì£¼ ë¬¸ì˜ ê´€ë¦¬</h1>\n          <p className=\"text-muted-foreground\">ë ˆìŠ¤í† ë‘ ì—…ì£¼ì˜ ë¬¸ì˜ ì‚¬í•­ì„ ê´€ë¦¬í•©ë‹ˆë‹¤</p>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-4 gap-4\">\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì „ì²´</div>\n          <div className=\"text-2xl font-bold\">{inquiries.length}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ëŒ€ê¸°ì¤‘</div>\n          <div className=\"text-2xl font-bold text-yellow-600\">{pendingCount}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ë‹µë³€ì™„ë£Œ</div>\n          <div className=\"text-2xl font-bold text-green-600\">{answeredCount}</div>\n        </Card>\n        <Card className=\"p-4\">\n          <div className=\"text-sm text-muted-foreground\">ì¢…ë£Œ</div>\n          <div className=\"text-2xl font-bold text-gray-600\">{closedCount}</div>\n        </Card>\n      </div>\n\n      {/* Filter */}\n      <Card className=\"p-4\">\n        <div className=\"flex gap-2\">\n          <Button\n            variant={statusFilter === \"all\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"all\")}\n            data-testid=\"filter-all\"\n          >\n            ì „ì²´ ({inquiries.length})\n          </Button>\n          <Button\n            variant={statusFilter === \"pending\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"pending\")}\n            data-testid=\"filter-pending\"\n          >\n            ëŒ€ê¸°ì¤‘ ({pendingCount})\n          </Button>\n          <Button\n            variant={statusFilter === \"answered\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"answered\")}\n            data-testid=\"filter-answered\"\n          >\n            ë‹µë³€ì™„ë£Œ ({answeredCount})\n          </Button>\n          <Button\n            variant={statusFilter === \"closed\" ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => setStatusFilter(\"closed\")}\n            data-testid=\"filter-closed\"\n          >\n            ì¢…ë£Œ ({closedCount})\n          </Button>\n        </div>\n      </Card>\n\n      {/* Inquiries List */}\n      <Card>\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>ë‚ ì§œ</TableHead>\n                <TableHead>ì¹´í…Œê³ ë¦¬</TableHead>\n                <TableHead>ì œëª©</TableHead>\n                <TableHead>ì—…ì£¼</TableHead>\n                <TableHead>ë ˆìŠ¤í† ë‘</TableHead>\n                <TableHead>ìƒíƒœ</TableHead>\n                <TableHead>ì‘ì—…</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredInquiries.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={7} className=\"text-center text-muted-foreground h-32\">\n                    ë¬¸ì˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                filteredInquiries.map((inquiry) => (\n                  <TableRow key={inquiry.id}>\n                    <TableCell className=\"whitespace-nowrap\">\n                      {format(new Date(inquiry.createdAt), \"yyyy-MM-dd\")}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\">\n                        {CATEGORY_LABELS[inquiry.category] || inquiry.category}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"font-medium max-w-xs truncate\">\n                      {inquiry.title}\n                    </TableCell>\n                    <TableCell className=\"text-sm\">\n                      {inquiry.user ? `${inquiry.user.firstName} ${inquiry.user.lastName}` : \"-\"}\n                    </TableCell>\n                    <TableCell className=\"text-sm text-muted-foreground\">\n                      {inquiry.restaurant?.name || \"ì¼ë°˜ë¬¸ì˜\"}\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={STATUS_LABELS[inquiry.status].variant}>\n                        {STATUS_LABELS[inquiry.status].label}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleView(inquiry)}\n                        data-testid={`button-view-${inquiry.id}`}\n                      >\n                        {inquiry.status === \"pending\" ? (\n                          <MessageSquare className=\"w-4 h-4\" />\n                        ) : (\n                          <Eye className=\"w-4 h-4\" />\n                        )}\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n\n      {/* Detail & Response Dialog */}\n      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>{selectedInquiry?.title}</DialogTitle>\n            <DialogDescription>\n              {CATEGORY_LABELS[selectedInquiry?.category || \"\"] || selectedInquiry?.category} | \n              {selectedInquiry && ` ${format(new Date(selectedInquiry.createdAt), \"yyyy-MM-dd HH:mm\")}`}\n            </DialogDescription>\n          </DialogHeader>\n\n          {selectedInquiry && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ì—…ì£¼</div>\n                  <div className=\"font-medium\">\n                    {selectedInquiry.user ? `${selectedInquiry.user.firstName} ${selectedInquiry.user.lastName}` : \"-\"}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-muted-foreground\">ë ˆìŠ¤í† ë‘</div>\n                  <div className=\"font-medium\">\n                    {selectedInquiry.restaurant?.name || \"ì¼ë°˜ë¬¸ì˜\"}\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <div className=\"text-sm text-muted-foreground mb-2\">ë¬¸ì˜ ë‚´ìš©</div>\n                <div className=\"p-3 rounded-lg bg-muted text-sm whitespace-pre-wrap\">\n                  {selectedInquiry.content}\n                </div>\n              </div>\n\n              {selectedInquiry.status === \"pending\" ? (\n                <div>\n                  <label className=\"text-sm font-medium mb-2 block\">ê´€ë¦¬ì ë‹µë³€</label>\n                  <Textarea\n                    value={adminResponse}\n                    onChange={(e) => setAdminResponse(e.target.value)}\n                    placeholder=\"ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”...\"\n                    rows={5}\n                    data-testid=\"textarea-response\"\n                  />\n                </div>\n              ) : (\n                selectedInquiry.adminResponse && (\n                  <div>\n                    <div className=\"text-sm text-muted-foreground mb-2\">ê´€ë¦¬ì ë‹µë³€</div>\n                    <div className=\"p-3 rounded-lg bg-primary/5 text-sm whitespace-pre-wrap\">\n                      {selectedInquiry.adminResponse}\n                    </div>\n                    {selectedInquiry.answeredAt && (\n                      <div className=\"text-xs text-muted-foreground mt-2\">\n                        ë‹µë³€ì¼: {format(new Date(selectedInquiry.answeredAt), \"yyyy-MM-dd HH:mm\")}\n                      </div>\n                    )}\n                  </div>\n                )\n              )}\n            </div>\n          )}\n\n          <DialogFooter>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsDialogOpen(false)}\n              data-testid=\"button-close\"\n            >\n              ë‹«ê¸°\n            </Button>\n            {selectedInquiry?.status === \"pending\" && (\n              <Button\n                onClick={handleRespond}\n                disabled={respondMutation.isPending || !adminResponse.trim()}\n                data-testid=\"button-send-response\"\n              >\n                {respondMutation.isPending ? \"ì „ì†¡ ì¤‘...\" : \"ë‹µë³€ ì „ì†¡\"}\n              </Button>\n            )}\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":12434},"client/src/pages/admin/AdminAnnouncements.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Megaphone } from \"lucide-react\";\n\nexport default function AdminAnnouncements() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Announcement Management</h1>\n        <p className=\"text-muted-foreground\">Manage public announcements</p>\n      </div>\n\n      <Card className=\"p-12\">\n        <div className=\"flex flex-col items-center justify-center text-center\">\n          <div className=\"p-6 rounded-full bg-muted mb-4\">\n            <Megaphone className=\"w-12 h-12 text-muted-foreground\" />\n          </div>\n          <h3 className=\"text-xl font-semibold mb-2\">Announcement Management</h3>\n          <p className=\"text-muted-foreground max-w-md\">\n            Public announcement features are integrated with the existing system.\n            Manage announcements through the main Content section.\n          </p>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":959},"client/src/pages/admin/AdminCustomerInquiries.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { useState } from \"react\";\nimport { MessageSquare } from \"lucide-react\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { CustomerInquiry } from \"@shared/schema\";\n\nexport default function AdminCustomerInquiries() {\n  const { toast } = useToast();\n  const [selectedInquiry, setSelectedInquiry] = useState<CustomerInquiry | null>(null);\n  const [response, setResponse] = useState(\"\");\n\n  const { data: inquiries, isLoading } = useQuery<CustomerInquiry[]>({\n    queryKey: [\"/api/admin/customer-inquiries\"],\n  });\n\n  const respondMutation = useMutation({\n    mutationFn: async ({ id, response }: { id: string; response: string }) => {\n      return await apiRequest(\"POST\", `/api/admin/customer-inquiries/${id}/respond`, { adminResponse: response, status: \"answered\" });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/customer-inquiries\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/dashboard/priority-tasks\"] });\n      toast({\n        title: \"Success\",\n        description: \"Response sent successfully\",\n      });\n      setSelectedInquiry(null);\n      setResponse(\"\");\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to send response\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleRespond = () => {\n    if (!selectedInquiry || !response.trim()) return;\n    respondMutation.mutate({ id: selectedInquiry.id, response });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n      </div>\n    );\n  }\n\n  const pendingInquiries = inquiries?.filter(inq => inq.status === \"pending\") || [];\n  const answeredInquiries = inquiries?.filter(inq => inq.status !== \"pending\") || [];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Customer Inquiries</h1>\n        <p className=\"text-muted-foreground\">Manage customer support requests and questions</p>\n      </div>\n\n      {/* Pending Inquiries */}\n      <Card className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-xl font-semibold\">Pending Inquiries</h2>\n          <Badge variant=\"secondary\">{pendingInquiries.length}</Badge>\n        </div>\n        \n        {pendingInquiries.length === 0 ? (\n          <p className=\"text-center text-muted-foreground py-8\">No pending inquiries</p>\n        ) : (\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Category</TableHead>\n                <TableHead>Title</TableHead>\n                <TableHead>Customer</TableHead>\n                <TableHead>Date</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {pendingInquiries.map((inquiry) => (\n                <TableRow key={inquiry.id}>\n                  <TableCell>\n                    <Badge variant=\"outline\">{inquiry.category}</Badge>\n                  </TableCell>\n                  <TableCell className=\"font-medium\">{inquiry.title}</TableCell>\n                  <TableCell>\n                    <div className=\"text-sm\">\n                      <p className=\"font-medium\">{inquiry.name}</p>\n                      <p className=\"text-muted-foreground\">{inquiry.email}</p>\n                    </div>\n                  </TableCell>\n                  <TableCell>{new Date(inquiry.createdAt).toLocaleDateString()}</TableCell>\n                  <TableCell className=\"text-right\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => {\n                        setSelectedInquiry(inquiry);\n                        setResponse(inquiry.adminResponse || \"\");\n                      }}\n                      data-testid={`button-respond-${inquiry.id}`}\n                    >\n                      <MessageSquare className=\"w-4 h-4 mr-1\" />\n                      Respond\n                    </Button>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        )}\n      </Card>\n\n      {/* Answered Inquiries */}\n      {answeredInquiries.length > 0 && (\n        <Card className=\"p-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Answered Inquiries</h2>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Title</TableHead>\n                <TableHead>Customer</TableHead>\n                <TableHead>Status</TableHead>\n                <TableHead>Answered Date</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {answeredInquiries.map((inquiry) => (\n                <TableRow key={inquiry.id}>\n                  <TableCell className=\"font-medium\">{inquiry.title}</TableCell>\n                  <TableCell className=\"text-sm\">{inquiry.name}</TableCell>\n                  <TableCell>\n                    <Badge>{inquiry.status}</Badge>\n                  </TableCell>\n                  <TableCell>\n                    {inquiry.answeredAt ? new Date(inquiry.answeredAt).toLocaleDateString() : \"-\"}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Card>\n      )}\n\n      {/* Response Dialog */}\n      <Dialog open={!!selectedInquiry} onOpenChange={() => {\n        setSelectedInquiry(null);\n        setResponse(\"\");\n      }}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>{selectedInquiry?.title}</DialogTitle>\n            <DialogDescription>\n              From: {selectedInquiry?.name} ({selectedInquiry?.email}) | {selectedInquiry && new Date(selectedInquiry.createdAt).toLocaleDateString()}\n            </DialogDescription>\n          </DialogHeader>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <p className=\"text-sm font-medium mb-2\">Inquiry Content</p>\n              <div className=\"p-3 rounded-lg bg-muted text-sm\">\n                {selectedInquiry?.content}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Admin Response</label>\n              <Textarea\n                value={response}\n                onChange={(e) => setResponse(e.target.value)}\n                placeholder=\"Type your response here...\"\n                rows={5}\n                data-testid=\"textarea-response\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => {\n              setSelectedInquiry(null);\n              setResponse(\"\");\n            }}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleRespond}\n              disabled={respondMutation.isPending || !response.trim()}\n              data-testid=\"button-send-response\"\n            >\n              {respondMutation.isPending ? \"Sending...\" : \"Send Response\"}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":7879},"client/src/pages/admin/AdminEvents.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Calendar } from \"lucide-react\";\n\nexport default function AdminEvents() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\">Event Management</h1>\n        <p className=\"text-muted-foreground\">Manage platform events and promotions</p>\n      </div>\n\n      <Card className=\"p-12\">\n        <div className=\"flex flex-col items-center justify-center text-center\">\n          <div className=\"p-6 rounded-full bg-muted mb-4\">\n            <Calendar className=\"w-12 h-12 text-muted-foreground\" />\n          </div>\n          <h3 className=\"text-xl font-semibold mb-2\">Event Management</h3>\n          <p className=\"text-muted-foreground max-w-md\">\n            Event management features are integrated with the existing Event Banners system.\n            Create and manage events through the Content section.\n          </p>\n        </div>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":956},"client/src/pages/admin-pages.tsx":{"content":"import { lazy, Suspense } from \"react\";\nimport AdminLayout from \"./admin/AdminLayout\";\n\nconst AdminDashboardPage = lazy(() => import(\"./admin/AdminDashboard\"));\nconst AdminRestaurantsPage = lazy(() => import(\"./admin/AdminRestaurants\"));\nconst AdminRestaurantApplicationsPage = lazy(() => import(\"./admin/AdminRestaurantApplications\"));\nconst AdminOwnerInquiriesPage = lazy(() => import(\"./admin/AdminOwnerInquiries\"));\nconst AdminPaymentsPage = lazy(() => import(\"./admin/AdminPayments\"));\nconst AdminOwnerNoticesPage = lazy(() => import(\"./admin/AdminOwnerNotices\"));\nconst AdminUsersPage = lazy(() => import(\"./admin/AdminUsers\"));\nconst AdminUsersByTierPage = lazy(() => import(\"./admin/AdminUsersByTier\"));\nconst AdminUsersAnalyticsPage = lazy(() => import(\"./admin/AdminUsersAnalytics\"));\nconst AdminReviewsPage = lazy(() => import(\"./admin/AdminReviews\"));\nconst AdminContentPage = lazy(() => import(\"./admin/AdminContent\"));\nconst AdminYouTubePage = lazy(() => import(\"./admin/AdminYouTube\"));\nconst AdminBlogPage = lazy(() => import(\"./admin/AdminBlog\"));\nconst AdminEventsPage = lazy(() => import(\"./admin/AdminEvents\"));\nconst AdminAnnouncementsPage = lazy(() => import(\"./admin/AdminAnnouncements\"));\nconst AdminCustomerInquiriesPage = lazy(() => import(\"./admin/AdminCustomerInquiries\"));\nconst AdminPartnershipInquiriesPage = lazy(() => import(\"./admin/AdminPartnershipInquiries\"));\n\nfunction LoadingFallback() {\n  return (\n    <div className=\"flex items-center justify-center h-full\">\n      <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\" />\n    </div>\n  );\n}\n\nfunction withLayout(Page: React.ComponentType) {\n  return function WrappedPage() {\n    return (\n      <AdminLayout>\n        <Suspense fallback={<LoadingFallback />}>\n          <Page />\n        </Suspense>\n      </AdminLayout>\n    );\n  };\n}\n\nexport const AdminDashboard = withLayout(AdminDashboardPage);\nexport const AdminRestaurants = withLayout(AdminRestaurantsPage);\nexport const AdminRestaurantApplications = withLayout(AdminRestaurantApplicationsPage);\nexport const AdminOwnerInquiries = withLayout(AdminOwnerInquiriesPage);\nexport const AdminPayments = withLayout(AdminPaymentsPage);\nexport const AdminOwnerNotices = withLayout(AdminOwnerNoticesPage);\nexport const AdminUsers = withLayout(AdminUsersPage);\nexport const AdminUsersByTier = withLayout(AdminUsersByTierPage);\nexport const AdminUsersAnalytics = withLayout(AdminUsersAnalyticsPage);\nexport const AdminReviews = withLayout(AdminReviewsPage);\nexport const AdminContent = withLayout(AdminContentPage);\nexport const AdminYouTube = withLayout(AdminYouTubePage);\nexport const AdminBlog = withLayout(AdminBlogPage);\nexport const AdminEvents = withLayout(AdminEventsPage);\nexport const AdminAnnouncements = withLayout(AdminAnnouncementsPage);\nexport const AdminCustomerInquiries = withLayout(AdminCustomerInquiriesPage);\nexport const AdminPartnershipInquiries = withLayout(AdminPartnershipInquiriesPage);\n","size_bytes":2989},"CURRENT_ARCHITECTURE.md":{"content":"# í˜„ì¬ ì•„í‚¤í…ì²˜: ìŠ¤ë§ˆíŠ¸ ë¶„ë¦¬ ì „ëµ\n\n## ê°œìš”\n\ní•œì‹ë‹¹ í”„ë¡œì íŠ¸ëŠ” **ë‹¨ì¼ ë¹Œë“œ, ëŸ°íƒ€ì„ ë¶„ë¦¬** ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\nì´ëŠ” í”„ë¡ íŠ¸ì—”ë“œì™€ ì–´ë“œë¯¼ì„ ê°™ì€ ì½”ë“œë² ì´ìŠ¤ì— ë‘ë˜, ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ í•„ìš”í•œ ì½”ë“œë§Œ ë¡œë“œí•˜ë„ë¡ ìµœì í™”í•œ ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤.\n\n## ì•„í‚¤í…ì²˜ ì¥ì \n\n### 1. ëŸ°íƒ€ì„ ë¶„ë¦¬ âœ…\n\n**ì¼ë°˜ ì‚¬ìš©ì ì ‘ì† ì‹œ (`/`)**:\n```\në¡œë“œë˜ëŠ” ì½”ë“œ:\n- index.html\n- main.tsx (ì§„ì…ì )\n- App.tsx (ë¼ìš°í„°)\n- MainScreen, AIPage, ContentPage ë“± (lazy loaded)\n- ê³µí†µ ì»´í¬ë„ŒíŠ¸ (UI, hooks, lib)\n\në¡œë“œë˜ì§€ ì•ŠëŠ” ì½”ë“œ:\n- AdminRoutes âŒ\n- AdminDashboard, AdminRestaurants ë“± ëª¨ë“  ì–´ë“œë¯¼ í˜ì´ì§€ âŒ\n- AdminSidebar âŒ\n```\n\n**ì–´ë“œë¯¼ ì ‘ì† ì‹œ (`/admin`)**:\n```\në¡œë“œë˜ëŠ” ì½”ë“œ:\n- index.html\n- main.tsx (ì§„ì…ì )\n- App.tsx (ë¼ìš°í„°)\n- AdminRoutes (lazy loaded)\n- AdminDashboard, AdminRestaurants ë“± (lazy loaded)\n- ê³µí†µ ì»´í¬ë„ŒíŠ¸ (UI, hooks, lib)\n\në¡œë“œë˜ì§€ ì•ŠëŠ” ì½”ë“œ:\n- MainScreen âŒ\n- AIPage, ContentPage ë“± ì‚¬ìš©ì í˜ì´ì§€ âŒ\n```\n\n**í•µì‹¬**: React lazy loadingìœ¼ë¡œ ê° ì‚¬ìš©ìëŠ” í•„ìš”í•œ ì½”ë“œë§Œ ë¡œë“œí•©ë‹ˆë‹¤.\n\n### 2. ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… âœ…\n\nViteëŠ” ìë™ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ë²ˆë“¤ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤:\n\n```\ndist/public/\nâ”œâ”€â”€ index.html\nâ”œâ”€â”€ assets/\nâ”‚   â”œâ”€â”€ main-[hash].js           # ì§„ì…ì \nâ”‚   â”œâ”€â”€ AdminRoutes-[hash].js    # ì–´ë“œë¯¼ ì²­í¬\nâ”‚   â”œâ”€â”€ AdminDashboard-[hash].js # ì–´ë“œë¯¼ ëŒ€ì‹œë³´ë“œ\nâ”‚   â”œâ”€â”€ MainScreen-[hash].js     # ì‚¬ìš©ì ë©”ì¸\nâ”‚   â”œâ”€â”€ shared-[hash].js         # ê³µí†µ ì½”ë“œ\nâ”‚   â””â”€â”€ ...\n```\n\n**ë¸Œë¼ìš°ì € ë„¤íŠ¸ì›Œí¬ íƒ­**:\n- ì‚¬ìš©ì ì ‘ì†: `main.js`, `MainScreen.js`, `shared.js` ë¡œë“œ\n- ì–´ë“œë¯¼ ì ‘ì†: `main.js`, `AdminRoutes.js`, `AdminDashboard.js`, `shared.js` ë¡œë“œ\n\n### 3. ë¼ìš°íŒ… ë…ë¦½ì„± âœ…\n\n**App.tsx** (ë£¨íŠ¸ ë¼ìš°í„°):\n```typescript\n<Route path=\"/admin\" component={AdminRoutes} />\n<Route path=\"/admin/:rest*\" component={AdminRoutes} />\n```\n\n**AdminRoutes.tsx** (ì–´ë“œë¯¼ ë¼ìš°í„°):\n```typescript\n<Router base=\"/admin\">\n  <Route path=\"/\" component={AdminDashboard} />\n  <Route path=\"/restaurants\" component={AdminRestaurants} />\n  <Route path=\"/restaurants/applications\" component={AdminRestaurantApplications} />\n  ...\n</Router>\n```\n\n- ê° ì•±ì€ ë…ë¦½ì ì¸ ë¼ìš°íŒ… ë¡œì§\n- `/admin` í•˜ìœ„ ê²½ë¡œëŠ” AdminRoutesê°€ ì™„ì „íˆ ì œì–´\n- wouterì˜ Router base í™œìš©ìœ¼ë¡œ ê¹”ë”í•œ ê²½ë¡œ ê´€ë¦¬\n\n### 4. ê°œë°œ ìƒì‚°ì„± âœ…\n\n**ë‹¨ì¼ ì½”ë“œë² ì´ìŠ¤ ì¥ì **:\n- íƒ€ì… ìë™ ê³µìœ  (`shared/schema.ts`)\n- API í´ë¼ì´ì–¸íŠ¸ ìë™ ê³µìœ  (`lib/queryClient.ts`)\n- ì¸ì¦ ì‹œìŠ¤í…œ í†µí•© (`AuthContext`)\n- shadcn UI ì»´í¬ë„ŒíŠ¸ ê³µìœ \n- ê°™ì€ ê°œë°œ ì„œë²„, ê°™ì€ HMR\n\n**ì–´ë“œë¯¼ í˜ì´ì§€ ì¶”ê°€ ë°©ë²•**:\n1. `client/src/pages/admin/NewPage.tsx` ìƒì„±\n2. `AdminRoutes.tsx`ì— ë¼ìš°íŠ¸ ì¶”ê°€\n3. `AdminSidebar.tsx`ì— ë©”ë‰´ ì¶”ê°€\n4. ë! (ë³„ë„ ë¹Œë“œ ì„¤ì • ë¶ˆí•„ìš”)\n\n### 5. ë°°í¬ ë‹¨ìˆœì„± âœ…\n\n- ë‹¨ì¼ ë¹Œë“œ ëª…ë ¹: `npm run build`\n- ë‹¨ì¼ ë°°í¬: `dist/public` ë””ë ‰í† ë¦¬\n- ë‹¨ì¼ ì„œë²„ ì„¤ì •\n- ë‹¨ì¼ ë„ë©”ì¸ (ì˜ˆ: `hansikdang.com`, `hansikdang.com/admin`)\n\n### 6. ë¹„ìš© íš¨ìœ¨ì„± âœ…\n\n- ê°™ì€ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤\n- ê°™ì€ ì¸ì¦ ì‹œìŠ¤í…œ (Replit Auth)\n- ê°™ì€ ì„œë²„ ì¸í”„ë¼\n- ê³µí†µ ì½”ë“œ ì¤‘ë³µ ì—†ìŒ\n\n## ì„±ëŠ¥ ë¶„ì„\n\n### ì²« ë¡œë“œ ë¹„êµ (ì˜ˆìƒ)\n\n**ì‚¬ìš©ì ì•± (`/`)**:\n- HTML: 5KB\n- JavaScript (ì´ˆê¸°): 150KB (gzip)\n  - main.js: 30KB (ì§„ì…ì  + ë¼ìš°í„°)\n  - shared.js: 80KB (React, UI ì»´í¬ë„ŒíŠ¸)\n  - MainScreen.js: 40KB (ë©”ì¸ í˜ì´ì§€)\n- CSS: 20KB\n- **ì´ ì²« ë¡œë“œ**: ~175KB\n\n**ì–´ë“œë¯¼ ì•± (`/admin`)**:\n- HTML: 5KB\n- JavaScript (ì´ˆê¸°): 180KB (gzip)\n  - main.js: 30KB (ì§„ì…ì  + ë¼ìš°í„°)\n  - shared.js: 80KB (React, UI ì»´í¬ë„ŒíŠ¸)\n  - AdminRoutes.js: 10KB\n  - AdminDashboard.js: 60KB (ëŒ€ì‹œë³´ë“œ + ì°¨íŠ¸)\n- CSS: 20KB\n- **ì´ ì²« ë¡œë“œ**: ~205KB\n\n### ë„¤íŠ¸ì›Œí¬ ìµœì í™”\n\n**ìºì‹± ì „ëµ**:\n- `[hash].js` íŒŒì¼ëª…ìœ¼ë¡œ ë¬´í•œ ìºì‹œ (1ë…„)\n- ê³µí†µ ì½”ë“œ (`shared.js`)ëŠ” í•œ ë²ˆ ë‹¤ìš´ë¡œë“œ í›„ ì¬ì‚¬ìš©\n- ì–´ë“œë¯¼ ì²­í¬ëŠ” `/admin` ì ‘ì† ì „ê¹Œì§€ ë‹¤ìš´ë¡œë“œ ì•ˆ ë¨\n\n**ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤**:\n```\n1. ì‚¬ìš©ìê°€ hansikdang.com ë°©ë¬¸\n   â†’ MainScreen.js (40KB) ë‹¤ìš´ë¡œë“œ\n   \n2. ì‚¬ìš©ìê°€ /admin ë°©ë¬¸ (ê°™ì€ ì„¸ì…˜)\n   â†’ AdminRoutes.js (10KB), AdminDashboard.js (60KB)ë§Œ ì¶”ê°€ ë‹¤ìš´ë¡œë“œ\n   â†’ shared.jsëŠ” ìºì‹œì—ì„œ ì¬ì‚¬ìš©\n```\n\n## íŠ¸ë ˆì´ë“œì˜¤í”„\n\n### âœ… ì¥ì \n\n1. **ê°œë°œ ì†ë„**: íƒ€ì…/API ìë™ ê³µìœ , ë‹¨ì¼ ì„¤ì •\n2. **ìœ ì§€ë³´ìˆ˜**: í•œ ê³³ì—ì„œ ê´€ë¦¬\n3. **ì„±ëŠ¥**: lazy loadingìœ¼ë¡œ í•„ìš”í•œ ì½”ë“œë§Œ ë¡œë“œ\n4. **ì•ˆì •ì„±**: vite.config.ts ìˆ˜ì • ë¶ˆí•„ìš”\n5. **ë°°í¬**: ë‹¨ìˆœí•œ ë¹Œë“œ/ë°°í¬ í”„ë¡œì„¸ìŠ¤\n\n### âš ï¸ ë‹¨ì \n\n1. **ë¹Œë“œ ì‚¬ì´ì¦ˆ**: ì „ì²´ ë¹Œë“œì— ì–´ë“œë¯¼ ì½”ë“œ í¬í•¨ (~200KB ì¦ê°€)\n   - í•˜ì§€ë§Œ ì‚¬ìš©ìëŠ” ë‹¤ìš´ë¡œë“œ ì•ˆ í•¨\n   - CDN ì €ì¥ ê³µê°„ë§Œ ì¦ê°€\n   \n2. **ì½”ë“œ ê°€ì‹œì„±**: í”„ë¡œë•ì…˜ ë¹Œë“œì— ì–´ë“œë¯¼ ì½”ë“œê°€ ì¡´ì¬\n   - í•˜ì§€ë§Œ ë‚œë…í™”ë˜ì–´ ìˆìŒ\n   - ì–´ì°¨í”¼ ë°±ì—”ë“œ ì¸ì¦ í•„ìš”\n   \n3. **ë…ë¦½ ë°°í¬ ë¶ˆê°€**: ì–´ë“œë¯¼ë§Œ ì—…ë°ì´íŠ¸ ì‹œ ì „ì²´ ì¬ë¹Œë“œ\n   - í•˜ì§€ë§Œ ë¹Œë“œ ì‹œê°„ ì§§ìŒ (~30ì´ˆ)\n   - ì‹¤ì œë¡œëŠ” ë¬¸ì œ ì•ˆ ë¨\n\n## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­\n\n### í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë…¸ì¶œ\n\n**Q**: ì–´ë“œë¯¼ ì½”ë“œê°€ ë¹Œë“œì— í¬í•¨ë˜ë©´ ë³´ì•ˆ ë¬¸ì œëŠ”?\n**A**: ë¬¸ì œ ì—†ìŒ. ì´ìœ :\n\n1. **ë°±ì—”ë“œ ì¸ì¦**: ëª¨ë“  `/api/admin/*` ì—”ë“œí¬ì¸íŠ¸ëŠ” ì„œë²„ì—ì„œ ì¸ì¦ ì²´í¬\n2. **í† í° ê²€ì¦**: JWT/ì„¸ì…˜ í† í° ì—†ìœ¼ë©´ API í˜¸ì¶œ ë¶ˆê°€\n3. **ë‚œë…í™”**: í”„ë¡œë•ì…˜ ë¹Œë“œëŠ” ì••ì¶•/ë‚œë…í™”ë¨\n4. **í‘œì¤€ ë°©ì‹**: ëŒ€ë¶€ë¶„ì˜ SPA(Single Page App)ê°€ ì´ ë°©ì‹ ì‚¬ìš©\n\n**ì‹¤ì œ ë³´ì•ˆ**:\n```typescript\n// í”„ë¡ íŠ¸ì—”ë“œ (ë³´í˜¸ë˜ì§€ ì•ŠìŒ, ê·¸ë˜ë„ ê´œì°®ìŒ)\nawait fetch('/api/admin/users');\n\n// ë°±ì—”ë“œ (ì§„ì§œ ë³´ì•ˆ)\napp.get('/api/admin/users', isAdmin, async (req, res) => {\n  if (!req.user?.isAdmin) {\n    return res.status(403).json({ error: 'Forbidden' });\n  }\n  // ...\n});\n```\n\n## ê²°ë¡ \n\ní˜„ì¬ ì•„í‚¤í…ì²˜ëŠ”:\n- âœ… ì‚¬ìš©ì ì„±ëŠ¥ ìµœì í™” (í•„ìš”í•œ ì½”ë“œë§Œ ë¡œë“œ)\n- âœ… ê°œë°œ ìƒì‚°ì„± ê·¹ëŒ€í™” (íƒ€ì…/API ê³µìœ )\n- âœ… ë°°í¬ ë³µì¡ë„ ìµœì†Œí™” (ë‹¨ì¼ ë¹Œë“œ)\n- âœ… ì•ˆì •ì„± ë³´ì¥ (ì„¤ì • íŒŒì¼ ìˆ˜ì • ë¶ˆí•„ìš”)\n\n**ì–¸ì œ ì™„ì „ ë¶„ë¦¬ë¥¼ ê³ ë ¤?**\n- ì–´ë“œë¯¼ íŒ€ê³¼ í”„ë¡ íŠ¸ íŒ€ ì™„ì „ ë¶„ë¦¬\n- ë°°í¬ ì£¼ê¸°ê°€ ì™„ì „íˆ ë‹¤ë¥¼ ë•Œ\n- ì–´ë“œë¯¼ ë³µì¡ë„ê°€ ê·¹ë„ë¡œ ë†’ì•„ì§ˆ ë•Œ\n\ní˜„ ì‹œì ì—ì„œëŠ” **í˜„ì¬ êµ¬ì¡°ê°€ ìµœì **ì…ë‹ˆë‹¤.\n","size_bytes":6499},"shared/types.ts":{"content":"/**\n * API Response Types\n * Defines strongly-typed interfaces for API responses across the application\n */\n\nimport type { \n  User, \n  Restaurant, \n  Review, \n  SavedRestaurant,\n  CustomerInquiry,\n  Announcement,\n  Menu,\n  RestaurantImage,\n  RestaurantInsights,\n  ExternalReview,\n  Promotion,\n  ReviewResponse\n} from \"./schema\";\n\n// ==================== User Management ====================\n\nexport interface UserDetailsResponse {\n  user: User;\n  reviews: Review[];\n  savedRestaurants: Array<SavedRestaurant & { restaurant: Restaurant }>;\n  customerInquiries: CustomerInquiry[];\n  stats: {\n    totalReviews: number;\n    averageRating: number;\n    totalSaved: number;\n  };\n}\n\n// ==================== Dashboard Analytics ====================\n\nexport interface AdminDashboardStatsResponse {\n  totalRestaurants: number;\n  totalUsers: number;\n  totalReviews: number;\n  totalAnnouncements: number;\n  recentUsers: User[];\n  recentReviews: Review[];\n  restaurantsByCuisine: Array<{ cuisine: string; count: number }>;\n  reviewsPerDay: Array<{ date: string; count: number }>;\n}\n\nexport interface AdminReviewWithRestaurant extends Review {\n  restaurantName: string;\n  restaurantNameEn: string;\n}\n\nexport interface AdminUserAnalyticsResponse {\n  totalUsers: number;\n  usersByTier: Array<{ tier: string; count: number }>;\n  usersByRegion: Array<{ region: string; count: number }>;\n  usersBySsoProvider: Array<{ ssoProvider: string; count: number }>;\n  recentUsers: User[];\n}\n\n// ==================== Restaurant Management ====================\n\nexport interface RestaurantAnalyticsResponse {\n  totalRestaurants: number;\n  restaurantsByCuisine: Array<{ cuisine: string; count: number }>;\n  restaurantsByDistrict: Array<{ district: string; count: number }>;\n  topRatedRestaurants: Restaurant[];\n  recentRestaurants: Restaurant[];\n}\n\n// ==================== Review Management ====================\n\nexport interface ReviewAnalyticsResponse {\n  totalReviews: number;\n  averageRating: number;\n  reviewsByRating: Array<{ rating: number; count: number }>;\n  reviewsPerDay: Array<{ date: string; count: number }>;\n  recentReviews: Array<AdminReviewWithRestaurant>;\n}\n\n// ==================== Common Patterns ====================\n\nexport interface PaginatedResponse<T> {\n  data: T[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    hasMore: boolean;\n  };\n}\n\nexport interface ApiErrorResponse {\n  error: string;\n  details?: string;\n}\n\nexport interface SuccessResponse<T = void> {\n  success: boolean;\n  data?: T;\n  message?: string;\n}\n\n// ==================== Filter Parameters ====================\n\nexport interface ReviewFilterParams {\n  restaurantId?: string;\n  minRating?: number;\n  maxRating?: number;\n  startDate?: string;\n  endDate?: string;\n  isPinned?: number;\n  sortBy?: 'createdAt' | 'rating';\n  sortOrder?: 'asc' | 'desc';\n}\n\nexport interface UserFilterParams {\n  tier?: string;\n  region?: string;\n  ssoProvider?: string;\n  isAdmin?: number;\n  searchQuery?: string;\n}\n\nexport interface RestaurantFilterParams {\n  cuisine?: string;\n  district?: string;\n  minRating?: number;\n  maxRating?: number;\n  isFeatured?: number;\n  searchQuery?: string;\n}\n\n// ==================== Restaurant Detail Response ====================\n\nexport interface RestaurantDetailResponse extends Restaurant {\n  menus: Menu[];\n  images: RestaurantImage[];\n  insights: RestaurantInsights | null;\n  externalReviews: ExternalReview[];\n  activePromotions: Promotion[];\n}\n\nexport interface RestaurantWithReviewsResponse extends Restaurant {\n  reviews: Array<Review & { user?: { name: string; tier: string } }>;\n  userReview?: Review | null;\n}\n\n// ==================== Review with Response ====================\n\nexport interface ReviewWithResponse extends Review {\n  response: ReviewResponse | null;\n  user?: { name: string; tier: string };\n}\n\n// ==================== Restaurant Dashboard ====================\n\nexport interface RestaurantDashboardStatsResponse {\n  totalReviews: number;\n  averageRating: number;\n  ratingTrend: number;\n  reviewsThisMonth: number;\n  promotionsActive: number;\n  imagesCount: number;\n}\n","size_bytes":4096},"server/logger.ts":{"content":"/**\n * Structured logging utility for the application\n * Provides consistent error logging and prevents sensitive data exposure\n */\n\nexport type LogLevel = 'info' | 'warn' | 'error' | 'debug';\n\ninterface LogContext {\n  userId?: string;\n  restaurantId?: string;\n  requestId?: string;\n  method?: string;\n  path?: string;\n  [key: string]: any;\n}\n\nclass Logger {\n  private formatMessage(level: LogLevel, message: string, context?: LogContext, error?: Error): string {\n    const timestamp = new Date().toISOString();\n    const baseLog = {\n      timestamp,\n      level,\n      message,\n      ...context,\n    };\n\n    if (error) {\n      return JSON.stringify({\n        ...baseLog,\n        error: {\n          name: error.name,\n          message: error.message,\n          stack: process.env.NODE_ENV === 'development' ? error.stack : undefined,\n        },\n      });\n    }\n\n    return JSON.stringify(baseLog);\n  }\n\n  info(message: string, context?: LogContext): void {\n    console.log(this.formatMessage('info', message, context));\n  }\n\n  warn(message: string, context?: LogContext): void {\n    console.warn(this.formatMessage('warn', message, context));\n  }\n\n  error(message: string, context?: LogContext, error?: Error): void {\n    console.error(this.formatMessage('error', message, context, error));\n  }\n\n  debug(message: string, context?: LogContext): void {\n    if (process.env.NODE_ENV === 'development') {\n      console.debug(this.formatMessage('debug', message, context));\n    }\n  }\n}\n\nexport const logger = new Logger();\n\n/**\n * Generic error messages for API responses\n * Prevents leaking sensitive information to clients\n */\nexport const ErrorMessages = {\n  INTERNAL_ERROR: 'An internal error occurred. Please try again later.',\n  UNAUTHORIZED: 'Authentication required.',\n  FORBIDDEN: 'You do not have permission to perform this action.',\n  NOT_FOUND: 'The requested resource was not found.',\n  BAD_REQUEST: 'Invalid request parameters.',\n  VALIDATION_ERROR: 'Validation failed for the provided data.',\n} as const;\n","size_bytes":2015},"server/objectAcl.ts":{"content":"import { File } from \"@google-cloud/storage\";\n\nconst ACL_POLICY_METADATA_KEY = \"custom:aclPolicy\";\n\nexport enum ObjectAccessGroupType {}\n\nexport interface ObjectAccessGroup {\n  type: ObjectAccessGroupType;\n  id: string;\n}\n\nexport enum ObjectPermission {\n  READ = \"read\",\n  WRITE = \"write\",\n}\n\nexport interface ObjectAclRule {\n  group: ObjectAccessGroup;\n  permission: ObjectPermission;\n}\n\nexport interface ObjectAclPolicy {\n  owner: string;\n  visibility: \"public\" | \"private\";\n  aclRules?: Array<ObjectAclRule>;\n}\n\nfunction isPermissionAllowed(\n  requested: ObjectPermission,\n  granted: ObjectPermission,\n): boolean {\n  if (requested === ObjectPermission.READ) {\n    return [ObjectPermission.READ, ObjectPermission.WRITE].includes(granted);\n  }\n  return granted === ObjectPermission.WRITE;\n}\n\nabstract class BaseObjectAccessGroup implements ObjectAccessGroup {\n  constructor(\n    public readonly type: ObjectAccessGroupType,\n    public readonly id: string,\n  ) {}\n\n  public abstract hasMember(userId: string): Promise<boolean>;\n}\n\nfunction createObjectAccessGroup(\n  group: ObjectAccessGroup,\n): BaseObjectAccessGroup {\n  switch (group.type) {\n    default:\n      throw new Error(`Unknown access group type: ${group.type}`);\n  }\n}\n\nexport async function setObjectAclPolicy(\n  objectFile: File,\n  aclPolicy: ObjectAclPolicy,\n): Promise<void> {\n  const [exists] = await objectFile.exists();\n  if (!exists) {\n    throw new Error(`Object not found: ${objectFile.name}`);\n  }\n\n  await objectFile.setMetadata({\n    metadata: {\n      [ACL_POLICY_METADATA_KEY]: JSON.stringify(aclPolicy),\n    },\n  });\n}\n\nexport async function getObjectAclPolicy(\n  objectFile: File,\n): Promise<ObjectAclPolicy | null> {\n  const [metadata] = await objectFile.getMetadata();\n  const aclPolicy = metadata?.metadata?.[ACL_POLICY_METADATA_KEY];\n  if (!aclPolicy) {\n    return null;\n  }\n  return JSON.parse(aclPolicy as string);\n}\n\nexport async function canAccessObject({\n  userId,\n  objectFile,\n  requestedPermission,\n}: {\n  userId?: string;\n  objectFile: File;\n  requestedPermission: ObjectPermission;\n}): Promise<boolean> {\n  const aclPolicy = await getObjectAclPolicy(objectFile);\n  if (!aclPolicy) {\n    return false;\n  }\n\n  if (\n    aclPolicy.visibility === \"public\" &&\n    requestedPermission === ObjectPermission.READ\n  ) {\n    return true;\n  }\n\n  if (!userId) {\n    return false;\n  }\n\n  if (aclPolicy.owner === userId) {\n    return true;\n  }\n\n  for (const rule of aclPolicy.aclRules || []) {\n    const accessGroup = createObjectAccessGroup(rule.group);\n    if (\n      (await accessGroup.hasMember(userId)) &&\n      isPermissionAllowed(requestedPermission, rule.permission)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","size_bytes":2707},"server/objectStorage.ts":{"content":"import { Storage, File } from \"@google-cloud/storage\";\nimport { Response } from \"express\";\nimport { randomUUID } from \"crypto\";\nimport {\n  ObjectAclPolicy,\n  ObjectPermission,\n  canAccessObject,\n  getObjectAclPolicy,\n  setObjectAclPolicy,\n} from \"./objectAcl\";\n\nconst REPLIT_SIDECAR_ENDPOINT = \"http://127.0.0.1:1106\";\n\nexport const objectStorageClient = new Storage({\n  credentials: {\n    audience: \"replit\",\n    subject_token_type: \"access_token\",\n    token_url: `${REPLIT_SIDECAR_ENDPOINT}/token`,\n    type: \"external_account\",\n    credential_source: {\n      url: `${REPLIT_SIDECAR_ENDPOINT}/credential`,\n      format: {\n        type: \"json\",\n        subject_token_field_name: \"access_token\",\n      },\n    },\n    universe_domain: \"googleapis.com\",\n  },\n  projectId: \"\",\n});\n\nexport class ObjectNotFoundError extends Error {\n  constructor() {\n    super(\"Object not found\");\n    this.name = \"ObjectNotFoundError\";\n    Object.setPrototypeOf(this, ObjectNotFoundError.prototype);\n  }\n}\n\nexport class ObjectStorageService {\n  constructor() {}\n\n  getPublicObjectSearchPaths(): Array<string> {\n    const pathsStr = process.env.PUBLIC_OBJECT_SEARCH_PATHS || \"\";\n    const paths = Array.from(\n      new Set(\n        pathsStr\n          .split(\",\")\n          .map((path) => path.trim())\n          .filter((path) => path.length > 0)\n      )\n    );\n    if (paths.length === 0) {\n      throw new Error(\n        \"PUBLIC_OBJECT_SEARCH_PATHS not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PUBLIC_OBJECT_SEARCH_PATHS env var (comma-separated paths).\"\n      );\n    }\n    return paths;\n  }\n\n  getPrivateObjectDir(): string {\n    const dir = process.env.PRIVATE_OBJECT_DIR || \"\";\n    if (!dir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n    return dir;\n  }\n\n  async searchPublicObject(filePath: string): Promise<File | null> {\n    for (const searchPath of this.getPublicObjectSearchPaths()) {\n      const fullPath = `${searchPath}/${filePath}`;\n      const { bucketName, objectName } = parseObjectPath(fullPath);\n      const bucket = objectStorageClient.bucket(bucketName);\n      const file = bucket.file(objectName);\n      const [exists] = await file.exists();\n      if (exists) {\n        return file;\n      }\n    }\n    return null;\n  }\n\n  async downloadObject(file: File, res: Response, cacheTtlSec: number = 3600) {\n    try {\n      const [metadata] = await file.getMetadata();\n      const aclPolicy = await getObjectAclPolicy(file);\n      const isPublic = aclPolicy?.visibility === \"public\";\n      \n      res.set({\n        \"Content-Type\": metadata.contentType || \"application/octet-stream\",\n        \"Content-Length\": metadata.size,\n        \"Cache-Control\": `${isPublic ? \"public\" : \"private\"}, max-age=${cacheTtlSec}`,\n      });\n\n      const stream = file.createReadStream();\n      stream.on(\"error\", (err) => {\n        console.error(\"Stream error:\", err);\n        if (!res.headersSent) {\n          res.status(500).json({ error: \"Error streaming file\" });\n        }\n      });\n      stream.pipe(res);\n    } catch (error) {\n      console.error(\"Error downloading file:\", error);\n      if (!res.headersSent) {\n        res.status(500).json({ error: \"Error downloading file\" });\n      }\n    }\n  }\n\n  async getObjectEntityUploadURL(): Promise<string> {\n    const privateObjectDir = this.getPrivateObjectDir();\n    const objectId = randomUUID();\n    const fullPath = `${privateObjectDir}/uploads/${objectId}`;\n    const { bucketName, objectName } = parseObjectPath(fullPath);\n\n    return signObjectURL({\n      bucketName,\n      objectName,\n      method: \"PUT\",\n      ttlSec: 900,\n    });\n  }\n\n  async getObjectEntityFile(objectPath: string): Promise<File> {\n    if (!objectPath.startsWith(\"/objects/\")) {\n      throw new ObjectNotFoundError();\n    }\n\n    const parts = objectPath.slice(1).split(\"/\");\n    if (parts.length < 2) {\n      throw new ObjectNotFoundError();\n    }\n\n    const entityId = parts.slice(1).join(\"/\");\n    let entityDir = this.getPrivateObjectDir();\n    if (!entityDir.endsWith(\"/\")) {\n      entityDir = `${entityDir}/`;\n    }\n    const objectEntityPath = `${entityDir}${entityId}`;\n    const { bucketName, objectName } = parseObjectPath(objectEntityPath);\n    const bucket = objectStorageClient.bucket(bucketName);\n    const objectFile = bucket.file(objectName);\n    const [exists] = await objectFile.exists();\n    if (!exists) {\n      throw new ObjectNotFoundError();\n    }\n    return objectFile;\n  }\n\n  normalizeObjectEntityPath(rawPath: string): string {\n    if (!rawPath.startsWith(\"https://storage.googleapis.com/\")) {\n      return rawPath;\n    }\n\n    const url = new URL(rawPath);\n    const rawObjectPath = url.pathname;\n\n    let objectEntityDir = this.getPrivateObjectDir();\n    if (!objectEntityDir.endsWith(\"/\")) {\n      objectEntityDir = `${objectEntityDir}/`;\n    }\n\n    if (!rawObjectPath.startsWith(objectEntityDir)) {\n      return rawObjectPath;\n    }\n\n    const entityId = rawObjectPath.slice(objectEntityDir.length);\n    return `/objects/${entityId}`;\n  }\n\n  async trySetObjectEntityAclPolicy(\n    rawPath: string,\n    aclPolicy: ObjectAclPolicy\n  ): Promise<string> {\n    const normalizedPath = this.normalizeObjectEntityPath(rawPath);\n    if (!normalizedPath.startsWith(\"/\")) {\n      return normalizedPath;\n    }\n\n    const objectFile = await this.getObjectEntityFile(normalizedPath);\n    await setObjectAclPolicy(objectFile, aclPolicy);\n    return normalizedPath;\n  }\n\n  async canAccessObjectEntity({\n    userId,\n    objectFile,\n    requestedPermission,\n  }: {\n    userId?: string;\n    objectFile: File;\n    requestedPermission?: ObjectPermission;\n  }): Promise<boolean> {\n    return canAccessObject({\n      userId,\n      objectFile,\n      requestedPermission: requestedPermission ?? ObjectPermission.READ,\n    });\n  }\n}\n\nfunction parseObjectPath(path: string): {\n  bucketName: string;\n  objectName: string;\n} {\n  if (!path.startsWith(\"/\")) {\n    path = `/${path}`;\n  }\n  const pathParts = path.split(\"/\");\n  if (pathParts.length < 3) {\n    throw new Error(\"Invalid path: must contain at least a bucket name\");\n  }\n\n  const bucketName = pathParts[1];\n  const objectName = pathParts.slice(2).join(\"/\");\n\n  return {\n    bucketName,\n    objectName,\n  };\n}\n\nasync function signObjectURL({\n  bucketName,\n  objectName,\n  method,\n  ttlSec,\n}: {\n  bucketName: string;\n  objectName: string;\n  method: \"GET\" | \"PUT\" | \"DELETE\" | \"HEAD\";\n  ttlSec: number;\n}): Promise<string> {\n  const request = {\n    bucket_name: bucketName,\n    object_name: objectName,\n    method,\n    expires_at: new Date(Date.now() + ttlSec * 1000).toISOString(),\n  };\n  const response = await fetch(\n    `${REPLIT_SIDECAR_ENDPOINT}/object-storage/signed-object-url`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(request),\n    }\n  );\n  if (!response.ok) {\n    throw new Error(\n      `Failed to sign object URL, errorcode: ${response.status}, ` +\n        `make sure you're running on Replit`\n    );\n  }\n\n  const { signed_url: signedURL } = await response.json();\n  return signedURL;\n}\n","size_bytes":7196},"client/src/components/ObjectUploader.tsx":{"content":"import { useState } from \"react\";\nimport type { ReactNode } from \"react\";\nimport Uppy from \"@uppy/core\";\nimport { DashboardModal } from \"@uppy/react\";\nimport \"@uppy/core/dist/style.min.css\";\nimport \"@uppy/dashboard/dist/style.min.css\";\nimport AwsS3 from \"@uppy/aws-s3\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ObjectUploaderProps {\n  maxNumberOfFiles?: number;\n  maxFileSize?: number;\n  onGetUploadParameters: () => Promise<{\n    method: \"PUT\";\n    url: string;\n  }>;\n  onComplete?: (\n    result: UploadResult<Record<string, unknown>, Record<string, unknown>>\n  ) => void;\n  buttonClassName?: string;\n  children: ReactNode;\n}\n\nexport function ObjectUploader({\n  maxNumberOfFiles = 1,\n  maxFileSize = 10485760,\n  onGetUploadParameters,\n  onComplete,\n  buttonClassName,\n  children,\n}: ObjectUploaderProps) {\n  const [showModal, setShowModal] = useState(false);\n  const [uppy] = useState(() =>\n    new Uppy({\n      restrictions: {\n        maxNumberOfFiles,\n        maxFileSize,\n      },\n      autoProceed: false,\n    })\n      .use(AwsS3, {\n        shouldUseMultipart: false,\n        getUploadParameters: onGetUploadParameters,\n      })\n      .on(\"complete\", (result) => {\n        onComplete?.(result);\n      })\n  );\n\n  return (\n    <div>\n      <Button onClick={() => setShowModal(true)} className={buttonClassName} data-testid=\"button-upload-image\">\n        {children}\n      </Button>\n\n      <DashboardModal\n        uppy={uppy}\n        open={showModal}\n        onRequestClose={() => setShowModal(false)}\n        proudlyDisplayPoweredByUppy={false}\n      />\n    </div>\n  );\n}\n","size_bytes":1640},"scripts/seed-restaurants.ts":{"content":"import { drizzle as drizzlePostgres } from \"drizzle-orm/postgres-js\";\nimport postgres from \"postgres\";\nimport { restaurants, menus, restaurantInsights } from \"../shared/schema\";\n\nconst DATABASE_URL = process.env.DATABASE_URL!;\nconst client = postgres(DATABASE_URL, {\n  max: 10,\n  idle_timeout: 20,\n  connect_timeout: 10,\n});\nconst db = drizzlePostgres(client);\n\nconst SEOUL_RESTAURANTS = [\n  {\n    name: \"ë¯¸ì§„\",\n    nameEn: \"Mijin\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡ë¥˜\",\n    district: \"ê°•ë‚¨êµ¬\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ë…¼í˜„ë™ 132-3\",\n    latitude: 37.5118,\n    longitude: 127.0268,\n    description: \"1962ë…„ë¶€í„° ì´ì–´ì˜¨ ì „í†µ ìœ¡ë¥˜ ì „ë¬¸ì . í•œìš° ìœ¡íšŒì™€ ë¶ˆê³ ê¸°ë¡œ ìœ ëª…í•˜ë©°, ì •ê°ˆí•œ í•œì‹ ë°‘ë°˜ì°¬ì´ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Traditional Korean beef restaurant since 1962. Famous for Korean beef tartare and bulgogi with refined side dishes.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/mijin.jpg\",\n    openHours: \"11:00-22:00\",\n    phone: \"02-542-3659\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ë…¼í˜„ë™\",\n  },\n  {\n    name: \"ê´‘ì¥ì‹œì¥ ë§ˆì•½ê¹€ë°¥\",\n    nameEn: \"Gwangjang Market Gimbap\",\n    category: \"í•œì‹\",\n    cuisine: \"ë¶„ì‹\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì°½ê²½ê¶ë¡œ 88 ê´‘ì¥ì‹œì¥\",\n    latitude: 37.5705,\n    longitude: 126.9997,\n    description: \"ê´‘ì¥ì‹œì¥ì˜ ëª…ë¬¼ ë§ˆì•½ê¹€ë°¥. ì¤‘ë…ì„± ìˆëŠ” ë§›ìœ¼ë¡œ ìœ ëª…í•˜ë©° ì €ë ´í•œ ê°€ê²©ì— í‘¸ì§í•œ ì–‘ì„ ìë‘í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Famous 'addictive' gimbap at Gwangjang Market. Known for its large portions at affordable prices.\",\n    priceRange: 1,\n    imageUrl: \"/images/restaurants/mayak-gimbap.jpg\",\n    openHours: \"09:00-22:00\",\n    phone: \"010-1234-5678\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì°½ê²½ê¶ë¡œ\",\n  },\n  {\n    name: \"ì§„ë¯¸í‰ì–‘ëƒ‰ë©´\",\n    nameEn: \"Jinmi Pyongyang Naengmyeon\",\n    category: \"í•œì‹\",\n    cuisine: \"ëƒ‰ë©´\",\n    district: \"ì¤‘êµ¬\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ì„ì§€ë¡œ ë™ ì¶©ë¬´ë¡œ1ê°€ 24-11\",\n    latitude: 37.5617,\n    longitude: 126.9958,\n    description: \"í‰ì–‘ì‹ ëƒ‰ë©´ì˜ ì •í†µì„ ì§€í‚¤ëŠ” ë…¸í¬. ê¹Šì€ ìœ¡ìˆ˜ì™€ ì«„ê¹ƒí•œ ë©´ë°œì´ íŠ¹ì§•ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Traditional Pyongyang-style cold noodles. Known for rich broth and chewy noodles.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/jinmi-naengmyeon.jpg\",\n    openHours: \"11:30-21:00\",\n    phone: \"02-2266-6719\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì¶©ë¬´ë¡œ1ê°€\",\n  },\n  {\n    name: \"ì‚¼ì›ê°€ë“ \",\n    nameEn: \"Samwon Garden\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡ë¥˜\",\n    district: \"ê°•ë‚¨êµ¬\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì‹ ì‚¬ë™ 642-9\",\n    latitude: 37.5239,\n    longitude: 127.0207,\n    description: \"ê°•ë‚¨ì˜ ëŒ€í‘œ í•œìš° ì „ë¬¸ì . ë„“ì€ ì •ì›ê³¼ í•¨ê»˜ ì¦ê¸°ëŠ” í”„ë¦¬ë¯¸ì—„ í•œìš° ê°ˆë¹„ê°€ ìœ ëª…í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Premium Korean beef restaurant in Gangnam. Famous for galbi (ribs) in a spacious garden setting.\",\n    priceRange: 4,\n    imageUrl: \"/images/restaurants/samwon-garden.jpg\",\n    openHours: \"11:30-22:00\",\n    phone: \"02-548-3030\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì‹ ì‚¬ë™\",\n  },\n  {\n    name: \"í† ì†ì´Œ\",\n    nameEn: \"Tosokchon\",\n    category: \"í•œì‹\",\n    cuisine: \"íƒ•/êµ­\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì²´ë¶€ë™ 85-1\",\n    latitude: 37.5835,\n    longitude: 126.9734,\n    description: \"ê²½ë³µê¶ ê·¼ì²˜ì˜ ìœ ëª… ì‚¼ê³„íƒ• ì „ë¬¸ì . ì§„í•œ êµ­ë¬¼ê³¼ ë¶€ë“œëŸ¬ìš´ ë‹­ê³ ê¸°ë¡œ ê´€ê´‘ê°ë“¤ì—ê²Œ ì¸ê¸°ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Famous ginseng chicken soup restaurant near Gyeongbokgung Palace. Popular among tourists.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/tosokchon.jpg\",\n    openHours: \"10:00-22:00\",\n    phone: \"02-737-7444\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì²´ë¶€ë™\",\n  },\n  {\n    name: \"ëª…ë™êµì\",\n    nameEn: \"Myeongdong Kyoja\",\n    category: \"í•œì‹\",\n    cuisine: \"ë§Œë‘/ì¹¼êµ­ìˆ˜\",\n    district: \"ì¤‘êµ¬\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ëª…ë™2ê°€ 25-2\",\n    latitude: 37.5636,\n    longitude: 126.9843,\n    description: \"ëª…ë™ì˜ ëŒ€í‘œ ì¹¼êµ­ìˆ˜ ë§›ì§‘. ì†ì¹¼êµ­ìˆ˜ì™€ ê¹€ì¹˜ë§Œë‘ê°€ ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Famous hand-cut noodle soup in Myeongdong. Signature dishes include kalguksu and kimchi dumplings.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/myeongdong-kyoja.jpg\",\n    openHours: \"10:30-21:30\",\n    phone: \"02-776-5348\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ëª…ë™2ê°€\",\n  },\n  {\n    name: \"ì´íƒœì› ìˆ íƒ„ì¼€ë°¥\",\n    nameEn: \"Itaewon Sultan Kebab\",\n    category: \"í•œì‹\",\n    cuisine: \"ì´ìŠ¬ëŒ ìŒì‹\",\n    district: \"ìš©ì‚°êµ¬\",\n    address: \"ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë™ 119-25\",\n    latitude: 37.5345,\n    longitude: 126.9945,\n    description: \"ì´íƒœì›ì˜ í• ë„ ì¼€ë°¥ ì „ë¬¸ì . ì •í†µ í„°í‚¤ì‹ ì¼€ë°¥ê³¼ ìƒ¤ì›Œë§ˆë¥¼ ì œê³µí•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Halal kebab restaurant in Itaewon. Serves authentic Turkish kebabs and shawarma.\",\n    priceRange: 2,\n    isHalal: 1,\n    imageUrl: \"/images/restaurants/sultan-kebab.jpg\",\n    openHours: \"11:00-23:00\",\n    phone: \"02-796-7582\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì´íƒœì›ë™\",\n  },\n  {\n    name: \"ì‹ë¬¼\",\n    nameEn: \"Plant\",\n    category: \"í•œì‹\",\n    cuisine: \"ë¹„ê±´\",\n    district: \"ë§ˆí¬êµ¬\",\n    address: \"ì„œìš¸ ë§ˆí¬êµ¬ ì„œêµë™ 395-14\",\n    latitude: 37.5557,\n    longitude: 126.9223,\n    description: \"í™ëŒ€ ì¸ê·¼ì˜ ë¹„ê±´ í•œì‹ ë ˆìŠ¤í† ë‘. ì „í†µ í•œì‹ì„ ì‹ë¬¼ì„± ì¬ë£Œë¡œ ì¬í•´ì„í•œ ë©”ë‰´ë“¤ì´ ì¸ê¸°ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Vegan Korean restaurant near Hongdae. Reinterprets traditional Korean dishes with plant-based ingredients.\",\n    priceRange: 3,\n    isVegan: 1,\n    imageUrl: \"/images/restaurants/plant.jpg\",\n    openHours: \"12:00-21:00\",\n    phone: \"02-332-5884\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì„œêµë™\",\n  },\n  {\n    name: \"ì§„ì˜¥í™” í• ë§¤ ì›ì¡° ë‹­í•œë§ˆë¦¬\",\n    nameEn: \"Jin Ok-hwa Original Chicken\",\n    category: \"í•œì‹\",\n    cuisine: \"íƒ•/êµ­\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì¢…ë¡œ5ê°€ 265-22\",\n    latitude: 37.5719,\n    longitude: 127.0043,\n    description: \"ë™ëŒ€ë¬¸ ë‹­í•œë§ˆë¦¬ ê³¨ëª©ì˜ ì›ì¡°. í‘¸ì§í•œ ë‹­ê³ ê¸°ì™€ ì¹¼êµ­ìˆ˜ ì‚¬ë¦¬ê°€ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Original whole chicken soup in Dongdaemun. Famous for generous portions with noodles.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/chicken-hanmari.jpg\",\n    openHours: \"10:30-01:00\",\n    phone: \"02-2279-9979\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì¢…ë¡œ5ê°€\",\n  },\n  {\n    name: \"ìš°ë˜ì˜¥\",\n    nameEn: \"Woo Lae Oak\",\n    category: \"í•œì‹\",\n    cuisine: \"ëƒ‰ë©´\",\n    district: \"ì¤‘êµ¬\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ì„ì§€ë¡œ4ê°€ 118-1\",\n    latitude: 37.5662,\n    longitude: 126.9975,\n    description: \"1946ë…„ë¶€í„° ì´ì–´ì˜¨ í‰ì–‘ëƒ‰ë©´ ëª…ê°€. 4ëŒ€ì§¸ ì´ì–´ì§€ëŠ” ì „í†µ ìœ¡ìˆ˜ ë¹„ë²•ì´ ìœ ëª…í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Historic Pyongyang cold noodles since 1946. Fourth-generation family recipe for broth.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/woo-lae-oak.jpg\",\n    openHours: \"11:30-21:30\",\n    phone: \"02-2265-0151\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì„ì§€ë¡œ4ê°€\",\n  },\n  {\n    name: \"í•œì‹ì§„ë¯¸ ê¶\",\n    nameEn: \"Korean Fine Dining Gung\",\n    category: \"í•œì‹\",\n    cuisine: \"í•œì •ì‹\",\n    district: \"ê°•ë‚¨êµ¬\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì²­ë‹´ë™ 91-4\",\n    latitude: 37.5237,\n    longitude: 127.0476,\n    description: \"ì²­ë‹´ë™ì˜ í”„ë¦¬ë¯¸ì—„ í•œì •ì‹ ë ˆìŠ¤í† ë‘. ê³„ì ˆ ì‹ì¬ë£Œë¥¼ í™œìš©í•œ ì½”ìŠ¤ ìš”ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Premium Korean course meal restaurant in Cheongdam. Features seasonal ingredients.\",\n    priceRange: 4,\n    imageUrl: \"/images/restaurants/gung.jpg\",\n    openHours: \"12:00-22:00\",\n    phone: \"02-547-5580\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì²­ë‹´ë™\",\n  },\n  {\n    name: \"ë¶ì´Œì†ë§Œë‘\",\n    nameEn: \"Bukchon Son Mandu\",\n    category: \"í•œì‹\",\n    cuisine: \"ë§Œë‘/ì¹¼êµ­ìˆ˜\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì‚¼ì²­ë™ 35-169\",\n    latitude: 37.5820,\n    longitude: 126.9824,\n    description: \"ë¶ì´Œ í•œì˜¥ë§ˆì„ì˜ ì†ë§Œë‘ ì „ë¬¸ì . ë§¤ì¼ ì•„ì¹¨ ì§ì ‘ ë¹šëŠ” ë§Œë‘ê°€ ìë‘ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Handmade dumpling restaurant in Bukchon Hanok Village. Fresh dumplings made daily.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/bukchon-mandu.jpg\",\n    openHours: \"11:00-21:00\",\n    phone: \"02-742-7050\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì‚¼ì²­ë™\",\n  },\n  {\n    name: \"ì„ë°€ëŒ€\",\n    nameEn: \"Eulmildae\",\n    category: \"í•œì‹\",\n    cuisine: \"ëƒ‰ë©´\",\n    district: \"ì¤‘êµ¬\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ì„ì§€ë¡œ3ê°€ 276-1\",\n    latitude: 37.5662,\n    longitude: 126.9915,\n    description: \"ì„ì§€ë¡œì˜ ëŒ€í‘œ í•¨í¥ëƒ‰ë©´ ë§›ì§‘. íšŒëƒ‰ë©´ê³¼ ë¹„ë¹”ëƒ‰ë©´ì´ ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Famous Hamheung-style cold noodles in Euljiro. Signature dishes include bibim naengmyeon.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/eulmildae.jpg\",\n    openHours: \"11:00-21:00\",\n    phone: \"02-2263-0876\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì„ì§€ë¡œ3ê°€\",\n  },\n  {\n    name: \"ê³¤ë“œë ˆ\",\n    nameEn: \"Gondeure\",\n    category: \"í•œì‹\",\n    cuisine: \"ë°¥/ë¹„ë¹”ë°¥\",\n    district: \"ë§ˆí¬êµ¬\",\n    address: \"ì„œìš¸ ë§ˆí¬êµ¬ í•©ì •ë™ 366-6\",\n    latitude: 37.5494,\n    longitude: 126.9125,\n    description: \"í•©ì •ë™ì˜ ê³¤ë“œë ˆë°¥ ì „ë¬¸ì . ê°•ì›ë„ ì‚°ë‚˜ë¬¼ë¡œ ë§Œë“  ê±´ê°•í•œ í•œì‹ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Gondeure rice specialty in Hapjeong. Healthy Korean meal with mountain herbs from Gangwon-do.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/gondeure.jpg\",\n    openHours: \"11:30-21:30\",\n    phone: \"02-334-0020\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"í•©ì •ë™\",\n  },\n  {\n    name: \"ìœ¡ì „ì‹ë‹¹\",\n    nameEn: \"Yukjeon Sikdang\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡ë¥˜\",\n    district: \"ìš©ì‚°êµ¬\",\n    address: \"ì„œìš¸ ìš©ì‚°êµ¬ í•œë‚¨ë™ 683-142\",\n    latitude: 37.5347,\n    longitude: 127.0021,\n    description: \"í•œë‚¨ë™ì˜ ìœ¡ì „(ê³ ê¸°ì „) ì „ë¬¸ì . í•œìš°ë¡œ ë§Œë“  ìœ¡ì „ê³¼ ëœì¥ì°Œê°œê°€ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Korean beef pancake specialty in Hannam. Famous for yukjeon and doenjang jjigae.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/yukjeon.jpg\",\n    openHours: \"11:00-22:00\",\n    phone: \"02-797-3735\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"í•œë‚¨ë™\",\n  },\n  {\n    name: \"ì¢…ë¡œ ê¹€ë°¥\",\n    nameEn: \"Jongno Gimbap\",\n    category: \"í•œì‹\",\n    cuisine: \"ë¶„ì‹\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì¢…ë¡œ2ê°€ 8-3\",\n    latitude: 37.5714,\n    longitude: 126.9826,\n    description: \"ì¢…ë¡œì˜ 24ì‹œê°„ ê¹€ë°¥ ë§›ì§‘. ì €ë ´í•œ ê°€ê²©ì— ë‹¤ì–‘í•œ ê¹€ë°¥ê³¼ ë¶„ì‹ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\n    descriptionEn: \"24-hour gimbap restaurant in Jongno. Affordable variety of gimbap and snacks.\",\n    priceRange: 1,\n    imageUrl: \"/images/restaurants/jongno-gimbap.jpg\",\n    openHours: \"24ì‹œê°„\",\n    phone: \"02-733-4848\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì¢…ë¡œ2ê°€\",\n  },\n  {\n    name: \"ì‹ ì„ ì„¤ë íƒ•\",\n    nameEn: \"Shinsun Seolleongtang\",\n    category: \"í•œì‹\",\n    cuisine: \"íƒ•/êµ­\",\n    district: \"ê´€ì•…êµ¬\",\n    address: \"ì„œìš¸ ê´€ì•…êµ¬ ë´‰ì²œë™ 1688-27\",\n    latitude: 37.4813,\n    longitude: 126.9516,\n    description: \"ì‚¬ë‹¹ë™ì˜ ì„¤ë íƒ• ë§›ì§‘. 24ì‹œê°„ ìš´ì˜í•˜ë©° ì§„í•œ ì‚¬ê³¨ ìœ¡ìˆ˜ê°€ íŠ¹ì§•ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Seolleongtang (ox bone soup) restaurant in Sadang. Open 24 hours with rich beef broth.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/shinsun-seolleongtang.jpg\",\n    openHours: \"24ì‹œê°„\",\n    phone: \"02-876-3456\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ë´‰ì²œë™\",\n  },\n  {\n    name: \"ëŒ€ì„±ì§‘\",\n    nameEn: \"Daesung House\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡ë¥˜\",\n    district: \"ë§ˆí¬êµ¬\",\n    address: \"ì„œìš¸ ë§ˆí¬êµ¬ ë§ˆí¬ë™ 353-12\",\n    latitude: 37.5425,\n    longitude: 126.9459,\n    description: \"ë§ˆí¬ì˜ ì˜¤ë˜ëœ ê³±ì°½ ì „ë¬¸ì . ì‹ ì„ í•œ ê³±ì°½ê³¼ ì–‘ì´ ìë‘ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Historic gopchang (intestine) restaurant in Mapo. Known for fresh offal.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/daesung.jpg\",\n    openHours: \"16:00-03:00\",\n    phone: \"02-719-1545\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ë§ˆí¬ë™\",\n  },\n  {\n    name: \"ì˜¤ì§•ì–´ì§‘\",\n    nameEn: \"Ojingeo House\",\n    category: \"í•œì‹\",\n    cuisine: \"í•´ì‚°ë¬¼\",\n    district: \"ê°•ë‚¨êµ¬\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 825-23\",\n    latitude: 37.5007,\n    longitude: 127.0366,\n    description: \"ê°•ë‚¨ì˜ ì˜¤ì§•ì–´ ìš”ë¦¬ ì „ë¬¸ì . ì˜¤ì§•ì–´ ë³¶ìŒê³¼ ì˜¤ì§•ì–´ íšŒê°€ ì¸ê¸°ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Squid specialty restaurant in Gangnam. Famous for stir-fried squid and raw squid.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/ojingeo.jpg\",\n    openHours: \"17:00-01:00\",\n    phone: \"02-567-5433\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì—­ì‚¼ë™\",\n  },\n  {\n    name: \"ì²­ì§„ì˜¥\",\n    nameEn: \"Cheongjin Ok\",\n    category: \"í•œì‹\",\n    cuisine: \"í•´ì¥êµ­\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì²­ì§„ë™ 125\",\n    latitude: 37.5706,\n    longitude: 126.9795,\n    description: \"ì¢…ë¡œì˜ ìœ ëª… í•´ì¥êµ­ì§‘. ì„ ì§€í•´ì¥êµ­ê³¼ ìš°ê±°ì§€í•´ì¥êµ­ì´ ëŒ€í‘œ ë©”ë‰´ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Famous hangover soup restaurant in Jongno. Specializes in blood sausage soup.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/cheongjin-ok.jpg\",\n    openHours: \"24ì‹œê°„\",\n    phone: \"02-735-1690\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì²­ì§„ë™\",\n  },\n  {\n    name: \"í•œìš°ë§ˆì„\",\n    nameEn: \"Hanwoo Village\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡ë¥˜\",\n    district: \"ì†¡íŒŒêµ¬\",\n    address: \"ì„œìš¸ ì†¡íŒŒêµ¬ ì ì‹¤ë™ 202-1\",\n    latitude: 37.5133,\n    longitude: 127.0829,\n    description: \"ì ì‹¤ì˜ í•œìš° ì „ë¬¸ì . 1++ë“±ê¸‰ í•œìš°ì™€ ë‹¤ì–‘í•œ ë¶€ìœ„ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\",\n    descriptionEn: \"Premium Korean beef restaurant in Jamsil. Serves grade 1++ hanwoo with various cuts.\",\n    priceRange: 4,\n    imageUrl: \"/images/restaurants/hanwoo-village.jpg\",\n    openHours: \"11:30-22:00\",\n    phone: \"02-415-8585\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì ì‹¤ë™\",\n  },\n  {\n    name: \"ë‚™ì§€ í•œë§ˆë‹¹\",\n    nameEn: \"Nakji Hanmadang\",\n    category: \"í•œì‹\",\n    cuisine: \"í•´ì‚°ë¬¼\",\n    district: \"ë§ˆí¬êµ¬\",\n    address: \"ì„œìš¸ ë§ˆí¬êµ¬ ì‹ ì´Œë™ 134-96\",\n    latitude: 37.5563,\n    longitude: 126.9363,\n    description: \"ì‹ ì´Œì˜ ë‚™ì§€ ìš”ë¦¬ ì „ë¬¸ì . ë‚™ì§€ë³¶ìŒê³¼ ì—°í¬íƒ•ì´ ì‹œê·¸ë‹ˆì²˜ ë©”ë‰´ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Octopus specialty in Sinchon. Famous for spicy stir-fried octopus and yeonpotang.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/nakji.jpg\",\n    openHours: \"11:00-23:00\",\n    phone: \"02-393-4040\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì‹ ì´Œë™\",\n  },\n  {\n    name: \"ì „ì£¼ì‹ë‹¹\",\n    nameEn: \"Jeonju Sikdang\",\n    category: \"í•œì‹\",\n    cuisine: \"ë°¥/ë¹„ë¹”ë°¥\",\n    district: \"ê°•ë‚¨êµ¬\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì‹ ì‚¬ë™ 549-8\",\n    latitude: 37.5217,\n    longitude: 127.0203,\n    description: \"ì‹ ì‚¬ë™ì˜ ì „ì£¼ ë¹„ë¹”ë°¥ ì „ë¬¸ì . í’ë¶€í•œ ë‚˜ë¬¼ê³¼ ìœ¡íšŒê°€ í† í•‘ëœ ë¹„ë¹”ë°¥ì´ ìœ ëª…í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Jeonju bibimbap specialty in Sinsa. Famous for bibimbap topped with abundant vegetables and beef.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/jeonju-bibimbap.jpg\",\n    openHours: \"11:00-21:00\",\n    phone: \"02-544-3220\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì‹ ì‚¬ë™\",\n  },\n  {\n    name: \"ì‚°ì´Œ\",\n    nameEn: \"Sanchon\",\n    category: \"í•œì‹\",\n    cuisine: \"ì‚¬ì°°ìŒì‹\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì¸ì‚¬ë™ 30-13\",\n    latitude: 37.5739,\n    longitude: 126.9854,\n    description: \"ì¸ì‚¬ë™ì˜ ì‚¬ì°° ìŒì‹ ì „ë¬¸ì . ì±„ì‹ ìœ„ì£¼ì˜ ê±´ê°•í•œ í•œì‹ ì½”ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Temple food restaurant in Insadong. Offers healthy vegetarian Korean course meals.\",\n    priceRange: 3,\n    isVegan: 1,\n    imageUrl: \"/images/restaurants/sanchon.jpg\",\n    openHours: \"12:00-21:00\",\n    phone: \"02-735-0312\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì¸ì‚¬ë™\",\n  },\n  {\n    name: \"ëŒ€í¬ì§‘\",\n    nameEn: \"Daepojip\",\n    category: \"í•œì‹\",\n    cuisine: \"í•´ì‚°ë¬¼\",\n    district: \"ë§ˆí¬êµ¬\",\n    address: \"ì„œìš¸ ë§ˆí¬êµ¬ ë™êµë™ 156-17\",\n    latitude: 37.5583,\n    longitude: 126.9254,\n    description: \"í™ëŒ€ ì•ì˜ ëŒ€í¿ì§‘ ìŠ¤íƒ€ì¼ ì£¼ì . ì‹ ì„ í•œ í•´ì‚°ë¬¼ ì•ˆì£¼ì™€ ë§‰ê±¸ë¦¬ê°€ ì¸ê¸°ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Daepojip-style tavern near Hongdae. Popular for fresh seafood and makgeolli.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/daepojip.jpg\",\n    openHours: \"17:00-02:00\",\n    phone: \"02-325-8899\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ë™êµë™\",\n  },\n  {\n    name: \"ì œì£¼ì§‘\",\n    nameEn: \"Jeju House\",\n    category: \"í•œì‹\",\n    cuisine: \"ê³ ê¸°êµ­ìˆ˜\",\n    district: \"ìš©ì‚°êµ¬\",\n    address: \"ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë™ 123-45\",\n    latitude: 37.5342,\n    longitude: 126.9938,\n    description: \"ì´íƒœì›ì˜ ì œì£¼ ìŒì‹ ì „ë¬¸ì . ê³ ê¸°êµ­ìˆ˜ì™€ í‘ë¼ì§€ êµ¬ì´ê°€ ëŒ€í‘œ ë©”ë‰´ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Jeju cuisine restaurant in Itaewon. Specializes in pork noodle soup and black pork BBQ.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/jeju-house.jpg\",\n    openHours: \"11:00-22:00\",\n    phone: \"02-796-8822\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì´íƒœì›ë™\",\n  },\n  {\n    name: \"ë°±ë…„ì˜¥\",\n    nameEn: \"Baeknyeon Ok\",\n    category: \"í•œì‹\",\n    cuisine: \"ì„¤ë íƒ•/ê³°íƒ•\",\n    district: \"ì¤‘êµ¬\",\n    address: \"ì„œìš¸ ì¤‘êµ¬ ë‚¨ëŒ€ë¬¸ë¡œ5ê°€ 436\",\n    latitude: 37.5598,\n    longitude: 126.9768,\n    description: \"ë‚¨ëŒ€ë¬¸ ì‹œì¥ ê·¼ì²˜ì˜ ì„¤ë íƒ• ì „ë¬¸ì . 100ë…„ ì „í†µì˜ ë§›ì„ ìë‘í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Historic seolleongtang restaurant near Namdaemun Market. 100 years of tradition.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/baeknyeon-ok.jpg\",\n    openHours: \"24ì‹œê°„\",\n    phone: \"02-776-4650\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ë‚¨ëŒ€ë¬¸ë¡œ5ê°€\",\n  },\n  {\n    name: \"ì§„ì£¼íšŒê´€\",\n    nameEn: \"Jinju Hoegwan\",\n    category: \"í•œì‹\",\n    cuisine: \"ë°¥/ë¹„ë¹”ë°¥\",\n    district: \"ê°•ë‚¨êµ¬\",\n    address: \"ì„œìš¸ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 647-15\",\n    latitude: 37.5003,\n    longitude: 127.0327,\n    description: \"ê°•ë‚¨ì˜ ì§„ì£¼ ë¹„ë¹”ë°¥ ì „ë¬¸ì . ìœ¡íšŒ ë¹„ë¹”ë°¥ê³¼ ëŒì†¥ ë¹„ë¹”ë°¥ì´ ì¸ê¸°ì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Jinju bibimbap specialty in Gangnam. Famous for beef tartare bibimbap and stone pot bibimbap.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/jinju-hoegwan.jpg\",\n    openHours: \"11:00-22:00\",\n    phone: \"02-567-3726\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì—­ì‚¼ë™\",\n  },\n  {\n    name: \"ì¥ìˆ˜ì´Œ\",\n    nameEn: \"Jangsu Chon\",\n    category: \"í•œì‹\",\n    cuisine: \"íƒ•/êµ­\",\n    district: \"ì†¡íŒŒêµ¬\",\n    address: \"ì„œìš¸ ì†¡íŒŒêµ¬ ê°€ë½ë™ 79-7\",\n    latitude: 37.4926,\n    longitude: 127.1198,\n    description: \"ê°€ë½ì‹œì¥ ê·¼ì²˜ì˜ ê³°íƒ• ì „ë¬¸ì . ì§„í•œ ì‚¬ê³¨ ê³°íƒ•ê³¼ ë„ê°€ë‹ˆíƒ•ì´ ìœ ëª…í•©ë‹ˆë‹¤.\",\n    descriptionEn: \"Gomtang (beef bone soup) restaurant near Garak Market. Famous for rich ox bone soup.\",\n    priceRange: 2,\n    imageUrl: \"/images/restaurants/jangsu-chon.jpg\",\n    openHours: \"24ì‹œê°„\",\n    phone: \"02-443-0260\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ê°€ë½ë™\",\n  },\n  {\n    name: \"ì²­ê¸°ì™€ì§‘\",\n    nameEn: \"Cheonggiwajip\",\n    category: \"í•œì‹\",\n    cuisine: \"ìœ¡ë¥˜\",\n    district: \"ì¢…ë¡œêµ¬\",\n    address: \"ì„œìš¸ ì¢…ë¡œêµ¬ ì„¸ì¢…ë¡œ 1-80\",\n    latitude: 37.5726,\n    longitude: 126.9769,\n    description: \"ê´‘í™”ë¬¸ ê·¼ì²˜ì˜ ë¼ì§€ê°ˆë¹„ ì „ë¬¸ì . ì–‘ë… ë¼ì§€ê°ˆë¹„ì™€ ëœì¥ì°Œê°œê°€ ì¼í’ˆì…ë‹ˆë‹¤.\",\n    descriptionEn: \"Pork galbi restaurant near Gwanghwamun. Famous for marinated pork ribs and doenjang jjigae.\",\n    priceRange: 3,\n    imageUrl: \"/images/restaurants/cheonggiwajip.jpg\",\n    openHours: \"11:00-22:00\",\n    phone: \"02-735-7171\",\n    city: \"ì„œìš¸\",\n    districtDetail: \"ì„¸ì¢…ë¡œ\",\n  },\n];\n\nasync function seedRestaurants() {\n  console.log(\"Starting restaurant seed...\");\n  \n  try {\n    for (const restaurant of SEOUL_RESTAURANTS) {\n      await db.insert(restaurants).values(restaurant);\n      console.log(`âœ“ Inserted: ${restaurant.name}`);\n    }\n    \n    console.log(`\\nâœ… Successfully seeded ${SEOUL_RESTAURANTS.length} restaurants!`);\n  } catch (error) {\n    console.error(\"âŒ Error seeding restaurants:\", error);\n    throw error;\n  } finally {\n    await client.end();\n  }\n}\n\nseedRestaurants();\n","size_bytes":20613},"data-hub/cron_schedule.py":{"content":"\"\"\"\nCron Schedule for Restaurant Data Hub\në§¤ì¼ ìë™ ì‹¤í–‰ ìŠ¤ì¼€ì¤„\n\"\"\"\nimport schedule\nimport time\nimport asyncio\nfrom loguru import logger\n\nfrom src.workflows.scraping import ScrapingWorkflow\nfrom src.workflows.sync import SyncWorkflow\n\n\nasync def daily_scraping_job():\n    \"\"\"ë§¤ì¼ ì˜¤í›„ 2ì‹œ: ìŠ¤í¬ë˜í•‘\"\"\"\n    logger.info(\"Running daily scraping job\")\n    workflow = ScrapingWorkflow()\n    await workflow.run_daily_scraping()\n    logger.info(\"Daily scraping job completed\")\n\n\nasync def daily_processing_job():\n    \"\"\"ë§¤ì¼ ì˜¤í›„ 4ì‹œ: ë°ì´í„° ì²˜ë¦¬\"\"\"\n    logger.info(\"Running daily processing job\")\n    workflow = ScrapingWorkflow()\n    await workflow.process_raw_data(batch_size=500)\n    logger.info(\"Daily processing job completed\")\n\n\nasync def daily_sync_job():\n    \"\"\"ë§¤ì¼ ìƒˆë²½ 3ì‹œ: í•œì‹ë‹¹ ë™ê¸°í™”\"\"\"\n    logger.info(\"Running daily sync job\")\n    workflow = SyncWorkflow()\n    await workflow.sync_to_hansikdang()\n    logger.info(\"Daily sync job completed\")\n\n\ndef run_async_job(coro):\n    \"\"\"ë¹„ë™ê¸° ì‘ì—… ì‹¤í–‰ wrapper\"\"\"\n    asyncio.run(coro)\n\n\n# ìŠ¤ì¼€ì¤„ ì„¤ì •\nschedule.every().day.at(\"14:00\").do(lambda: run_async_job(daily_scraping_job()))\nschedule.every().day.at(\"16:00\").do(lambda: run_async_job(daily_processing_job()))\nschedule.every().day.at(\"03:00\").do(lambda: run_async_job(daily_sync_job()))\n\n\nif __name__ == \"__main__\":\n    logger.info(\"Starting cron scheduler...\")\n    logger.info(\"Schedules:\")\n    logger.info(\"  - 14:00: Daily scraping\")\n    logger.info(\"  - 16:00: Data processing\")\n    logger.info(\"  - 03:00: Sync to í•œì‹ë‹¹\")\n    \n    while True:\n        schedule.run_pending()\n        time.sleep(60)  # 1ë¶„ë§ˆë‹¤ ì²´í¬\n","size_bytes":1684},"data-hub/src/processors/gemini.py":{"content":"\"\"\"\nGemini AI Data Processor\n- ë°ì´í„° ì •ì œ\n- ë‹¤êµ­ì–´ ë²ˆì—­\n- ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜\n- ì¤‘ë³µ ë§¤ì¹­ íŒë‹¨\n\"\"\"\nfrom typing import Dict, Any, Optional, List\nimport json\nimport google.generativeai as genai\nfrom loguru import logger\n\nfrom config import settings\n\n\nclass GeminiProcessor:\n    \"\"\"Gemini AI ë°ì´í„° ì²˜ë¦¬\"\"\"\n    \n    def __init__(self):\n        if not settings.gemini_api_key:\n            raise ValueError(\"GEMINI_API_KEY not set\")\n        \n        genai.configure(api_key=settings.gemini_api_key)\n        self.model = genai.GenerativeModel(\"gemini-2.0-flash-exp\")\n        self.logger = logger.bind(processor=\"gemini\")\n    \n    async def refine_restaurant_data(self, raw_data: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"ë ˆìŠ¤í† ë‘ ë°ì´í„° ì •ì œ ë° ë³´ì™„\"\"\"\n        try:\n            prompt = f\"\"\"\në‹¤ìŒì€ ìŠ¤í¬ë˜í•‘ëœ í•œì‹ë‹¹ ì •ë³´ì…ë‹ˆë‹¤. ì´ ë°ì´í„°ë¥¼ ì •ì œí•˜ê³  ë³´ì™„í•´ì£¼ì„¸ìš”.\n\nì›ë³¸ ë°ì´í„°:\n{json.dumps(raw_data, ensure_ascii=False, indent=2)}\n\në‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì •ì œëœ ë°ì´í„°ë¥¼ ë°˜í™˜í•´ì£¼ì„¸ìš”:\n{{\n  \"name\": \"í•œê¸€ ì‹ë‹¹ ì´ë¦„ (ì •ì œ)\",\n  \"name_en\": \"ì˜ë¬¸ ì´ë¦„ (ë²ˆì—­)\",\n  \"cuisine\": \"ìš”ë¦¬ ì¹´í…Œê³ ë¦¬ (ìœ¡ë¥˜/ëƒ‰ë©´/ë¶„ì‹/ì°Œê°œ/í•œì •ì‹/ê¸°íƒ€ ì¤‘ í•˜ë‚˜)\",\n  \"district\": \"ì§€ì—­êµ¬ (ê°•ë‚¨êµ¬/ì¢…ë¡œêµ¬ í˜•ì‹)\",\n  \"address\": \"ì •ì œëœ ì£¼ì†Œ\",\n  \"address_en\": \"ì˜ë¬¸ ì£¼ì†Œ\",\n  \"description\": \"í•œê¸€ ì„¤ëª… (50ì ì´ë‚´)\",\n  \"description_en\": \"ì˜ë¬¸ ì„¤ëª…\",\n  \"price_range\": \"ì €ë ´/ë³´í†µ/ë¹„ìŒˆ ì¤‘ í•˜ë‚˜\",\n  \"phone\": \"ì „í™”ë²ˆí˜¸ (02-123-4567 í˜•ì‹)\",\n  \"specialties\": [\"ëŒ€í‘œ ë©”ë‰´1\", \"ëŒ€í‘œ ë©”ë‰´2\"]\n}}\n\nì£¼ì˜ì‚¬í•­:\n- ë§ì¶¤ë²• êµì •\n- ë¶ˆí•„ìš”í•œ ê³µë°± ì œê±°\n- ì „í™”ë²ˆí˜¸ í˜•ì‹ í†µì¼\n- ëˆ„ë½ëœ ì •ë³´ëŠ” null\n- JSONë§Œ ë°˜í™˜ (ì„¤ëª… ì—†ì´)\n\"\"\"\n            \n            response = await self.model.generate_content_async(prompt)\n            result_text = response.text.strip()\n            \n            # JSON íŒŒì‹±\n            if \"```json\" in result_text:\n                result_text = result_text.split(\"```json\")[1].split(\"```\")[0].strip()\n            elif \"```\" in result_text:\n                result_text = result_text.split(\"```\")[1].split(\"```\")[0].strip()\n            \n            refined = json.loads(result_text)\n            self.logger.info(f\"Refined restaurant: {refined.get('name')}\")\n            return refined\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to refine data: {e}\")\n            return raw_data\n    \n    async def match_restaurants(\n        self,\n        naver_data: Dict[str, Any],\n        google_data: Dict[str, Any]\n    ) -> Dict[str, Any]:\n        \"\"\"ë„¤ì´ë²„ì™€ êµ¬ê¸€ ë°ì´í„°ê°€ ê°™ì€ ì—…ì²´ì¸ì§€ íŒë‹¨\"\"\"\n        try:\n            prompt = f\"\"\"\në‹¤ìŒ ë‘ ë°ì´í„°ê°€ ê°™ì€ ì‹ë‹¹ì¸ì§€ íŒë‹¨í•´ì£¼ì„¸ìš”.\n\në„¤ì´ë²„ ë°ì´í„°:\n- ì´ë¦„: {naver_data.get('name')}\n- ì£¼ì†Œ: {naver_data.get('address')}\n- ì „í™”ë²ˆí˜¸: {naver_data.get('phone')}\n\nêµ¬ê¸€ ë°ì´í„°:\n- ì´ë¦„: {google_data.get('name')}\n- ì£¼ì†Œ: {google_data.get('address')}\n- ì „í™”ë²ˆí˜¸: {google_data.get('phone')}\n\në‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ íŒë‹¨ ê²°ê³¼ë¥¼ ë°˜í™˜í•´ì£¼ì„¸ìš”:\n{{\n  \"is_match\": true ë˜ëŠ” false,\n  \"confidence\": 0.0-1.0 (í™•ì‹ ë„),\n  \"reason\": \"íŒë‹¨ ì´ìœ \"\n}}\n\níŒë‹¨ ê¸°ì¤€:\n- ì´ë¦„ì´ ìœ ì‚¬í•˜ê±°ë‚˜ ë²ˆì—­ ê´€ê³„\n- ì£¼ì†Œê°€ ê°™ì€ ê±´ë¬¼/ë™ì¼ ì§€ì—­\n- ì „í™”ë²ˆí˜¸ ì¼ì¹˜\n- ì¢…í•© íŒë‹¨ìœ¼ë¡œ í™•ì‹ ë„ ê³„ì‚°\n\nJSONë§Œ ë°˜í™˜í•˜ì„¸ìš”.\n\"\"\"\n            \n            response = await self.model.generate_content_async(prompt)\n            result_text = response.text.strip()\n            \n            if \"```json\" in result_text:\n                result_text = result_text.split(\"```json\")[1].split(\"```\")[0].strip()\n            elif \"```\" in result_text:\n                result_text = result_text.split(\"```\")[1].split(\"```\")[0].strip()\n            \n            result = json.loads(result_text)\n            self.logger.info(f\"Match result: {result.get('is_match')} ({result.get('confidence')})\")\n            return result\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to match restaurants: {e}\")\n            return {\n                \"is_match\": False,\n                \"confidence\": 0.0,\n                \"reason\": f\"Error: {str(e)}\"\n            }\n    \n    async def calculate_quality_score(self, restaurant: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"ë°ì´í„° í’ˆì§ˆ ì ìˆ˜ ê³„ì‚° (0-100)\"\"\"\n        score = 0\n        details = {}\n        \n        # GPS ì¢Œí‘œ (20ì )\n        if restaurant.get(\"latitude\") and restaurant.get(\"longitude\"):\n            score += 20\n            details[\"gps\"] = 20\n        \n        # ë¦¬ë·° (20ì )\n        review_count = restaurant.get(\"review_count\", 0)\n        if review_count >= 10:\n            score += 20\n            details[\"reviews\"] = 20\n        elif review_count > 0:\n            review_score = min(review_count * 2, 20)\n            score += review_score\n            details[\"reviews\"] = review_score\n        \n        # ì´ë¯¸ì§€ (20ì )\n        if restaurant.get(\"image_url\") or restaurant.get(\"image_urls\"):\n            score += 20\n            details[\"images\"] = 20\n        \n        # ì˜ì—…ì‹œê°„ (20ì )\n        if restaurant.get(\"open_hours\"):\n            score += 20\n            details[\"hours\"] = 20\n        \n        # ë©”ë‰´ ì •ë³´ (20ì )\n        if restaurant.get(\"menu_summary\"):\n            score += 20\n            details[\"menu\"] = 20\n        \n        return {\n            \"quality_score\": score,\n            \"quality_details\": details\n        }\n    \n    async def generate_target_keywords(self, region: str, count: int = 50) -> List[str]:\n        \"\"\"AIê°€ íƒ€ê²Ÿ í‚¤ì›Œë“œ ìƒì„±\"\"\"\n        try:\n            prompt = f\"\"\"\nì„œìš¸ {region} ì§€ì—­ì—ì„œ ì™¸êµ­ì¸ ê´€ê´‘ê°ì´ ì¢‹ì•„í•  ë§Œí•œ í•œì‹ë‹¹ì„ ì°¾ê¸° ìœ„í•œ ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ {count}ê°œ ìƒì„±í•´ì£¼ì„¸ìš”.\n\nì¡°ê±´:\n- ë‹¤ì–‘í•œ ìŒì‹ ì¹´í…Œê³ ë¦¬ í¬í•¨ (ëƒ‰ë©´, ì‚¼ê²¹ì‚´, ë¶ˆê³ ê¸°, ì°Œê°œ, í•œì •ì‹ ë“±)\n- ìœ ëª… ê´€ê´‘ì§€ ì£¼ë³€\n- ì¸ê¸° ë§›ì§‘ ê±°ë¦¬\n\nJSON ë°°ì—´ë¡œë§Œ ë°˜í™˜:\n[\"í‚¤ì›Œë“œ1\", \"í‚¤ì›Œë“œ2\", ...]\n\nì˜ˆì‹œ:\n[\"ê°•ë‚¨ ëƒ‰ë©´\", \"ì´íƒœì› ì‚¼ê²¹ì‚´\", \"ëª…ë™ í•œì •ì‹\", ...]\n\"\"\"\n            \n            response = await self.model.generate_content_async(prompt)\n            result_text = response.text.strip()\n            \n            if \"```json\" in result_text:\n                result_text = result_text.split(\"```json\")[1].split(\"```\")[0].strip()\n            elif \"```\" in result_text:\n                result_text = result_text.split(\"```\")[1].split(\"```\")[0].strip()\n            \n            keywords = json.loads(result_text)\n            self.logger.info(f\"Generated {len(keywords)} target keywords\")\n            return keywords\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to generate keywords: {e}\")\n            return []\n","size_bytes":6838},"data-hub/src/processors/__init__.py":{"content":"\"\"\"Data processing module\"\"\"\n","size_bytes":29},"data-hub/src/workflows/scraping.py":{"content":"\"\"\"\nMain scraping workflow\ní•˜ë£¨ 333ê°œ ë ˆìŠ¤í† ë‘ ìˆ˜ì§‘ ëª©í‘œ\n\"\"\"\nimport asyncio\nimport uuid\nfrom datetime import datetime\nfrom typing import List\nfrom loguru import logger\n\nfrom src.database.connection import db_session\nfrom src.database.models import (\n    RawRestaurantData, ScrapingTarget, ScrapingLog\n)\nfrom src.scrapers.naver import NaverPlaceScraper\nfrom src.scrapers.google import GoogleMapsScraper\nfrom src.processors.gemini import GeminiProcessor\nfrom config import settings\n\n\nclass ScrapingWorkflow:\n    \"\"\"ìŠ¤í¬ë˜í•‘ ì›Œí¬í”Œë¡œìš°\"\"\"\n    \n    def __init__(self):\n        self.naver_scraper = NaverPlaceScraper()\n        self.google_scraper = GoogleMapsScraper()\n        self.gemini = GeminiProcessor()\n        self.logger = logger.bind(workflow=\"scraping\")\n    \n    async def run_daily_scraping(self):\n        \"\"\"ì¼ì¼ ìŠ¤í¬ë˜í•‘ ì‹¤í–‰\"\"\"\n        self.logger.info(f\"Starting daily scraping (target: {settings.daily_target})\")\n        \n        with db_session() as db:\n            # í™œì„± íƒ€ê²Ÿ ê°€ì ¸ì˜¤ê¸°\n            targets = db.query(ScrapingTarget).filter(\n                ScrapingTarget.status == 'active'\n            ).order_by(\n                ScrapingTarget.priority.desc()\n            ).limit(10).all()\n            \n            if not targets:\n                self.logger.warning(\"No active targets found\")\n                return\n            \n            total_scraped = 0\n            \n            for target in targets:\n                if total_scraped >= settings.daily_target:\n                    break\n                \n                log_id = str(uuid.uuid4())\n                log = ScrapingLog(\n                    id=log_id,\n                    target_id=target.id,\n                    status='running'\n                )\n                db.add(log)\n                db.commit()\n                \n                try:\n                    # ë„¤ì´ë²„ ìŠ¤í¬ë˜í•‘\n                    naver_results = await self.naver_scraper.search(\n                        keyword=target.keyword,\n                        region=target.region,\n                        limit=50\n                    )\n                    \n                    # ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥\n                    success_count = 0\n                    for result in naver_results:\n                        try:\n                            raw_data = RawRestaurantData(\n                                id=str(uuid.uuid4()),\n                                source='naver',\n                                source_id=result.source_id,\n                                source_url=result.source_url,\n                                raw_data=result.raw_data,\n                                status='pending'\n                            )\n                            db.add(raw_data)\n                            success_count += 1\n                            total_scraped += 1\n                            \n                            if total_scraped >= settings.daily_target:\n                                break\n                                \n                        except Exception as e:\n                            self.logger.error(f\"Failed to save: {e}\")\n                    \n                    # ë¡œê·¸ ì—…ë°ì´íŠ¸\n                    log.completed_at = datetime.now()\n                    log.status = 'completed'\n                    log.total_scraped = len(naver_results)\n                    log.success_count = success_count\n                    \n                    # íƒ€ê²Ÿ ì—…ë°ì´íŠ¸\n                    target.last_scraped = datetime.now()\n                    target.total_found += success_count\n                    \n                    db.commit()\n                    \n                    self.logger.info(\n                        f\"Target '{target.keyword}': {success_count} restaurants\"\n                    )\n                    \n                    # Rate limiting\n                    await asyncio.sleep(5)\n                    \n                except Exception as e:\n                    self.logger.error(f\"Scraping failed for '{target.keyword}': {e}\")\n                    log.status = 'failed'\n                    log.error_details = {\"error\": str(e)}\n                    db.commit()\n            \n            self.logger.info(f\"Daily scraping completed: {total_scraped} restaurants\")\n    \n    async def process_raw_data(self, batch_size: int = 50):\n        \"\"\"ì›ë³¸ ë°ì´í„° ì²˜ë¦¬ (Gemini AI)\"\"\"\n        self.logger.info(\"Processing raw data with Gemini AI\")\n        \n        with db_session() as db:\n            # ë¯¸ì²˜ë¦¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\n            raw_items = db.query(RawRestaurantData).filter(\n                RawRestaurantData.status == 'pending'\n            ).limit(batch_size).all()\n            \n            for item in raw_items:\n                try:\n                    item.status = 'processing'\n                    db.commit()\n                    \n                    # Geminië¡œ ë°ì´í„° ì •ì œ\n                    refined = await self.gemini.refine_restaurant_data(item.raw_data)\n                    \n                    # ProcessedRestaurantì— ì €ì¥\n                    # (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ êµ¬í˜„)\n                    \n                    item.status = 'processed'\n                    db.commit()\n                    \n                    self.logger.info(f\"Processed: {refined.get('name')}\")\n                    \n                except Exception as e:\n                    self.logger.error(f\"Processing failed: {e}\")\n                    item.status = 'failed'\n                    item.error_message = str(e)\n                    db.commit()\n\n\nasync def main():\n    \"\"\"ì›Œí¬í”Œë¡œìš° ì‹¤í–‰\"\"\"\n    workflow = ScrapingWorkflow()\n    \n    # ì¼ì¼ ìŠ¤í¬ë˜í•‘\n    await workflow.run_daily_scraping()\n    \n    # ë°ì´í„° ì²˜ë¦¬\n    await workflow.process_raw_data()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","size_bytes":5868},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"apify-client>=2.2.1\",\n    \"click>=8.3.0\",\n    \"fastapi>=0.120.1\",\n    \"google-generativeai>=0.8.5\",\n    \"httpx>=0.28.1\",\n    \"loguru>=0.7.3\",\n    \"packaging>=25.0\",\n    \"psycopg2-binary>=2.9.11\",\n    \"pydantic>=2.12.3\",\n    \"pydantic-settings>=2.11.0\",\n    \"python-dotenv>=1.2.1\",\n    \"schedule>=1.2.2\",\n    \"sqlalchemy>=2.0.44\",\n    \"uvicorn[standard]>=0.38.0\",\n]\n","size_bytes":512},"data-hub/src/database/models.py":{"content":"\"\"\"\nSQLAlchemy Database Models for Restaurant Data Hub\n\"\"\"\nfrom datetime import datetime\nfrom sqlalchemy import (\n    Column, String, Integer, Float, DateTime, Text, Boolean, JSON, Index\n)\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.sql import func\n\nBase = declarative_base()\n\n\nclass RawRestaurantData(Base):\n    \"\"\"ì›ë³¸ ìŠ¤í¬ë˜í•‘ ë°ì´í„° (ì •ì œ ì „)\"\"\"\n    __tablename__ = \"raw_restaurant_data\"\n    \n    id = Column(String, primary_key=True)  # UUID\n    source = Column(String, nullable=False)  # 'naver' or 'google'\n    source_id = Column(String, nullable=False)  # ë„¤ì´ë²„/êµ¬ê¸€ ID\n    source_url = Column(String)\n    \n    # ê¸°ë³¸ ì •ë³´ (JSONìœ¼ë¡œ ì €ì¥)\n    raw_data = Column(JSON, nullable=False)\n    \n    # ë©”íƒ€ë°ì´í„°\n    scraped_at = Column(DateTime(timezone=True), server_default=func.now())\n    status = Column(String, default='pending')  # pending, processing, processed, failed\n    error_message = Column(Text)\n    \n    # ì¸ë±ìŠ¤\n    __table_args__ = (\n        Index('idx_raw_source_id', 'source', 'source_id'),\n        Index('idx_raw_status', 'status'),\n        Index('idx_raw_scraped_at', 'scraped_at'),\n    )\n\n\nclass RestaurantMapping(Base):\n    \"\"\"ë„¤ì´ë²„ â†” êµ¬ê¸€ ID ë§¤í•‘ í…Œì´ë¸”\"\"\"\n    __tablename__ = \"restaurant_mapping\"\n    \n    id = Column(String, primary_key=True)  # UUID\n    naver_id = Column(String, unique=True)\n    naver_url = Column(String)\n    google_place_id = Column(String, unique=True)\n    google_url = Column(String)\n    \n    # ë§¤ì¹­ ì‹ ë¢°ë„\n    confidence_score = Column(Float, default=0.0)  # 0-1\n    matched_by = Column(String)  # 'ai', 'manual', 'exact'\n    \n    # ë©”íƒ€ë°ì´í„°\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), onupdate=func.now())\n    \n    # ì¸ë±ìŠ¤\n    __table_args__ = (\n        Index('idx_mapping_naver', 'naver_id'),\n        Index('idx_mapping_google', 'google_place_id'),\n    )\n\n\nclass ProcessedRestaurant(Base):\n    \"\"\"ì •ì œëœ ë ˆìŠ¤í† ë‘ ë°ì´í„° (í•œì‹ë‹¹ í˜•ì‹)\"\"\"\n    __tablename__ = \"processed_restaurants\"\n    \n    id = Column(String, primary_key=True)  # UUID\n    mapping_id = Column(String)  # RestaurantMapping FK\n    \n    # ê¸°ë³¸ ì •ë³´\n    name = Column(String, nullable=False)\n    name_en = Column(String)\n    category = Column(String, default='í•œì‹')\n    cuisine = Column(String)  # ìœ¡ë¥˜, ëƒ‰ë©´, ë¶„ì‹ ë“±\n    \n    # ìœ„ì¹˜ ì •ë³´\n    district = Column(String)  # ê°•ë‚¨êµ¬, ì¢…ë¡œêµ¬ ë“±\n    address = Column(String)\n    address_en = Column(String)\n    latitude = Column(Float)\n    longitude = Column(Float)\n    \n    # ìƒì„¸ ì •ë³´\n    description = Column(Text)\n    description_en = Column(Text)\n    price_range = Column(String)  # ì €ë ´, ë³´í†µ, ë¹„ìŒˆ\n    phone = Column(String)\n    website = Column(String)\n    \n    # ìš´ì˜ ì •ë³´\n    open_hours = Column(JSON)  # {\"mon\": \"09:00-22:00\", ...}\n    last_order = Column(String)\n    break_time = Column(String)\n    closed_days = Column(JSON)  # [\"ì¼ìš”ì¼\"]\n    parking = Column(Boolean)\n    \n    # í‰ê°€ ì •ë³´\n    rating = Column(Float)\n    review_count = Column(Integer, default=0)\n    naver_rating = Column(Float)\n    naver_review_count = Column(Integer, default=0)\n    google_rating = Column(Float)\n    google_review_count = Column(Integer, default=0)\n    \n    # ì´ë¯¸ì§€\n    image_url = Column(String)\n    image_urls = Column(JSON)  # ì¶”ê°€ ì´ë¯¸ì§€ë“¤\n    \n    # ë©”ë‰´ (ê°„ë‹¨í•œ ëª©ë¡)\n    menu_summary = Column(JSON)  # [{\"name\": \"ëƒ‰ë©´\", \"price\": \"9000\"}]\n    \n    # í’ˆì§ˆ ì ìˆ˜\n    quality_score = Column(Integer, default=0)  # 0-100\n    quality_details = Column(JSON)  # ì ìˆ˜ ì„¸ë¶€ ë‚´ì—­\n    \n    # ìƒíƒœ\n    sync_status = Column(String, default='pending')  # pending, synced, failed\n    synced_to_hansikdang = Column(Boolean, default=False)\n    synced_at = Column(DateTime(timezone=True))\n    \n    # ë©”íƒ€ë°ì´í„°\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    updated_at = Column(DateTime(timezone=True), onupdate=func.now())\n    \n    # ì¸ë±ìŠ¤\n    __table_args__ = (\n        Index('idx_processed_district', 'district'),\n        Index('idx_processed_cuisine', 'cuisine'),\n        Index('idx_processed_quality', 'quality_score'),\n        Index('idx_processed_sync', 'sync_status'),\n    )\n\n\nclass ScrapingTarget(Base):\n    \"\"\"ìŠ¤í¬ë˜í•‘ íƒ€ê²Ÿ (í‚¤ì›Œë“œ, ì§€ì—­ ë“±)\"\"\"\n    __tablename__ = \"scraping_targets\"\n    \n    id = Column(String, primary_key=True)  # UUID\n    \n    # íƒ€ê²Ÿ ì •ë³´\n    keyword = Column(String, nullable=False)  # \"ê°•ë‚¨ ëƒ‰ë©´\"\n    region = Column(String)  # \"ê°•ë‚¨êµ¬\"\n    cuisine_type = Column(String)  # \"ëƒ‰ë©´\"\n    \n    # ì˜µì…˜\n    min_rating = Column(Float)\n    min_reviews = Column(Integer)\n    \n    # ìš°ì„ ìˆœìœ„\n    priority = Column(Integer, default=5)  # 1-10\n    \n    # ìƒíƒœ\n    status = Column(String, default='active')  # active, paused, completed\n    last_scraped = Column(DateTime(timezone=True))\n    total_found = Column(Integer, default=0)\n    \n    # ìƒì„± ë°©ë²•\n    created_by = Column(String)  # 'ai', 'manual', 'auto'\n    \n    # ë©”íƒ€ë°ì´í„°\n    created_at = Column(DateTime(timezone=True), server_default=func.now())\n    \n    # ì¸ë±ìŠ¤\n    __table_args__ = (\n        Index('idx_target_status', 'status'),\n        Index('idx_target_priority', 'priority'),\n    )\n\n\nclass ScrapingLog(Base):\n    \"\"\"ìŠ¤í¬ë˜í•‘ ì‹¤í–‰ ë¡œê·¸\"\"\"\n    __tablename__ = \"scraping_logs\"\n    \n    id = Column(String, primary_key=True)  # UUID\n    target_id = Column(String)\n    \n    # ì‹¤í–‰ ì •ë³´\n    started_at = Column(DateTime(timezone=True), server_default=func.now())\n    completed_at = Column(DateTime(timezone=True))\n    status = Column(String)  # running, completed, failed\n    \n    # ê²°ê³¼\n    total_scraped = Column(Integer, default=0)\n    success_count = Column(Integer, default=0)\n    error_count = Column(Integer, default=0)\n    \n    # ìƒì„¸\n    error_details = Column(JSON)\n    \n    # ì¸ë±ìŠ¤\n    __table_args__ = (\n        Index('idx_log_started', 'started_at'),\n        Index('idx_log_status', 'status'),\n    )\n\n\nclass SyncLog(Base):\n    \"\"\"í•œì‹ë‹¹ ë™ê¸°í™” ë¡œê·¸\"\"\"\n    __tablename__ = \"sync_logs\"\n    \n    id = Column(String, primary_key=True)  # UUID\n    \n    # ë™ê¸°í™” ì •ë³´\n    started_at = Column(DateTime(timezone=True), server_default=func.now())\n    completed_at = Column(DateTime(timezone=True))\n    status = Column(String)  # running, completed, failed\n    \n    # ê²°ê³¼\n    total_sent = Column(Integer, default=0)\n    success_count = Column(Integer, default=0)\n    error_count = Column(Integer, default=0)\n    \n    # ìƒì„¸\n    error_details = Column(JSON)\n    \n    # ì¸ë±ìŠ¤\n    __table_args__ = (\n        Index('idx_sync_started', 'started_at'),\n        Index('idx_sync_status', 'status'),\n    )\n","size_bytes":6822},"data-hub/src/__init__.py":{"content":"\"\"\"Restaurant Data Hub\"\"\"\n__version__ = \"0.1.0\"\n","size_bytes":48},"data-hub/config.py":{"content":"\"\"\"\nConfiguration management for Restaurant Data Hub\n\"\"\"\nimport os\nfrom typing import Optional\nfrom pydantic_settings import BaseSettings\n\n\nclass Settings(BaseSettings):\n    \"\"\"Application settings\"\"\"\n    \n    # Database\n    data_hub_database_url: str = os.getenv(\n        \"DATA_HUB_DATABASE_URL\",\n        \"postgresql://user:pass@localhost:5432/datahub\"\n    )\n    \n    # API Keys\n    gemini_api_key: Optional[str] = os.getenv(\"GEMINI_API_KEY\")\n    apify_api_token: Optional[str] = os.getenv(\"APIFY_API_TOKEN\")\n    outscraper_api_key: Optional[str] = os.getenv(\"OUTSCRAPER_API_KEY\")\n    bright_data_proxy_url: Optional[str] = os.getenv(\"BRIGHT_DATA_PROXY_URL\")\n    \n    # í•œì‹ë‹¹ ì—°ë™\n    hansikdang_api_url: str = os.getenv(\n        \"HANSIKDANG_API_URL\",\n        \"http://localhost:5000\"\n    )\n    data_collection_api_key: Optional[str] = os.getenv(\"DATA_COLLECTION_API_KEY\")\n    \n    # Scraping Settings\n    daily_target: int = 333  # í•˜ë£¨ ëª©í‘œ ìˆ˜ì§‘ ìˆ˜ (1ë§Œê°œ/30ì¼)\n    quality_threshold: int = 70  # í’ˆì§ˆ ì ìˆ˜ ì„ê³„ê°’\n    batch_size: int = 500  # í•œì‹ë‹¹ ë™ê¸°í™” ë°°ì¹˜ ì‚¬ì´ì¦ˆ\n    \n    # Retry Settings\n    max_retries: int = 3\n    retry_delay: int = 5  # seconds\n    \n    class Config:\n        env_file = \".env\"\n        case_sensitive = False\n\n\nsettings = Settings()\n","size_bytes":1296},"data-hub/cli.py":{"content":"\"\"\"\nCLI Tool for Restaurant Data Hub\nëª…ë ¹ì¤„ ì¸í„°í˜ì´ìŠ¤\n\"\"\"\nimport asyncio\nimport click\nfrom loguru import logger\n\nfrom src.database.connection import init_db\nfrom src.workflows.scraping import ScrapingWorkflow\nfrom src.workflows.sync import SyncWorkflow\nfrom src.processors.gemini import GeminiProcessor\nfrom src.database.connection import db_session\nfrom src.database.models import ScrapingTarget\nimport uuid\n\n\n@click.group()\ndef cli():\n    \"\"\"Restaurant Data Hub CLI\"\"\"\n    pass\n\n\n@cli.command()\ndef init():\n    \"\"\"ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”\"\"\"\n    click.echo(\"Initializing database...\")\n    init_db()\n    click.echo(\"âœ… Database initialized!\")\n\n\n@cli.command()\ndef scrape():\n    \"\"\"ìŠ¤í¬ë˜í•‘ ì‹¤í–‰\"\"\"\n    click.echo(\"Starting scraping workflow...\")\n    \n    async def run():\n        workflow = ScrapingWorkflow()\n        await workflow.run_daily_scraping()\n    \n    asyncio.run(run())\n    click.echo(\"âœ… Scraping completed!\")\n\n\n@cli.command()\ndef process():\n    \"\"\"ì›ë³¸ ë°ì´í„° ì²˜ë¦¬\"\"\"\n    click.echo(\"Processing raw data with Gemini AI...\")\n    \n    async def run():\n        workflow = ScrapingWorkflow()\n        await workflow.process_raw_data(batch_size=100)\n    \n    asyncio.run(run())\n    click.echo(\"âœ… Processing completed!\")\n\n\n@cli.command()\ndef sync():\n    \"\"\"í•œì‹ë‹¹ ë™ê¸°í™”\"\"\"\n    click.echo(\"Syncing to í•œì‹ë‹¹...\")\n    \n    async def run():\n        workflow = SyncWorkflow()\n        await workflow.sync_to_hansikdang()\n    \n    asyncio.run(run())\n    click.echo(\"âœ… Sync completed!\")\n\n\n@cli.command()\n@click.argument('keyword')\n@click.option('--region', default=None, help='ì§€ì—­ (ì˜ˆ: ê°•ë‚¨êµ¬)')\n@click.option('--priority', default=5, help='ìš°ì„ ìˆœìœ„ (1-10)')\ndef add_target(keyword, region, priority):\n    \"\"\"ìŠ¤í¬ë˜í•‘ íƒ€ê²Ÿ ì¶”ê°€\"\"\"\n    with db_session() as db:\n        target = ScrapingTarget(\n            id=str(uuid.uuid4()),\n            keyword=keyword,\n            region=region,\n            priority=priority,\n            status='active',\n            created_by='cli'\n        )\n        db.add(target)\n        db.commit()\n    \n    click.echo(f\"âœ… Target added: {keyword} ({region})\")\n\n\n@cli.command()\n@click.option('--region', default='ê°•ë‚¨êµ¬', help='ì§€ì—­')\n@click.option('--count', default=50, help='ìƒì„±í•  í‚¤ì›Œë“œ ìˆ˜')\ndef generate_targets(region, count):\n    \"\"\"AIë¡œ íƒ€ê²Ÿ í‚¤ì›Œë“œ ìë™ ìƒì„±\"\"\"\n    click.echo(f\"Generating {count} target keywords for {region}...\")\n    \n    async def run():\n        gemini = GeminiProcessor()\n        keywords = await gemini.generate_target_keywords(region, count)\n        \n        with db_session() as db:\n            for keyword in keywords:\n                target = ScrapingTarget(\n                    id=str(uuid.uuid4()),\n                    keyword=keyword,\n                    region=region,\n                    priority=5,\n                    status='active',\n                    created_by='ai'\n                )\n                db.add(target)\n            db.commit()\n        \n        click.echo(f\"âœ… Generated {len(keywords)} targets\")\n    \n    asyncio.run(run())\n\n\n@cli.command()\ndef full_pipeline():\n    \"\"\"ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ (ìŠ¤í¬ë˜í•‘ â†’ ì²˜ë¦¬ â†’ ë™ê¸°í™”)\"\"\"\n    click.echo(\"Running full pipeline...\")\n    \n    async def run():\n        # 1. ìŠ¤í¬ë˜í•‘\n        click.echo(\"Step 1/3: Scraping...\")\n        scrape_workflow = ScrapingWorkflow()\n        await scrape_workflow.run_daily_scraping()\n        \n        # 2. ì²˜ë¦¬\n        click.echo(\"Step 2/3: Processing...\")\n        await scrape_workflow.process_raw_data(batch_size=100)\n        \n        # 3. ë™ê¸°í™”\n        click.echo(\"Step 3/3: Syncing...\")\n        sync_workflow = SyncWorkflow()\n        await sync_workflow.sync_to_hansikdang()\n    \n    asyncio.run(run())\n    click.echo(\"âœ… Full pipeline completed!\")\n\n\nif __name__ == '__main__':\n    cli()\n","size_bytes":3863},"data-hub/setup_new_repl.sh":{"content":"#!/bin/bash\n# Data Hub ìƒˆ Repl ì„¤ì • ìë™í™” ìŠ¤í¬ë¦½íŠ¸\n\nset -e  # ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¤‘ë‹¨\n\necho \"ğŸš€ Restaurant Data Hub - ìƒˆ Repl ì„¤ì • ì‹œì‘\"\necho \"==========================================\"\necho \"\"\n\n# 1. í™˜ê²½ ë³€ìˆ˜ í™•ì¸\necho \"ğŸ“‹ 1/6: í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ì¤‘...\"\nrequired_vars=(\"DATABASE_URL\" \"GEMINI_API_KEY\" \"DATA_COLLECTION_API_KEY\" \"APIFY_API_TOKEN\")\nmissing_vars=()\n\nfor var in \"${required_vars[@]}\"; do\n    if [ -z \"${!var}\" ]; then\n        missing_vars+=(\"$var\")\n    fi\ndone\n\nif [ ${#missing_vars[@]} -ne 0 ]; then\n    echo \"âŒ ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤:\"\n    for var in \"${missing_vars[@]}\"; do\n        echo \"   - $var\"\n    done\n    echo \"\"\n    echo \"Replit Tools â†’ Secretsì—ì„œ ë‹¤ìŒ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:\"\n    echo \"   DATABASE_URL, GEMINI_API_KEY, DATA_COLLECTION_API_KEY, APIFY_API_TOKEN\"\n    echo \"\"\n    exit 1\nfi\n\necho \"âœ… í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ì™„ë£Œ\"\necho \"\"\n\n# 2. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜\necho \"ğŸ“¦ 2/6: Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì¤‘...\"\nif [ ! -f \"requirements.txt\" ]; then\n    echo \"âŒ requirements.txt íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤!\"\n    exit 1\nfi\n\npip install -q -r requirements.txt\necho \"âœ… Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ\"\necho \"\"\n\n# 3. .env íŒŒì¼ ìƒì„± (í™˜ê²½ ë³€ìˆ˜ ë°±ì—…)\necho \"ğŸ“ 3/6: .env íŒŒì¼ ìƒì„± ì¤‘...\"\ncat > .env << EOF\n# Database\nDATABASE_URL=${DATABASE_URL}\n\n# AI\nGEMINI_API_KEY=${GEMINI_API_KEY}\n\n# Scraping\nAPIFY_API_TOKEN=${APIFY_API_TOKEN}\n${OUTSCRAPER_API_KEY:+OUTSCRAPER_API_KEY=${OUTSCRAPER_API_KEY}}\n\n# API\nDATA_COLLECTION_API_KEY=${DATA_COLLECTION_API_KEY}\n\n# Session\n${SESSION_SECRET:+SESSION_SECRET=${SESSION_SECRET}}\nEOF\n\necho \"âœ… .env íŒŒì¼ ìƒì„± ì™„ë£Œ\"\necho \"\"\n\n# 4. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”\necho \"ğŸ—„ï¸  4/6: ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì¤‘...\"\npython3 cli.py init\necho \"âœ… ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ\"\necho \"\"\n\n# 5. í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ ì¶”ê°€\necho \"ğŸ¯ 5/6: í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ ì¶”ê°€ ì¤‘...\"\npython3 cli.py add-target \"ê°•ë‚¨ ëƒ‰ë©´\" --region ê°•ë‚¨êµ¬ --priority 10\npython3 cli.py add-target \"ì´íƒœì› í•œì •ì‹\" --region ìš©ì‚°êµ¬ --priority 8\necho \"âœ… í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ ì¶”ê°€ ì™„ë£Œ\"\necho \"\"\n\n# 6. ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\necho \"âœ… 6/6: ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\"\necho \"\"\npython3 cli.py\necho \"\"\n\n# ì™„ë£Œ ë©”ì‹œì§€\necho \"==========================================\"\necho \"ğŸ‰ Data Hub ì„¤ì • ì™„ë£Œ!\"\necho \"==========================================\"\necho \"\"\necho \"ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ API ì„œë²„ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:\"\necho \"\"\necho \"  python3 -m uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload\"\necho \"\"\necho \"ì ‘ì† URL:\"\necho \"  - API: https://[your-repl].replit.dev:8000\"\necho \"  - ë¬¸ì„œ: https://[your-repl].replit.dev:8000/docs\"\necho \"\"\n","size_bytes":2676},"data-hub/src/scrapers/__init__.py":{"content":"\"\"\"Scraping module\"\"\"\n","size_bytes":22},"data-hub/DEPLOYMENT_TO_NEW_REPL.md":{"content":"# ğŸš€ Data Hub ìƒˆ Repl ë°°í¬ ê°€ì´ë“œ\n\n## ğŸ“‹ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (Replit Secrets)\n\nhansikdang-data-hub Replì—ì„œ ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì„¸ìš”:\n\n### **í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜**\n\n1. **Tools ì•„ì´ì½˜ (ğŸ”§) â†’ Secrets í´ë¦­**\n2. ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€:\n\n```bash\n# 1. PostgreSQL Database (Supabase)\nDATABASE_URL=postgresql://postgres.[PROJECT]:[PASSWORD]@aws-0-ap-northeast-2.pooler.supabase.com:6543/postgres\n\n# 2. Google Gemini AI\nGEMINI_API_KEY=AIzaSy...\n\n# 3. Apify (Naver Place ìŠ¤í¬ë˜í•‘)\nAPIFY_API_TOKEN=apify_api_...\n\n# 4. í•œì‹ë‹¹ External API ì¸ì¦\nDATA_COLLECTION_API_KEY=...\n\n# 5. Session Secret (32ì ëœë¤ ë¬¸ìì—´)\nSESSION_SECRET=...\n```\n\n### **ì„ íƒ í™˜ê²½ ë³€ìˆ˜**\n\n```bash\n# Google Maps ìŠ¤í¬ë˜í•‘ (ì„ íƒì‚¬í•­)\nOUTSCRAPER_API_KEY=...\n```\n\n---\n\n## ğŸ“¦ íŒŒì¼ ë³µì‚¬ ë°©ë²•\n\n### **ë°©ë²• 1: Replit íŒŒì¼ ì—…ë¡œë“œ (ê¶Œì¥)**\n\n1. í˜„ì¬ hansikdang Replì—ì„œ `data-hub/` í´ë” ì „ì²´ë¥¼ ë‹¤ìš´ë¡œë“œ\n2. hansikdang-data-hub Replì—ì„œ ì—…ë¡œë“œ\n\n### **ë°©ë²• 2: Git ì‚¬ìš©**\n\n```bash\n# í˜„ì¬ hansikdang Replì—ì„œ\ncd data-hub\ngit init\ngit add .\ngit commit -m \"Initial Data Hub commit\"\ngit remote add origin <your-repo-url>\ngit push -u origin main\n\n# hansikdang-data-hub Replì—ì„œ\ngit clone <your-repo-url> .\n```\n\n### **ë°©ë²• 3: ìˆ˜ë™ ë³µì‚¬ (ëª¨ë“  íŒŒì¼)**\n\në‹¤ìŒ í´ë”/íŒŒì¼ë“¤ì„ ë³µì‚¬:\n\n```\ndata-hub/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ api/\nâ”‚   â”‚   â””â”€â”€ main.py                 # FastAPI ë©”ì¸ ì•±\nâ”‚   â”œâ”€â”€ database/\nâ”‚   â”‚   â”œâ”€â”€ connection.py           # DB ì—°ê²°\nâ”‚   â”‚   â””â”€â”€ models.py               # SQLAlchemy ëª¨ë¸ (7ê°œ í…Œì´ë¸”)\nâ”‚   â”œâ”€â”€ scrapers/\nâ”‚   â”‚   â”œâ”€â”€ apify_scraper.py        # Apify (Naver Place)\nâ”‚   â”‚   â””â”€â”€ outscraper_scraper.py   # Outscraper (Google Maps)\nâ”‚   â”œâ”€â”€ processors/\nâ”‚   â”‚   â””â”€â”€ gemini.py               # Gemini AI í”„ë¡œì„¸ì„œ\nâ”‚   â””â”€â”€ workflows/\nâ”‚       â”œâ”€â”€ scraping.py             # ìŠ¤í¬ë˜í•‘ ì›Œí¬í”Œë¡œìš°\nâ”‚       â”œâ”€â”€ processing.py           # AI ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš°\nâ”‚       â””â”€â”€ sync.py                 # í•œì‹ë‹¹ ë™ê¸°í™”\nâ”œâ”€â”€ cli.py                          # CLI ë„êµ¬\nâ”œâ”€â”€ cron_schedule.py                # í¬ë¡  ìŠ¤ì¼€ì¤„ëŸ¬\nâ”œâ”€â”€ config.py                       # ì„¤ì •\nâ”œâ”€â”€ requirements.txt                # Python ì˜ì¡´ì„±\nâ”œâ”€â”€ Dockerfile                      # Docker ì„¤ì •\nâ”œâ”€â”€ .env.example                    # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ\nâ”œâ”€â”€ START_HERE.md                   # ì‹œì‘ ê°€ì´ë“œ\nâ”œâ”€â”€ QUICK_START.md                  # ë¹ ë¥¸ ì‹œì‘\nâ””â”€â”€ DEPLOYMENT_GUIDE.md             # ë°°í¬ ê°€ì´ë“œ\n```\n\n---\n\n## ğŸ”§ ì„¤ì¹˜ ë° ì´ˆê¸°í™”\n\n### **1. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜**\n\n```bash\n# hansikdang-data-hub Repl Shellì—ì„œ\npip install -r requirements.txt\n```\n\n### **2. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”**\n\n```bash\n# 7ê°œ í…Œì´ë¸” ìƒì„±\npython3 cli.py init\n\n# í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ ì¶”ê°€\npython3 cli.py add-target \"ê°•ë‚¨ ëƒ‰ë©´\" --region ê°•ë‚¨êµ¬ --priority 10\npython3 cli.py add-target \"ì´íƒœì› í•œì •ì‹\" --region ìš©ì‚°êµ¬ --priority 8\n```\n\n### **3. ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸**\n\n```bash\npython3 cli.py\n```\n\nì¶œë ¥ ì˜ˆìƒ:\n```\n============================================================\n  ğŸª Restaurant Data Hub - System Status\n============================================================\n\nğŸ“ Scraping Targets: 2 total, 2 active\nğŸ“¦ Raw Data: 0 total, 0 pending\nâœ¨ Processed Data: 0 total, 0 synced\nğŸ”— ID Mappings: 0 naverâ†”google pairs\nğŸ“‹ Logs: 0 scraping, 0 sync\n```\n\n---\n\n## ğŸŒ API ì„œë²„ ì‹¤í–‰\n\n```bash\npython3 -m uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload\n```\n\n**ì ‘ì†:**\n- API: `https://[your-repl].replit.dev:8000`\n- ë¬¸ì„œ: `https://[your-repl].replit.dev:8000/docs`\n\n---\n\n## ğŸ§ª í…ŒìŠ¤íŠ¸\n\n### **1. Health Check**\n```bash\ncurl https://[your-repl].replit.dev:8000/\n```\n\n### **2. ì‹œìŠ¤í…œ í†µê³„**\n```bash\ncurl https://[your-repl].replit.dev:8000/api/stats\n```\n\n### **3. ì²« ìŠ¤í¬ë˜í•‘ (Apify)**\n```bash\npython3 cli.py scrape\n```\n\n---\n\n## ğŸ“¤ ë°°í¬ (Publish)\n\n1. **Replit Console â†’ Publish ë²„íŠ¼ í´ë¦­**\n2. **Deployment Type ì„ íƒ: Autoscale**\n3. **Deploy í´ë¦­**\n4. **Settings â†’ Link a domain**\n5. **ì…ë ¥: `data-hub.hansikdang.net`**\n6. **Replitì´ ì œê³µí•˜ëŠ” IP ì£¼ì†Œ ë³µì‚¬**\n\n---\n\n## ğŸŒ DNS ì„¤ì •\n\nhansikdang.net DNS ê´€ë¦¬ í˜ì´ì§€ì—ì„œ:\n\n```\nType:  A\nName:  data-hub\nValue: [Replitì´ ì œê³µí•œ IP ì£¼ì†Œ]\nTTL:   3600\n```\n\n**ì „íŒŒ ëŒ€ê¸°:** 5~30ë¶„ (ìµœëŒ€ 48ì‹œê°„)\n\n**í™•ì¸:**\n```bash\n# í„°ë¯¸ë„ì—ì„œ\nnslookup data-hub.hansikdang.net\n\n# ë˜ëŠ” ì›¹ì‚¬ì´íŠ¸\nhttps://dnschecker.org\n```\n\n---\n\n## âœ… ìµœì¢… í™•ì¸\n\n```bash\n# í•˜ìœ„ ë„ë©”ì¸ ì ‘ì†\nhttps://data-hub.hansikdang.net/\n\n# API ë¬¸ì„œ\nhttps://data-hub.hansikdang.net/docs\n\n# ì‹¤ì‹œê°„ í†µê³„\nhttps://data-hub.hansikdang.net/api/stats\n```\n\n---\n\n## ğŸ¤– 24/7 ìë™í™” í™œì„±í™”\n\n```bash\n# í¬ë¡  ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ)\nnohup python3 cron_schedule.py &\n```\n\n**ìë™ ì‘ì—…:**\n- ë§¤ì¼ 00:00 - AI íƒ€ê²Ÿ ìƒì„±\n- ë§¤ì¼ 02:00 - ìŠ¤í¬ë˜í•‘ ì‹¤í–‰\n- ë§¤ì¼ 04:00 - AI ì²˜ë¦¬\n- ë§¤ì¼ 06:00 - í•œì‹ë‹¹ ë™ê¸°í™”\n\n---\n\n## ğŸ“Š ëª¨ë‹ˆí„°ë§\n\n**ë§¤ì¼ í™•ì¸í•  URL:**\n```\nhttps://data-hub.hansikdang.net/docs\n```\n\n**ì£¼ìš” ì§€í‘œ:**\n- `/api/stats` - ì „ì²´ ì‹œìŠ¤í…œ í†µê³„\n- `/api/targets` - ìŠ¤í¬ë˜í•‘ íƒ€ê²Ÿ ëª©ë¡\n- `/api/logs/scraping` - ìŠ¤í¬ë˜í•‘ ë¡œê·¸\n- `/api/restaurants/raw` - ìˆ˜ì§‘ëœ ì›ë³¸ ë°ì´í„°\n\n---\n\n## ğŸ†˜ ë¬¸ì œ í•´ê²°\n\n**API ì„œë²„ê°€ ì•ˆ ëœ¨ë©´:**\n```bash\n# ë¡œê·¸ í™•ì¸\ncat /tmp/logs/*.log\n\n# DB ì—°ê²° í…ŒìŠ¤íŠ¸\npython3 -c \"from src.database.connection import db_session; print('DB OK')\"\n```\n\n**ìŠ¤í¬ë˜í•‘ì´ ì•ˆ ë˜ë©´:**\n```bash\n# Apify í¬ë ˆë”§ í™•ì¸\nhttps://console.apify.com/account/plan\n\n# í™˜ê²½ ë³€ìˆ˜ í™•ì¸\npython3 -c \"from config import APIFY_API_TOKEN; print('Token OK' if APIFY_API_TOKEN else 'Missing')\"\n```\n\n---\n\n**ë°°í¬ ì™„ë£Œ í›„ ì´ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ë§¤ì¼ ëª¨ë‹ˆí„°ë§í•˜ì„¸ìš”!** ğŸ‰\n","size_bytes":5973},"data-hub/START_HERE.md":{"content":"# ğŸš€ Restaurant Data Hub - ì‹œì‘ ê°€ì´ë“œ\n\n## âœ… ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ!\n\në°ì´í„°ë² ì´ìŠ¤ê°€ ì´ˆê¸°í™”ë˜ì—ˆê³ , í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n---\n\n## ğŸ“¡ API ì„œë²„ ì‹¤í–‰ ë°©ë²•\n\n### ë°©ë²• 1: ì§ì ‘ ì‹¤í–‰ (ê¶Œì¥)\n\n```bash\ncd data-hub\npython3 -m uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload\n```\n\n**ì ‘ì† URL:**\n- API ì„œë²„: `http://localhost:8000`\n- ìë™ ë¬¸ì„œ: `http://localhost:8000/docs` (Swagger UI)\n- ëŒ€ì²´ ë¬¸ì„œ: `http://localhost:8000/redoc`\n\n### ë°©ë²• 2: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰\n\n```bash\ncd data-hub\n./start_server.sh\n```\n\n---\n\n## ğŸ” API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸\n\n### 1. Health Check\n```bash\ncurl http://localhost:8000/\n```\n\n### 2. ì‹œìŠ¤í…œ í†µê³„\n```bash\ncurl http://localhost:8000/api/stats\n```\n\n### 3. ìŠ¤í¬ë˜í•‘ íƒ€ê²Ÿ ëª©ë¡\n```bash\ncurl http://localhost:8000/api/targets\n```\n\n### 4. ì›ë³¸ ë ˆìŠ¤í† ë‘ ë°ì´í„°\n```bash\ncurl http://localhost:8000/api/restaurants/raw?limit=10\n```\n\n### 5. ìŠ¤í¬ë˜í•‘ ë¡œê·¸\n```bash\ncurl http://localhost:8000/api/logs/scraping?limit=10\n```\n\n---\n\n## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„\n\n### 1. AIë¡œ íƒ€ê²Ÿ í‚¤ì›Œë“œ ìë™ ìƒì„±\n```bash\ncd data-hub\npython3 cli.py generate-targets --region ê°•ë‚¨êµ¬ --count 50\n```\n\n### 2. ìŠ¤í¬ë˜í•‘ ì‹¤í–‰ (Apify API í•„ìš”)\n```bash\n# .env íŒŒì¼ì— APIFY_API_TOKEN ì¶”ê°€ í›„\npython3 cli.py scrape\n```\n\n### 3. ë°ì´í„° ì²˜ë¦¬ (Gemini AI)\n```bash\npython3 cli.py process\n```\n\n### 4. í•œì‹ë‹¹ ë™ê¸°í™”\n```bash\npython3 cli.py sync\n```\n\n### 5. ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰\n```bash\npython3 cli.py full-pipeline\n```\n\n---\n\n## ğŸŒ Replit ì›¹ë·°ì—ì„œ ì ‘ì†í•˜ê¸°\n\nReplitì—ì„œ API ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´, Webview íƒ­ì—ì„œ ìë™ìœ¼ë¡œ ì ‘ì† ê°€ëŠ¥í•©ë‹ˆë‹¤:\n\n1. **í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰:**\n   ```bash\n   cd data-hub && python3 -m uvicorn src.api.main:app --host 0.0.0.0 --port 8000\n   ```\n\n2. **Webview íƒ­ í´ë¦­** ë˜ëŠ” URL ë’¤ì— í¬íŠ¸ ì¶”ê°€:\n   ```\n   https://your-repl-url.replit.dev:8000\n   ```\n\n3. **API ë¬¸ì„œ ìë™ ìƒì„±:**\n   ```\n   https://your-repl-url.replit.dev:8000/docs\n   ```\n\n---\n\n## ğŸ“Š í˜„ì¬ ìƒíƒœ\n\n- âœ… ë°ì´í„°ë² ì´ìŠ¤: 7ê°œ í…Œì´ë¸” ìƒì„± ì™„ë£Œ\n- âœ… í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ: 2ê°œ ì¶”ê°€ (ê°•ë‚¨ ëƒ‰ë©´, ì´íƒœì› í•œì •ì‹)\n- âœ… API ì„œë²„: ì¤€ë¹„ ì™„ë£Œ\n- â³ ìŠ¤í¬ë˜í•‘: API í‚¤ ì„¤ì • í•„ìš”\n- â³ AI ì²˜ë¦¬: Gemini API ì‚¬ìš© ê°€ëŠ¥\n- â³ í•œì‹ë‹¹ ì—°ë™: External API ì¤€ë¹„ ì™„ë£Œ\n\n---\n\n## ğŸ’¡ ìœ ìš©í•œ ëª…ë ¹ì–´\n\n```bash\n# ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\npython3 cli.py\n\n# íƒ€ê²Ÿ ì¶”ê°€\npython3 cli.py add-target \"ëª…ë™ í•œì •ì‹\" --region ì¤‘êµ¬\n\n# ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (ì£¼ì˜!)\npython3 cli.py init\n\n# API ì„œë²„ + ìë™ ì¬ì‹œì‘\npython3 -m uvicorn src.api.main:app --reload --port 8000\n```\n\n---\n\n## ğŸ“š ë¬¸ì„œ\n\n- **QUICK_START.md**: 5ë¶„ ë¹ ë¥¸ ì‹œì‘\n- **DEPLOYMENT_GUIDE.md**: Google Cloud Run ë°°í¬\n- **README.md**: ì „ì²´ ì•„í‚¤í…ì²˜\n- **API Docs**: http://localhost:8000/docs (ì„œë²„ ì‹¤í–‰ í›„)\n\n---\n\n**ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ì‹ ê°€ìš”?**  \n`python3 cli.py --help` ëª…ë ¹ì–´ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ëª…ë ¹ì–´ë¥¼ í™•ì¸í•˜ì„¸ìš”!\n","size_bytes":3021},"data-hub/src/database/connection.py":{"content":"\"\"\"\nDatabase connection management\n\"\"\"\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker, Session\nfrom sqlalchemy.pool import NullPool\nfrom contextlib import contextmanager\nfrom typing import Generator\n\nfrom config import settings\nfrom src.database.models import Base\n\n\n# Create engine\nengine = create_engine(\n    settings.data_hub_database_url,\n    poolclass=NullPool,  # Cloud Runì—ì„œëŠ” ì—°ê²° í’€ ì‚¬ìš© ì•ˆ í•¨\n    echo=False,\n)\n\n# Create session factory\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n\n\ndef init_db():\n    \"\"\"ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±\"\"\"\n    Base.metadata.create_all(bind=engine)\n\n\ndef get_db() -> Generator[Session, None, None]:\n    \"\"\"FastAPI dependency\"\"\"\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n\n@contextmanager\ndef db_session() -> Generator[Session, None, None]:\n    \"\"\"Context manager for database sessions\"\"\"\n    db = SessionLocal()\n    try:\n        yield db\n        db.commit()\n    except Exception:\n        db.rollback()\n        raise\n    finally:\n        db.close()\n","size_bytes":1109},"data-hub/DEPLOYMENT_GUIDE.md":{"content":"# Restaurant Data Hub ë°°í¬ ê°€ì´ë“œ\n\n## ğŸ¯ ëª©í‘œ\n1ê°œì›”ì— 1ë§Œ ê°œ ë ˆìŠ¤í† ë‘ ë°ì´í„° ìë™ ìˆ˜ì§‘ ë° ê´€ë¦¬\n\n## ğŸ“‹ ì‚¬ì „ ì¤€ë¹„\n\n### 1. API í‚¤ ë°œê¸‰\n\n#### Apify (ë„¤ì´ë²„í”Œë ˆì´ìŠ¤ ìŠ¤í¬ë˜í•‘)\n1. https://apify.com ê°€ì…\n2. í”Œëœ: Starter ($49/ì›”)\n3. API Token ë³µì‚¬\n\n#### Outscraper (êµ¬ê¸€ë§µìŠ¤ ìŠ¤í¬ë˜í•‘)\n1. https://outscraper.com ê°€ì…\n2. í¬ë ˆë”§ êµ¬ë§¤ ($10 = 1,000ê°œ)\n3. API Key ë³µì‚¬\n\n#### Bright Data (ì„ íƒ - í”„ë¡ì‹œ)\n1. https://brightdata.com ê°€ì…\n2. Residential Proxies ì„ íƒ\n3. í•œêµ­ IP í”„ë¡ì‹œ ì„¤ì •\n\n#### Gemini API (ë¬´ë£Œ!)\n- ì´ë¯¸ ì„¤ì •ëœ GEMINI_API_KEY ì¬ì‚¬ìš© ê°€ëŠ¥\n\n---\n\n## ğŸš€ Replitì—ì„œ ì‹¤í–‰ (ê°œë°œ/í…ŒìŠ¤íŠ¸)\n\n### 1. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜\n```bash\ncd data-hub\npip install -r requirements.txt\n```\n\n### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •\nReplit Secretsì— ì¶”ê°€:\n```\nDATA_HUB_DATABASE_URL=postgresql://...  # ë³„ë„ Supabase ì¸ìŠ¤í„´ìŠ¤\nGEMINI_API_KEY=your_key\nAPIFY_API_TOKEN=your_token\nOUTSCRAPER_API_KEY=your_key\nHANSIKDANG_API_URL=http://localhost:5000\nDATA_COLLECTION_API_KEY=your_existing_key\n```\n\n### 3. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”\n```bash\ncd data-hub\npython cli.py init\n```\n\n### 4. íƒ€ê²Ÿ í‚¤ì›Œë“œ ìƒì„± (AI)\n```bash\npython cli.py generate-targets --region ê°•ë‚¨êµ¬ --count 50\n```\n\n### 5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰\n```bash\n# ìŠ¤í¬ë˜í•‘ í…ŒìŠ¤íŠ¸ (ì†ŒëŸ‰)\npython cli.py scrape\n\n# ë°ì´í„° ì²˜ë¦¬ í…ŒìŠ¤íŠ¸\npython cli.py process\n\n# í•œì‹ë‹¹ ë™ê¸°í™” í…ŒìŠ¤íŠ¸\npython cli.py sync\n```\n\n---\n\n## â˜ï¸ Google Cloud Run ë°°í¬ (í”„ë¡œë•ì…˜)\n\n### ì™œ Cloud Run?\n- âœ… ì‚¬ìš©í•œ ë§Œí¼ë§Œ ê³¼ê¸ˆ (ì‹¤í–‰ ì•ˆ í•˜ë©´ $0)\n- âœ… Auto-scaling (ë¶€í•˜ ì¦ê°€ ì‹œ ìë™ í™•ì¥)\n- âœ… í•œì‹ë‹¹ê³¼ ê°™ì€ Google Cloud ìƒíƒœê³„\n- âœ… í¬ë¡  ì¡ ë‚´ì¥ (Cloud Scheduler)\n\n### 1. Google Cloud ì„¤ì •\n\n```bash\n# gcloud CLI ì„¤ì¹˜\ncurl https://sdk.cloud.google.com | bash\n\n# ë¡œê·¸ì¸\ngcloud auth login\n\n# í”„ë¡œì íŠ¸ ì„¤ì •\ngcloud config set project YOUR_PROJECT_ID\n```\n\n### 2. Docker ì´ë¯¸ì§€ ë¹Œë“œ & í‘¸ì‹œ\n\n```bash\ncd data-hub\n\n# ì´ë¯¸ì§€ ë¹Œë“œ\ndocker build -t gcr.io/YOUR_PROJECT_ID/data-hub .\n\n# Google Container Registryì— í‘¸ì‹œ\ndocker push gcr.io/YOUR_PROJECT_ID/data-hub\n```\n\n### 3. Cloud Run ë°°í¬\n\n```bash\ngcloud run deploy data-hub \\\n  --image gcr.io/YOUR_PROJECT_ID/data-hub \\\n  --platform managed \\\n  --region asia-northeast3 \\\n  --allow-unauthenticated \\\n  --set-env-vars DATA_HUB_DATABASE_URL=postgresql://... \\\n  --set-env-vars GEMINI_API_KEY=... \\\n  --set-env-vars APIFY_API_TOKEN=... \\\n  --set-env-vars OUTSCRAPER_API_KEY=... \\\n  --set-env-vars HANSIKDANG_API_URL=... \\\n  --set-env-vars DATA_COLLECTION_API_KEY=... \\\n  --memory 2Gi \\\n  --cpu 2 \\\n  --timeout 3600 \\\n  --max-instances 5\n```\n\n### 4. Cloud Scheduler (í¬ë¡  ì¡) ì„¤ì •\n\n```bash\n# ë§¤ì¼ ì˜¤í›„ 2ì‹œ: ìŠ¤í¬ë˜í•‘\ngcloud scheduler jobs create http daily-scraping \\\n  --schedule=\"0 14 * * *\" \\\n  --uri=\"https://YOUR_CLOUD_RUN_URL/api/scrape/start\" \\\n  --http-method=POST \\\n  --time-zone=\"Asia/Seoul\"\n\n# ë§¤ì¼ ì˜¤í›„ 4ì‹œ: ë°ì´í„° ì²˜ë¦¬\ngcloud scheduler jobs create http daily-processing \\\n  --schedule=\"0 16 * * *\" \\\n  --uri=\"https://YOUR_CLOUD_RUN_URL/api/process/start\" \\\n  --http-method=POST \\\n  --time-zone=\"Asia/Seoul\"\n\n# ë§¤ì¼ ìƒˆë²½ 3ì‹œ: í•œì‹ë‹¹ ë™ê¸°í™”\ngcloud scheduler jobs create http daily-sync \\\n  --schedule=\"0 3 * * *\" \\\n  --uri=\"https://YOUR_CLOUD_RUN_URL/api/sync/start\" \\\n  --http-method=POST \\\n  --time-zone=\"Asia/Seoul\"\n```\n\n---\n\n## ğŸ“Š ëª¨ë‹ˆí„°ë§\n\n### Grafana Cloud (ë¬´ë£Œ)\n\n1. https://grafana.com ê°€ì…\n2. Data Source ì¶”ê°€: PostgreSQL (Supabase)\n3. Dashboard ìƒì„±:\n   - ì¼ì¼ ìˆ˜ì§‘ í˜„í™©\n   - ì—ëŸ¬ìœ¨\n   - í’ˆì§ˆ ì ìˆ˜ ë¶„í¬\n   - ë™ê¸°í™” ìƒíƒœ\n\n### Better Stack (ë¬´ë£Œ)\n\n1. https://betterstack.com ê°€ì…\n2. Uptime Monitoring ì„¤ì •\n3. ì•Œë¦¼: ì´ë©”ì¼/SMS\n\n---\n\n## ğŸ’° ì˜ˆìƒ ë¹„ìš© (ì›”)\n\n```\nApify Starter:          $49\nOutscraper:            $150 (15,000ê°œ Ã— $0.01)\nBright Data:            $50 (ì„ íƒ)\nGoogle Cloud Run:       $30 (ì»¨í…Œì´ë„ˆ)\nGemini API:             $50 (ë°ì´í„° ì •ì œ)\nSupabase Pro:           $25 (ë³„ë„ DB)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nì´ ë¹„ìš©:              $354/ì›”\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nì—…ì²´ë‹¹ ë¹„ìš©:          $0.035 (3.5ì„¼íŠ¸)\n```\n\n### ë¹„ìš© ì ˆê° íŒ\n- Apify ëŒ€ì‹  Playwright ì§ì ‘ êµ¬í˜„ ($49 ì ˆê°)\n- ìˆ˜ì§‘ ì†ë„ ì¡°ì ˆ (í•˜ë£¨ 200ê°œ â†’ ì›” $200)\n- Gemini í”„ë¡¬í”„íŠ¸ ìµœì í™” (í† í° ì‚¬ìš© ìµœì†Œí™”)\n\n---\n\n## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…\n\n### ìŠ¤í¬ë˜í•‘ ì°¨ë‹¨\n- Bright Data í”„ë¡ì‹œ ì‚¬ìš©\n- User-Agent ëœë¤í™”\n- ë”œë ˆì´ ì¶”ê°€ (3-5ì´ˆ)\n\n### Gemini API í• ë‹¹ëŸ‰ ì´ˆê³¼\n- ë°°ì¹˜ ì‚¬ì´ì¦ˆ ì¤„ì´ê¸° (50 â†’ 20)\n- í”„ë¡¬í”„íŠ¸ ìµœì í™”\n- Gemini 1.5 Flash ì‚¬ìš© (ë” ì €ë ´)\n\n### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜\n- Supabase Connection Pooler ì‚¬ìš©\n- SQLAlchemy NullPool ì„¤ì •\n- íƒ€ì„ì•„ì›ƒ ì¦ê°€ (30s â†’ 60s)\n\n---\n\n## ğŸ“ˆ í™•ì¥ ê³„íš\n\n### Phase 1 (í˜„ì¬)\n- 1ê°œì›” 1ë§Œ ê°œ ìˆ˜ì§‘\n- ë„¤ì´ë²„ + êµ¬ê¸€ í†µí•©\n- í’ˆì§ˆ ì ìˆ˜ 70 ì´ìƒë§Œ ë™ê¸°í™”\n\n### Phase 2 (3ê°œì›”)\n- ë¦¬ë·° ë°ì´í„° ìˆ˜ì§‘\n- ë©”ë‰´íŒ OCR (Google Vision)\n- ì‚¬ì§„ í¬ë¡¤ë§\n\n### Phase 3 (6ê°œì›”)\n- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê°ì§€\n- íì—… ì—…ì²´ ìë™ ì œê±°\n- ì‚¬ìš©ì í”¼ë“œë°± ë°˜ì˜\n\n---\n\n## ğŸ¯ ì„±ê³µ ì§€í‘œ\n\n### ë°ì´í„° í’ˆì§ˆ\n- í‰ê·  í’ˆì§ˆ ì ìˆ˜ > 80\n- GPS ì •í™•ë„ > 95%\n- ì¤‘ë³µë¥  < 5%\n\n### ìš´ì˜ íš¨ìœ¨\n- ìŠ¤í¬ë˜í•‘ ì„±ê³µë¥  > 90%\n- ë™ê¸°í™” ì„±ê³µë¥  > 95%\n- ì¼ì¼ ë‹¤ìš´íƒ€ì„ < 10ë¶„\n\n### ë¹„ìš© íš¨ìœ¨\n- ì—…ì²´ë‹¹ ë¹„ìš© < $0.05\n- ì›” ì´ ë¹„ìš© < $500\n- ROI (ê´‘ê³  ìˆ˜ìµ ëŒ€ë¹„) > 300%\n\n---\n\n## ğŸ“ ì§€ì›\n\në¬¸ì œ ë°œìƒ ì‹œ:\n1. ë¡œê·¸ í™•ì¸: `python cli.py logs`\n2. ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ: API `/api/stats`\n3. GitHub Issues ë“±ë¡\n","size_bytes":5724},"data-hub/README.md":{"content":"# Restaurant Data Hub\n\n## ëª©ì \ní•œì‹ë‹¹ í”Œë«í¼ì„ ìœ„í•œ ëŒ€ê·œëª¨ ë ˆìŠ¤í† ë‘ ë°ì´í„° ìˆ˜ì§‘ ë° ê´€ë¦¬ ì‹œìŠ¤í…œ\n\n## ëª©í‘œ\n- **1ê°œì›”ì— 1ë§Œ ê°œ ë ˆìŠ¤í† ë‘** ë°ì´í„° ìˆ˜ì§‘\n- ë„¤ì´ë²„í”Œë ˆì´ìŠ¤ + êµ¬ê¸€ë§µìŠ¤ í†µí•© ìŠ¤í¬ë˜í•‘\n- Gemini AI ê¸°ë°˜ ë°ì´í„° ì •ì œ ë° ë²ˆì—­\n- í•œì‹ë‹¹ ë©”ì¸ í”Œë«í¼ê³¼ API ì—°ë™\n\n## ì•„í‚¤í…ì²˜\n\n```\ndata-hub/\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ scrapers/          # ìŠ¤í¬ë˜í•‘ ëª¨ë“ˆ\nâ”‚   â”‚   â”œâ”€â”€ naver.py       # ë„¤ì´ë²„í”Œë ˆì´ìŠ¤ ìŠ¤í¬ë˜í¼\nâ”‚   â”‚   â”œâ”€â”€ google.py      # êµ¬ê¸€ë§µìŠ¤ ìŠ¤í¬ë˜í¼\nâ”‚   â”‚   â””â”€â”€ base.py        # ê³µí†µ ìŠ¤í¬ë˜í¼ ì¸í„°í˜ì´ìŠ¤\nâ”‚   â”œâ”€â”€ processors/        # ë°ì´í„° ì²˜ë¦¬\nâ”‚   â”‚   â”œâ”€â”€ gemini.py      # Gemini AI ì •ì œ\nâ”‚   â”‚   â”œâ”€â”€ translator.py  # ë‹¤êµ­ì–´ ë²ˆì—­\nâ”‚   â”‚   â””â”€â”€ validator.py   # í’ˆì§ˆ ê²€ì¦\nâ”‚   â”œâ”€â”€ database/          # ë°ì´í„°ë² ì´ìŠ¤\nâ”‚   â”‚   â”œâ”€â”€ models.py      # SQLAlchemy ëª¨ë¸\nâ”‚   â”‚   â”œâ”€â”€ connection.py  # DB ì—°ê²°\nâ”‚   â”‚   â””â”€â”€ migrations/    # ë§ˆì´ê·¸ë ˆì´ì…˜\nâ”‚   â”œâ”€â”€ workflows/         # ì›Œí¬í”Œë¡œìš°\nâ”‚   â”‚   â”œâ”€â”€ discovery.py   # íƒ€ê²Ÿ ë°œê²¬\nâ”‚   â”‚   â”œâ”€â”€ scraping.py    # ìˆ˜ì§‘ ì›Œí¬í”Œë¡œìš°\nâ”‚   â”‚   â””â”€â”€ sync.py        # í•œì‹ë‹¹ ë™ê¸°í™”\nâ”‚   â””â”€â”€ api/               # FastAPI ì„œë²„\nâ”‚       â”œâ”€â”€ main.py        # API ì—”íŠ¸ë¦¬í¬ì¸íŠ¸\nâ”‚       â””â”€â”€ routes/        # API ë¼ìš°íŠ¸\nâ”œâ”€â”€ dashboard/             # Admin Dashboard\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ pages/\nâ”‚   â”‚   â””â”€â”€ components/\nâ”‚   â””â”€â”€ package.json\nâ”œâ”€â”€ requirements.txt       # Python ì˜ì¡´ì„±\nâ”œâ”€â”€ Dockerfile            # Cloud Run ë°°í¬ìš©\nâ””â”€â”€ config.py             # ì„¤ì • ê´€ë¦¬\n```\n\n## ê¸°ìˆ  ìŠ¤íƒ\n- **ì–¸ì–´**: Python 3.11+\n- **í”„ë ˆì„ì›Œí¬**: FastAPI, SQLAlchemy\n- **AI**: Google Gemini 2.0 Flash\n- **ìŠ¤í¬ë˜í•‘**: Apify, Outscraper, httpx\n- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL (Supabase)\n- **ì›Œí¬í”Œë¡œìš°**: Python asyncio + schedule\n\n## í™˜ê²½ ë³€ìˆ˜\n```bash\n# Supabase (ë³„ë„ ì¸ìŠ¤í„´ìŠ¤)\nDATA_HUB_DATABASE_URL=\n\n# API Keys\nGEMINI_API_KEY=\nAPIFY_API_TOKEN=\nOUTSCRAPER_API_KEY=\nBRIGHT_DATA_PROXY_URL=\n\n# í•œì‹ë‹¹ ì—°ë™\nHANSIKDANG_API_URL=\nDATA_COLLECTION_API_KEY=\n```\n\n## ì‹¤í–‰ ë°©ë²•\n```bash\n# ì˜ì¡´ì„± ì„¤ì¹˜\npip install -r requirements.txt\n\n# ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜\npython -m src.database.migrations.migrate\n\n# API ì„œë²„ ì‹¤í–‰\npython -m src.api.main\n\n# ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ (í¬ë¡ )\npython -m src.workflows.scraping\n```\n\n## ë°°í¬\nGoogle Cloud Runìœ¼ë¡œ ë°°í¬ ì˜ˆì •\n","size_bytes":2636},"data-hub/start_server.sh":{"content":"#!/bin/bash\n# Data Hub API Server Startup Script\n\necho \"ğŸš€ Starting Restaurant Data Hub API Server...\"\necho \"\"\n\ncd \"$(dirname \"$0\")\"\n\n# í™˜ê²½ ë³€ìˆ˜ í™•ì¸\nif [ ! -f .env ]; then\n    echo \"âš ï¸  .env íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.\"\n    cp .env.example .env\n    echo \"âœ… .env íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\"\nfi\n\n# DB ì´ˆê¸°í™” (ì²˜ìŒ í•œ ë²ˆë§Œ)\nif [ ! -f .db_initialized ]; then\n    echo \"ğŸ“¦ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì¤‘...\"\n    python3 cli.py init\n    touch .db_initialized\n    echo \"âœ… ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ\"\n    echo \"\"\nfi\n\n# API ì„œë²„ ì‹œì‘\necho \"ğŸŒ API ì„œë²„ ì‹œì‘ (í¬íŠ¸ 8000)...\"\necho \"ğŸ“ ì ‘ì†: http://localhost:8000\"\necho \"ğŸ“š API ë¬¸ì„œ: http://localhost:8000/docs\"\necho \"\"\n\nexec python3 -m uvicorn src.api.main:app \\\n    --host 0.0.0.0 \\\n    --port 8000 \\\n    --reload \\\n    --log-level info\n","size_bytes":837},"data-hub/src/workflows/__init__.py":{"content":"\"\"\"Workflow module\"\"\"\n","size_bytes":22},"data-hub/src/database/__init__.py":{"content":"\"\"\"Database module\"\"\"\n","size_bytes":22},"data-hub/COPY_TO_NEW_REPL_CHECKLIST.md":{"content":"# âœ… Data Hub â†’ ìƒˆ Repl ë³µì‚¬ ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n## ğŸ¯ ëª©í‘œ\n`hansikdang` Replì˜ `data-hub/` í´ë”ë¥¼ â†’ `hansikdang-data-hub` Replë¡œ ì™„ì „íˆ ì´ë™\n\n---\n\n## ğŸ“¦ ë°©ë²• 1: Replit íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš© (ê°€ì¥ ì‰¬ì›€)\n\n### **ë‹¨ê³„ë³„ ê°€ì´ë“œ:**\n\n1. **í˜„ì¬ Repl (hansikdang)ì—ì„œ:**\n   - ì™¼ìª½ Files íŒ¨ë„ì—ì„œ `data-hub` í´ë” ì°¾ê¸°\n   - `data-hub` í´ë” ìš°í´ë¦­ â†’ **Download**\n   - `data-hub.zip` íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë¨\n\n2. **ìƒˆ Repl (hansikdang-data-hub)ë¡œ ì´ë™:**\n   - hansikdang-data-hub Repl ì—´ê¸°\n   - Files íŒ¨ë„ì—ì„œ ë¹ˆ ê³µê°„ ìš°í´ë¦­ â†’ **Upload files** ë˜ëŠ” **Upload folder**\n   - ë‹¤ìš´ë¡œë“œí•œ `data-hub.zip` ì—…ë¡œë“œ ë˜ëŠ” ì••ì¶• í•´ì œí•œ í´ë” ì—…ë¡œë“œ\n\n3. **í´ë” êµ¬ì¡° í™•ì¸:**\n   ```\n   hansikdang-data-hub/\n   â”œâ”€â”€ src/\n   â”‚   â”œâ”€â”€ api/\n   â”‚   â”œâ”€â”€ database/\n   â”‚   â”œâ”€â”€ scrapers/\n   â”‚   â”œâ”€â”€ processors/\n   â”‚   â””â”€â”€ workflows/\n   â”œâ”€â”€ cli.py\n   â”œâ”€â”€ config.py\n   â”œâ”€â”€ requirements.txt\n   â””â”€â”€ ...\n   ```\n\n---\n\n## ğŸ“¦ ë°©ë²• 2: í„°ë¯¸ë„ ë³µì‚¬ (ê³ ê¸‰)\n\n### **hansikdang Repl Shell:**\n\n```bash\n# data-hub í´ë” ì••ì¶•\ncd /home/runner/workspace\ntar -czf data-hub-backup.tar.gz data-hub/\n\n# ë‹¤ìš´ë¡œë“œ (Webviewì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡)\ncp data-hub-backup.tar.gz ~/workspace/\n```\n\n### **hansikdang-data-hub Repl Shell:**\n\n```bash\n# ì••ì¶• íŒŒì¼ ì—…ë¡œë“œ í›„\ntar -xzf data-hub-backup.tar.gz\nmv data-hub/* .\nrm -rf data-hub\n```\n\n---\n\n## ğŸ“‹ ë³µì‚¬í•´ì•¼ í•  í•„ìˆ˜ íŒŒì¼ ëª©ë¡\n\n### **âœ… ë£¨íŠ¸ íŒŒì¼ë“¤**\n- [ ] `cli.py` - CLI ë„êµ¬\n- [ ] `config.py` - ì„¤ì •\n- [ ] `cron_schedule.py` - í¬ë¡  ìŠ¤ì¼€ì¤„ëŸ¬\n- [ ] `requirements.txt` - Python ì˜ì¡´ì„±\n- [ ] `.env.example` - í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ\n- [ ] `setup_new_repl.sh` - ìë™ ì„¤ì • ìŠ¤í¬ë¦½íŠ¸\n- [ ] `DEPLOYMENT_TO_NEW_REPL.md` - ë°°í¬ ê°€ì´ë“œ\n- [ ] `START_HERE.md` - ì‹œì‘ ê°€ì´ë“œ\n- [ ] `QUICK_START.md` - ë¹ ë¥¸ ì‹œì‘\n- [ ] `DEPLOYMENT_GUIDE.md` - Cloud Run ê°€ì´ë“œ\n- [ ] `README.md` - ì „ì²´ ë¬¸ì„œ\n\n### **âœ… src/ í´ë”**\n- [ ] `src/__init__.py`\n- [ ] `src/api/__init__.py`\n- [ ] `src/api/main.py` - FastAPI ë©”ì¸\n- [ ] `src/database/__init__.py`\n- [ ] `src/database/connection.py` - DB ì—°ê²°\n- [ ] `src/database/models.py` - 7ê°œ í…Œì´ë¸” ëª¨ë¸\n- [ ] `src/scrapers/__init__.py`\n- [ ] `src/scrapers/base.py` - ìŠ¤í¬ë˜í¼ ë² ì´ìŠ¤\n- [ ] `src/scrapers/naver.py` - Naver Place (Apify)\n- [ ] `src/scrapers/google.py` - Google Maps (Outscraper)\n- [ ] `src/processors/__init__.py`\n- [ ] `src/processors/gemini.py` - Gemini AI í”„ë¡œì„¸ì„œ\n- [ ] `src/workflows/__init__.py`\n- [ ] `src/workflows/scraping.py` - ìŠ¤í¬ë˜í•‘ ì›Œí¬í”Œë¡œìš°\n- [ ] `src/workflows/sync.py` - í•œì‹ë‹¹ ë™ê¸°í™”\n\n### **âš ï¸ ë³µì‚¬í•˜ì§€ ë§ ê²ƒ**\n- âŒ `__pycache__/` í´ë”ë“¤\n- âŒ `.pyc` íŒŒì¼ë“¤\n- âŒ `venv/` ë˜ëŠ” `.venv/`\n- âŒ `.db_initialized` (ìë™ ìƒì„±ë¨)\n- âŒ `*.log` íŒŒì¼ë“¤\n- âŒ `api_server.pid`\n\n---\n\n## ğŸ”§ ë³µì‚¬ í›„ ì„¤ì •\n\n### **1. Replit Secrets ì„¤ì •**\n\nhansikdang-data-hub Replì—ì„œ:\n\n```\nTools (ğŸ”§) â†’ Secrets â†’ Add new secret\n```\n\n**í•„ìˆ˜:**\n- `DATABASE_URL` - Supabase PostgreSQL URL\n- `GEMINI_API_KEY` - Google Gemini API í‚¤\n- `APIFY_API_TOKEN` - Apify API í† í°\n- `DATA_COLLECTION_API_KEY` - í•œì‹ë‹¹ External API í‚¤\n\n**ì„ íƒ:**\n- `OUTSCRAPER_API_KEY` - Google Maps ìŠ¤í¬ë˜í•‘ìš© (ì„ íƒ)\n- `SESSION_SECRET` - 32ì ëœë¤ ë¬¸ìì—´\n\n### **2. ìë™ ì„¤ì • ì‹¤í–‰**\n\n```bash\n# hansikdang-data-hub Repl Shellì—ì„œ\nchmod +x setup_new_repl.sh\n./setup_new_repl.sh\n```\n\n**ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰:**\n1. âœ… í™˜ê²½ ë³€ìˆ˜ í™•ì¸\n2. âœ… Python íŒ¨í‚¤ì§€ ì„¤ì¹˜\n3. âœ… .env íŒŒì¼ ìƒì„±\n4. âœ… ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (7ê°œ í…Œì´ë¸”)\n5. âœ… í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ ì¶”ê°€ (2ê°œ)\n6. âœ… ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\n\n### **3. API ì„œë²„ ì‹¤í–‰**\n\n```bash\npython3 -m uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload\n```\n\n---\n\n## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n### **íŒŒì¼ êµ¬ì¡° í™•ì¸**\n```bash\nls -la\n# ì¶œë ¥ì— cli.py, config.py, requirements.txt, src/ ë“±ì´ ë³´ì—¬ì•¼ í•¨\n```\n\n### **Python íŒ¨í‚¤ì§€ í™•ì¸**\n```bash\npip list | grep -E \"(fastapi|sqlalchemy|apify|google-generativeai)\"\n```\n\n### **DB ì—°ê²° í™•ì¸**\n```bash\npython3 -c \"from src.database.connection import db_session; print('âœ… DB ì—°ê²° ì„±ê³µ')\"\n```\n\n### **API ì„œë²„ í™•ì¸**\n```bash\ncurl http://localhost:8000/ | python3 -m json.tool\n```\n\n---\n\n## ğŸš€ ì™„ë£Œ í›„\n\n1. **Publish** ë²„íŠ¼ í´ë¦­\n2. **Deployment Type**: Autoscale ì„ íƒ\n3. **Deploy** ì‹¤í–‰\n4. **Settings â†’ Link a domain**\n5. **ì…ë ¥**: `data-hub.hansikdang.net`\n6. **DNS ì„¤ì •**: Replitì´ ì œê³µí•œ IP ì£¼ì†Œë¡œ A ë ˆì½”ë“œ ì¶”ê°€\n\n---\n\n## ğŸ†˜ ë¬¸ì œ í•´ê²°\n\n**íŒŒì¼ì´ ë„ˆë¬´ ë§ì•„ì„œ ì—…ë¡œë“œê°€ ì•ˆ ë˜ë©´:**\nâ†’ ë°©ë²• 2 (í„°ë¯¸ë„ ë³µì‚¬) ì‚¬ìš©\n\n**Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ê°€ ì•ˆ ë˜ë©´:**\n```bash\npip install --upgrade pip\npip install -r requirements.txt --force-reinstall\n```\n\n**DB ì—°ê²° ì˜¤ë¥˜:**\nâ†’ Secretsì— `DATABASE_URL`ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸\n\n---\n\n**ë‹¤ìŒ ë¬¸ì„œ:** `DEPLOYMENT_TO_NEW_REPL.md` ì°¸ê³ \n","size_bytes":5049},"data-hub/test_api.py":{"content":"\"\"\"\nQuick API test script\n\"\"\"\nimport httpx\nimport asyncio\nfrom pprint import pprint\n\n\nasync def test_api():\n    \"\"\"Test Data Hub API endpoints\"\"\"\n    base_url = \"http://localhost:8000\"\n    \n    async with httpx.AsyncClient() as client:\n        print(\"ğŸ” Testing Restaurant Data Hub API...\\n\")\n        \n        # 1. Health check\n        print(\"1ï¸âƒ£ Health Check\")\n        response = await client.get(f\"{base_url}/\")\n        print(f\"   Status: {response.status_code}\")\n        pprint(response.json())\n        print()\n        \n        # 2. Stats\n        print(\"2ï¸âƒ£ System Stats\")\n        response = await client.get(f\"{base_url}/api/stats\")\n        print(f\"   Status: {response.status_code}\")\n        pprint(response.json())\n        print()\n        \n        # 3. Targets\n        print(\"3ï¸âƒ£ Scraping Targets\")\n        response = await client.get(f\"{base_url}/api/targets\")\n        print(f\"   Status: {response.status_code}\")\n        targets = response.json()\n        print(f\"   Found {len(targets)} targets:\")\n        for target in targets:\n            print(f\"     - {target['keyword']} ({target['region']}) [priority: {target['priority']}]\")\n        print()\n        \n        # 4. Raw restaurants\n        print(\"4ï¸âƒ£ Raw Restaurant Data\")\n        response = await client.get(f\"{base_url}/api/restaurants/raw?limit=10\")\n        print(f\"   Status: {response.status_code}\")\n        raw_data = response.json()\n        print(f\"   Found {len(raw_data)} raw records\")\n        print()\n        \n        # 5. Scraping logs\n        print(\"5ï¸âƒ£ Scraping Logs\")\n        response = await client.get(f\"{base_url}/api/logs/scraping?limit=10\")\n        print(f\"   Status: {response.status_code}\")\n        logs = response.json()\n        print(f\"   Found {len(logs)} log entries\")\n        print()\n        \n        print(\"âœ… All API tests passed!\")\n\n\nif __name__ == \"__main__\":\n    asyncio.run(test_api())\n","size_bytes":1902},"data-hub/src/api/__init__.py":{"content":"\"\"\"API module\"\"\"\n","size_bytes":17},"data-hub/QUICK_START.md":{"content":"# ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ\n\n## 5ë¶„ ì•ˆì— ì‹œì‘í•˜ê¸° ğŸš€\n\n### 1ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (2ë¶„)\n\n```bash\ncd data-hub\ncp .env.example .env\n```\n\n`.env` íŒŒì¼ í¸ì§‘:\n```bash\n# í•„ìˆ˜ (ì§€ê¸ˆ ë‹¹ì¥)\nGEMINI_API_KEY=your_key_here\n\n# ë‚˜ì¤‘ì— (Apify ê°€ì… í›„)\nAPIFY_API_TOKEN=\nOUTSCRAPER_API_KEY=\n\n# ê¸°ì¡´ í•œì‹ë‹¹ ì„¤ì • ì¬ì‚¬ìš©\nDATA_COLLECTION_API_KEY=your_existing_key\nHANSIKDANG_API_URL=http://localhost:5000\n```\n\n### 2ë‹¨ê³„: ì˜ì¡´ì„± ì„¤ì¹˜ (1ë¶„)\n\n```bash\npip install -r requirements.txt\n```\n\n### 3ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (30ì´ˆ)\n\n```bash\npython cli.py init\n```\n\n### 4ë‹¨ê³„: AIë¡œ íƒ€ê²Ÿ ìƒì„± (1ë¶„)\n\n```bash\n# ê°•ë‚¨êµ¬ í•œì‹ë‹¹ í‚¤ì›Œë“œ 50ê°œ ìë™ ìƒì„±\npython cli.py generate-targets --region ê°•ë‚¨êµ¬ --count 50\n```\n\n### 5ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (30ì´ˆ)\n\n```bash\n# ìˆ˜ë™ìœ¼ë¡œ íƒ€ê²Ÿ ì¶”ê°€ (Apify ì—†ì´ í…ŒìŠ¤íŠ¸)\npython cli.py add-target \"ê°•ë‚¨ ëƒ‰ë©´\" --region ê°•ë‚¨êµ¬\n\n# API ì„œë²„ ì‹œì‘\npython -m src.api.main\n```\n\në¸Œë¼ìš°ì €ì—ì„œ í™•ì¸:\n- http://localhost:8000 (API ì„œë²„)\n- http://localhost:8000/api/stats (í†µê³„)\n- http://localhost:8000/api/targets (íƒ€ê²Ÿ ëª©ë¡)\n\n---\n\n## ì‹¤ì œ ìŠ¤í¬ë˜í•‘ (Apify í•„ìš”)\n\n### 1. Apify ê°€ì…\n1. https://apify.com ê°€ì…\n2. Starter í”Œëœ ($49/ì›”)\n3. API Token ë³µì‚¬ â†’ `.env`ì— ì¶”ê°€\n\n### 2. ìŠ¤í¬ë˜í•‘ ì‹œì‘\n```bash\n# ì „ì²´ íŒŒì´í”„ë¼ì¸ (ìŠ¤í¬ë˜í•‘ â†’ ì²˜ë¦¬ â†’ ë™ê¸°í™”)\npython cli.py full-pipeline\n```\n\n### 3. ìë™í™” (í¬ë¡ )\n```bash\n# ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰\nnohup python cron_schedule.py &\n```\n\n---\n\n## ë‹¤ìŒ ë‹¨ê³„\n\nâœ… DEPLOYMENT_GUIDE.md: Google Cloud Run ë°°í¬  \nâœ… README.md: ì „ì²´ ë¬¸ì„œ  \nâœ… API ë¬¸ì„œ: http://localhost:8000/docs (FastAPI ìë™ ìƒì„±)\n\n---\n\n## ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?\n\n**ëª…ë ¹ì–´ í•œëˆˆì— ë³´ê¸°**:\n```bash\n./run.sh init       # DB ì´ˆê¸°í™”\n./run.sh scrape     # ìŠ¤í¬ë˜í•‘\n./run.sh process    # ë°ì´í„° ì²˜ë¦¬\n./run.sh sync       # í•œì‹ë‹¹ ë™ê¸°í™”\n./run.sh pipeline   # ì „ì²´ íŒŒì´í”„ë¼ì¸\n./run.sh server     # API ì„œë²„\n./run.sh cron       # í¬ë¡  ìŠ¤ì¼€ì¤„ëŸ¬\n```\n","size_bytes":2054},"data-hub/src/scrapers/google.py":{"content":"\"\"\"\nGoogle Maps Scraper using Outscraper\n\"\"\"\nfrom typing import List, Optional, Dict, Any\nimport uuid\nimport httpx\nfrom loguru import logger\n\nfrom src.scrapers.base import BaseScraper, ScrapedRestaurant\nfrom config import settings\n\n\nclass GoogleMapsScraper(BaseScraper):\n    \"\"\"êµ¬ê¸€ë§µìŠ¤ ìŠ¤í¬ë˜í¼ (Outscraper API ì‚¬ìš©)\"\"\"\n    \n    BASE_URL = \"https://api.outscraper.com\"\n    \n    def __init__(self):\n        super().__init__(api_key=settings.outscraper_api_key)\n        if not self.api_key:\n            raise ValueError(\"OUTSCRAPER_API_KEY not set\")\n        \n        self.headers = {\"X-API-KEY\": self.api_key}\n    \n    async def search(\n        self,\n        keyword: str,\n        region: Optional[str] = None,\n        limit: int = 50\n    ) -> List[ScrapedRestaurant]:\n        \"\"\"êµ¬ê¸€ë§µìŠ¤ ê²€ìƒ‰\"\"\"\n        try:\n            search_query = f\"{keyword} {region}\" if region else keyword\n            \n            # í•œêµ­ ì§€ì—­ ì§€ì •\n            if \"korea\" not in search_query.lower() and \"í•œêµ­\" not in search_query:\n                search_query += \" South Korea\"\n            \n            self.logger.info(f\"Searching Google Maps: {search_query}\")\n            \n            async with httpx.AsyncClient() as client:\n                response = await client.get(\n                    f\"{self.BASE_URL}/maps/search-v3\",\n                    headers=self.headers,\n                    params={\n                        \"query\": search_query,\n                        \"limit\": limit,\n                        \"language\": \"ko\",\n                        \"region\": \"KR\",\n                    },\n                    timeout=60.0,\n                )\n                response.raise_for_status()\n                data = response.json()\n            \n            results = []\n            for item in data.get(\"data\", []):\n                restaurant = self._parse_google_item(item)\n                if restaurant:\n                    results.append(restaurant)\n            \n            self.logger.info(f\"Found {len(results)} restaurants from Google Maps\")\n            return results\n            \n        except Exception as e:\n            self.logger.error(f\"Google Maps search failed: {e}\")\n            return []\n    \n    async def get_details(self, source_id: str) -> ScrapedRestaurant:\n        \"\"\"êµ¬ê¸€ í”Œë ˆì´ìŠ¤ ìƒì„¸ ì •ë³´\"\"\"\n        try:\n            async with httpx.AsyncClient() as client:\n                response = await client.get(\n                    f\"{self.BASE_URL}/maps/place-info\",\n                    headers=self.headers,\n                    params={\"place_id\": source_id},\n                    timeout=30.0,\n                )\n                response.raise_for_status()\n                data = response.json()\n            \n            if data.get(\"data\"):\n                return self._parse_google_item(data[\"data\"][0])\n            \n            raise ValueError(f\"No details found for {source_id}\")\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to get Google details: {e}\")\n            raise\n    \n    def _parse_google_item(self, item: Dict[str, Any]) -> ScrapedRestaurant:\n        \"\"\"Outscraper ì‘ë‹µì„ ScrapedRestaurantë¡œ ë³€í™˜\"\"\"\n        try:\n            place_id = item.get(\"place_id\") or item.get(\"google_id\") or str(uuid.uuid4())\n            \n            # GPS ì¢Œí‘œ íŒŒì‹±\n            lat = None\n            lng = None\n            if \"latitude\" in item and \"longitude\" in item:\n                lat = float(item[\"latitude\"])\n                lng = float(item[\"longitude\"])\n            elif \"location\" in item:\n                lat = float(item[\"location\"].get(\"lat\", 0))\n                lng = float(item[\"location\"].get(\"lng\", 0))\n            \n            return ScrapedRestaurant(\n                source=\"google\",\n                source_id=place_id,\n                source_url=item.get(\"url\", \"\"),\n                raw_data=item,\n                name=item.get(\"name\"),\n                address=item.get(\"address\") or item.get(\"full_address\"),\n                phone=item.get(\"phone\"),\n                rating=float(item.get(\"rating\", 0)) if item.get(\"rating\") else None,\n                review_count=int(item.get(\"reviews\", 0)) if item.get(\"reviews\") else None,\n                latitude=lat,\n                longitude=lng,\n            )\n        except Exception as e:\n            self.logger.error(f\"Failed to parse Google item: {e}\")\n            return None\n","size_bytes":4413},"data-hub/src/scrapers/naver.py":{"content":"\"\"\"\nNaver Place Scraper using Apify\n\"\"\"\nfrom typing import List, Optional, Dict, Any\nimport uuid\nfrom apify_client import ApifyClient\nfrom loguru import logger\n\nfrom src.scrapers.base import BaseScraper, ScrapedRestaurant\nfrom config import settings\n\n\nclass NaverPlaceScraper(BaseScraper):\n    \"\"\"ë„¤ì´ë²„í”Œë ˆì´ìŠ¤ ìŠ¤í¬ë˜í¼ (Apify ì‚¬ìš©)\"\"\"\n    \n    def __init__(self):\n        super().__init__(api_key=settings.apify_api_token)\n        if not self.api_key:\n            raise ValueError(\"APIFY_API_TOKEN not set\")\n        \n        self.client = ApifyClient(self.api_key)\n        \n        # Apify Actor ID (ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìŠ¤í¬ë˜í¼)\n        # ì‹¤ì œ ì‚¬ìš© ì‹œ Apify Storeì—ì„œ ì í•©í•œ Actor ì„ íƒ í•„ìš”\n        self.actor_id = \"compass/naver-map-scraper\"  # ì˜ˆì‹œ\n    \n    async def search(\n        self,\n        keyword: str,\n        region: Optional[str] = None,\n        limit: int = 50\n    ) -> List[ScrapedRestaurant]:\n        \"\"\"ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ê²€ìƒ‰\"\"\"\n        try:\n            search_query = f\"{region} {keyword}\" if region else keyword\n            \n            self.logger.info(f\"Searching Naver: {search_query}\")\n            \n            # Apify Actor ì‹¤í–‰\n            run_input = {\n                \"queries\": [search_query],\n                \"maxItems\": limit,\n                \"language\": \"ko\",\n                \"includeReviews\": True,\n                \"includeImages\": True,\n            }\n            \n            run = self.client.actor(self.actor_id).call(run_input=run_input)\n            \n            # ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°\n            results = []\n            for item in self.client.dataset(run[\"defaultDatasetId\"]).iterate_items():\n                restaurant = self._parse_naver_item(item)\n                if restaurant:\n                    results.append(restaurant)\n            \n            self.logger.info(f\"Found {len(results)} restaurants from Naver\")\n            return results\n            \n        except Exception as e:\n            self.logger.error(f\"Naver search failed: {e}\")\n            return []\n    \n    async def get_details(self, source_id: str) -> ScrapedRestaurant:\n        \"\"\"ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒì„¸ ì •ë³´\"\"\"\n        try:\n            # Naver Place IDë¡œ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n            run_input = {\n                \"placeIds\": [source_id],\n                \"includeReviews\": True,\n                \"maxReviews\": 20,\n                \"includeImages\": True,\n            }\n            \n            run = self.client.actor(self.actor_id).call(run_input=run_input)\n            \n            for item in self.client.dataset(run[\"defaultDatasetId\"]).iterate_items():\n                return self._parse_naver_item(item)\n            \n            raise ValueError(f\"No details found for {source_id}\")\n            \n        except Exception as e:\n            self.logger.error(f\"Failed to get Naver details: {e}\")\n            raise\n    \n    def _parse_naver_item(self, item: Dict[str, Any]) -> ScrapedRestaurant:\n        \"\"\"Apify ì‘ë‹µì„ ScrapedRestaurantë¡œ ë³€í™˜\"\"\"\n        try:\n            source_id = item.get(\"id\") or item.get(\"placeId\") or str(uuid.uuid4())\n            \n            return ScrapedRestaurant(\n                source=\"naver\",\n                source_id=source_id,\n                source_url=item.get(\"url\", \"\"),\n                raw_data=item,\n                name=item.get(\"title\") or item.get(\"name\"),\n                address=item.get(\"address\"),\n                phone=item.get(\"phone\") or item.get(\"tel\"),\n                rating=float(item.get(\"rating\", 0)) if item.get(\"rating\") else None,\n                review_count=int(item.get(\"reviewCount\", 0)) if item.get(\"reviewCount\") else None,\n                latitude=float(item.get(\"lat\")) if item.get(\"lat\") else None,\n                longitude=float(item.get(\"lng\")) if item.get(\"lng\") else None,\n            )\n        except Exception as e:\n            self.logger.error(f\"Failed to parse Naver item: {e}\")\n            return None\n\n\n# ìˆ˜ë™ ìŠ¤í¬ë˜í•‘ ë°±ì—… (Apify ì—†ì´)\nclass NaverPlaceManualScraper(BaseScraper):\n    \"\"\"ìˆ˜ë™ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìŠ¤í¬ë˜í¼ (Playwright ì‚¬ìš©)\"\"\"\n    \n    async def search(self, keyword: str, region: Optional[str] = None, limit: int = 50) -> List[ScrapedRestaurant]:\n        \"\"\"\n        TODO: Playwrightë¡œ ì§ì ‘ ìŠ¤í¬ë˜í•‘\n        - Apifyê°€ ë¹„ì‹¸ê±°ë‚˜ ì°¨ë‹¨ë  ê²½ìš° ëŒ€ë¹„\n        - playwrightë¡œ ë„¤ì´ë²„ ì§€ë„ ê²€ìƒ‰ ìë™í™”\n        \"\"\"\n        self.logger.warning(\"Manual scraping not implemented yet\")\n        return []\n    \n    async def get_details(self, source_id: str) -> ScrapedRestaurant:\n        \"\"\"TODO: êµ¬í˜„ í•„ìš”\"\"\"\n        raise NotImplementedError()\n","size_bytes":4675},"data-hub/src/scrapers/base.py":{"content":"\"\"\"\nBase scraper interface\n\"\"\"\nfrom abc import ABC, abstractmethod\nfrom typing import List, Dict, Any, Optional\nfrom dataclasses import dataclass\nfrom loguru import logger\n\n\n@dataclass\nclass ScrapedRestaurant:\n    \"\"\"ìŠ¤í¬ë˜í•‘ëœ ë ˆìŠ¤í† ë‘ ë°ì´í„°\"\"\"\n    source: str  # 'naver' or 'google'\n    source_id: str\n    source_url: str\n    raw_data: Dict[str, Any]\n    \n    # ê¸°ë³¸ ì •ë³´ (íŒŒì‹±ëœ)\n    name: Optional[str] = None\n    address: Optional[str] = None\n    phone: Optional[str] = None\n    rating: Optional[float] = None\n    review_count: Optional[int] = None\n    latitude: Optional[float] = None\n    longitude: Optional[float] = None\n\n\nclass BaseScraper(ABC):\n    \"\"\"ìŠ¤í¬ë˜í¼ ë² ì´ìŠ¤ í´ë˜ìŠ¤\"\"\"\n    \n    def __init__(self, api_key: Optional[str] = None):\n        self.api_key = api_key\n        self.logger = logger.bind(scraper=self.__class__.__name__)\n    \n    @abstractmethod\n    async def search(\n        self,\n        keyword: str,\n        region: Optional[str] = None,\n        limit: int = 50\n    ) -> List[ScrapedRestaurant]:\n        \"\"\"í‚¤ì›Œë“œë¡œ ë ˆìŠ¤í† ë‘ ê²€ìƒ‰\"\"\"\n        pass\n    \n    @abstractmethod\n    async def get_details(self, source_id: str) -> ScrapedRestaurant:\n        \"\"\"ë ˆìŠ¤í† ë‘ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\"\"\"\n        pass\n    \n    def _sanitize_data(self, data: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"ë°ì´í„° ì •ì œ (ê³µí†µ)\"\"\"\n        return {k: v for k, v in data.items() if v is not None}\n","size_bytes":1456},"data-hub/src/api/main.py":{"content":"\"\"\"\nFastAPI Server for Restaurant Data Hub\n\"\"\"\nfrom fastapi import FastAPI, Depends, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom sqlalchemy.orm import Session\nfrom typing import List, Dict, Any\nimport uuid\nfrom datetime import datetime\n\nfrom src.database.connection import get_db, init_db\nfrom src.database.models import (\n    RawRestaurantData, ProcessedRestaurant, ScrapingTarget,\n    ScrapingLog, SyncLog\n)\nfrom src.workflows.scraping import ScrapingWorkflow\nfrom config import settings\n\napp = FastAPI(\n    title=\"Restaurant Data Hub API\",\n    description=\"ë°ì´í„° ìˆ˜ì§‘ ë° ê´€ë¦¬ ì‹œìŠ¤í…œ\",\n    version=\"0.1.0\"\n)\n\n# CORS ì„¤ì •\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],  # í”„ë¡œë•ì…˜ì—ì„œëŠ” ì œí•œ í•„ìš”\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n\n@app.on_event(\"startup\")\nasync def startup_event():\n    \"\"\"ì„œë²„ ì‹œì‘ ì‹œ DB ì´ˆê¸°í™”\"\"\"\n    init_db()\n\n\n@app.get(\"/\")\nasync def root():\n    \"\"\"Health check\"\"\"\n    return {\n        \"service\": \"Restaurant Data Hub\",\n        \"status\": \"running\",\n        \"version\": \"0.1.0\"\n    }\n\n\n@app.get(\"/api/stats\")\nasync def get_stats(db: Session = Depends(get_db)):\n    \"\"\"ì „ì²´ í†µê³„\"\"\"\n    total_raw = db.query(RawRestaurantData).count()\n    total_processed = db.query(ProcessedRestaurant).count()\n    total_synced = db.query(ProcessedRestaurant).filter(\n        ProcessedRestaurant.synced_to_hansikdang == True\n    ).count()\n    \n    pending_raw = db.query(RawRestaurantData).filter(\n        RawRestaurantData.status == 'pending'\n    ).count()\n    \n    return {\n        \"total_raw\": total_raw,\n        \"total_processed\": total_processed,\n        \"total_synced\": total_synced,\n        \"pending_processing\": pending_raw,\n        \"daily_target\": settings.daily_target,\n    }\n\n\n@app.get(\"/api/targets\")\nasync def get_targets(db: Session = Depends(get_db)):\n    \"\"\"ìŠ¤í¬ë˜í•‘ íƒ€ê²Ÿ ëª©ë¡\"\"\"\n    targets = db.query(ScrapingTarget).order_by(\n        ScrapingTarget.priority.desc()\n    ).limit(100).all()\n    \n    return [\n        {\n            \"id\": t.id,\n            \"keyword\": t.keyword,\n            \"region\": t.region,\n            \"priority\": t.priority,\n            \"status\": t.status,\n            \"total_found\": t.total_found,\n            \"last_scraped\": t.last_scraped.isoformat() if t.last_scraped else None,\n        }\n        for t in targets\n    ]\n\n\n@app.post(\"/api/targets\")\nasync def create_target(\n    keyword: str,\n    region: str = None,\n    priority: int = 5,\n    db: Session = Depends(get_db)\n):\n    \"\"\"ìƒˆ ìŠ¤í¬ë˜í•‘ íƒ€ê²Ÿ ì¶”ê°€\"\"\"\n    target = ScrapingTarget(\n        id=str(uuid.uuid4()),\n        keyword=keyword,\n        region=region,\n        priority=priority,\n        status='active',\n        created_by='manual'\n    )\n    db.add(target)\n    db.commit()\n    \n    return {\"id\": target.id, \"keyword\": keyword}\n\n\n@app.post(\"/api/scrape/start\")\nasync def start_scraping(db: Session = Depends(get_db)):\n    \"\"\"ìŠ¤í¬ë˜í•‘ ìˆ˜ë™ ì‹œì‘\"\"\"\n    workflow = ScrapingWorkflow()\n    \n    # ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ (ì‹¤ì œë¡œëŠ” Celery ë“± ì‚¬ìš© ê¶Œì¥)\n    import asyncio\n    asyncio.create_task(workflow.run_daily_scraping())\n    \n    return {\"status\": \"started\"}\n\n\n@app.get(\"/api/logs/scraping\")\nasync def get_scraping_logs(limit: int = 50, db: Session = Depends(get_db)):\n    \"\"\"ìŠ¤í¬ë˜í•‘ ë¡œê·¸\"\"\"\n    logs = db.query(ScrapingLog).order_by(\n        ScrapingLog.started_at.desc()\n    ).limit(limit).all()\n    \n    return [\n        {\n            \"id\": log.id,\n            \"started_at\": log.started_at.isoformat(),\n            \"completed_at\": log.completed_at.isoformat() if log.completed_at else None,\n            \"status\": log.status,\n            \"total_scraped\": log.total_scraped,\n            \"success_count\": log.success_count,\n        }\n        for log in logs\n    ]\n\n\n@app.get(\"/api/restaurants/raw\")\nasync def get_raw_restaurants(\n    limit: int = 50,\n    status: str = None,\n    db: Session = Depends(get_db)\n):\n    \"\"\"ì›ë³¸ ë ˆìŠ¤í† ë‘ ë°ì´í„°\"\"\"\n    query = db.query(RawRestaurantData)\n    \n    if status:\n        query = query.filter(RawRestaurantData.status == status)\n    \n    items = query.order_by(\n        RawRestaurantData.scraped_at.desc()\n    ).limit(limit).all()\n    \n    return [\n        {\n            \"id\": item.id,\n            \"source\": item.source,\n            \"source_id\": item.source_id,\n            \"status\": item.status,\n            \"scraped_at\": item.scraped_at.isoformat(),\n        }\n        for item in items\n    ]\n\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n","size_bytes":4617},"data-hub/src/workflows/sync.py":{"content":"\"\"\"\nSync workflow to í•œì‹ë‹¹\nì •ì œëœ ë°ì´í„°ë¥¼ í•œì‹ë‹¹ External APIë¡œ ì „ì†¡\n\"\"\"\nimport asyncio\nimport httpx\nimport uuid\nfrom datetime import datetime\nfrom typing import List, Dict, Any\nfrom loguru import logger\n\nfrom src.database.connection import db_session\nfrom src.database.models import ProcessedRestaurant, SyncLog\nfrom config import settings\n\n\nclass SyncWorkflow:\n    \"\"\"í•œì‹ë‹¹ ë™ê¸°í™” ì›Œí¬í”Œë¡œìš°\"\"\"\n    \n    def __init__(self):\n        self.api_url = settings.hansikdang_api_url\n        self.api_key = settings.data_collection_api_key\n        self.batch_size = settings.batch_size\n        self.logger = logger.bind(workflow=\"sync\")\n    \n    async def sync_to_hansikdang(self):\n        \"\"\"í•œì‹ë‹¹ìœ¼ë¡œ ë°ì´í„° ë™ê¸°í™”\"\"\"\n        self.logger.info(\"Starting sync to í•œì‹ë‹¹\")\n        \n        with db_session() as db:\n            # ë™ê¸°í™” ëŒ€ê¸° ì¤‘ì¸ ë ˆìŠ¤í† ë‘ (í’ˆì§ˆ ì ìˆ˜ 70 ì´ìƒ)\n            restaurants = db.query(ProcessedRestaurant).filter(\n                ProcessedRestaurant.sync_status == 'pending',\n                ProcessedRestaurant.quality_score >= settings.quality_threshold\n            ).limit(self.batch_size).all()\n            \n            if not restaurants:\n                self.logger.info(\"No restaurants to sync\")\n                return\n            \n            # ë™ê¸°í™” ë¡œê·¸ ìƒì„±\n            log_id = str(uuid.uuid4())\n            log = SyncLog(\n                id=log_id,\n                status='running',\n                total_sent=len(restaurants)\n            )\n            db.add(log)\n            db.commit()\n            \n            try:\n                # í•œì‹ë‹¹ External APIë¡œ ì „ì†¡\n                payload = [\n                    self._format_for_hansikdang(r)\n                    for r in restaurants\n                ]\n                \n                async with httpx.AsyncClient() as client:\n                    response = await client.post(\n                        f\"{self.api_url}/api/external/restaurants\",\n                        json=payload,\n                        headers={\n                            \"Authorization\": f\"Bearer {self.api_key}\",\n                            \"Content-Type\": \"application/json\"\n                        },\n                        timeout=60.0\n                    )\n                    response.raise_for_status()\n                    result = response.json()\n                \n                # ì„±ê³µí•œ ë ˆìŠ¤í† ë‘ ì—…ë°ì´íŠ¸\n                success_count = result.get(\"success_count\", 0)\n                \n                for restaurant in restaurants:\n                    restaurant.sync_status = 'synced'\n                    restaurant.synced_to_hansikdang = True\n                    restaurant.synced_at = datetime.now()\n                \n                # ë¡œê·¸ ì—…ë°ì´íŠ¸\n                log.completed_at = datetime.now()\n                log.status = 'completed'\n                log.success_count = success_count\n                log.error_count = len(restaurants) - success_count\n                \n                db.commit()\n                \n                self.logger.info(f\"Synced {success_count}/{len(restaurants)} restaurants\")\n                \n            except Exception as e:\n                self.logger.error(f\"Sync failed: {e}\")\n                log.status = 'failed'\n                log.error_details = {\"error\": str(e)}\n                db.commit()\n    \n    def _format_for_hansikdang(self, restaurant: ProcessedRestaurant) -> Dict[str, Any]:\n        \"\"\"í•œì‹ë‹¹ External API í˜•ì‹ìœ¼ë¡œ ë³€í™˜\"\"\"\n        return {\n            \"name\": restaurant.name,\n            \"nameEn\": restaurant.name_en,\n            \"category\": restaurant.category,\n            \"cuisine\": restaurant.cuisine,\n            \"district\": restaurant.district,\n            \"address\": restaurant.address,\n            \"addressEn\": restaurant.address_en,\n            \"latitude\": restaurant.latitude,\n            \"longitude\": restaurant.longitude,\n            \"description\": restaurant.description,\n            \"descriptionEn\": restaurant.description_en,\n            \"priceRange\": restaurant.price_range,\n            \"phone\": restaurant.phone,\n            \"website\": restaurant.website,\n            \"openHours\": restaurant.open_hours,\n            \"parking\": restaurant.parking,\n            \"imageUrl\": restaurant.image_url,\n            \"rating\": restaurant.rating,\n            \"reviewCount\": restaurant.review_count,\n        }\n\n\nasync def main():\n    \"\"\"ë™ê¸°í™” ì‹¤í–‰\"\"\"\n    workflow = SyncWorkflow()\n    await workflow.sync_to_hansikdang()\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n","size_bytes":4610},"data-hub/run.sh":{"content":"#!/bin/bash\n# Restaurant Data Hub ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸\n\nset -e\n\necho \"ğŸš€ Restaurant Data Hub\"\necho \"\"\n\n# í™˜ê²½ ë³€ìˆ˜ í™•ì¸\nif [ ! -f .env ]; then\n    echo \"âš ï¸  .env íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤. .env.exampleì„ ë³µì‚¬í•˜ì„¸ìš”.\"\n    cp .env.example .env\n    echo \"âœ… .env íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.\"\n    exit 1\nfi\n\n# ëª…ë ¹ì–´ íŒŒì‹±\ncase \"$1\" in\n    init)\n        echo \"ğŸ“¦ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”...\"\n        python cli.py init\n        ;;\n    \n    scrape)\n        echo \"ğŸ” ìŠ¤í¬ë˜í•‘ ì‹œì‘...\"\n        python cli.py scrape\n        ;;\n    \n    process)\n        echo \"âš™ï¸  ë°ì´í„° ì²˜ë¦¬ ì‹œì‘...\"\n        python cli.py process\n        ;;\n    \n    sync)\n        echo \"ğŸ”„ í•œì‹ë‹¹ ë™ê¸°í™”...\"\n        python cli.py sync\n        ;;\n    \n    pipeline)\n        echo \"ğŸš€ ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰...\"\n        python cli.py full-pipeline\n        ;;\n    \n    server)\n        echo \"ğŸŒ API ì„œë²„ ì‹œì‘...\"\n        python -m src.api.main\n        ;;\n    \n    cron)\n        echo \"â° í¬ë¡  ìŠ¤ì¼€ì¤„ëŸ¬ ì‹œì‘...\"\n        python cron_schedule.py\n        ;;\n    \n    *)\n        echo \"ì‚¬ìš©ë²•:\"\n        echo \"  ./run.sh init      - DB ì´ˆê¸°í™”\"\n        echo \"  ./run.sh scrape    - ìŠ¤í¬ë˜í•‘\"\n        echo \"  ./run.sh process   - ë°ì´í„° ì²˜ë¦¬\"\n        echo \"  ./run.sh sync      - í•œì‹ë‹¹ ë™ê¸°í™”\"\n        echo \"  ./run.sh pipeline  - ì „ì²´ íŒŒì´í”„ë¼ì¸\"\n        echo \"  ./run.sh server    - API ì„œë²„\"\n        echo \"  ./run.sh cron      - í¬ë¡  ìŠ¤ì¼€ì¤„ëŸ¬\"\n        exit 1\n        ;;\nesac\n","size_bytes":1576},"DOWNLOAD_INSTRUCTIONS.md":{"content":"# ğŸ“¥ Data Hub ë‹¤ìš´ë¡œë“œ ë° ì—…ë¡œë“œ ê°€ì´ë“œ\n\n## âœ… ë¬¸ì œ í•´ê²° ì™„ë£Œ!\n\n**ìƒˆ ì••ì¶• íŒŒì¼:** `data-hub-complete.tar.gz` (22KB)\n\n---\n\n## ğŸ“¥ Step 1: ì••ì¶• íŒŒì¼ ë‹¤ìš´ë¡œë“œ\n\n### **í˜„ì¬ hansikdang Replì—ì„œ:**\n\n1. **Files íŒ¨ë„ (ì™¼ìª½)ì—ì„œ `data-hub-complete.tar.gz` ì°¾ê¸°**\n2. **íŒŒì¼ ìš°í´ë¦­ â†’ Download**\n3. **ì»´í“¨í„°ì— ì €ì¥**\n\n**í™•ì¸:**\n- íŒŒì¼ í¬ê¸°: 22KB (0 ë°”ì´íŠ¸ê°€ ì•„ë‹˜!)\n- íŒŒì¼ ì´ë¦„: `data-hub-complete.tar.gz`\n\n---\n\n## ğŸ“¤ Step 2: ìƒˆ Replì— ì—…ë¡œë“œ\n\n### **hansikdang-data-hub Replë¡œ ì´ë™:**\n\n**2-1. ì••ì¶• íŒŒì¼ ì—…ë¡œë“œ**\n```\nFiles íŒ¨ë„ â†’ ë¹ˆ ê³µê°„ ìš°í´ë¦­ â†’ Upload file\nâ†’ data-hub-complete.tar.gz ì„ íƒ\n```\n\n**2-2. Shellì—ì„œ ì••ì¶• í•´ì œ**\n```bash\n# ì••ì¶• í•´ì œ\ntar -xzf data-hub-complete.tar.gz\n\n# ì••ì¶• íŒŒì¼ ì‚­ì œ\nrm data-hub-complete.tar.gz\n\n# íŒŒì¼ í™•ì¸\nls -la\n```\n\n**ì˜ˆìƒ ì¶œë ¥:**\n```\ncli.py\nconfig.py\ncron_schedule.py\nrequirements.txt\nsrc/\nâ”œâ”€â”€ __init__.py\nâ”œâ”€â”€ api/\nâ”œâ”€â”€ database/\nâ”œâ”€â”€ scrapers/\nâ”œâ”€â”€ processors/\nâ””â”€â”€ workflows/\n...\n```\n\n---\n\n## ğŸ”§ Step 3: ìë™ ì„¤ì • ì‹¤í–‰\n\n```bash\n# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬\nchmod +x setup_new_repl.sh\n\n# ìë™ ì„¤ì • ì‹œì‘\n./setup_new_repl.sh\n```\n\n**ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ:**\n- âœ… í™˜ê²½ ë³€ìˆ˜ í™•ì¸ (Secretsì— ì„¤ì •í•œ ê°’ë“¤)\n- âœ… Python íŒ¨í‚¤ì§€ ì„¤ì¹˜\n- âœ… .env íŒŒì¼ ìƒì„±\n- âœ… PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (7ê°œ í…Œì´ë¸”)\n- âœ… í…ŒìŠ¤íŠ¸ íƒ€ê²Ÿ 2ê°œ ì¶”ê°€\n- âœ… ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸\n\n---\n\n## ğŸŒ Step 4: API ì„œë²„ ì‹¤í–‰\n\n```bash\npython3 -m uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload\n```\n\n**ì ‘ì†:**\n- Webview íƒ­ í´ë¦­\n- `/docs` ê²½ë¡œë¡œ ì´ë™\n- 30+ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸!\n\n---\n\n## âœ… ì™„ë£Œ í™•ì¸\n\n### **íŒŒì¼ êµ¬ì¡° í™•ì¸:**\n```bash\nls -la src/\n```\n\n**ì¶œë ¥ì— ë‹¤ìŒì´ ë³´ì—¬ì•¼ í•¨:**\n- `api/` - FastAPI ì„œë²„\n- `database/` - DB ì—°ê²° ë° ëª¨ë¸\n- `scrapers/` - Naver/Google ìŠ¤í¬ë˜í¼\n- `processors/` - Gemini AI\n- `workflows/` - ìŠ¤í¬ë˜í•‘/ë™ê¸°í™” ì›Œí¬í”Œë¡œìš°\n\n### **Python íŒ¨í‚¤ì§€ í™•ì¸:**\n```bash\npip list | grep -E \"(fastapi|sqlalchemy|apify)\"\n```\n\n### **DB ì—°ê²° í™•ì¸:**\n```bash\npython3 -c \"from src.database.connection import db_session; print('âœ… DB OK')\"\n```\n\n---\n\n## ğŸ†˜ ë¬¸ì œ í•´ê²°\n\n**ì••ì¶• íŒŒì¼ì´ 0 ë°”ì´íŠ¸ë©´:**\nâ†’ ì´ ê°€ì´ë“œì˜ Step 1ë¶€í„° ë‹¤ì‹œ ì‹œì‘ (`data-hub-complete.tar.gz` ì‚¬ìš©)\n\n**ì••ì¶• í•´ì œ ì˜¤ë¥˜:**\n```bash\n# íŒŒì¼ í™•ì¸\nfile data-hub-complete.tar.gz\n\n# ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œ\n```\n\n**íŒŒì¼ì´ ì—†ìœ¼ë©´:**\nâ†’ ì••ì¶• í•´ì œê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì€ ê²ƒ. Shellì—ì„œ `tar -xzf` ëª…ë ¹ì–´ ë‹¤ì‹œ ì‹¤í–‰\n\n---\n\n## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n- [ ] `data-hub-complete.tar.gz` ë‹¤ìš´ë¡œë“œ (22KB)\n- [ ] hansikdang-data-hub Replì— ì—…ë¡œë“œ\n- [ ] `tar -xzf data-hub-complete.tar.gz` ì‹¤í–‰\n- [ ] `ls -la` ë¡œ íŒŒì¼ í™•ì¸\n- [ ] Secrets ì„¤ì • ì™„ë£Œ (5ê°œ í™˜ê²½ ë³€ìˆ˜)\n- [ ] `./setup_new_repl.sh` ì‹¤í–‰\n- [ ] API ì„œë²„ ì‹¤í–‰ (`uvicorn`)\n- [ ] `/docs` ì ‘ì† í™•ì¸\n\n---\n\n**ë‹¤ìŒ:** API ì„œë²„ê°€ ì •ìƒ ì‘ë™í•˜ë©´ Publish (ë°°í¬) ë‹¨ê³„ë¡œ ì§„í–‰!\n","size_bytes":3069},"DEPLOYMENT_GUIDE.md":{"content":"# í•œì‹ë‹¹ Data Hub ë°°í¬ ê°€ì´ë“œ\n\n## ğŸ“‹ ë°°í¬ ê°œìš”\n\ní•œì‹ë‹¹ Data Hubë¥¼ í”„ë¡œë•ì…˜ í™˜ê²½ì— ë°°í¬í•˜ê¸° ìœ„í•œ ë‹¨ê³„ë³„ ê°€ì´ë“œì…ë‹ˆë‹¤.\n\n---\n\n## ğŸš€ Step 1: hansikdang-data-hub Replì—ì„œ Publish ì„¤ì •\n\n### 1-1. Replitì—ì„œ Data Hub Repl ì—´ê¸°\n1. Replit ëŒ€ì‹œë³´ë“œë¡œ ì´ë™\n2. **hansikdang-data-hub** Repl ì„ íƒ\n\n### 1-2. Publish ë²„íŠ¼ í´ë¦­\n1. í™”ë©´ ìƒë‹¨ì˜ **\"Publish\"** ë²„íŠ¼ í´ë¦­\n2. ë°°í¬ ì˜µì…˜ ì„ íƒ í™”ë©´ì´ ë‚˜íƒ€ë‚¨\n\n### 1-3. Autoscale ë°°í¬ ì„ íƒ\n**ì™œ Autoscale?**\n- íŠ¸ë˜í”½ì´ ì—†ì„ ë•ŒëŠ” ë¹„ìš© $0\n- íŠ¸ë˜í”½ì— ë”°ë¼ ìë™ìœ¼ë¡œ í™•ì¥/ì¶•ì†Œ\n- 24/7 í¬ë¡ ì¡ ì‹¤í–‰ì— ìµœì í™”\n- Replit Core êµ¬ë…ìëŠ” ì›” $25 í¬ë ˆë”§ ì œê³µ\n\n**ì„¤ì •ê°’:**\n```\nMachine: 1vCPU, 2 GiB RAM (ê¸°ë³¸ê°’)\nMax Machines: 3 (ê¸°ë³¸ê°’)\nRun Command: python cli.py server\nPort: 8000\n```\n\n### 1-4. í™˜ê²½ ë³€ìˆ˜ í™•ì¸\nPublish ì„¤ì • í™”ë©´ì—ì„œ ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ê°€ ëª¨ë‘ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:\n\n```bash\nDATABASE_URL=postgresql://postgres:[PASSWORD]@db.xxxxx.supabase.co:5432/postgres\nGEMINI_API_KEY=<your-gemini-key>\nDATA_COLLECTION_API_KEY=<shared-api-key>\nAPIFY_API_TOKEN=<your-apify-token>\nMAIN_PLATFORM_URL=https://c9a4c16f-b729-4b66-b697-b4ffb3d735c3-00-2cbc9o0oqmxhz.janeway.replit.dev\n```\n\n> âš ï¸ **ì¤‘ìš”**: `MAIN_PLATFORM_URL`ì€ ë©”ì¸ hansikdang í”Œë«í¼ì˜ í˜„ì¬ ê°œë°œ URLì…ë‹ˆë‹¤. \n> ë©”ì¸ í”Œë«í¼ì„ ë°°í¬í•œ í›„ì—ëŠ” ì´ ê°’ì„ í”„ë¡œë•ì…˜ URLë¡œ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.\n\n### 1-5. Publish ì‹¤í–‰\n1. **\"Publish\"** ë²„íŠ¼ í´ë¦­\n2. ë°°í¬ ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§ (ì•½ 2-3ë¶„ ì†Œìš”)\n3. ë°°í¬ ì™„ë£Œ í›„ **í”„ë¡œë•ì…˜ URL** í™•ì¸\n\n**ì˜ˆìƒ URL í˜•ì‹:**\n```\nhttps://hansikdang-data-hub-[username].replit.app\n```\n\n---\n\n## ğŸ”— Step 2: í”„ë¡œë•ì…˜ URL í™•ì¸ ë° í™˜ê²½ ë³€ìˆ˜ ì—…ë°ì´íŠ¸\n\n### 2-1. Data Hub í”„ë¡œë•ì…˜ URL í…ŒìŠ¤íŠ¸\në°°í¬ ì™„ë£Œ í›„ APIê°€ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸:\n\n```bash\n# í—¬ìŠ¤ ì²´í¬\ncurl https://hansikdang-data-hub-[username].replit.app/health\n\n# API ì¸ì¦ í…ŒìŠ¤íŠ¸\ncurl -X GET https://hansikdang-data-hub-[username].replit.app/status \\\n  -H \"X-API-Key: YOUR_API_KEY\"\n```\n\n### 2-2. ë©”ì¸ í”Œë«í¼ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ (ì„ íƒì‚¬í•­)\në©”ì¸ hansikdang Replì—ì„œ Data Hub URLì„ ì°¸ì¡°í•´ì•¼ í•˜ëŠ” ê²½ìš°:\n\n1. ë©”ì¸ hansikdang Replì˜ Secrets íƒ­ìœ¼ë¡œ ì´ë™\n2. ìƒˆ Secret ì¶”ê°€:\n   ```\n   Key: DATA_HUB_URL\n   Value: https://hansikdang-data-hub-[username].replit.app\n   ```\n\n---\n\n## ğŸŒ Step 3: ì„œë¸Œë„ë©”ì¸ DNS ì—°ê²° (data-hub.hansikdang.net)\n\n### 3-1. Replitì—ì„œ Custom Domain ì„¤ì •\n1. Data Hub Replì˜ **Publish** í˜ì´ì§€ë¡œ ì´ë™\n2. **\"Custom Domain\"** ì„¹ì…˜ ì°¾ê¸°\n3. ë„ë©”ì¸ ì…ë ¥: `data-hub.hansikdang.net`\n4. Replitì´ ì œê³µí•˜ëŠ” **DNS ë ˆì½”ë“œ** ë³µì‚¬:\n   - A Record IP ì£¼ì†Œ\n   - TXT Record ê°’\n\n### 3-2. ë„ë©”ì¸ ë“±ë¡ ì—…ì²´ì—ì„œ DNS ë ˆì½”ë“œ ì¶”ê°€\n**ì˜ˆì‹œ: Cloudflare, GoDaddy, Namecheap ë“±**\n\n#### A Record ì¶”ê°€:\n```\nType: A\nName: data-hub\nValue: [Replitì´ ì œê³µí•œ IP ì£¼ì†Œ]\nTTL: Auto (ë˜ëŠ” 3600)\n```\n\n#### TXT Record ì¶”ê°€ (ì†Œìœ ê¶Œ ì¸ì¦):\n```\nType: TXT\nName: _replit-challenge.data-hub\nValue: [Replitì´ ì œê³µí•œ TXT ê°’]\nTTL: Auto (ë˜ëŠ” 3600)\n```\n\n### 3-3. DNS ì „íŒŒ ëŒ€ê¸°\n- DNS ë³€ê²½ì‚¬í•­ì´ ì „íŒŒë˜ëŠ” ë° **ìµœëŒ€ 48ì‹œê°„** ì†Œìš”\n- ë³´í†µ 15ë¶„~2ì‹œê°„ ë‚´ì— ì™„ë£Œë¨\n- DNS ì „íŒŒ í™•ì¸ ë„êµ¬: https://dnschecker.org\n\n### 3-4. SSL/TLS ìë™ ì„¤ì •\nDNS ì—°ê²°ì´ ì™„ë£Œë˜ë©´ Replitì´ ìë™ìœ¼ë¡œ:\n- Let's Encrypt SSL ì¸ì¦ì„œ ë°œê¸‰\n- HTTPS ìë™ í™œì„±í™”\n\n---\n\n## â° Step 4: 24/7 í¬ë¡ ì¡ ìë™í™” ì„¤ì •\n\n### 4-1. í˜„ì¬ ìŠ¤ì¼€ì¤„ë§ ìƒíƒœ í™•ì¸\nData HubëŠ” ì´ë¯¸ ë‚´ì¥ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:\n\n**íŒŒì¼ ìœ„ì¹˜:** `data-hub/src/workflows/scheduler.py`\n\n**ê¸°ë³¸ ìŠ¤ì¼€ì¤„:**\n```python\n# ë§¤ì¼ ì˜¤ì „ 3ì‹œ: ë°ì´í„° ìˆ˜ì§‘ (333ê°œ ë ˆìŠ¤í† ë‘)\nschedule.every().day.at(\"03:00\").do(run_collection_workflow)\n\n# ë§¤ì¼ ì˜¤ì „ 6ì‹œ: ë°ì´í„° ë™ê¸°í™”\nschedule.every().day.at(\"06:00\").do(run_sync_workflow)\n\n# 1ì‹œê°„ë§ˆë‹¤: í—¬ìŠ¤ ì²´í¬\nschedule.every().hour.do(health_check)\n```\n\n### 4-2. ìŠ¤ì¼€ì¤„ëŸ¬ í™œì„±í™”\në°°í¬ëœ Data HubëŠ” ìë™ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤:\n\n```bash\n# ì„œë²„ ì‹œì‘ ì‹œ ìŠ¤ì¼€ì¤„ëŸ¬ ìë™ ì‹¤í–‰\npython cli.py server\n```\n\n### 4-3. ìŠ¤ì¼€ì¤„ ì»¤ìŠ¤í„°ë§ˆì´ì§• (ì„ íƒì‚¬í•­)\në‹¤ë¥¸ ì‹œê°„ëŒ€ë¡œ ë³€ê²½í•˜ë ¤ë©´ `scheduler.py` ìˆ˜ì •:\n\n```python\n# ì˜ˆì‹œ: ë§¤ì¼ ìƒˆë²½ 2ì‹œ, 5ì‹œì— ì‹¤í–‰\nschedule.every().day.at(\"02:00\").do(run_collection_workflow)\nschedule.every().day.at(\"05:00\").do(run_sync_workflow)\n```\n\n---\n\n## ğŸ“Š Step 5: ëª¨ë‹ˆí„°ë§ ë° ê²€ì¦\n\n### 5-1. í”„ë¡œë•ì…˜ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸\n\n```bash\n# 1. í—¬ìŠ¤ ì²´í¬\ncurl https://data-hub.hansikdang.net/health\n\n# 2. ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸\ncurl https://data-hub.hansikdang.net/status \\\n  -H \"X-API-Key: YOUR_API_KEY\"\n\n# 3. ìˆ˜ì§‘ ì›Œí¬í”Œë¡œìš° ìˆ˜ë™ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ìš©)\ncurl -X POST https://data-hub.hansikdang.net/workflows/collect \\\n  -H \"X-API-Key: YOUR_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"limit\": 5}'\n```\n\n### 5-2. ë¡œê·¸ ëª¨ë‹ˆí„°ë§\nReplit Consoleì—ì„œ ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸:\n```\n[2025-10-28 03:00:00] INFO - Starting collection workflow (target: 333 restaurants)\n[2025-10-28 03:15:23] INFO - Collected: 333/333 restaurants\n[2025-10-28 03:15:24] INFO - Gemini processing: 333/333 success\n[2025-10-28 06:00:00] INFO - Starting sync workflow\n[2025-10-28 06:02:15] INFO - Synced: 333/333 to main platform\n```\n\n### 5-3. ë©”ì¸ í”Œë«í¼ì—ì„œ ë°ì´í„° í™•ì¸\në©”ì¸ hansikdang í”Œë«í¼ì—ì„œ:\n\n```bash\ncurl https://hansikdang-main.replit.app/api/external/status \\\n  -H \"X-API-Key: YOUR_API_KEY\"\n\n# ê¸°ëŒ€ ê²°ê³¼:\n# {\n#   \"statistics\": {\n#     \"restaurants\": 364,  # 31 ê¸°ì¡´ + 333 ì‹ ê·œ\n#     \"reviews\": 0,\n#     \"menus\": 0\n#   }\n# }\n```\n\n---\n\n## ğŸ’° ë¹„ìš© ì˜ˆìƒ\n\n### Autoscale ë°°í¬ ë¹„ìš© (ì›”ê°„)\n```\nê¸°ë³¸ ìš”ê¸ˆ: $0 (ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ)\nì˜ˆìƒ ì‚¬ìš©ëŸ‰:\n  - ì¼ì¼ í¬ë¡ ì¡ 2íšŒ (ìˆ˜ì§‘ + ë™ê¸°í™”)\n  - ê° ì‘ì—… ì•½ 15ë¶„ ì†Œìš”\n  - ì›”ê°„ ì´ ì‹¤í–‰ ì‹œê°„: ~15ì‹œê°„\n\nì˜ˆìƒ ë¹„ìš©: $8-12/ì›”\n```\n\n> âœ… **Replit Core êµ¬ë…ìëŠ” ì›” $25 í¬ë ˆë”§ ì œê³µ**ìœ¼ë¡œ ì¶©ë¶„íˆ ì»¤ë²„ ê°€ëŠ¥\n\n### Apify ìŠ¤í¬ë˜í•‘ ë¹„ìš© (ì›”ê°„)\n```\në¬´ë£Œ í”Œëœ: ì‚¬ìš© ë¶ˆê°€ (ì‹¤ì œ ìŠ¤í¬ë˜í•‘ ì œí•œ)\nìœ ë£Œ í”Œëœ: $30/ì›”\n  - ì›” 10,000 í¬ë ˆë”§\n  - ì¼ì¼ 333ê°œ ë ˆìŠ¤í† ë‘ ìˆ˜ì§‘ ê°€ëŠ¥\n```\n\n---\n\n## ğŸ¯ ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸\n\n- [ ] Data Hub Replì—ì„œ Autoscaleë¡œ ë°°í¬ ì™„ë£Œ\n- [ ] í”„ë¡œë•ì…˜ URL í™•ì¸ ë° API í…ŒìŠ¤íŠ¸ í†µê³¼\n- [ ] ì„œë¸Œë„ë©”ì¸ DNS ë ˆì½”ë“œ ì¶”ê°€ (data-hub.hansikdang.net)\n- [ ] DNS ì „íŒŒ ì™„ë£Œ ë° HTTPS í™œì„±í™” í™•ì¸\n- [ ] 24/7 í¬ë¡ ì¡ ìŠ¤ì¼€ì¤„ëŸ¬ ì‘ë™ í™•ì¸\n- [ ] ë©”ì¸ í”Œë«í¼ê³¼ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì„±ê³µ\n- [ ] ë¡œê·¸ ëª¨ë‹ˆí„°ë§ ì •ìƒ ì‘ë™\n- [ ] Apify ìœ ë£Œ êµ¬ë… í™œì„±í™” (ì‹¤ì œ ë°ì´í„° ìˆ˜ì§‘ìš©)\n\n---\n\n## ğŸ†˜ ë¬¸ì œ í•´ê²°\n\n### DNSê°€ ì—°ê²°ë˜ì§€ ì•ŠëŠ” ê²½ìš°\n```bash\n# DNS ì „íŒŒ í™•ì¸\nnslookup data-hub.hansikdang.net\n\n# ìºì‹œ ì´ˆê¸°í™” (Windows)\nipconfig /flushdns\n\n# ìºì‹œ ì´ˆê¸°í™” (macOS)\nsudo dscacheutil -flushcache\n```\n\n### í¬ë¡ ì¡ì´ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°\n1. Replit Consoleì—ì„œ ë¡œê·¸ í™•ì¸\n2. `scheduler.py`ì˜ ì‹œê°„ëŒ€ ì„¤ì • í™•ì¸ (UTC ê¸°ì¤€)\n3. ì„œë²„ ì¬ì‹œì‘: Repl Stop â†’ Run\n\n### API ì¸ì¦ ì˜¤ë¥˜\n- `X-API-Key` í—¤ë”ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n- `DATA_COLLECTION_API_KEY` í™˜ê²½ ë³€ìˆ˜ ë™ì¼í•œì§€ í™•ì¸ (ì–‘ìª½ Repl)\n\n---\n\n## ğŸ“ ì§€ì›\n\në¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:\n1. Replit Console ë¡œê·¸\n2. Data Hub `/health` ì—”ë“œí¬ì¸íŠ¸\n3. ë©”ì¸ í”Œë«í¼ `/api/external/status` ì—”ë“œí¬ì¸íŠ¸\n\n**ì¶•í•˜í•©ë‹ˆë‹¤! í•œì‹ë‹¹ Data Hubê°€ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ 24/7 ìë™ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤! ğŸ‰**\n","size_bytes":7653},"client/src/components/PopularityCard.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Star, TrendingUp } from \"lucide-react\";\nimport { useLanguage } from \"@/contexts/LanguageContext\";\n\ninterface PopularityCardProps {\n  naverRating?: number | null;\n  naverReviewCount?: number | null;\n  googleRating?: number | null;\n  googleReviewCount?: number | null;\n  popularityScore?: number | null;\n}\n\nexport function PopularityCard({\n  naverRating,\n  naverReviewCount,\n  googleRating,\n  googleReviewCount,\n  popularityScore,\n}: PopularityCardProps) {\n  const { language } = useLanguage();\n\n  const hasData = naverRating || googleRating || popularityScore;\n\n  if (!hasData) {\n    return null;\n  }\n\n  const getTierInfo = (score: number) => {\n    if (score >= 90) {\n      return {\n        tier: language === \"en\" ? \"Top Rated\" : \"ìµœê³  ì¸ê¸°\",\n        color: \"bg-green-500\",\n        textColor: \"text-green-500\",\n      };\n    }\n    if (score >= 70) {\n      return {\n        tier: language === \"en\" ? \"Highly Popular\" : \"ë†’ì€ ì¸ê¸°\",\n        color: \"bg-blue-500\",\n        textColor: \"text-blue-500\",\n      };\n    }\n    if (score >= 50) {\n      return {\n        tier: language === \"en\" ? \"Popular\" : \"ì¸ê¸°\",\n        color: \"bg-yellow-500\",\n        textColor: \"text-yellow-500\",\n      };\n    }\n    if (score >= 30) {\n      return {\n        tier: language === \"en\" ? \"Average\" : \"ë³´í†µ\",\n        color: \"bg-gray-500\",\n        textColor: \"text-muted-foreground\",\n      };\n    }\n    return {\n      tier: language === \"en\" ? \"New/Limited Data\" : \"ì‹ ê·œ/ì •ë³´ ë¶€ì¡±\",\n      color: \"bg-gray-400\",\n      textColor: \"text-muted-foreground\",\n    };\n  };\n\n  const tierInfo = popularityScore ? getTierInfo(popularityScore) : null;\n\n  return (\n    <Card className=\"p-4 mb-6\" data-testid=\"popularity-card\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <TrendingUp className=\"w-5 h-5 text-primary\" />\n        <h2 className=\"font-semibold\">\n          {language === \"en\" ? \"Popularity Index\" : \"ì¸ê¸°ì§€ìˆ˜\"}\n        </h2>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {/* ì¢…í•© ì¸ê¸°ì§€ìˆ˜ */}\n        {popularityScore !== null && popularityScore !== undefined && tierInfo && (\n          <div className=\"flex flex-col items-center p-4 bg-muted rounded-lg\" data-testid=\"overall-score\">\n            <p className=\"text-xs text-muted-foreground mb-2\">\n              {language === \"en\" ? \"Overall Score\" : \"ì¢…í•© ì ìˆ˜\"}\n            </p>\n            <div className=\"flex items-baseline gap-1\">\n              <span className={`text-3xl font-bold ${tierInfo.textColor}`}>\n                {popularityScore.toFixed(1)}\n              </span>\n              <span className=\"text-sm text-muted-foreground\">/100</span>\n            </div>\n            <Badge variant=\"secondary\" className=\"mt-2\" data-testid=\"popularity-tier\">\n              {tierInfo.tier}\n            </Badge>\n          </div>\n        )}\n\n        {/* ë„¤ì´ë²„ í‰ì  */}\n        {naverRating !== null && naverRating !== undefined && (\n          <div className=\"flex flex-col items-center p-4 bg-muted rounded-lg\" data-testid=\"naver-rating\">\n            <div className=\"flex items-center gap-1 mb-2\">\n              <img \n                src=\"https://ssl.pstatic.net/static/maps/m/spi_sm/sp_v5_211223.png\" \n                alt=\"Naver\"\n                className=\"w-4 h-4\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                {language === \"en\" ? \"Naver Rating\" : \"ë„¤ì´ë²„ í‰ì \"}\n              </p>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Star className=\"w-5 h-5 text-yellow-500 fill-yellow-500\" />\n              <span className=\"text-2xl font-bold\">{naverRating.toFixed(1)}</span>\n              <span className=\"text-sm text-muted-foreground\">/5.0</span>\n            </div>\n            {naverReviewCount !== null && naverReviewCount !== undefined && (\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {naverReviewCount.toLocaleString()} {language === \"en\" ? \"reviews\" : \"ë¦¬ë·°\"}\n              </p>\n            )}\n          </div>\n        )}\n\n        {/* êµ¬ê¸€ í‰ì  */}\n        {googleRating !== null && googleRating !== undefined && (\n          <div className=\"flex flex-col items-center p-4 bg-muted rounded-lg\" data-testid=\"google-rating\">\n            <div className=\"flex items-center gap-1 mb-2\">\n              <img \n                src=\"https://www.google.com/images/branding/product/ico/maps15_bnuw3a_32dp.ico\" \n                alt=\"Google\"\n                className=\"w-4 h-4\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                {language === \"en\" ? \"Google Rating\" : \"êµ¬ê¸€ í‰ì \"}\n              </p>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Star className=\"w-5 h-5 text-yellow-500 fill-yellow-500\" />\n              <span className=\"text-2xl font-bold\">{googleRating.toFixed(1)}</span>\n              <span className=\"text-sm text-muted-foreground\">/5.0</span>\n            </div>\n            {googleReviewCount !== null && googleReviewCount !== undefined && (\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {googleReviewCount.toLocaleString()} {language === \"en\" ? \"reviews\" : \"ë¦¬ë·°\"}\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n    </Card>\n  );\n}\n","size_bytes":5443},"server/utils/popularityCalculator.ts":{"content":"/**\n * ì¸ê¸°ì§€ìˆ˜ ê³„ì‚° ìœ í‹¸ë¦¬í‹°\n * ë„¤ì´ë²„/êµ¬ê¸€ í‰ì ê³¼ ë¦¬ë·°ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¢…í•© ì¸ê¸°ì§€ìˆ˜(0-5) ê³„ì‚°\n * \n * ë³€ê²½ ì´ë ¥:\n * - 2025-10-30: 0-100ì  â†’ 0-5ì  ì²™ë„ë¡œ ë³€ê²½ (ì§ê´€ì„± ê°œì„ )\n */\n\nexport interface PopularityData {\n  naverRating?: number | null;\n  naverReviewCount?: number | null;\n  googleRating?: number | null;\n  googleReviewCount?: number | null;\n}\n\nexport interface PopularityResult {\n  score: number;\n  tier: 'legendary' | 'highly_popular' | 'popular' | 'moderate' | 'average' | 'low';\n  tierLabel: {\n    ko: string;\n    en: string;\n  };\n  color: string;\n}\n\n/**\n * ì¸ê¸°ì§€ìˆ˜ ê³„ì‚° (0-5ì  ì²™ë„)\n * \n * ê³µì‹:\n * 1. í‰ì  ì ìˆ˜ (2.5ì  ë§Œì )\n *    - ë„¤ì´ë²„ í‰ì : (naver_rating / 5.0) Ã— 1.25ì \n *    - êµ¬ê¸€ í‰ì : (google_rating / 5.0) Ã— 1.25ì \n * \n * 2. ë¦¬ë·°ìˆ˜ ì ìˆ˜ (2.5ì  ë§Œì )\n *    - ë„¤ì´ë²„ ë¦¬ë·°ìˆ˜: min(naver_review_count / 100, 1.0) Ã— 1.25ì \n *    - êµ¬ê¸€ ë¦¬ë·°ìˆ˜: min(google_review_count / 100, 1.0) Ã— 1.25ì \n * \n * 3. ìµœì¢… ì ìˆ˜ = í‰ì  ì ìˆ˜ + ë¦¬ë·°ìˆ˜ ì ìˆ˜ (0-5)\n * \n * ì˜ˆì‹œ:\n * - 5.0ì , 3,815ê°œ ë¦¬ë·° â†’ 1.25 + 1.25 = 2.5ì  (í•œ ì†ŒìŠ¤ ê¸°ì¤€)\n * - 4.5ì , 500ê°œ ë¦¬ë·° â†’ 1.125 + 1.25 = 2.375ì \n * - 4.0ì , 50ê°œ ë¦¬ë·° â†’ 1.0 + 0.625 = 1.625ì \n */\nexport function calculatePopularityScore(data: PopularityData): number {\n  const {\n    naverRating = 0,\n    naverReviewCount = 0,\n    googleRating = 0,\n    googleReviewCount = 0,\n  } = data;\n\n  // í‰ì  ì ìˆ˜ (ìµœëŒ€ 2.5ì )\n  let ratingScore = 0;\n  if (naverRating && naverRating > 0) {\n    ratingScore += (naverRating / 5.0) * 1.25;\n  }\n  if (googleRating && googleRating > 0) {\n    ratingScore += (googleRating / 5.0) * 1.25;\n  }\n\n  // ë¦¬ë·°ìˆ˜ ì ìˆ˜ (ìµœëŒ€ 2.5ì )\n  // ë¦¬ë·° 100ê°œë¥¼ ê¸°ì¤€ì ìœ¼ë¡œ ì„¤ì • (100ê°œ ì´ìƒì€ ë§Œì )\n  let reviewScore = 0;\n  if (naverReviewCount && naverReviewCount > 0) {\n    reviewScore += Math.min(naverReviewCount / 100, 1.0) * 1.25;\n  }\n  if (googleReviewCount && googleReviewCount > 0) {\n    reviewScore += Math.min(googleReviewCount / 100, 1.0) * 1.25;\n  }\n\n  // ìµœì¢… ì ìˆ˜ (0-5, ì†Œìˆ˜ì  2ìë¦¬)\n  return Math.round((ratingScore + reviewScore) * 100) / 100;\n}\n\n/**\n * ì¸ê¸°ì§€ìˆ˜ ë“±ê¸‰ ë¶„ë¥˜ (5ì  ì²™ë„)\n */\nexport function getPopularityTier(score: number): PopularityResult['tier'] {\n  if (score >= 4.5) return 'legendary';\n  if (score >= 4.0) return 'highly_popular';\n  if (score >= 3.5) return 'popular';\n  if (score >= 3.0) return 'moderate';\n  if (score >= 2.0) return 'average';\n  return 'low';\n}\n\n/**\n * ë“±ê¸‰ ë¼ë²¨ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getTierLabel(tier: PopularityResult['tier']): PopularityResult['tierLabel'] {\n  const labels = {\n    legendary: { ko: 'ì „ì„¤ì˜ ë§›ì§‘', en: 'Legendary' },\n    highly_popular: { ko: 'ëŒ€ë°• ë§›ì§‘', en: 'Highly Popular' },\n    popular: { ko: 'ì¸ê¸° ë§›ì§‘', en: 'Popular' },\n    moderate: { ko: 'ê´œì°®ì€ ê³³', en: 'Good' },\n    average: { ko: 'í‰ë²”í•œ ê³³', en: 'Average' },\n    low: { ko: 'ì‹ ê·œ/ë°ì´í„° ë¶€ì¡±', en: 'New/Limited Data' },\n  };\n  return labels[tier];\n}\n\n/**\n * ë“±ê¸‰ ìƒ‰ìƒ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getTierColor(tier: PopularityResult['tier']): string {\n  const colors = {\n    legendary: '#FFD700',      // ê¸ˆìƒ‰\n    highly_popular: '#FF6B6B', // ë¹¨ê°•\n    popular: '#FF9F43',        // ì£¼í™©\n    moderate: '#48C774',       // ë…¹ìƒ‰\n    average: '#3B82F6',        // íŒŒë‘\n    low: '#94A3B8',            // íšŒìƒ‰\n  };\n  return colors[tier];\n}\n\n/**\n * ì¢…í•© ì¸ê¸°ì§€ìˆ˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\n */\nexport function getPopularityInfo(data: PopularityData): PopularityResult {\n  const score = calculatePopularityScore(data);\n  const tier = getPopularityTier(score);\n  const tierLabel = getTierLabel(tier);\n  const color = getTierColor(tier);\n\n  return {\n    score,\n    tier,\n    tierLabel,\n    color,\n  };\n}\n\n/**\n * ë³„ì  í‘œì‹œ ìƒì„± (â˜…â˜†)\n */\nexport function getStarDisplay(score: number): string {\n  const fullStars = Math.floor(score);\n  const halfStar = score % 1 >= 0.5 ? 1 : 0;\n  const emptyStars = 5 - fullStars - halfStar;\n  \n  return 'â˜…'.repeat(fullStars) + 'â˜†'.repeat(halfStar) + 'â˜†'.repeat(emptyStars);\n}\n","size_bytes":4160},"server/services/googlePlacesApi.ts":{"content":"/**\n * Google Places API í´ë¼ì´ì–¸íŠ¸\n * ë ˆìŠ¤í† ë‘ì˜ êµ¬ê¸€ í‰ì ê³¼ ë¦¬ë·°ìˆ˜ë¥¼ ìˆ˜ì§‘\n */\n\ninterface PlaceSearchResult {\n  place_id: string;\n  rating?: number;\n  user_ratings_total?: number;\n  name: string;\n}\n\ninterface PlacesApiResponse {\n  results: PlaceSearchResult[];\n  status: string;\n}\n\nexport class GooglePlacesApiService {\n  private apiKey: string;\n  private baseUrl = 'https://maps.googleapis.com/maps/api/place';\n\n  constructor() {\n    this.apiKey = process.env.GOOGLE_PLACES_API_KEY || '';\n    if (!this.apiKey) {\n      throw new Error('GOOGLE_PLACES_API_KEY is not set');\n    }\n  }\n\n  /**\n   * ë ˆìŠ¤í† ë‘ ê²€ìƒ‰ ë° í‰ì /ë¦¬ë·°ìˆ˜ ìˆ˜ì§‘\n   */\n  async searchPlace(name: string, address: string): Promise<{\n    placeId: string | null;\n    rating: number | null;\n    reviewCount: number | null;\n  }> {\n    try {\n      // Text Search API ì‚¬ìš©\n      const query = encodeURIComponent(`${name} ${address}`);\n      const url = `${this.baseUrl}/textsearch/json?query=${query}&key=${this.apiKey}&language=ko&region=kr`;\n\n      const response = await fetch(url);\n      const data: PlacesApiResponse = await response.json();\n\n      if (data.status !== 'OK' || !data.results || data.results.length === 0) {\n        console.warn(`Google Places API: No results for ${name}`);\n        return { placeId: null, rating: null, reviewCount: null };\n      }\n\n      // ì²« ë²ˆì§¸ ê²°ê³¼ ì‚¬ìš©\n      const place = data.results[0];\n      \n      return {\n        placeId: place.place_id || null,\n        rating: place.rating || null,\n        reviewCount: place.user_ratings_total || null,\n      };\n    } catch (error) {\n      console.error(`Google Places API error for ${name}:`, error);\n      return { placeId: null, rating: null, reviewCount: null };\n    }\n  }\n\n  /**\n   * Rate limitingì„ ìœ„í•œ ì§€ì—°\n   */\n  async delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n","size_bytes":1926},"server/scripts/enrichGoogleRatings.ts":{"content":"/**\n * ê¸°ì¡´ 190ê°œ ë ˆìŠ¤í† ë‘ì— êµ¬ê¸€ í‰ì /ë¦¬ë·°ìˆ˜ ì¶”ê°€ ìŠ¤í¬ë¦½íŠ¸\n */\n\nimport { drizzle as drizzleNeon } from 'drizzle-orm/neon-http';\nimport { drizzle as drizzlePostgres } from 'drizzle-orm/postgres-js';\nimport { neon } from '@neondatabase/serverless';\nimport postgres from 'postgres';\nimport { restaurants } from '@shared/schema';\nimport { eq, isNull, or } from 'drizzle-orm';\n\nconst DATABASE_URL = process.env.DATABASE_URL!;\nconst USE_SUPABASE = process.env.USE_SUPABASE === \"true\";\n\nconst db = USE_SUPABASE\n  ? drizzlePostgres(postgres(DATABASE_URL, {\n      max: 10,\n      idle_timeout: 20,\n      connect_timeout: 10,\n    }))\n  : drizzleNeon(neon(DATABASE_URL));\nimport { GooglePlacesApiService } from '../services/googlePlacesApi';\nimport { calculatePopularityScore, getPopularityTier } from '../utils/popularityCalculator';\n\nasync function enrichGoogleRatings() {\n  console.log('=== êµ¬ê¸€ í‰ì  ë³´ê°• ì‹œì‘ ===\\n');\n\n  const googleApi = new GooglePlacesApiService();\n\n  // êµ¬ê¸€ ë°ì´í„°ê°€ ì—†ëŠ” ë ˆìŠ¤í† ë‘ ì¡°íšŒ\n  const restaurantsToEnrich = await db\n    .select()\n    .from(restaurants)\n    .where(\n      or(\n        isNull(restaurants.googlePlaceId),\n        isNull(restaurants.googleRating)\n      )\n    );\n\n  console.log(`ëŒ€ìƒ ë ˆìŠ¤í† ë‘: ${restaurantsToEnrich.length}ê°œ\\n`);\n\n  let successCount = 0;\n  let failCount = 0;\n\n  for (let i = 0; i < restaurantsToEnrich.length; i++) {\n    const restaurant = restaurantsToEnrich[i];\n    \n    console.log(`[${i + 1}/${restaurantsToEnrich.length}] ${restaurant.name} ì²˜ë¦¬ ì¤‘...`);\n\n    try {\n      // Google Places APIë¡œ ê²€ìƒ‰\n      const googleData = await googleApi.searchPlace(restaurant.name, restaurant.address);\n\n      if (googleData.placeId && googleData.rating) {\n        // ì¸ê¸°ì§€ìˆ˜ ì¬ê³„ì‚°\n        const popularityScore = calculatePopularityScore({\n          naverRating: restaurant.naverRating,\n          naverReviewCount: restaurant.naverReviewCount,\n          googleRating: googleData.rating,\n          googleReviewCount: googleData.reviewCount,\n        });\n\n        const popularityTier = getPopularityTier(popularityScore);\n\n        // ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸\n        await db\n          .update(restaurants)\n          .set({\n            googlePlaceId: googleData.placeId,\n            googleRating: googleData.rating,\n            googleReviewCount: googleData.reviewCount || 0,\n            popularityScore,\n          })\n          .where(eq(restaurants.id, restaurant.id));\n\n        console.log(`  âœ… ì„±ê³µ: êµ¬ê¸€ í‰ì  ${googleData.rating}/5.0 (${googleData.reviewCount || 0}ê°œ ë¦¬ë·°)`);\n        console.log(`  ğŸ“Š ì¸ê¸°ì§€ìˆ˜: ${popularityScore}ì  (${popularityTier})\\n`);\n        \n        successCount++;\n      } else {\n        console.log(`  âš ï¸  êµ¬ê¸€ ë°ì´í„° ì—†ìŒ\\n`);\n        failCount++;\n      }\n\n      // Rate limiting: 5 requests/second\n      if (i < restaurantsToEnrich.length - 1) {\n        await googleApi.delay(200);\n      }\n    } catch (error) {\n      console.error(`  âŒ ì˜¤ë¥˜:`, error);\n      failCount++;\n    }\n  }\n\n  console.log('\\n=== ì™„ë£Œ ===');\n  console.log(`ì„±ê³µ: ${successCount}ê°œ`);\n  console.log(`ì‹¤íŒ¨: ${failCount}ê°œ`);\n  console.log(`ì„±ê³µë¥ : ${((successCount / restaurantsToEnrich.length) * 100).toFixed(1)}%`);\n\n  process.exit(0);\n}\n\nenrichGoogleRatings().catch((error) => {\n  console.error('Fatal error:', error);\n  process.exit(1);\n});\n","size_bytes":3413},"server/scripts/fillMissingGoogleRatings.ts":{"content":"import { storage } from '../storage';\nimport { GooglePlacesApiService } from '../services/googlePlacesApi';\n\nasync function fillMissingGoogleRatings() {\n  console.log('ğŸ” êµ¬ê¸€ í‰ì  ëˆ„ë½ ë ˆìŠ¤í† ë‘ ê²€ìƒ‰ ì¤‘...\\n');\n\n  const allRestaurants = await storage.getAllRestaurants();\n  const missingRatings = allRestaurants.filter(\n    r => !r.googleRating && !r.googlePlaceId\n  );\n\n  console.log(`ğŸ“Š ì´ ë ˆìŠ¤í† ë‘: ${allRestaurants.length}ê°œ`);\n  console.log(`âŒ êµ¬ê¸€ í‰ì  ì—†ìŒ: ${missingRatings.length}ê°œ\\n`);\n\n  if (missingRatings.length === 0) {\n    console.log('âœ… ëª¨ë“  ë ˆìŠ¤í† ë‘ì— êµ¬ê¸€ í‰ì ì´ ì´ë¯¸ ìˆìŠµë‹ˆë‹¤!');\n    return;\n  }\n\n  const googlePlaces = new GooglePlacesApiService();\n  \n  let success = 0;\n  let failed = 0;\n\n  for (const restaurant of missingRatings) {\n    try {\n      console.log(`ğŸ” ê²€ìƒ‰ ì¤‘: ${restaurant.name} (${restaurant.district})`);\n      \n      const result = await googlePlaces.searchPlace(\n        restaurant.name,\n        restaurant.address || `ì„œìš¸ ${restaurant.district}`\n      );\n\n      if (result.placeId && result.rating) {\n        await storage.updateRestaurantRatings(restaurant.id, {\n          googlePlaceId: result.placeId,\n          googleRating: result.rating,\n          googleReviewCount: result.reviewCount || 0,\n        });\n\n        console.log(`  âœ… ${restaurant.name}: ${result.rating}ì  (ë¦¬ë·° ${result.reviewCount || 0}ê°œ)`);\n        success++;\n      } else {\n        console.log(`  âš ï¸  ${restaurant.name}: ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ`);\n        failed++;\n      }\n\n      // Rate limiting: 1 req/sec\n      await googlePlaces.delay(1000);\n    } catch (error) {\n      console.error(`  âŒ ${restaurant.name} ì²˜ë¦¬ ì‹¤íŒ¨:`, error);\n      failed++;\n    }\n  }\n\n  console.log('\\n' + '='.repeat(60));\n  console.log('ğŸ“Š êµ¬ê¸€ í‰ì  ìˆ˜ì§‘ ì™„ë£Œ\\n');\n  console.log(`  âœ… ì„±ê³µ: ${success}ê°œ`);\n  console.log(`  âŒ ì‹¤íŒ¨: ${failed}ê°œ`);\n  console.log('\\nâœ¨ ë‹¤ìŒ ë‹¨ê³„: ì¸ê¸°ì§€ìˆ˜ ì¬ê³„ì‚°');\n}\n\nfillMissingGoogleRatings()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error('âŒ ì¹˜ëª…ì  ì˜¤ë¥˜:', error);\n    process.exit(1);\n  });\n","size_bytes":2155},"server/scripts/recalculatePopularityScores.ts":{"content":"import { storage } from '../storage';\nimport { calculatePopularityScore } from '../utils/popularityCalculator';\n\nasync function recalculateAllScores() {\n  console.log('ğŸ”„ ì¸ê¸°ì§€ìˆ˜ ì¬ê³„ì‚° ì‹œì‘ (5ì  ì²™ë„)...\\n');\n\n  const restaurants = await storage.getAllRestaurants();\n  \n  let updated = 0;\n  let skipped = 0;\n  const changes: Array<{\n    name: string;\n    oldScore: number;\n    newScore: number;\n  }> = [];\n\n  for (const restaurant of restaurants) {\n    try {\n      const oldScore = restaurant.popularityScore || 0;\n      \n      const newScore = calculatePopularityScore({\n        naverRating: restaurant.naverRating,\n        naverReviewCount: restaurant.naverReviewCount,\n        googleRating: restaurant.googleRating,\n        googleReviewCount: restaurant.googleReviewCount,\n      });\n\n      await storage.updateRestaurantRatings(restaurant.id, {\n        popularityScore: newScore,\n      });\n\n      changes.push({\n        name: restaurant.name,\n        oldScore,\n        newScore,\n      });\n\n      const arrow = newScore > oldScore ? 'â†‘' : newScore < oldScore ? 'â†“' : 'â†’';\n      console.log(`${arrow} ${restaurant.name}: ${oldScore.toFixed(2)} â†’ ${newScore.toFixed(2)}`);\n      updated++;\n    } catch (error) {\n      console.error(`âŒ ${restaurant.name} ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:`, error);\n      skipped++;\n    }\n  }\n\n  console.log('\\n' + '='.repeat(60));\n  console.log('ğŸ“Š ì¬ê³„ì‚° ì™„ë£Œ\\n');\n  console.log(`  ì´ ë ˆìŠ¤í† ë‘: ${restaurants.length}ê°œ`);\n  console.log(`  âœ… ì„±ê³µ: ${updated}ê°œ`);\n  console.log(`  âŒ ì‹¤íŒ¨: ${skipped}ê°œ`);\n  \n  // í†µê³„ ê³„ì‚°\n  const updatedRestaurants = await storage.getAllRestaurants();\n  const scores = updatedRestaurants\n    .map(r => r.popularityScore)\n    .filter(s => s !== null && s > 0) as number[];\n  \n  if (scores.length > 0) {\n    const avg = scores.reduce((a, b) => a + b, 0) / scores.length;\n    const max = Math.max(...scores);\n    const min = Math.min(...scores);\n    \n    console.log('\\nğŸ“ˆ ìƒˆë¡œìš´ í†µê³„ (5ì  ì²™ë„):');\n    console.log(`  í‰ê· : ${avg.toFixed(2)}ì `);\n    console.log(`  ìµœê³ : ${max.toFixed(2)}ì `);\n    console.log(`  ìµœì €: ${min.toFixed(2)}ì `);\n    \n    // ë“±ê¸‰ë³„ ë¶„í¬\n    const distribution = {\n      legendary: scores.filter(s => s >= 4.5).length,\n      highly_popular: scores.filter(s => s >= 4.0 && s < 4.5).length,\n      popular: scores.filter(s => s >= 3.5 && s < 4.0).length,\n      moderate: scores.filter(s => s >= 3.0 && s < 3.5).length,\n      average: scores.filter(s => s >= 2.0 && s < 3.0).length,\n      low: scores.filter(s => s < 2.0).length,\n    };\n    \n    console.log('\\nğŸ† ë“±ê¸‰ë³„ ë¶„í¬:');\n    console.log(`  ì „ì„¤ì˜ ë§›ì§‘ (4.5+): ${distribution.legendary}ê°œ`);\n    console.log(`  ëŒ€ë°• ë§›ì§‘ (4.0-4.4): ${distribution.highly_popular}ê°œ`);\n    console.log(`  ì¸ê¸° ë§›ì§‘ (3.5-3.9): ${distribution.popular}ê°œ`);\n    console.log(`  ê´œì°®ì€ ê³³ (3.0-3.4): ${distribution.moderate}ê°œ`);\n    console.log(`  í‰ë²”í•œ ê³³ (2.0-2.9): ${distribution.average}ê°œ`);\n    console.log(`  ì‹ ê·œ/ë°ì´í„° ë¶€ì¡± (<2.0): ${distribution.low}ê°œ`);\n  }\n\n  // Top 10 ì¶œë ¥\n  const top10 = updatedRestaurants\n    .filter(r => r.popularityScore && r.popularityScore > 0)\n    .sort((a, b) => (b.popularityScore || 0) - (a.popularityScore || 0))\n    .slice(0, 10);\n  \n  if (top10.length > 0) {\n    console.log('\\nğŸŒŸ Top 10 ì¸ê¸° ë§›ì§‘:');\n    top10.forEach((r, idx) => {\n      const stars = 'â˜…'.repeat(Math.floor(r.popularityScore || 0));\n      const halfStar = (r.popularityScore || 0) % 1 >= 0.5 ? 'â˜†' : '';\n      console.log(`  ${idx + 1}. ${r.name}: ${(r.popularityScore || 0).toFixed(2)} ${stars}${halfStar}`);\n    });\n  }\n\n  console.log('\\nâœ… ì¬ê³„ì‚° ì™„ë£Œ!\\n');\n}\n\nrecalculateAllScores()\n  .then(() => process.exit(0))\n  .catch((error) => {\n    console.error('âŒ ì¹˜ëª…ì  ì˜¤ë¥˜:', error);\n    process.exit(1);\n  });\n","size_bytes":3884}},"version":2}