<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ìˆ˜ë™ ì…ë ¥ - í•œì‹ë‹¹ Data Hub v2</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 240px;
            height: 100vh;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .sidebar-header h2 {
            margin: 0 0 5px 0;
            font-size: 18px;
            color: #fff;
        }

        .sidebar-header p {
            margin: 0;
            font-size: 12px;
            color: #bdc3c7;
        }

        .menu-group {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .menu-label {
            padding: 10px 20px;
            font-size: 11px;
            font-weight: 600;
            color: #95a5a6;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .menu-item {
            display: block;
            padding: 12px 20px;
            color: #ecf0f1;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 14px;
            border-left: 3px solid transparent;
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: #3498db;
            padding-left: 25px;
        }

        .menu-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: #3498db;
            font-weight: 600;
        }

        .main-content {
            margin-left: 260px;
            min-height: 100vh;
            padding: 30px;
        }

        .header {
            background: white;
            padding: 25px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2rem;
            color: #2c3e50;
            margin: 0 0 5px 0;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 0.95rem;
        }

        .tabs {
            display: flex;
            gap: 10px;
            background: white;
            padding: 15px 20px 0 20px;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .tab {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: #7f8c8d;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            background: white;
            padding: 30px;
            border-radius: 0 0 12px 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .sub-tabs {
            display: flex;
            gap: 5px;
            background: #f7fafc;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .sub-tab {
            padding: 10px 20px;
            border: none;
            background: transparent;
            color: #666;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .sub-tab:hover {
            background: #e2e8f0;
        }

        .sub-tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .form-label .required {
            color: #f56565;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .upload-area {
            border: 3px dashed #d1d5db;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: #e7f3ff;
        }

        .file-input {
            display: none;
        }

        .preview-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #667eea;
        }

        .preview-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .preview-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .preview-item:last-child {
            border-bottom: none;
        }

        .preview-label {
            color: #7f8c8d;
            font-size: 13px;
        }

        .preview-value {
            color: #2c3e50;
            font-weight: 600;
            font-size: 13px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        .table-container {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }

        .csv-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .csv-table thead {
            position: sticky;
            top: 0;
            background: #f8f9fa;
            z-index: 10;
        }

        .csv-table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
        }

        .csv-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #f1f3f5;
        }

        .csv-table tbody tr:hover {
            background: #f8f9fa;
        }

        .spinner {
            border: 3px solid #ecf0f1;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: #f7fafc;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            color: #2c3e50;
        }

        .checkbox-label:hover {
            background: #e2e8f0;
        }

        .checkbox-input {
            cursor: pointer;
        }

        .menu-item-card, .hour-item {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
        }

        .remove-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #f56565;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
        }

        .add-btn {
            background: #48bb78;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .add-btn:hover {
            background: #38a169;
        }

        .image-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .image-item {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .image-item input {
            flex: 1;
        }

        .image-item button {
            width: 80px;
        }

        /* Phase 1: Compact Styles */
        .region-autocomplete-wrapper {
            position: relative;
        }
        .region-autocomplete-wrapper input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
        }
        .region-autocomplete-wrapper input:focus {
            border-color: #4F46E5;
            outline: none;
        }
        .error-message {
            display: block;
            color: #DC2626;
            font-size: 0.875rem;
            margin-top: 4px;
        }

        /* Compact List Styles */
        .menu-compact-list, .link-compact-list, .additional-info-list {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .menu-compact-header {
            display: flex;
            gap: 8px;
            font-weight: 600;
            font-size: 0.875rem;
            color: #6B7280;
            padding: 8px;
            border-bottom: 2px solid #E5E7EB;
        }
        .menu-compact-row, .link-row {
            display: flex;
            gap: 8px;
            padding: 6px;
            background: #F9FAFB;
            border-radius: 4px;
            align-items: center;
        }
        .menu-compact-row input {
            padding: 6px 8px;
            border: 1px solid #D1D5DB;
            border-radius: 4px;
            font-size: 0.875rem;
        }
        .link-row select, .link-row input {
            padding: 6px 8px;
            border: 1px solid #D1D5DB;
            border-radius: 4px;
            font-size: 0.875rem;
        }
        .btn-remove {
            padding: 4px 8px;
            background: #FEE2E2;
            color: #DC2626;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.25rem;
            line-height: 1;
        }
        .btn-add-compact {
            margin-top: 8px;
            padding: 8px 16px;
            background: #DBEAFE;
            color: #1E40AF;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.875rem;
        }
        .btn-add-compact:hover {
            background: #BFDBFE;
        }

        /* Save Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .modal-content {
            background: white;
            padding: 32px;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
        }
        .modal-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
        }
        .modal-icon.success {
            background: #D1FAE5;
            color: #059669;
        }
        .modal-icon.error {
            background: #FEE2E2;
            color: #DC2626;
        }
        .modal-content h3 {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        .modal-content p {
            color: #6B7280;
            margin-bottom: 24px;
        }

        /* ====================================
           ğŸ• ì˜ì—…ì‹œê°„ ì»´íŒ©íŠ¸ ìŠ¤íƒ€ì¼
           ==================================== */
        .business-hours-compact {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .hours-row {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 10px 12px;
            background: #F9FAFB;
            border-radius: 6px;
            border: 1px solid #E5E7EB;
        }

        .hours-row select,
        .hours-row input[type="time"],
        .hours-row input[type="text"] {
            padding: 8px 10px;
            border: 1px solid #D1D5DB;
            border-radius: 4px;
            font-size: 14px;
            background: white;
        }

        .hours-row input[type="time"]:disabled {
            background: #F3F4F6;
            color: #9CA3AF;
            cursor: not-allowed;
        }

        .hours-row label {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 14px;
            color: #374151;
            cursor: pointer;
        }

        .hours-row input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        /* ====================================
           ğŸŒ Smart Region Autocomplete Styles
           ==================================== */

        .smart-region-input {
            position: relative;
            width: 100%;
        }

        /* ë“œë¡­ë‹¤ìš´ ì»¨í…Œì´ë„ˆ */
        .region-dropdown {
            position: absolute;
            top: calc(100% + 4px);
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
                        0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-height: 320px;
            overflow-y: auto;
            z-index: 1000;
            list-style: none;
            padding: 4px;
            margin: 0;
        }

        /* ë“œë¡­ë‹¤ìš´ ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        .region-dropdown::-webkit-scrollbar {
            width: 6px;
        }

        .region-dropdown::-webkit-scrollbar-track {
            background: #F3F4F6;
            border-radius: 3px;
        }

        .region-dropdown::-webkit-scrollbar-thumb {
            background: #D1D5DB;
            border-radius: 3px;
        }

        .region-dropdown::-webkit-scrollbar-thumb:hover {
            background: #9CA3AF;
        }

        /* ë“œë¡­ë‹¤ìš´ í•­ëª© */
        .region-dropdown li {
            padding: 10px 12px;
            cursor: pointer;
            transition: background 0.15s;
            display: flex;
            align-items: center;
            gap: 8px;
            border-radius: 6px;
        }

        .region-dropdown li:hover,
        .region-dropdown li.active {
            background: #EEF2FF;
        }

        /* ì‹œ/ë„ ì´ë¦„ */
        .region-dropdown .city {
            color: #6B7280;
            font-size: 13px;
            flex-shrink: 0;
        }

        /* êµ¬ë¶„ì */
        .region-dropdown .separator {
            color: #D1D5DB;
            font-size: 12px;
        }

        /* êµ¬/êµ° ì´ë¦„ */
        .region-dropdown .district {
            color: #111827;
            font-weight: 600;
            font-size: 15px;
        }

        /* ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ */
        .no-results {
            padding: 16px;
            text-align: center;
            color: #6B7280;
            font-size: 14px;
            background: white;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            position: absolute;
            top: calc(100% + 4px);
            left: 0;
            right: 0;
            z-index: 1000;
        }

        /* ì„ íƒëœ ì§€ì—­ í‘œì‹œ */
        .selected-region {
            margin-top: 8px;
            padding: 8px 12px;
            background: #D1FAE5;
            color: #059669;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 500;
            font-size: 14px;
        }

        .selected-region .clear-btn {
            background: none;
            border: none;
            color: #059669;
            font-size: 20px;
            cursor: pointer;
            padding: 0 4px;
            line-height: 1;
            transition: color 0.2s;
        }

        .selected-region .clear-btn:hover {
            color: #047857;
        }

        /* ë„ì›€ë§ í…ìŠ¤íŠ¸ */
        .help-text {
            margin-top: 6px;
            font-size: 13px;
            color: #6B7280;
        }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 768px) {
            .region-dropdown {
                max-height: 240px;
            }
            
            .region-dropdown li {
                padding: 12px 10px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>í•œì‹ë‹¹ Data Hub</h2>
                <p>Restaurant Data Collection</p>
            </div>

            <div class="menu-group">
                <div class="menu-label">ëŒ€ì‹œë³´ë“œ</div>
                <a href="/dashboard" class="menu-item">ğŸ“Š ë©”ì¸ ëŒ€ì‹œë³´ë“œ</a>
            </div>

            <div class="menu-group">
                <div class="menu-label">ë°ì´í„° ìˆ˜ì§‘</div>
                <a href="/dashboard/collection-request" class="menu-item">ğŸ“ ìˆ˜ì§‘ ìš”ì²­</a>
                <a href="/dashboard/collection-results" class="menu-item">ğŸ“‹ ìˆ˜ì§‘ ê²°ê³¼</a>
            </div>

            <div class="menu-group">
                <div class="menu-label">ë°ì´í„° ì…ë ¥</div>
                <a href="/dashboard/manual-input#url" class="menu-item active">ğŸ”— URL ì…ë ¥</a>
                <a href="/dashboard/manual-input#csv" class="menu-item">ğŸ“„ CSV ì—…ë¡œë“œ</a>
                <a href="/dashboard/manual-input#direct" class="menu-item">âœï¸ ì§ì ‘ ì…ë ¥</a>
            </div>

            <div class="menu-group">
                <div class="menu-label">ë°ì´í„° í¸ì§‘</div>
                <a href="/dashboard/unified-editor" class="menu-item">ğŸ”§ í†µí•© í¸ì§‘</a>
            </div>

            <div class="menu-group">
                <div class="menu-label">ë°°í¬ ê´€ë¦¬</div>
                <a href="/dashboard/deployment" class="menu-item">ğŸš€ ë°°í¬ ê´€ë¦¬</a>
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <h1>âœï¸ ìˆ˜ë™ ì…ë ¥</h1>
                <p class="subtitle">URL íŒŒì‹±, CSV ì—…ë¡œë“œ, ì§ì ‘ ì…ë ¥ì„ í†µí•´ ë ˆìŠ¤í† ë‘ ë°ì´í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤</p>
            </div>

            <div v-if="alert.show" :class="['alert', alert.type]">
                <span>{{ alert.message }}</span>
                <button @click="alert.show = false" style="margin-left: auto; background: none; border: none; cursor: pointer; font-size: 18px;">Ã—</button>
            </div>

            <div class="tabs">
                <button class="tab" :class="{ active: activeTab === 'url' }" @click="activeTab = 'url'">
                    ğŸ”— URL íŒŒì‹±
                </button>
                <button class="tab" :class="{ active: activeTab === 'csv' }" @click="activeTab = 'csv'">
                    ğŸ“‚ CSV ì—…ë¡œë“œ
                </button>
                <button class="tab" :class="{ active: activeTab === 'direct' }" @click="activeTab = 'direct'">
                    âœï¸ ì§ì ‘ ì…ë ¥
                </button>
            </div>

            <div class="tab-content">
                <div v-if="activeTab === 'url'">
                    <h3 style="margin-bottom: 20px;">ë„¤ì´ë²„/êµ¬ê¸€/ì¹´ì¹´ì˜¤ URLì—ì„œ ë ˆìŠ¤í† ë‘ ì •ë³´ ì¶”ì¶œ</h3>
                    
                    <div class="form-group">
                        <label class="form-label">ë ˆìŠ¤í† ë‘ URL</label>
                        <input type="text" class="form-input" v-model="urlForm.url" 
                               placeholder="ì˜ˆ: https://map.naver.com/place/12345678">
                        <p style="color: #7f8c8d; font-size: 12px; margin-top: 5px;">
                            ì§€ì›: ë„¤ì´ë²„í”Œë ˆì´ìŠ¤, êµ¬ê¸€ë§µìŠ¤, ì¹´ì¹´ì˜¤ë§µ
                        </p>
                    </div>

                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-secondary" @click="parseURL" :disabled="loading">
                            ğŸ” URL ë¶„ì„
                        </button>
                        <button class="btn btn-success" @click="saveFromURL" :disabled="!urlPreview || loading">
                            ğŸ’¾ ì €ì¥í•˜ê¸°
                        </button>
                    </div>

                    <div v-if="loading" class="spinner"></div>

                    <div v-if="urlPreview" class="preview-card">
                        <div class="preview-title">âœ… URL íŒŒì‹± ì™„ë£Œ</div>
                        <div class="preview-item">
                            <span class="preview-label">ë ˆìŠ¤í† ë‘ ì´ë¦„:</span>
                            <span class="preview-value">{{ urlPreview.name }}</span>
                        </div>
                        <div class="preview-item">
                            <span class="preview-label">ì£¼ì†Œ:</span>
                            <span class="preview-value">{{ urlPreview.address }}</span>
                        </div>
                        <div class="preview-item">
                            <span class="preview-label">ì¶œì²˜:</span>
                            <span class="preview-value">{{ urlPreview.source.toUpperCase() }}</span>
                        </div>
                        <div class="preview-item">
                            <span class="preview-label">Place ID:</span>
                            <span class="preview-value">{{ urlPreview.place_id || 'N/A' }}</span>
                        </div>
                    </div>
                </div>

                <div v-if="activeTab === 'csv'">
                    <h3 style="margin-bottom: 20px;">CSV íŒŒì¼ ì—…ë¡œë“œ (ì¼ê´„ ë“±ë¡)</h3>

                    <div class="alert-info alert">
                        <span>ğŸ“ CSV í…œí”Œë¦¿ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì‘ì„± í›„ ì—…ë¡œë“œí•˜ì„¸ìš”.</span>
                        <button class="btn btn-secondary" @click="downloadTemplate" style="margin-left: auto;">
                            ğŸ“¥ í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ
                        </button>
                    </div>

                    <div class="upload-area" 
                         :class="{ dragover: isDragging }"
                         @click="$refs.fileInput.click()"
                         @dragover.prevent="isDragging = true"
                         @dragleave.prevent="isDragging = false"
                         @drop.prevent="handleFileDrop">
                        <div style="font-size: 48px; margin-bottom: 10px;">ğŸ“‚</div>
                        <div style="font-size: 16px; font-weight: 600; color: #2c3e50; margin-bottom: 5px;">
                            í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œ
                        </div>
                        <div style="font-size: 13px; color: #7f8c8d;">
                            CSV íŒŒì¼ë§Œ ì§€ì› (UTF-8 ì¸ì½”ë”©)
                        </div>
                        <input type="file" ref="fileInput" class="file-input" accept=".csv" @change="handleFileSelect">
                    </div>

                    <div v-if="csvData.length > 0" style="margin-top: 30px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3>ì—…ë¡œë“œëœ ë°ì´í„° ({{ csvData.length }}ê°œ)</h3>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-secondary" @click="csvData = []">ì·¨ì†Œ</button>
                                <button class="btn btn-success" @click="saveBatchCSV" :disabled="loading">
                                    ğŸ’¾ {{ csvData.length }}ê°œ ì €ì¥
                                </button>
                            </div>
                        </div>

                        <div class="table-container">
                            <table class="csv-table">
                                <thead>
                                    <tr>
                                        <th>ì´ë¦„</th>
                                        <th>ë¶„ë¥˜</th>
                                        <th>ì£¼ì†Œ</th>
                                        <th>ì „í™”ë²ˆí˜¸</th>
                                        <th>í‰ì </th>
                                        <th>ë¦¬ë·°ìˆ˜</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(row, idx) in csvData" :key="idx">
                                        <td>{{ row.name }}</td>
                                        <td>{{ row.category || '-' }}</td>
                                        <td>{{ row.address || '-' }}</td>
                                        <td>{{ row.phone || '-' }}</td>
                                        <td>{{ row.rating || '-' }}</td>
                                        <td>{{ row.review_count || '-' }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div v-if="activeTab === 'direct'">
                    <h3 style="margin-bottom: 20px;">ë ˆìŠ¤í† ë‘ ì •ë³´ ì§ì ‘ ì…ë ¥</h3>

                    <div>
                        <h4 style="margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #667eea; color: #667eea; font-size: 18px;">ğŸª ê¸°ë³¸ì •ë³´</h4>
                        <div class="form-group">
                            <label class="form-label">ë ˆìŠ¤í† ë‘ ì´ë¦„ <span class="required">*</span></label>
                            <input type="text" class="form-input" v-model="directForm.name" placeholder="ì˜ˆ: ì˜¬ë˜êµ­ìˆ˜">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">ì¹´í…Œê³ ë¦¬ <span class="required">*</span></label>
                                <select class="form-input" v-model="directForm.category">
                                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                    <option value="í•œì‹">í•œì‹</option>
                                    <option value="ì¤‘ì‹">ì¤‘ì‹</option>
                                    <option value="ì¼ì‹">ì¼ì‹</option>
                                    <option value="ì–‘ì‹">ì–‘ì‹</option>
                                    <option value="ì¹´í˜/ë””ì €íŠ¸">ì¹´í˜/ë””ì €íŠ¸</option>
                                    <option value="í•´ì‚°ë¬¼">í•´ì‚°ë¬¼</option>
                                    <option value="ê³ ê¸°/êµ¬ì´">ê³ ê¸°/êµ¬ì´</option>
                                    <option value="ë¶„ì‹">ë¶„ì‹</option>
                                    <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ê°€ê²©ëŒ€</label>
                                <select class="form-input" v-model="directForm.price_range">
                                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                    <option value="ì €ê°€">ì €ê°€ (1ë§Œì› ì´í•˜)</option>
                                    <option value="ì¤‘ê°€">ì¤‘ê°€ (1-3ë§Œì›)</option>
                                    <option value="ê³ ê°€">ê³ ê°€ (3ë§Œì› ì´ìƒ)</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ì£¼ì†Œ <span class="required">*</span></label>
                            <input type="text" class="form-input" v-model="directForm.address" placeholder="ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123">
                        </div>

                        <div class="form-group">
                            <label class="form-label">ì „í™”ë²ˆí˜¸</label>
                            <input type="text" class="form-input" v-model="directForm.phone" placeholder="02-1234-5678">
                        </div>

                        <div class="form-group">
                            <label class="form-label">ğŸŒ ì§€ì—­ <span class="required">*</span></label>
                            <div class="smart-region-input">
                                <input 
                                    id="region-input"
                                    type="text" 
                                    class="form-input"
                                    v-model="regionQuery"
                                    @input="searchRegions"
                                    @keydown.down.prevent="selectNextRegion"
                                    @keydown.up.prevent="selectPrevRegion"
                                    @keydown.enter.prevent="selectCurrentRegion"
                                    @focus="showRegionDropdown = true"
                                    @blur="hideRegionDropdown"
                                    placeholder="ì˜ˆ: ê°•ë‚¨, ì œì£¼, ì„œìš¸ ì¤‘êµ¬"
                                    autocomplete="off"
                                    required
                                >
                                
                                <ul 
                                    v-if="showRegionDropdown && filteredRegions.length > 0" 
                                    class="region-dropdown"
                                    @mousedown.prevent
                                >
                                    <li 
                                        v-for="(region, index) in filteredRegions" 
                                        :key="index"
                                        :class="{ active: index === selectedRegionIndex }"
                                        @mousedown="selectRegion(region)"
                                        @mouseenter="selectedRegionIndex = index"
                                    >
                                        <span class="city">{{ region.city }}</span>
                                        <span class="separator">â€º</span>
                                        <span class="district">{{ region.district }}</span>
                                    </li>
                                </ul>
                                
                                <div 
                                    v-if="showRegionDropdown && regionQuery && filteredRegions.length === 0"
                                    class="no-results"
                                >
                                    ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤
                                </div>
                                
                                <div v-if="directForm.region" class="selected-region">
                                    âœ“ {{ directForm.region }}
                                    <button type="button" @click="clearRegion" class="clear-btn">Ã—</button>
                                </div>
                            </div>
                            
                            <div class="help-text">
                                ğŸ’¡ íŒ: êµ¬/êµ° ì´ë¦„ë§Œ ì…ë ¥í•´ë„ ê²€ìƒ‰ë©ë‹ˆë‹¤ (ì˜ˆ: "ê°•ë‚¨", "ì¤‘êµ¬", "ì œì£¼")
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">í‰ì  (1-5)</label>
                                <input type="number" step="0.1" min="0" max="5" class="form-input" v-model.number="directForm.rating" placeholder="4.5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">ë¦¬ë·° ìˆ˜</label>
                                <input type="number" class="form-input" v-model.number="directForm.review_count" placeholder="150">
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #667eea; color: #667eea; font-size: 18px;">ğŸ“ ìƒì„¸ì •ë³´</h4>
                        <div class="form-group">
                            <label class="form-label">ì„¤ëª…</label>
                            <textarea class="form-input" v-model="directForm.description" rows="5" 
                                      placeholder="ë ˆìŠ¤í† ë‘ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 500ì)"></textarea>
                            <small style="color: #999; font-size: 12px;">{{ (directForm.description || '').length }} / 500ì</small>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ì¸ë„¤ì¼ URL</label>
                            <input type="text" class="form-input" v-model="directForm.thumbnail_url" placeholder="https://example.com/image.jpg">
                        </div>

                        <div class="form-group">
                            <label class="form-label">ì´ë¯¸ì§€ URL ëª©ë¡</label>
                            <div class="image-list">
                                <div class="image-item" v-for="(img, idx) in directForm.images" :key="idx">
                                    <input type="text" class="form-input" v-model="directForm.images[idx]" :placeholder="'ì´ë¯¸ì§€ ' + (idx + 1)">
                                    <button class="btn btn-secondary" @click="removeImage(idx)">ì‚­ì œ</button>
                                </div>
                                <button class="add-btn" @click="addImage" v-if="directForm.images.length < 10">â• ì´ë¯¸ì§€ ì¶”ê°€</button>
                            </div>
                            <small style="color: #999; font-size: 12px;">ìµœëŒ€ 10ê°œ</small>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #667eea; color: #667eea; font-size: 18px;">ğŸ½ï¸ ë©”ë‰´</h4>
                        <div class="form-group">
                            <label class="form-label">ë©”ë‰´ ëª©ë¡</label>
                            <div class="menu-compact-list">
                                <div class="menu-compact-header">
                                    <span style="width: 35%">ë©”ë‰´ëª…</span>
                                    <span style="width: 20%">ê°€ê²© (ì›)</span>
                                    <span style="width: 40%">ì„¤ëª…</span>
                                    <span style="width: 5%"></span>
                                </div>
                                
                                <div 
                                    class="menu-compact-row" 
                                    v-for="(menu, index) in directForm.menu_items" 
                                    :key="index"
                                >
                                    <input 
                                        v-model="menu.name" 
                                        placeholder="ê¹€ì¹˜ì°Œê°œ"
                                        style="width: 35%"
                                    >
                                    <input 
                                        v-model.number="menu.price" 
                                        type="number"
                                        placeholder="8000"
                                        style="width: 20%"
                                    >
                                    <input 
                                        v-model="menu.description" 
                                        placeholder="ë§¤ì½¤í•œ ë§›"
                                        style="width: 40%"
                                    >
                                    <button 
                                        @click="removeMenu(index)" 
                                        class="btn-remove"
                                        style="width: 5%"
                                    >
                                        Ã—
                                    </button>
                                </div>
                                
                                <button @click="addMenu" class="btn-add-compact">
                                    + ë©”ë‰´ ì¶”ê°€
                                </button>
                            </div>
                            <small v-if="!directForm.menu_items || directForm.menu_items.length === 0" style="color: #999; font-size: 12px; display: block; margin-top: 10px;">ë©”ë‰´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</small>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #667eea; color: #667eea; font-size: 18px;">ğŸ• ì˜ì—…ì‹œê°„</h4>
                        <div class="form-group">
                            <label class="form-label">ì˜ì—…ì‹œê°„ (ë™ì  ì¶”ê°€)</label>
                            <div class="business-hours-compact">
                                <div 
                                    class="hours-row" 
                                    v-for="(hour, index) in businessHoursList" 
                                    :key="index"
                                >
                                    <!-- ìš”ì¼ ì„ íƒ (18%) -->
                                    <select v-model="hour.day" style="width: 18%">
                                        <option value="">ìš”ì¼</option>
                                        <option value="monday">ì›”ìš”ì¼</option>
                                        <option value="tuesday">í™”ìš”ì¼</option>
                                        <option value="wednesday">ìˆ˜ìš”ì¼</option>
                                        <option value="thursday">ëª©ìš”ì¼</option>
                                        <option value="friday">ê¸ˆìš”ì¼</option>
                                        <option value="saturday">í† ìš”ì¼</option>
                                        <option value="sunday">ì¼ìš”ì¼</option>
                                    </select>
                                    
                                    <!-- ì‹œì‘ ì‹œê°„ (20%) -->
                                    <input 
                                        v-model="hour.open" 
                                        type="time"
                                        style="width: 20%"
                                        :disabled="hour.closed"
                                    >
                                    
                                    <!-- êµ¬ë¶„ì (5%) -->
                                    <span style="width: 5%; text-align: center; color: #6B7280;">~</span>
                                    
                                    <!-- ì¢…ë£Œ ì‹œê°„ (20%) -->
                                    <input 
                                        v-model="hour.close" 
                                        type="time"
                                        style="width: 20%"
                                        :disabled="hour.closed"
                                    >
                                    
                                    <!-- íœ´ë¬´ ì²´í¬ë°•ìŠ¤ (15%) -->
                                    <label style="width: 15%; display: flex; align-items: center; gap: 4px;">
                                        <input type="checkbox" v-model="hour.closed">
                                        <span>íœ´ë¬´</span>
                                    </label>
                                    
                                    <!-- íœ´ë¬´ ë©”ì‹œì§€ (17%) -->
                                    <input 
                                        v-if="hour.closed"
                                        v-model="hour.message" 
                                        type="text"
                                        placeholder="ëª…ì ˆ íœ´ë¬´"
                                        style="width: 17%"
                                    >
                                    <span v-else style="width: 17%"></span>
                                    
                                    <!-- ì‚­ì œ ë²„íŠ¼ (5%) -->
                                    <button 
                                        type="button"
                                        @click="removeHour(index)" 
                                        class="btn-remove" 
                                        style="width: 5%"
                                        title="ì‚­ì œ"
                                    >
                                        Ã—
                                    </button>
                                </div>
                                
                                <button 
                                    type="button"
                                    @click="addHour" 
                                    class="btn-add-compact"
                                >
                                    + ì˜ì—…ì‹œê°„ ì¶”ê°€
                                </button>
                            </div>
                            
                            <div class="help-text" style="margin-top: 10px; font-size: 12px; color: #6B7280;">
                                ğŸ’¡ íŒ: ìš”ì¼ì„ ì„ íƒí•˜ê³  ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”. íœ´ë¬´ì¼ì€ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”.
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #667eea; color: #667eea; font-size: 18px;">ğŸ”— ë§í¬ & ì‹œì„¤</h4>
                        <div class="form-group">
                            <label class="form-label">í”Œë«í¼ ë§í¬</label>
                            <div class="link-compact-list">
                                <div 
                                    class="link-row" 
                                    v-for="(link, index) in platformLinks" 
                                    :key="index"
                                >
                                    <!-- í”Œë«í¼ ì„ íƒ -->
                                    <select v-model="link.platform" style="width: 20%">
                                        <option value="">ì„ íƒ</option>
                                        <option value="google">êµ¬ê¸€</option>
                                        <option value="naver">ë„¤ì´ë²„</option>
                                        <option value="kakao">ì¹´ì¹´ì˜¤</option>
                                        <option value="instagram">ì¸ìŠ¤íƒ€ê·¸ë¨</option>
                                        <option value="facebook">í˜ì´ìŠ¤ë¶</option>
                                        <option value="other">ê¸°íƒ€ URL</option>
                                    </select>
                                    
                                    <!-- URL ì…ë ¥ -->
                                    <input 
                                        v-model="link.url" 
                                        type="url"
                                        placeholder="https://..."
                                        style="width: 50%"
                                    >
                                    
                                    <!-- Place ID (êµ¬ê¸€/ë„¤ì´ë²„ë§Œ) -->
                                    <input 
                                        v-model="link.placeId" 
                                        placeholder="Place ID"
                                        style="width: 25%"
                                        v-if="link.platform === 'google' || link.platform === 'naver'"
                                    >
                                    
                                    <!-- ì‚­ì œ -->
                                    <button @click="removeLink(index)" class="btn-remove" style="width: 5%">
                                        Ã—
                                    </button>
                                </div>
                                
                                <button @click="addLink" class="btn-add-compact">
                                    + ë§í¬ ì¶”ê°€
                                </button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">í¸ì˜ì‹œì„¤</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.parking"> ğŸ…¿ï¸ ì£¼ì°¨
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.wifi"> ğŸ“¶ WiFi
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.reservation"> ğŸ“ ì˜ˆì•½
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.delivery"> ğŸ›µ ë°°ë‹¬
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.takeout"> ğŸ“¦ í¬ì¥
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.group"> ğŸ‘¥ ë‹¨ì²´ì„
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.kids"> ğŸ‘¶ ìœ ì•„ë™ë°˜
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.wheelchair"> â™¿ íœ ì²´ì–´
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" v-model="facilities.pet"> ğŸ• ë°˜ë ¤ë™ë¬¼
                                </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #667eea; color: #667eea; font-size: 18px;">ğŸŒ ì¶”ê°€ì •ë³´</h4>
                        <div class="form-group">
                            <label class="form-label">í™ˆí˜ì´ì§€ / SNS / ê¸°íƒ€ ë§í¬</label>
                            <div class="additional-info-list">
                                <div 
                                    class="link-row" 
                                    v-for="(info, index) in additionalInfo" 
                                    :key="index"
                                >
                                    <!-- ë§í¬ íƒ€ì… ì„ íƒ -->
                                    <select v-model="info.type" style="width: 20%">
                                        <option value="">ì„ íƒ</option>
                                        <option value="homepage">ğŸ  í™ˆí˜ì´ì§€</option>
                                        <option value="blog">ğŸ“ ë¸”ë¡œê·¸</option>
                                        <option value="instagram">ğŸ“· ì¸ìŠ¤íƒ€ê·¸ë¨</option>
                                        <option value="facebook">ğŸ‘¥ í˜ì´ìŠ¤ë¶</option>
                                        <option value="youtube">ğŸ¥ ìœ íŠœë¸Œ</option>
                                        <option value="other">ğŸ”— ê¸°íƒ€</option>
                                    </select>
                                    
                                    <!-- URL ì…ë ¥ -->
                                    <input 
                                        v-model="info.url" 
                                        type="url"
                                        placeholder="https://..."
                                        style="width: 75%"
                                    >
                                    
                                    <!-- ì‚­ì œ -->
                                    <button @click="removeAdditionalInfo(index)" class="btn-remove" style="width: 5%">
                                        Ã—
                                    </button>
                                </div>
                                
                                <button @click="addAdditionalInfo" class="btn-add-compact">
                                    + ë§í¬ ì¶”ê°€
                                </button>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 10px; margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee;">
                        <button class="btn btn-secondary" @click="resetDirectForm">ì´ˆê¸°í™”</button>
                        <button class="btn btn-primary" @click="saveDirectInput" :disabled="!directForm.name || loading">
                            ğŸ’¾ ì €ì¥í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Save Modal (Vue ì•± ë‚´ë¶€ë¡œ ì´ë™) -->
        <div v-if="showSaveModal" class="modal-overlay" @click="closeSaveModal">
            <div class="modal-content" @click.stop>
                <div :class="['modal-icon', saveSuccess ? 'success' : 'error']">
                    {{ saveSuccess ? 'âœ“' : 'âœ—' }}
                </div>
                <h3>{{ saveSuccess ? 'ì €ì¥ ì™„ë£Œ' : 'ì €ì¥ ì‹¤íŒ¨' }}</h3>
                <p>{{ saveMessage }}</p>
                <button @click="closeSaveModal" class="btn btn-primary">
                    í™•ì¸
                </button>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    activeTab: 'url',
                    loading: false,
                    alert: {
                        show: false,
                        type: 'alert-success',
                        message: ''
                    },
                    urlForm: {
                        url: ''
                    },
                    urlPreview: null,
                    csvData: [],
                    isDragging: false,
                    directForm: {
                        name: '',
                        category: '',
                        price_range: '',
                        address: '',
                        phone: '',
                        region: '',
                        rating: null,
                        review_count: null,
                        description: '',
                        thumbnail_url: '',
                        images: [],
                        menu_items: [],
                        business_hours: {},
                        source: 'manual',
                        google_place_id: '',
                        naver_place_id: '',
                        google_maps_url: '',
                        naver_map_url: '',
                        source_url: ''
                    },
                    facilities: {
                        parking: false,
                        wifi: false,
                        reservation: false,
                        delivery: false,
                        takeout: false,
                        group: false,
                        kids: false,
                        wheelchair: false,
                        pet: false
                    },
                    weekDays: [
                        { label: 'ì›”ìš”ì¼', value: 'monday' },
                        { label: 'í™”ìš”ì¼', value: 'tuesday' },
                        { label: 'ìˆ˜ìš”ì¼', value: 'wednesday' },
                        { label: 'ëª©ìš”ì¼', value: 'thursday' },
                        { label: 'ê¸ˆìš”ì¼', value: 'friday' },
                        { label: 'í† ìš”ì¼', value: 'saturday' },
                        { label: 'ì¼ìš”ì¼', value: 'sunday' }
                    ],
                    allRegions: [],
                    regionQuery: '',
                    filteredRegions: [],
                    selectedRegionIndex: 0,
                    showRegionDropdown: false,
                    platformLinks: [
                        { platform: '', url: '', placeId: '' }
                    ],
                    additionalInfo: [
                        { type: '', url: '' }
                    ],
                    businessHoursList: [
                        {
                            day: '',
                            open: '10:00',
                            close: '22:00',
                            closed: false,
                            message: ''
                        }
                    ],
                    showSaveModal: false,
                    saveSuccess: false,
                    saveMessage: ''
                };
            },
            async mounted() {
                try {
                    console.log('ğŸ“¦ ì§€ì—­ ë°ì´í„° ë¡œë”© ì¤‘...');
                    const response = await fetch('/static/regions-complete.json');
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    const data = await response.json();
                    this.allRegions = data.regions;
                    
                    console.log(`âœ… ${data.total}ê°œ ì§€ì—­ ë°ì´í„° ë¡œë“œ ì™„ë£Œ`);
                    console.log(`   ë²„ì „: ${data.version}`);
                    console.log(`   ë©”ëª¨ë¦¬: ${(JSON.stringify(data).length / 1024).toFixed(1)}KB`);
                } catch (error) {
                    console.error('âŒ ì§€ì—­ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                    alert('ì§€ì—­ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                }
            },
            methods: {
                async parseURL() {
                    if (!this.urlForm.url) {
                        this.showAlert('error', 'URLì„ ì…ë ¥í•˜ì„¸ìš”.');
                        return;
                    }

                    this.loading = true;
                    try {
                        const response = await axios.post('/api/data-management/manual-input/parse-url', {
                            url: this.urlForm.url
                        });

                        if (response.data.success) {
                            this.urlPreview = response.data.preview;
                            this.showAlert('success', 'URL íŒŒì‹± ì™„ë£Œ! ì €ì¥í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.');
                        }
                    } catch (error) {
                        this.showAlert('error', error.response?.data?.detail || 'URL íŒŒì‹± ì‹¤íŒ¨');
                        this.urlPreview = null;
                    } finally {
                        this.loading = false;
                    }
                },
                async saveFromURL() {
                    if (!this.urlPreview) return;

                    this.loading = true;
                    try {
                        const response = await axios.post('/api/data-management/manual-input/direct-input', {
                            name: this.urlPreview.name,
                            address: this.urlPreview.address,
                            source: this.urlPreview.source
                        });

                        if (response.data.success) {
                            this.showAlert('success', 'ë ˆìŠ¤í† ë‘ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
                            this.urlForm.url = '';
                            this.urlPreview = null;
                        }
                    } catch (error) {
                        this.showAlert('error', error.response?.data?.detail || 'ì €ì¥ ì‹¤íŒ¨');
                    } finally {
                        this.loading = false;
                    }
                },
                handleFileSelect(event) {
                    const file = event.target.files[0];
                    if (file) {
                        this.processCSVFile(file);
                    }
                },
                handleFileDrop(event) {
                    this.isDragging = false;
                    const file = event.dataTransfer.files[0];
                    if (file && file.name.endsWith('.csv')) {
                        this.processCSVFile(file);
                    } else {
                        this.showAlert('error', 'CSV íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    }
                },
                async processCSVFile(file) {
                    this.loading = true;
                    const formData = new FormData();
                    formData.append('file', file);

                    try {
                        const response = await axios.post('/api/data-management/manual-input/upload-csv', formData, {
                            headers: { 'Content-Type': 'multipart/form-data' }
                        });

                        if (response.data.success) {
                            this.csvData = response.data.data;
                            this.showAlert('success', response.data.message);
                        }
                    } catch (error) {
                        this.showAlert('error', error.response?.data?.detail || 'CSV íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨');
                    } finally {
                        this.loading = false;
                    }
                },
                async saveBatchCSV() {
                    if (this.csvData.length === 0) return;

                    this.loading = true;
                    try {
                        const response = await axios.post('/api/data-management/manual-input/batch-create-from-csv', this.csvData);

                        if (response.data.success) {
                            this.showAlert('success', response.data.message);
                            this.csvData = [];
                            this.$refs.fileInput.value = '';
                        }
                    } catch (error) {
                        this.showAlert('error', error.response?.data?.detail || 'ì¼ê´„ ì €ì¥ ì‹¤íŒ¨');
                    } finally {
                        this.loading = false;
                    }
                },
                async saveDirectInput() {
                    if (!this.directForm.name) {
                        this.showSaveModal = true;
                        this.saveSuccess = false;
                        this.saveMessage = 'ë ˆìŠ¤í† ë‘ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.';
                        return;
                    }

                    if (this.regionError) {
                        this.showSaveModal = true;
                        this.saveSuccess = false;
                        this.saveMessage = 'ì˜¬ë°”ë¥¸ í–‰ì •êµ¬ì—­ ëª…ì¹­ì„ ì…ë ¥í•˜ì„¸ìš”.';
                        return;
                    }

                    this.loading = true;
                    try {
                        this.convertPlatformLinks();
                        const additionalLinks = this.convertAdditionalInfo();
                        
                        const business_hours = {};
                        this.businessHoursList.forEach(hour => {
                            if (hour.day) {
                                business_hours[hour.day] = {
                                    open: hour.open,
                                    close: hour.close,
                                    closed: hour.closed,
                                    message: hour.closed ? hour.message : null
                                };
                            }
                        });
                        
                        const payload = {
                            ...this.directForm,
                            business_hours,
                            facilities: this.facilities,
                            additional_info: additionalLinks
                        };

                        const response = await axios.post('/api/data-management/manual-input/direct-input', payload);

                        if (response.data.success) {
                            this.showSaveModal = true;
                            this.saveSuccess = true;
                            this.saveMessage = 'ë ˆìŠ¤í† ë‘ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!';
                            
                            setTimeout(() => {
                                window.location.href = '/dashboard/collection-results';
                            }, 2000);
                        }
                    } catch (error) {
                        this.showSaveModal = true;
                        this.saveSuccess = false;
                        this.saveMessage = error.response?.data?.detail || 'ì €ì¥ ì‹¤íŒ¨';
                    } finally {
                        this.loading = false;
                    }
                },
                resetDirectForm() {
                    this.directForm = {
                        name: '',
                        category: '',
                        price_range: '',
                        address: '',
                        phone: '',
                        region: '',
                        rating: null,
                        review_count: null,
                        description: '',
                        thumbnail_url: '',
                        images: [],
                        menu_items: [],
                        business_hours: {},
                        source: 'manual',
                        google_place_id: '',
                        naver_place_id: '',
                        google_maps_url: '',
                        naver_map_url: '',
                        source_url: ''
                    };
                    this.facilities = {
                        parking: false,
                        wifi: false,
                        reservation: false,
                        delivery: false,
                        takeout: false,
                        group: false,
                        kids: false,
                        wheelchair: false,
                        pet: false
                    };
                    this.businessHoursList = [
                        {
                            day: '',
                            open: '10:00',
                            close: '22:00',
                            closed: false,
                            message: ''
                        }
                    ];
                },
                addMenu() {
                    if (!this.directForm.menu_items) {
                        this.directForm.menu_items = [];
                    }
                    this.directForm.menu_items.push({ name: '', price: null, description: '' });
                },
                removeMenu(index) {
                    this.directForm.menu_items.splice(index, 1);
                },
                addImage() {
                    if (!this.directForm.images) {
                        this.directForm.images = [];
                    }
                    if (this.directForm.images.length < 10) {
                        this.directForm.images.push('');
                    }
                },
                removeImage(index) {
                    this.directForm.images.splice(index, 1);
                },
                addHour() {
                    this.businessHoursList.push({
                        day: '',
                        open: '10:00',
                        close: '22:00',
                        closed: false,
                        message: ''
                    });
                },
                removeHour(index) {
                    if (this.businessHoursList.length > 1) {
                        this.businessHoursList.splice(index, 1);
                    } else {
                        alert('ìµœì†Œ 1ê°œì˜ ì˜ì—…ì‹œê°„ì€ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.');
                    }
                },
                async downloadTemplate() {
                    try {
                        const response = await axios.get('/api/data-management/manual-input/csv-template');
                        if (response.data.success) {
                            const template = response.data.template;
                            const headers = response.data.headers;
                            
                            let csv = headers.join(',') + '\n';
                            template.forEach(row => {
                                csv += headers.map(h => `"${row[h]}"`).join(',') + '\n';
                            });

                            const blob = new Blob(['\uFEFF' + csv], { type: 'text/csv;charset=utf-8;' });
                            const link = document.createElement('a');
                            link.href = URL.createObjectURL(blob);
                            link.download = 'restaurant_template.csv';
                            link.click();
                        }
                    } catch (error) {
                        this.showAlert('error', 'í…œí”Œë¦¿ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨');
                    }
                },
                showAlert(type, message) {
                    this.alert = {
                        show: true,
                        type: `alert-${type}`,
                        message: message
                    };
                    setTimeout(() => {
                        this.alert.show = false;
                    }, 5000);
                },
                searchRegions() {
                    const query = this.regionQuery.toLowerCase().trim();
                    
                    if (query.length === 0) {
                        this.filteredRegions = [];
                        this.showRegionDropdown = false;
                        return;
                    }
                    
                    this.filteredRegions = this.allRegions
                        .filter(region => {
                            return region.keywords.some(keyword => 
                                keyword.includes(query)
                            );
                        })
                        .slice(0, 10);
                    
                    this.selectedRegionIndex = 0;
                    this.showRegionDropdown = true;
                    
                    console.log(`ğŸ” "${query}" ê²€ìƒ‰ â†’ ${this.filteredRegions.length}ê°œ ê²°ê³¼`);
                },
                selectNextRegion() {
                    if (this.selectedRegionIndex < this.filteredRegions.length - 1) {
                        this.selectedRegionIndex++;
                    }
                },
                selectPrevRegion() {
                    if (this.selectedRegionIndex > 0) {
                        this.selectedRegionIndex--;
                    }
                },
                selectCurrentRegion() {
                    if (this.filteredRegions.length > 0) {
                        this.selectRegion(this.filteredRegions[this.selectedRegionIndex]);
                    }
                },
                selectRegion(region) {
                    this.directForm.region = region.full;
                    this.regionQuery = region.full;
                    this.showRegionDropdown = false;
                    
                    console.log(`âœ… ì§€ì—­ ì„ íƒ: ${region.full}`);
                },
                hideRegionDropdown() {
                    setTimeout(() => {
                        this.showRegionDropdown = false;
                    }, 200);
                },
                clearRegion() {
                    this.directForm.region = '';
                    this.regionQuery = '';
                    this.filteredRegions = [];
                },
                addLink() {
                    this.platformLinks.push({
                        platform: '',
                        url: '',
                        placeId: ''
                    });
                },
                removeLink(index) {
                    this.platformLinks.splice(index, 1);
                },
                convertPlatformLinks() {
                    this.platformLinks.forEach(link => {
                        if (link.platform === 'google') {
                            this.directForm.google_maps_url = link.url;
                            this.directForm.google_place_id = link.placeId;
                        } else if (link.platform === 'naver') {
                            this.directForm.naver_map_url = link.url;
                            this.directForm.naver_place_id = link.placeId;
                        } else if (link.platform === 'other') {
                            this.directForm.source_url = link.url;
                        }
                    });
                },
                addAdditionalInfo() {
                    this.additionalInfo.push({
                        type: '',
                        url: ''
                    });
                },
                removeAdditionalInfo(index) {
                    this.additionalInfo.splice(index, 1);
                },
                convertAdditionalInfo() {
                    const additionalLinks = {};
                    this.additionalInfo.forEach(info => {
                        if (info.type && info.url) {
                            additionalLinks[info.type] = info.url;
                        }
                    });
                    return additionalLinks;
                },
                closeSaveModal() {
                    this.showSaveModal = false;
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
